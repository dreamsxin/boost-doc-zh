<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Frequently Asked Questions</title><link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../signals.html" title="Chapter&nbsp;15.&nbsp;Boost.Signals">
<link rel="prev" href="../boost/last_value_void__id550974.html" title="Class last_value&lt;void&gt;">
<link rel="next" href="s05.html" title="Design Overview"></head>
<body alink="#0000ff" bgcolor="white" link="#0000ff" text="black" vlink="#840084">
<table cellpadding="2" width="100%"><tbody><tr>
<td valign="top"><img alt="Boost C++ Libraries" src="../../../boost.png" height="86" width="277"></td>
<td align="center"><a href="../../../index.html">Home</a></td>
<td align="center"><a href="../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../more/index.htm">More</a></td>
</tr></tbody></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../boost/last_value_void__id550974.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../signals.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="s05.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both;">
<a name="id3478135"></a>Frequently Asked Questions 常见问题</h2></div></div></div>
<div class="qandaset">
<dl>
<dt>1. <a href="s04.html#id3478147">Don't noncopyable signal semantics mean that a class
        with a signal member will be noncopyable as well?</a></dt><dt>1. <a href="s04.html#id3478147">signal 的不可复制语义并不是意味着带有 signal 成员的类也是不可复制的？</a>
</dt>
<dt>2. <a href="s04.html#id3478170">Is Boost.Signals thread-safe?</a></dt><dt>2. <a href="s04.html#id3478170">Boost.Signals 是线程安全的吗？</a>
</dt>
<dt>3. <a href="s04.html#id3478190">How do I get Boost.Signals to work with Qt?</a></dt><dt>3. <a href="s04.html#id3478190">我如何让 Boost.Signals 和 Qt 一起使用？</a>
</dt>
</dl>
<table summary="Q and A Set" border="0">
<col align="left" width="1%">
<tbody>
<tr class="question">
<td align="left" valign="top">
<a name="id3478147"></a><a name="id3478149"></a><p><b>1.</b></p>
</td>
<td align="left" valign="top"><p>Don't noncopyable signal semantics mean that a class
        with a signal member will be noncopyable as well?</p><p>signal 的不可复制语义并不是意味着带有 signal 成员的类也是不可复制的？</p></td>
</tr>
<tr class="answer">
<td align="left" valign="top"></td>
<td align="left" valign="top"><p>No. The compiler will not be able to generate a copy
        constructor or copy assignment operator for your class if it
        has a signal as a member, but you are free to write your own
        copy constructor and/or copy assignment operator. Just don't
        try to copy the signal.</p><p>对。如果你的类有一个 signal 成员，编译器就不能为你的类生成一个复制构造函数或复制赋值操作符，但是你可以自己编写复制构造函数和/或赋值操作符。只是不要试图复制那个 signal。</p></td>
</tr>
<tr class="question">
<td align="left" valign="top">
<a name="id3478170"></a><a name="id3478172"></a><p><b>2.</b></p>
</td>
<td align="left" valign="top"><p>Is Boost.Signals thread-safe?</p><p>Boost.Signals 是线程安全的吗？</p></td>
</tr>
<tr class="answer">
<td align="left" valign="top"></td>
<td align="left" valign="top"><p>No. Using Boost.Signals in a multithreaded concept is
        very dangerous, and it is very likely that the results will be
        less than satisfying. Boost.Signals will support thread safety
        in the future.</p><p>不是。在多线程中使用 Boost.Signals 是很危险的，这个结果不能满足需要。Boost.Signals 在未来将会支持线程安全。</p></td>
</tr>
<tr class="question">
<td align="left" valign="top">
<a name="id3478190"></a><a name="id3478193"></a><p><b>3.</b></p>
</td>
<td align="left" valign="top"><p>How do I get Boost.Signals to work with Qt?</p><p>我如何让 Boost.Signals 与 Qt 一起使用呢？</p></td>
</tr>
<tr class="answer">
<td align="left" valign="top"></td>
<td align="left" valign="top">
<p>When building with Qt, the Moc keywords
        <code class="computeroutput">signals</code> and <code class="computeroutput">slots</code> are defined using
        preprocessor macros, causing programs using Boost.Signals and
        Qt together to fail to compile.</p><p>与 Qt 一起构建时，Moc 关键字
        <code class="computeroutput">signals</code> 和 <code class="computeroutput">slots</code> 采用预处理器宏来定义，这使得同时使用 Boost.Signals 和
        Qt 的程序无法通过编译。</p>
<p><span class="emphasis"><em>For Qt 4.1 and later</em></span>, This behavior
        can be turned off in Qt on a per-project or per-file basis
        with the <code class="computeroutput">no_keywords</code> option.  This works with
        out-of-the-box builds of Boost and Qt. You do not need to
        re-configure, re-build, or duplicate existing libraries. For a
        project where you want to use both Boost.Signals and Qt
        Signals and Slots, the relevant part of your .pro file might
        look like this:<br><span class="emphasis"><em>对于 Qt 4.1 及后续版本</em></span>，这一行为可以在 Qt 中关闭，方法是在一个 per-project 或 per-file 基础上使用 <code class="computeroutput">no_keywords</code> 选项。这可以用于缺省构建的 Boost 和 Qt。你不需要重新配置、重新构建或复制已有的库。对于你想要同时使用 Boost.Signals 和 Qt
        Signals 以及 Slots 的项目，你的 .pro 文件的相应部分如下：</p>
<pre class="programlisting">CONFIG      += no_keywords # so Qt won't #define any non-all-caps `keywords'<br>INCLUDEPATH += . /usr/local/include/boost-1_33_1/<br>macx:LIBS   += /usr/local/lib/libboost_signals-1_33_1.a  # ...your exact paths may vary<br></pre>
<p>Now you can mix Boost.Signals and Qt Signals and Slots
        in the same files, and even within the same class or function.
        You will have to use the upper-case versions of Qt macros in
        your own code.  See the article <a href="http://scottcollins.net/articles/a-deeper-look-at-signals-and-slots.html" target="_top">A
        Deeper Look at Signals and Slots</a> [off-site] for more
        complete examples and a survey of the strengths of the two
        systems.<br>现在你可以在同一个文件中混用 Boost.Signals 和 Qt Signals 及 Slots
        了，即使是在同一个类或函数中。你必须在你的代码中使用大写字母的 Qt 宏。更多的完整例子和共用这两个系统的纵览，请见论文 <a href="http://scottcollins.net/articles/a-deeper-look-at-signals-and-slots.html" target="_top">A
        Deeper Look at Signals and Slots</a> [off-site]。</p>
<p><span class="emphasis"><em>Older versions of Qt</em></span> did not
        provide a reliable mechanism for avoiding these unfriendly,
        all lower-case `keyword'-like macros.  Although this is a
        problem with Qt and not Boost.Signals, a user can use the two
        systems together with a little extra effort. There are two
        ways to do this:<br><span class="emphasis"><em>旧版本的 Qt</em></span> 不提供避免这些不便的方法，所有'关键字'样式的宏都是小写的。虽然这是 Qt 的问题而不是 Boost.Signals 的，用户还是可以通过一些小的努力来一起使用这两个系统。有两种方法可以做到这一点：</p>
<p>The first way involves defining
        the <code class="computeroutput">BOOST_SIGNALS_NAMESPACE</code> 
        macro to some other identifier (e.g., <code class="computeroutput">signalslib</code>)
        when building and using the Boost.Signals library. Then the
        namespace of the Boost.Signals library will be
        <code class="computeroutput">boost::BOOST_SIGNALS_NAMESPACE</code> instead of
        <code class="computeroutput">boost::signals</code>. To retain the original namespace
        name in translation units that do not interact with Qt, you
        can use a namespace alias:<br>第一种方法是在构建和使用 Boost.Signals 库时将 <code class="computeroutput">BOOST_SIGNALS_NAMESPACE</code> 
        宏定义为其它标识符(如 <code class="computeroutput">signalslib</code>)。这样 Boost.Signals 库的名字空间就是
        <code class="computeroutput">boost::BOOST_SIGNALS_NAMESPACE</code> 而不是 <code class="computeroutput">boost::signals</code>。要在没有与 Qt 共用的编译单元中保留原有名字空间，你可以使用名字空间别名：</p>
<pre class="programlisting">  namespace boost {<br>    namespace signals = BOOST_SIGNALS_NAMESPACE;<br>  }<br></pre>
<p>The second way, provided by Frank Hess and improved by
        Niels Dekker, involves 
        creating a header <code class="computeroutput">signalslib.hpp</code> that contains
          the following code:<br>第二种方法是由 Frank Hess 提供并由
        Niels Dekker 改进的，创建一个头文件 <code class="computeroutput">signalslib.hpp</code>，包含以下代码：</p>
<pre class="programlisting">#ifndef SIGNALSLIB_HPP_INCLUDED<br>#define SIGNALSLIB_HPP_INCLUDED <br><br>#if defined(signals) &amp;&amp; defined(QOBJECTDEFS_H) &amp;&amp; \<br>  !defined(QT_MOC_CPP)<br>#  undef signals<br>#  define signals signals<br>#endif<br><br>#include &lt;boost/signal.hpp&gt;<br>namespace boost<br>{<br>  namespace signalslib = signals;<br>}<br><br>#if defined(signals) &amp;&amp; defined(QOBJECTDEFS_H) &amp;&amp; \<br>  !defined(QT_MOC_CPP)<br>#  undef signals<br>// Restore the macro definition of "signals", as it was<br>// defined by Qt's &lt;qobjectdefs.h&gt;.<br>#  define signals protected<br>#endif<br><br>#endif</pre>
<p>Use this header to include the Boost library, then refer
          to it in the namespace <code class="computeroutput">boost::signalslib</code>. This
          option is often
        preferable to the first option because it can be used without
        recompiling the Signals library binary.<br>使用这个头文件来包含 Boost 库，然后在名字空间 <code class="computeroutput">boost::signalslib</code> 中引用它。这一方法通常优于第一种方法，因为它无需重新编译 Signals 库的二进制代码就可以使用。 </p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tbody><tr>
<td align="left"><p><small>Last revised: May 21, 2008 at 16:57:05 -0400</small></p></td>
<td align="right"><div class="copyright-footer">Copyright © 2001-2004 Douglas Gregor<p>Use, modification and distribution is subject to the Boost
    Software License, Version 1.0. (See accompanying file
    <code class="filename">LICENSE_1_0.txt</code> or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)</p>
</div></td>
</tr></tbody></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../boost/last_value_void__id550974.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../signals.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="s05.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body></html>