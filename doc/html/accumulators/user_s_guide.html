<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>User's Guide</title><link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../accumulators.html" title="Chapter&nbsp;1.&nbsp;Boost.Accumulators">
<link rel="prev" href="../accumulators.html" title="Chapter&nbsp;1.&nbsp;Boost.Accumulators">
<link rel="next" href="acknowledgements.html" title="Acknowledgements"></head>
<body alink="#0000ff" bgcolor="white" link="#0000ff" text="black" vlink="#840084">
<table cellpadding="2" width="100%"><tbody><tr>
<td valign="top"><img alt="Boost C++ Libraries" src="../../../boost.png" height="86" width="277"></td>
<td align="center"><a href="../../../index.html">Home</a></td>
<td align="center"><a href="../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../more/index.htm">More</a></td>
</tr></tbody></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../accumulators.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../accumulators.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="acknowledgements.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both;">
<a name="accumulators.user_s_guide"></a><a class="link" href="user_s_guide.html" title="User's Guide">User's Guide 用户指南</a>
</h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework">The
      Accumulators Framework 累加器框架</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library">The
      Statistical Accumulators Library 统计累加器库</a></span></dt>
</dl></div>
<p>
      This section describes how to use the Boost.Accumulators framework to create
      new accumulators and how to use the existing statistical accumulators to perform
      incremental statistical computation. For detailed information regarding specific
      components in Boost.Accumulators, check the <a class="link" href="reference.html#accumulators_framework_reference" title="Accumulators Framework Reference">Reference</a>
      section.<br>本节描述了如何使用 Boost.Accumulators 框架来创建一个新的累加器，以及如何使用已有的统计累加器来执行增量统计计算。关于 Boost.Accumulators 中的特定组件的详细信息，请查看 <a class="link" href="reference.html#accumulators_framework_reference" title="Accumulators Framework Reference">参考</a> 一节。
    </p>
<a name="accumulators.user_s_guide.hello__world_"></a><h3>
<a name="id2554337"></a>
      <a class="link" href="user_s_guide.html#accumulators.user_s_guide.hello__world_">Hello, World!</a>
    </h3>
<p>
      Below is a complete example of how to use the Accumulators Framework and the
      Statistical Accumulators to perform an incremental statistical calculation.
      It calculates the mean and 2nd moment of a sequence of doubles.<br>以下是一个关于如何使用累加器框架和统计累加器来执行增量统计计算的完整例子。它计算一组 double 的平均值和二次矩。
    </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">accumulators</span><span class="special">/</span><span class="identifier">accumulators</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">accumulators</span><span class="special">/</span><span class="identifier">statistics</span><span class="special">/</span><span class="identifier">stats</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">accumulators</span><span class="special">/</span><span class="identifier">statistics</span><span class="special">/</span><span class="identifier">mean</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">accumulators</span><span class="special">/</span><span class="identifier">statistics</span><span class="special">/</span><span class="identifier">moment</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">accumulators</span><span class="special">;</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span>
<span class="special">{</span>
    <span class="comment">// Define an accumulator set for calculating the mean and the<br></span>    <span class="comment">// 2nd moment ...<br>    // 为计算平均值和二次矩定义一个累加器集 ...<br></span>    <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

    <span class="comment">// push in some data ...<br>    // 压入一些数据 ...<br></span>    <span class="identifier">acc</span><span class="special">(</span><span class="number">1.2</span><span class="special">);</span>
    <span class="identifier">acc</span><span class="special">(</span><span class="number">2.3</span><span class="special">);</span>
    <span class="identifier">acc</span><span class="special">(</span><span class="number">3.4</span><span class="special">);</span>
    <span class="identifier">acc</span><span class="special">(</span><span class="number">4.5</span><span class="special">);</span>

    <span class="comment">// Display the results ...<br>    // 显示结果 ...<br></span>    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Mean:   "</span> <span class="special">&lt;&lt;</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Moment: "</span> <span class="special">&lt;&lt;</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
      This program displays the following:<br>该程序输出如下：
    </p>
<pre class="programlisting">Mean:   2.85<br>Moment: 9.635<br></pre>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework" title="The Accumulators Framework">The
      Accumulators Framework 累加器框架</a>
</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.using___accumulator_set___">Using
        <code class="literal">accumulator_set&lt;&gt; 使用</code></a></span><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.using___accumulator_set___"><span class="section"></span></a><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.using___accumulator_set___">
        <code class="literal">accumulator_set&lt;&gt;</code></a></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extracting_results">Extracting
        Results 获取结果</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.passing_optional_parameters">Passing
        Optional Parameters 传递可选参数</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.weighted_samples">Weighted
        Samples 加权取样</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.numeric_operators_sub_library">Numeric
        Operators Sub-Library 数字操作符子库</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework">Extending
        the Accumulators Framework 扩展累加器框架</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.concepts">Concepts 概念</a></span></dt>
</dl></div>
<p>
        The Accumulators Framework is framework for performing incremental calculations.
        Usage of the framework follows the following pattern:<br>累加器框架是用于执行增量计算的框架。该框架的使用遵循以下模式：
      </p>
<div class="itemizedlist"><ul type="disc">
<li>
          Users build a computational object, called an <span class="emphasis"><em><code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code></em></span>,
          by selecting the computations in which they are interested, or authoring
          their own computational primitives which fit within the framework.<br>用户通过选择他们感兴趣的计算方法来构建一个计算对象，称为 <span class="emphasis"><em><code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code></em></span>，或者创造他们自己的符合该框架的计算方法。
        </li>
<li>
          Users push data into the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          object one sample at a time.<br>用户将数据压入 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 对象，每次一个数据样本。
        </li>
<li>
          The <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          computes the requested quantities in the most efficient method possible,
          resolving dependencies between requested calculations, possibly cacheing
          intermediate results.<br> <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 以尽可能高效的方法来计算被请求的数量，解决各种计算方法间的依赖性，可能会对中间结果进行缓存。
        </li>
</ul></div>
<p>
        The Accumulators Framework defines the utilities needed for defining primitive
        computational elements, called <span class="emphasis"><em>accumulators</em></span>. It also
        provides the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
        type, described above.<br>累加器框架定义了一些工具，它们是定义基本计算元素所需要的，被称为 <span class="emphasis"><em>accumulators累加器</em></span>。它还提供了前述的 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
        类型。
      </p>
<a name="accumulators.user_s_guide.the_accumulators_framework.terminology"></a><h3>
<a name="id2603670"></a>
        <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.terminology">Terminology 术语</a>
      </h3>
<p>
        The following terms are used in the rest of the documentation.<br>以下术语将在本文档中使用。
      </p>
<a name="sample_type"></a><a name="weight_type"></a><div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Sample 样本</span></dt>
<dd><p>
            A datum that is pushed into an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>.
            The type of the sample is the <span class="emphasis"><em>sample type</em></span>.<br>被压入 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 的数据。样本的类型为 <span class="emphasis"><em>sample type样本类型</em></span>。</p></dd>
<dt><span class="term">Weight 权重</span></dt>
<dd><p>
            An optional scalar value passed along with the sample specifying the
            weight of the sample. Conceptually, each sample is multiplied with its
            weight. The type of the weight is the <span class="emphasis"><em>weight type</em></span>.<br>与样本一起传递的一个可选的比例值，用于指定该样本的权重。概念上，每个样本要与其权重相乘。权重的类型为 <span class="emphasis"><em>weight type权重类型</em></span>。</p></dd>
<dt><span class="term">Feature 特征</span></dt>
<dd><p>
            An abstract primitive computational entity. When defining an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>, users specify the
            features in which they are interested, and the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            figures out which <span class="emphasis"><em>accumulators</em></span> would best provide
            those features. Features may depend on other features. If they do, the
            accumulator set figures out which accumulators to add to satisfy the
            dependencies.<br>一个抽象的基本计算实体。在定义一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 时，用户指定他们感兴趣的特征，然后 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            确定哪些<span class="emphasis"><em>累加器</em></span>最适合提供这些特征。一个特征可以依赖于其它特征。如果它们有依赖关系，累加器集负责决定加入哪些累加器以满足依赖关系。
          </p></dd>
<dt><span class="term">Accumulator 累加器</span></dt>
<dd><p>
            A concrete primitive computational entity. An accumulator is a concrete
            implementation of a feature. It satisfies exactly one abstract feature.
            Several different accumulators may provide the same feature, but may
            represent different implementation strategies.<br>一个具体的计算实体。累加器是特征的具体实现。它精确满足某个抽象特征。多个不同的累加器可以提供相同的特征，但可能代表不同的实现策略。</p></dd>
<dt><span class="term">Accumulator Set 累加器集</span></dt>
<dd><p>
            A collection of accumulators. An accumulator set is specified with a
            sample type and a list of features. The accumulator set uses this information
            to generate an ordered set of accumulators depending on the feature dependency
            graph. An accumulator set accepts samples one datum at a time, propogating
            them to each accumulator in order. At any point, results can be extracted
            from the accumulator set.<br>一组累加器。累加器集被指定了一个样本类型和一组特征。累加器集使用这些信息并根据特征依赖关系图来生成累加器的一个有序集合。累加器集每次接受一个数据样本，并将它们按顺序传播给每个累加器。任何时间点都可以从累加器集获取相应结果。</p></dd>
<dt><span class="term">Extractor 提取器</span></dt>
<dd><p>
            A function or function object that can be used to extract a result from
            an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>.<br>一个函数或函数对象，可用于从一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 取出结果。</p></dd>
</dl>
</div>
<a name="accumulators.user_s_guide.the_accumulators_framework.overview"></a><h3>
<a name="id2603860"></a>
        <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.overview">Overview 概览</a>
      </h3>
<p>
        Here is a list of the important types and functions in the Accumulator Framework
        and a brief description of each.<br>以下是在累加器框架中最重要的类型和函数，以及它们各自的说明。
      </p>
<div class="table">
<a name="id2603878"></a><p class="title"><b>Table&nbsp;1.1.&nbsp;Accumulators Toolbox<br>表&nbsp;1.1. 累加器工具盒</b></p>
<div class="table-contents"><table class="table" summary="Accumulators Toolbox">
<colgroup><col><col></colgroup>
<thead><tr>
<th>
            <p>
              Tool 工具
            </p>
            </th>
<th>
            <p>
              Description 说明
            </p>
            </th>
</tr></thead>
<tbody>
<tr>
<td>
            <p>
              <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            </p>
            </td>
<td>
            <p>
              This is the most important type in the Accumulators Framework. It is
              a collection of accumulators. A datum pushed into an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
              is forwarded to each accumulator, in an order determined by the dependency
              relationships between the accumulators. Computational results can be
              extracted from an accumulator at any time.</p><p>这是累加器框架中最重要的类型。它是一组累加器。一个数据被压入一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
              后将被按照由各累加器间的依赖关系所决定的顺序前转至每个累加器。计算的结果可以在任何时候从累加器上取出。
            </p>
            </td>
</tr>
<tr>
<td>
            <p>
              <code class="computeroutput"><a class="link" href="../boost/accumulators/depends_on.html" title="Struct template depends_on">depends_on&lt;&gt;</a></code>
            </p>
            </td>
<td>
            <p>
              Used to specify which other features a feature depends on.</p><p>用于指定一个特征所依赖的其它特征。
            </p>
            </td>
</tr>
<tr>
<td>
            <p>
              <code class="computeroutput"><a class="link" href="../boost/accumulators/feature_of.html" title="Struct template feature_of">feature_of&lt;&gt;</a></code>
            </p>
            </td>
<td>
            <p>
              Trait used to tell the Accumulators Framework that, for the purpose
              of feature-based dependency resolution, one feature should be treated
              the same as another.</p><p>一个 Trait，用于告诉累加器框架一个特征与其它某个特征具有相同的处理结果，其目的是为了基于特征的依赖性决议。
            </p>
            </td>
</tr>
<tr>
<td>
            <p>
              <code class="computeroutput"><a class="link" href="../boost/accumulators/as_feature.html" title="Struct template as_feature">as_feature&lt;&gt;</a></code>
            </p>
            </td>
<td>
            <p>
              Used to create an alias for a feature. For example, if there are two
              features, fast_X and accurate_X, they can be mapped to X(fast) and
              X(accurate) with <code class="computeroutput"><a class="link" href="../boost/accumulators/as_feature.html" title="Struct template as_feature">as_feature&lt;&gt;</a></code>.
              This is just syntactic sugar.</p><p>用于创建一个特征的别名。例如，如果有两个特征 fast_X 和 accurate_X，它们可以通过 <code class="computeroutput"><a class="link" href="../boost/accumulators/as_feature.html" title="Struct template as_feature">as_feature&lt;&gt;</a></code> 被映射到 X(fast) 和
              X(accurate)。这只是一个语法糖。
            </p>
            </td>
</tr>
<tr>
<td>
            <p>
              <code class="computeroutput"><a class="link" href="../boost/accumulators/features.html" title="Struct template features">features&lt;&gt;</a></code>
            </p>
            </td>
<td>
            <p>
              An <a href="../../../libs/mpl/index.html" target="_top">MPL</a> sequence. We
              can use <code class="computeroutput"><a class="link" href="../boost/accumulators/features.html" title="Struct template features">features&lt;&gt;</a></code>
              as the second template parameter when declaring an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>.</p><p>一个 <a href="../../../libs/mpl/index.html" target="_top">MPL</a> 序列。我们可以在声明 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 时将 <code class="computeroutput"><a class="link" href="../boost/accumulators/features.html" title="Struct template features">features&lt;&gt;</a></code>
              用作第二个模板参数。
            </p>
            </td>
</tr>
<tr>
<td>
            <p>
              <code class="computeroutput">external&lt;&gt;</code>
            </p>
            </td>
<td>
            <p>
              Used when declaring an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>.
              If the weight type is specified with <code class="computeroutput">external&lt;&gt;</code>,
              then the weight accumulators are assumed to reside in a separate accumulator
              set which will be passed in with a named parameter.</p><p>在声明 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 时使用。如果权重类型是通过 <code class="computeroutput">external&lt;&gt;</code> 指定的，则权重累加器被假定位于一个独立的累加器集，它将以一个命名参数的方式传递。
            </p>
            </td>
</tr>
<tr>
<td>
            <p>
              <code class="computeroutput">extractor&lt;&gt;</code>
            </p>
            </td>
<td>
            <p>
              A class template useful for creating an extractor function object.
              It is parameterized on a feature, and it has member functions for extracting
              from an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
              the result corresponding to that feature.</p><p>一个类模板，用于创建一个提取器函数对象。它按特征进行参数化，它有一些成员函数，从 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
              获取与特征相对应的结果。
            </p>
            </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.using___accumulator_set___"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.using___accumulator_set___" title="Using accumulator_set&lt;&gt;">Using
        <code class="literal">accumulator_set&lt;&gt;</code> 使用 <code class="literal">accumulator_set&lt;&gt;</code></a></h4></div></div></div>
<p>
          Our tour of the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          class template begins with the forward declaration:<br>我们的 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          类模板之旅从这个前向声明开始：
        </p>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">Sample</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">Features</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">Weight</span> <span class="special">=</span> <span class="keyword">void</span> <span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">accumulator_set</span><span class="special">;</span>
</pre>
<p>
          The template parameters have the following meaning:<br>模板参数具有以下意义：
        </p>
<div class="variablelist">

<dl>
<dt><span class="term"><code class="computeroutput"><span class="identifier">Sample</span></code></span></dt>
<dd><p>
              The type of the data that will be accumulated.<br>将被累计的数据的类型。
            </p></dd>
<dt><span class="term"><code class="computeroutput"><span class="identifier">Features</span></code></span></dt>
<dd><p>
              An <a href="../../../libs/mpl/index.html" target="_top">MPL</a> sequence of features
              to be calculated.<br>要计算的多个特征的 <a href="../../../libs/mpl/index.html" target="_top">MPL</a> 序列。
            </p></dd>
<dt><span class="term"><code class="computeroutput"><span class="identifier">Weight</span></code></span></dt>
<dd><p>
              The type of the (optional) weight paramter.<br>(可选的)权重参数的类型。</p></dd>
</dl>
</div>
<p>
          For example, the following line declares an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          that will accept a sequence of doubles one at a time and calculate the
          min and mean:<br>例如，以下一行代码声明了一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>，它将一次一个地接受一组 double，并计算最小值和平均值：
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">min</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
</pre>
<p>
          Notice that we use the <code class="computeroutput"><a class="link" href="../boost/accumulators/features.html" title="Struct template features">features&lt;&gt;</a></code>
          template to specify a list of features to be calculated. <code class="computeroutput"><a class="link" href="../boost/accumulators/features.html" title="Struct template features">features&lt;&gt;</a></code>
          is an MPL sequence of features.<br>注意，我们使用了 <code class="computeroutput"><a class="link" href="../boost/accumulators/features.html" title="Struct template features">features&lt;&gt;</a></code>
          模板来指定一个要计算的特征列表。<code class="computeroutput"><a class="link" href="../boost/accumulators/features.html" title="Struct template features">features&lt;&gt;</a></code>
          是多个特征组成的一个 MPL 序列。
        </p>
<div class="note"><table summary="Note" border="0">
<tbody><tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../doc/html/images/note.png"></td>
<th align="left">Note 说明</th>
</tr>
<tr><td align="left" valign="top"><p>
            <code class="computeroutput"><a class="link" href="../boost/accumulators/features.html" title="Struct template features">features&lt;&gt;</a></code> 是 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code> 一个同义字。事实上，如果愿意，我们可以使用 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code> 或任何 MPL 序列，意思是一样的。
          </p></td></tr>
</tbody></table></div>
<p>
          Once we have defined an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>,
          we can then push data into it, and it will calculate the quantities you
          requested, as shown below.<br>一旦我们定义了一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>，我们就可以将数据压进去给它，它就会对你所需要的数量进行计算，如下所示：
        </p>
<pre class="programlisting"><span class="comment">// push some data into the accumulator_set ...<br>// 压入一些数据到</span><span class="comment"> accumulator_set ...</span><span class="comment"> <br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">1.2</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">2.3</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">3.4</span><span class="special">);</span>
</pre>
<p>
          Since <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          defines its accumulate function to be the function call operator, we might
          be tempted to use an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          as a UnaryFunction to a standard algorithm such as <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span></code>.
          That's fine as long as we keep in mind that the standard algorithms take
          UnaryFunction objects by value, which involves making a copy of the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> object. Consider the
          following:<br>因为 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 将它的累加器函数定义为函数调用操作符，所以我们可以将一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          作为一个 UnaryFunction 用于标准算法，如 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span></code>。只要我们牢记标准算法是以传值方式接受
          UnaryFunction 对象的就可以了，即会复制一份 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 对象。考虑以下代码：
        </p>
<pre class="programlisting"><span class="comment">// The data for which we wish to calculate statistical properties:<br>// 我们想要计算统计特征的数据：<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">data</span><span class="special">(</span> <span class="comment">/* stuff */</span> <span class="special">);</span>

<span class="comment">// The accumulator set which will calculate the properties for us:    <br>// 为我们计算统计特征的累加器集：<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">min</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="comment">// Use std::for_each to accumulate the statistical properties:<br>// 使用 std::for_each 来累计相关统计特征：<br></span><span class="identifier">acc</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> <span class="identifier">data</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">data</span><span class="special">.</span><span class="identifier">end</span><span class="special">(),</span> <span class="identifier">acc</span> <span class="special">);</span>
</pre>
<p>
          Notice how we must assign the return value of <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span></code>
          back to the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>.
          This works, but some accumulators are not cheap to copy. For example, the
          <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code>
          and <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          accumulators must store a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code>, so copying these accumulators
          involves a dynamic allocation. We might be better off in this case passing
          the accumulator by reference, with the help of <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">bind</span><span class="special">()</span></code> and <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">ref</span><span class="special">()</span></code>. See below:<br>请留意，我们必须将 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span></code>
          的返回值赋回给 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>。这样是可以的，但是有些累加器在复制时代价并不低。例如，累加器
          <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> 和 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          必须保存一个 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code>，所以复制这些累加器将包含一次动态内存分配。在这种情况下，以引用方式传递累加器也许更好，这时可以使用 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">bind</span><span class="special">()</span></code> 和 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">ref</span><span class="special">()</span></code>。如下：
        </p>
<pre class="programlisting"><span class="comment">// The data for which we wish to calculate statistical properties:<br>// 我们想要计算统计特征的数据：<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">data</span><span class="special">(</span> <span class="comment">/* stuff */</span> <span class="special">);</span>

<span class="comment">// The accumulator set which will calculate the properties for us:<br>// 为我们计算统计特征的累加器集：<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">(</span> <br>    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="number">4</span> <span class="special">);</span>

<span class="comment">// Use std::for_each to accumulate the statistical properties:<br>// 使用 std::for_each 来累计相关统计特征：<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> <span class="identifier">data</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">data</span><span class="special">.</span><span class="identifier">end</span><span class="special">(),</span> <span class="identifier">bind</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;(</span> <span class="identifier">ref</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="identifier">_1</span> <span class="special">)</span> <span class="special">);</span>
</pre>
<p>
          Notice now that we don't care about the return value of <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">()</span></code> anymore because <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">()</span></code> is modifying <code class="computeroutput"><span class="identifier">acc</span></code>
          directly.<br>现在请留意，我们不再关心 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">()</span></code> 的返回值了，因为 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">()</span></code> 可以直接修改 <code class="computeroutput"><span class="identifier">acc</span></code>
          了。
        </p>
<div class="note"><table summary="Note" border="0">
<tbody><tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../doc/html/images/note.png"></td>
<th align="left">Note 说明</th>
</tr>
<tr><td align="left" valign="top"><p>
            To use <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">bind</span><span class="special">()</span></code>
            and <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">ref</span><span class="special">()</span></code>,
            you must <code class="computeroutput"><span class="preprocessor">#include</span></code>
            <code class="literal">&lt;boost/bind.hpp&gt;</code> and <code class="literal">&lt;boost/ref.hpp&gt;</code></p><p>要使用 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">bind</span><span class="special">()</span></code> 和 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">ref</span><span class="special">()</span></code>，你必须 <code class="computeroutput"><span class="preprocessor">#include</span></code>
            <code class="literal">&lt;boost/bind.hpp&gt;</code> and <code class="literal">&lt;boost/ref.hpp&gt;</code>
          </p></td></tr>
</tbody></table></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.extracting_results"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extracting_results" title="Extracting Results">Extracting
        Results 取出结果</a>
</h4></div></div></div>
<p>
          Once we have declared an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          and pushed data into it, we need to be able to extract results from it.
          For each feature we can add to an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>,
          there is a corresponding extractor for fetching its result. Usually, the
          extractor has the same name as the feature, but in a different namespace.
          For example, if we accumulate the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">min</span></code>
          and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">max</span></code> features, we can extract the results
          with the <code class="computeroutput"><span class="identifier">min</span></code> and <code class="computeroutput"><span class="identifier">max</span></code> extractors, as follows:<br>一旦我们声明了一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          并且向它压入数据，我们就必须可以从它获取结果。对于每一个我们可以加入到 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 中的特征，都有一个对应的提取器来获取结果。通常，该提取器具有与特征相同的名字，但是是在另一个名字空间中。例如，如果我们要累计 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">min</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">max</span></code> 特征，则可以用 <code class="computeroutput"><span class="identifier">min</span></code> 和 <code class="computeroutput"><span class="identifier">max</span></code> 提取器获取结果，如下：
        </p>
<pre class="programlisting"><span class="comment">// Calculate the minimum and maximum for a sequence of integers.<br>// 计算一组整数的最小值和最大值<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">min</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">max</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
<span class="identifier">acc</span><span class="special">(</span> <span class="number">2</span> <span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span> <span class="special">-</span><span class="number">1</span> <span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span> <span class="number">1</span> <span class="special">);</span>

<span class="comment">// This displays "(-1, 2)"<br>// 将显示 "(-1, 2)"<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="char">'('</span> <span class="special">&lt;&lt;</span> <span class="identifier">min</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">", "</span> <span class="special">&lt;&lt;</span> <span class="identifier">max</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">")\n"</span><span class="special">;</span>
</pre>
<p>
          The extractors are all declared in the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">accumulators</span><span class="special">::</span><span class="identifier">extract</span></code>
          namespace, but they are brought into the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">accumulators</span></code>
          namespace with a <code class="computeroutput"><span class="keyword">using</span></code> declaration.<br>提取器全都在名字空间 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">accumulators</span><span class="special">::</span><span class="identifier">extract</span></code>
          中声明，不过可以通过一个 <code class="computeroutput"><span class="keyword">using</span></code> 声明将它们注入 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">accumulators</span></code>
          名字空间。
        </p>
<div class="tip"><table summary="Tip" border="0">
<tbody><tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../../../doc/html/images/tip.png"></td>
<th align="left">Tip 提示</th>
</tr>
<tr><td align="left" valign="top"><p>
            On the Windows platform, <code class="computeroutput"><span class="identifier">min</span></code>
            and <code class="computeroutput"><span class="identifier">max</span></code> are preprocessor
            macros defined in <code class="literal">WinDef.h</code>. To use the <code class="computeroutput"><span class="identifier">min</span></code> and <code class="computeroutput"><span class="identifier">max</span></code>
            extractors, you should either compile with <code class="computeroutput"><span class="identifier">NOMINMAX</span></code>
            defined, or you should invoke the extractors like: <code class="computeroutput"><span class="special">(</span><span class="identifier">min</span><span class="special">)(</span> <span class="identifier">acc</span> <span class="special">)</span></code>
            and <code class="computeroutput"><span class="special">(</span><span class="identifier">max</span><span class="special">)(</span> <span class="identifier">acc</span> <span class="special">)</span></code>. The parentheses keep the macro from
            being invoked.</p><p>在 Windows 平台上，<code class="computeroutput"><span class="identifier">min</span></code> 和 <code class="computeroutput"><span class="identifier">max</span></code> 是在 <code class="literal">WinDef.h</code> 中定义的预处理器。要使用 <code class="computeroutput"><span class="identifier">min</span></code> 和 <code class="computeroutput"><span class="identifier">max</span></code>
            提取器，你应该要么在编译时定义 <code class="computeroutput"><span class="identifier">NOMINMAX，要么象这样来调用提取器：</span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">min</span><span class="special">)(</span> <span class="identifier">acc</span> <span class="special">)</span></code> 和 <code class="computeroutput"><span class="special">(</span><span class="identifier">max</span><span class="special">)(</span> <span class="identifier">acc</span> <span class="special">)</span></code>。其中的括号将阻止宏调用。
          </p></td></tr>
</tbody></table></div>
<p>
          Another way to extract a result from an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          is with the <code class="computeroutput"><span class="identifier">extract_result</span><span class="special">()</span></code> function. This can be more convenient
          if there isn't an extractor object handy for a certain feature. The line
          above which displays results could equally be written as:<br>另一种从 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          中取出结果的方法是，使用 <code class="computeroutput"><span class="identifier">extract_result</span><span class="special">()</span></code> 函数。如果某个特征不存在方便的提取器对象，这样会更方便一些。上述例子中显示结果的那行代码也可以写为：
        </p>
<pre class="programlisting"><span class="comment">// This displays "(-1, 2)"<br>// 将显示 "(-1, 2)"<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="char">'('</span>  <span class="special">&lt;&lt;</span> <span class="identifier">extract_result</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">min</span> <span class="special">&gt;(</span> <span class="identifier">acc</span> <span class="special">)</span>
          <span class="special">&lt;&lt;</span> <span class="string">", "</span> <span class="special">&lt;&lt;</span> <span class="identifier">extract_result</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">max</span> <span class="special">&gt;(</span> <span class="identifier">acc</span> <span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">")\n"</span><span class="special">;</span>
</pre>
<p>
          Finally, we can define our own extractor using the <code class="computeroutput">extractor&lt;&gt;</code>
          class template. For instance, another way to avoid the <code class="computeroutput"><span class="identifier">min</span></code>
          / <code class="computeroutput"><span class="identifier">max</span></code> macro business would
          be to define extractors with names that don't conflict with the macros,
          like this:<br>最后，我们用 <code class="computeroutput">extractor&lt;&gt;</code>
          类模板定义我们自己的提取器。例如，避免 <code class="computeroutput"><span class="identifier">min</span></code>
          / <code class="computeroutput"><span class="identifier">max</span></code> 宏的麻烦的另一种方法是，定义另一个名字不冲突的提取器，如下：
        </p>
<pre class="programlisting"><span class="identifier">extractor</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">min</span> <span class="special">&gt;</span> <span class="identifier">min_</span><span class="special">;</span>
<span class="identifier">extractor</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">min</span> <span class="special">&gt;</span> <span class="identifier">max_</span><span class="special">;</span>

<span class="comment">// This displays "(-1, 2)"<br>// 将显示 "(-1, 2)"<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="char">'('</span> <span class="special">&lt;&lt;</span> <span class="identifier">min_</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">", "</span> <span class="special">&lt;&lt;</span> <span class="identifier">max_</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="string">")\n"</span><span class="special">;</span>
</pre>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.passing_optional_parameters"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.passing_optional_parameters" title="Passing Optional Parameters">Passing
        Optional Parameters 传递可选参数</a>
</h4></div></div></div>

<p>
          Some accumulators need initialization parameters. In addition, perhaps
          some auxiliary information needs to be passed into the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          along with each sample. Boost.Accumulators handles these cases with named
          parameters from the <a href="../../../libs/parameter/index.html" target="_top">Boost.Parameter</a>
          library.<br>有些累加器需要初始化参数。另外，可能还有些辅助信息要和每个样本一起传给 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
         。Boost.Accumulators 通过来自于 <a href="../../../libs/parameter/index.html" target="_top">Boost.Parameter</a>
          库的命名参数来处理这些情况。
        </p>
<p>
          For example, consider the <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> and <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          features. <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> keeps an ordered list
          of the largest <code class="literal"><span class="emphasis"><em>N</em></span></code> samples, where
          <code class="literal"><span class="emphasis"><em>N</em></span></code> can be specified at construction
          time. Also, the <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          feature, which depends on <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code>, keeps track of some
          data that is covariate with the <code class="literal"><span class="emphasis"><em>N</em></span></code>
          samples tracked by <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code>. The code below shows
          how this all works, and is described in more detail below.<br>以 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> 和 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          特征为例。<code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> 保存了最大 <code class="literal"><span class="emphasis"><em>N</em></span></code> 个样本的一个有序列表，其中
          <code class="literal"><span class="emphasis"><em>N</em></span></code> 可以在构造时指定。同样，<code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          特征依赖于 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code>，它跟踪某些跟随 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> 所保存的 <code class="literal"><span class="emphasis"><em>N</em></span></code>
          个样本而变化的数据。以下代码示范了它们如何工作，后面有更多细节的说明。
        </p>
<pre class="programlisting"><span class="comment">// Define a feature for tracking covariate data<br>// 定义一个特征以跟踪变化的数据<br></span><span class="keyword">typedef</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">,</span> <span class="identifier">left</span> <span class="special">&gt;</span> <span class="identifier">my_tail_variate_tag</span><span class="special">;</span>

<span class="comment">// This will calculate the left tail and my_tail_variate_tag for N == 2<br></span><span class="comment">// using the tag::tail&lt;left&gt;::cache_size named parameter<br>// 以下使用 tag::tail&lt;left&gt;::cache_size 命名参数针对 N == 2 计算左 tail 和 my_tail_variate_tag<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">my_tail_variate_tag</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">(</span> <br>    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="number">2</span> <span class="special">);</span>

<span class="comment">// push in some samples and some covariates by using <br></span><span class="comment">// the covariate1 named parameter<br>// 使用 covariate1 命名参数压入一些数据和一些关联值<br></span><span class="identifier">acc</span><span class="special">(</span> <span class="number">1.2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span>  <span class="number">12</span> <span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span> <span class="number">2.3</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="special">-</span><span class="number">23</span> <span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span> <span class="number">3.4</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span>  <span class="number">34</span> <span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span> <span class="number">4.5</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="special">-</span><span class="number">45</span> <span class="special">);</span>

<span class="comment">// Define an extractor for the my_tail_variate_tag feature<br>// 为 my_tail_variate_tag 特征定义一个提取器<br></span><span class="identifier">extractor</span><span class="special">&lt;</span> <span class="identifier">my_tail_variate_tag</span> <span class="special">&gt;</span> <span class="identifier">my_tail_variate</span><span class="special">;</span>

<span class="comment">// Write the tail statistic to std::cout. This will print "4.5, 3.4, "<br>// 打印 tail 统计值到 std::cout。将打印 "4.5, 3.4, "<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">ostream_iterator</span><span class="special">&lt;</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">dout</span><span class="special">(</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">,</span> <span class="string">", "</span> <span class="special">);</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">copy</span><span class="special">(</span> <span class="identifier">tail</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">).</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">tail</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">).</span><span class="identifier">end</span><span class="special">(),</span> <span class="identifier">dout</span> <span class="special">);</span>

<span class="comment">// Write the tail_variate statistic to std::cout. This will print "-45, 34, "<br>// 打印 tail_variate 统计值到 std::cout。将打印 "-45, 34, "<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">ostream_iterator</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">&gt;</span> <span class="identifier">iout</span><span class="special">(</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">,</span> <span class="string">", "</span> <span class="special">);</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">copy</span><span class="special">(</span> <span class="identifier">my_tail_variate</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">).</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">my_tail_variate</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">).</span><span class="identifier">end</span><span class="special">(),</span> <span class="identifier">iout</span> <span class="special">);</span>
</pre>

<p>
          There are several things to note about the code above. First, notice that
          we didn't have to request that the <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> feature be calculated.
          That is implicit because the <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          feature depends on the <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> feature. Next, notice
          how the <code class="computeroutput"><span class="identifier">acc</span></code> object is initialized:
          <code class="computeroutput"><span class="identifier">acc</span><span class="special">(</span>
          <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span>
          <span class="number">2</span> <span class="special">)</span></code>.
          Here, <code class="computeroutput"><span class="identifier">cache_size</span></code> is a named
          parameter. It is used to tell the <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> and <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          accumulators how many samples and covariates to store. Conceptually, every
          construction parameter is made available to every accumulator in an accumulator
          set.<br>以上代码中有几个要注意的事情。首先，注意我们不必要求 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> 特征被计算。这是隐含的，因为 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          特征依赖于 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> 特征。其次，留意如何初始化 <code class="computeroutput"><span class="identifier">acc</span></code> 对象：<code class="computeroutput"><span class="identifier">acc</span><span class="special">(</span>
          <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span>
          <span class="number">2</span> <span class="special">)</span></code>。这里的 <code class="computeroutput"><span class="identifier">cache_size</span></code> 是一个命名参数。它用于通知 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> 和 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          累加器要保存多少个样本和关联值。概念上，每个构造参数都可以用于累加器集中的每个累加器。
        </p>

<p>
          We also use a named parameter to pass covariate data into the accumulator
          set along with the samples. As with the constructor parameters, all parameters
          to the accumulate function are made available to all the accumulators in
          the set. In this case, only the accumulator for the <code class="computeroutput"><span class="identifier">my_tail_variate</span></code>
          feature would be interested in the value of the <code class="computeroutput"><span class="identifier">covariate1</span></code>
          named parameter.<br>我们还使用了一个命名参数来将关联数据和样本一起传递给累加器集。和构造函数参数一样，给累加器函数的所有参数都可以用于累加器集中的所有累加器。在这种情况下，只有 <code class="computeroutput"><span class="identifier">my_tail_variate</span></code>
          特征的累加器会关心 <code class="computeroutput"><span class="identifier">covariate1</span></code>
          命名参数的值。
        </p>

<p>
          We can make one final observation about the example above. Since <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code>
          and <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          are multi-valued features, the result we extract for them is represented
          as an iterator range. That is why we can say <code class="computeroutput"><span class="identifier">tail</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">).</span><span class="identifier">begin</span><span class="special">()</span></code> and <code class="computeroutput"><span class="identifier">tail</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">).</span><span class="identifier">end</span><span class="special">()</span></code>.<br>对于上述例子，我们可以得到最后一个结果。由于 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail.html" title="Struct template tail">tail</a></code> 和 <code class="computeroutput"><a class="link" href="../boost/accumulators/tag/tail_variate.html" title="Struct template tail_variate">tail_variate&lt;&gt;</a></code>
          都是多值特征，所以我们从它们所获取的结果要表示为一个整数区间。这就是为什么我们使用 <code class="computeroutput"><span class="identifier">tail</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">).</span><span class="identifier">begin</span><span class="special">()</span></code> and <code class="computeroutput"><span class="identifier">tail</span><span class="special">(</span> <span class="identifier">acc</span> <span class="special">).</span><span class="identifier">end</span><span class="special">()</span></code> 的原因。
        </p>
<p>
          Even the extractors can accept named parameters. In a bit, we'll see a
          situation where that is useful.<br>甚至提取器也可以接受命名参数。稍后我们将看到这样的情况。
        </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.weighted_samples"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.weighted_samples" title="Weighted Samples">Weighted
        Samples 加权样本</a>
</h4></div></div></div>

<p>
          Some accumulators, statistical accumulators in particular, deal with data
          that are <span class="emphasis"><em>weighted</em></span>. Each sample pushed into the accumulator
          has an associated weight, by which the sample is conceptually multiplied.
          The Statistical Accumulators Library provides an assortment of these weighted
          statistical accumulators. And many unweighted statistical accumulators
          have weighted variants. For instance, the weighted variant of the <code class="computeroutput"><span class="identifier">sum</span></code> accumulator is called <code class="computeroutput"><span class="identifier">weighted_sum</span></code>, and is calculated by accumulating
          all the samples multiplied by their weights.<br>有些累加器，尤其是统计累加器，要处理加权的样本。压入累加器的每个样本都具有一个相应的权重，样本应与权重相乘。统计累加器库提供了一类这样的加权统计累加器。许多非加权统计累加器都具有加权的变体。例如，<code class="computeroutput"><span class="identifier">sum</span></code> 累加器的加权变体名为 <code class="computeroutput"><span class="identifier">weighted_sum</span></code>，它通过累加所有样本与权重的乘积进行计算。
        </p>
<p>
          To declare an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          that accepts weighted samples, you must specify the type of the weight
          parameter as the 3rd template parameter, as follows:<br>要声明一个接受加权样本的 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
         ，你必须用第三个模板参数指定权重参数的类型，如下：
        </p>
<pre class="programlisting"><span class="comment">// 3rd template parameter 'int' means this is a weighted<br></span><span class="comment">// accumulator set where the weights have type 'int'<br>// 第三个模板参数 'int' 表示这是一个加权累加器集，权重的类型为 'int'<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum</span> <span class="special">&gt;,</span> <span class="keyword">int</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
</pre>
<p>
          When you specify a weight, all the accumulators in the set are replaced
          with their weighted equivalents. For example, the above <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          declaration is equivalent to the following:<br>当你指定了一个权重，累加器集中的所有累加器都会被替换为各自的加权变体。例如，以上的 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
          声明相当于：
        </p>
<pre class="programlisting"><span class="comment">// Since we specified a weight, tag::sum becomes tag::weighted_sum<br>// 由于我们指定了权重，tag::sum 变为了 tag::weighted_sum<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_sum</span> <span class="special">&gt;,</span> <span class="keyword">int</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
</pre>
<p>
          When passing samples to the accumulator set, you must also specify the
          weight of each sample. You can do that with the <code class="computeroutput"><span class="identifier">weight</span></code>
          named parameter, as follows:<br>在传递样本给累加器集时，你必须指定每个样本的权重。你可以通过 <code class="computeroutput"><span class="identifier">weight</span></code>
          命名参数来传递，如下：
        </p>
<pre class="programlisting"><span class="identifier">acc</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">);</span> <span class="comment">//   1 * 2<br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">);</span> <span class="comment">//   2 * 4<br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">3</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">6</span><span class="special">);</span> <span class="comment">// + 3 * 6<br></span>                    <span class="comment">// -------<br></span>                    <span class="comment">// =    28<br></span></pre>
<p>
          You can then extract the result with the <code class="computeroutput"><span class="identifier">sum</span><span class="special">()</span></code> extractor, as follows:<br>然后你就可以用 <code class="computeroutput"><span class="identifier">sum</span><span class="special">()</span></code> 提取器来取出结果，如下：
        </p>
<pre class="programlisting"><span class="comment">// This prints "28"<br>// 打印 "28"<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
</pre>
<div class="note"><table summary="Note" border="0">
<tbody><tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../doc/html/images/note.png"></td>
<th align="left">Note 说明</th>
</tr>
<tr><td align="left" valign="top"><p>
            When working with weighted statistical accumulators from the Statistical
            Accumulators Library, be sure to include the appropriate header. For
            instance, <code class="computeroutput"><span class="identifier">weighted_sum</span></code>
            is defined in <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">accumulators</span><span class="special">/</span><span class="identifier">statistics</span><span class="special">/</span><span class="identifier">weighted_sum</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code>.</p><p>使用来自统计累加器库的加权统计累加器时，请确认已包含合适的头文件。例如，<code class="computeroutput"><span class="identifier">weighted_sum</span></code>
            的定义位于 <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">accumulators</span><span class="special">/</span><span class="identifier">statistics</span><span class="special">/</span><span class="identifier">weighted_sum</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code> 中。
          </p></td></tr>
</tbody></table></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.numeric_operators_sub_library"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.numeric_operators_sub_library" title="Numeric Operators Sub-Library">Numeric
        Operators Sub-Library 数学操作符子库</a>
</h4></div></div></div>

<p>
          This section describes the function objects in the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span></code>
          namespace, which is a sub-library that provides function objects and meta-functions
          corresponding to the infix operators in C++.<br>这一节描述位于 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span></code>
          名字空间的函数对象，它是一个子库，提供了与C++中缀操作符相对应的函数对象和元函数。
        </p>

<p>
          In the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code> namespace are additional operator
          overloads for some useful operations not provided by the standard library,
          such as multiplication of a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;&gt;</span></code> with a scalar.<br>在 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code> 名字空间中，是一些在标准库中没有提供的但很有用的操作符的重载，如 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;&gt;</span></code> 与标量的乘法。
        </p>

<p>
          In the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span></code> namespace are function object
          equivalents of the infix operators. These function object types are heterogeneous,
          and so are more general than the standard ones found in the <code class="literal">&lt;functional&gt;</code>
          header. They use the Boost.Typeof library to deduce the return types of
          the infix expressions they evaluate. In addition, they look within the
          <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code> namespace to consider any additional
          overloads that might be defined there.<br>在 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span></code> 名字空间中，是与中缀操作符相等价的函数对象。这些函数对象的类型是异类的，所以比在 <code class="literal">&lt;functional&gt;</code>
          头文件中的标准函数对象更为通用。它们使用 Boost.Typeof 库来推断所要求值的中缀表达式的返回类型。另外，它们在
          <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code> 名字空间内部查找可能定义的重载。
        </p>

<p>
          In the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span></code> namespace are global polymorphic
          function objects corresponding to the function object types defined in
          the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span></code> namespace. For example, <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">plus</span><span class="special">(</span><span class="identifier">a</span><span class="special">,</span> <span class="identifier">b</span><span class="special">)</span></code> is equivalent to <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">plus</span><span class="special">&lt;</span><span class="identifier">A</span><span class="special">,</span> <span class="identifier">B</span><span class="special">&gt;()(</span><span class="identifier">a</span><span class="special">,</span> <span class="identifier">b</span><span class="special">)</span></code>, and both are equivalent to <code class="computeroutput"><span class="keyword">using</span> <span class="keyword">namespace</span>
          <span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span><span class="special">;</span>
          <span class="identifier">a</span> <span class="special">+</span>
          <span class="identifier">b</span><span class="special">;</span></code>.<br>在 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span></code> 名字空间中，是与定义在 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span></code> 名字空间中的函数对象类型相对应的全局多态函数对象。例如， <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">plus</span><span class="special">(</span><span class="identifier">a</span><span class="special">,</span> <span class="identifier">b</span><span class="special">)</span></code> 等价于 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">plus</span><span class="special">&lt;</span><span class="identifier">A</span><span class="special">,</span> <span class="identifier">B</span><span class="special">&gt;()(</span><span class="identifier">a</span><span class="special">,</span> <span class="identifier">b</span><span class="special">)</span></code>，它们都等价于 <code class="computeroutput"><span class="keyword">using</span> <span class="keyword">namespace</span>
          <span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span><span class="special">;</span>
          <span class="identifier">a</span> <span class="special">+</span>
          <span class="identifier">b</span><span class="special">;</span></code>.
        </p>
<p>
          The Numeric Operators Sub-Library also gives several ways to sub-class
          and a way to sub-class and specialize operations. One way uses tag dispatching
          on the types of the operands. The other way is based on the compile-time
          properties of the operands.<br>数字操作符子库还给出几种子类化的方法，和一种子类化与特化操作的方法。一种方法是用 tag 来基于操作数的类型进行分派。另一种方法则基于操作数的编译期属性。
        </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework" title="Extending the Accumulators Framework">Extending
        the Accumulators Framework 对累加器框架进行扩展</a>
</h4></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator">Defining
          a New Accumulator 定义新的累加器</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_feature">Defining
          a New Feature 定义新的特征</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_extractor">Defining
          a New Extractor 定义新的提取器</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.controlling_dependencies">Controlling
          Dependencies 控制依赖性</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.operators_ex">
          Specializing Numeric Operators 特化数学操作符</a></span></dt>
</dl></div>
<p>
          This section describes how to extend the Accumulators Framework by defining
          new accumulators, features and extractors. Also covered are how to control
          the dependency resolution of features within an accumulator set.<br>这一节描述如何通过定义新的累加器、特征和提取器来扩展这个累加器框架。还有如何控制在累加器集中各个特征的依赖关系决议。
        </p>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator" title="Defining a New Accumulator">Defining
          a New Accumulator 定义新的累加器</a>
</h5></div></div></div>
<p>
            All new accumulators must satisfy the <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.concepts.accumulator_concept">Accumulator
            Concept</a>. Below is a sample class that satisfies the accumulator
            concept, which simply sums the values of all samples passed into it.<br>所有新的累加器都必须满足 <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.concepts.accumulator_concept">累加器概念</a>。以下是一个满足累加器概念的简单类，它对所有传入的样本进行求和。
          </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">accumulators</span><span class="special">/</span><span class="identifier">framework</span><span class="special">/</span><span class="identifier">accumulator_base</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">accumulators</span><span class="special">/</span><span class="identifier">framework</span><span class="special">/</span><span class="identifier">parameters</span><span class="special">/</span><span class="identifier">sample</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span>                           <span class="comment">// Putting your accumulators in the<br></span><span class="keyword">namespace</span> <span class="identifier">accumulators</span> <span class="special">{</span>                    <span class="comment">// impl namespace has some </span><span class="comment">advantages. See below.</span><span class="comment"> <br></span><span class="keyword">namespace</span> <span class="identifier">impl</span> <span class="special">{</span>                            <span class="comment">// 将你的累加器置于 impl 名字空间有一些好处。具体见后。<br></span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Sample</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">sum_accumulator</span>                      <span class="comment">// All accumulators should inherit from </span><span class="comment">accumulator_base.</span><span class="comment"> <br></span>  <span class="special">:</span> <span class="identifier">accumulator_base</span>                        <span class="comment">// 所有累加器都应继承自 </span><span class="comment">accumulator_base。</span><span class="comment"><br></span><span class="special">{</span>
    <span class="keyword">typedef</span> <span class="identifier">Sample</span> <span class="identifier">result_type</span><span class="special">;</span>             <span class="comment">// The type returned by result() below. 后述 result() 的返回类型。<br></span>    <br>    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Args</span><span class="special">&gt;</span>                 <span class="comment">// The constructor takes an argument pack. 构造函数接受一个参数包。<br></span>    <span class="identifier">sum_accumulator</span><span class="special">(</span><span class="identifier">Args</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">args</span><span class="special">)</span>
      <span class="special">:</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">args</span><span class="special">[</span><span class="identifier">sample</span> <span class="special">|</span> <span class="identifier">Sample</span><span class="special">()])</span>        <span class="comment">// Maybe there is an initial value in the </span><span class="comment">argument pack. </span><span class="comment"> <br></span>    <span class="special">{</span>                                       <span class="comment">// ('sample' is defined in </span><span class="comment">sample.hpp, included above.)</span><span class="comment"> <br></span>    <span class="special">}</span>                                       <span class="comment">// 参数包中可能有初始值('sample'定义于sample.hpp，前面已包含)。<br></span>    <br>    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Args</span><span class="special">&gt;</span>                 <span class="comment">// The accumulate function is the function<br></span>    <span class="keyword">void</span> <span class="keyword">operator</span> <span class="special">()(</span><span class="identifier">Args</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">args</span><span class="special">)</span>     <span class="comment">// call operator, and it also accepts an </span><span class="comment">argument pack.</span><span class="comment"> <br></span>    <span class="special">{</span>                                       <span class="comment">// 累加函数是函数调用操作符，它也接受一个参数包。<br></span>        <span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">sum</span> <span class="special">+=</span> <span class="identifier">args</span><span class="special">[</span><span class="identifier">sample</span><span class="special">];</span>
    <span class="special">}</span>
    
    <span class="identifier">result_type</span> <span class="identifier">result</span><span class="special">(</span><span class="identifier">dont_care</span><span class="special">)</span> <span class="keyword">const</span>     <span class="comment">// The result function will also be passed </span><span class="comment">an argument pack, </span><span class="comment"> <br></span>    <span class="special">{</span>                                       <span class="comment">// but we don't use it here, </span><span class="comment">so we use "dont_care" as the argument type.</span><span class="comment"> <br></span>        <span class="keyword">return</span> <span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">sum</span><span class="special">;</span>                   <span class="comment">// result 函数也被传入一个参数包，但我们不使用它，所以用"dont_care"作为参数类型。<br></span>    <span class="special">}</span>
<span class="keyword">private</span><span class="special">:</span>
    <span class="identifier">Sample</span> <span class="identifier">sum</span><span class="special">;</span>
<span class="special">};</span>

<span class="special">}}}</span>
</pre>

<p>
            Much of the above should be pretty self-explanitory, except for the use
            of argument packs which may be confusing if you have never used the
            <a href="../../../libs/parameter/index.html" target="_top">Boost.Parameter</a>
            library before. An argument pack is a cluster of values, each of which
            can be accessed with a key. So <code class="computeroutput"><span class="identifier">args</span><span class="special">[</span><span class="identifier">sample</span><span class="special">]</span></code> extracts from the pack the value associated
            with the <code class="computeroutput"><span class="identifier">sample</span></code> key.
            And the cryptic <code class="computeroutput"><span class="identifier">args</span><span class="special">[</span><span class="identifier">sample</span> <span class="special">|</span> <span class="identifier">Sample</span><span class="special">()]</span></code> evaluates to the value associated
            with the <code class="computeroutput"><span class="identifier">sample</span></code> key if
            it exists, or a default-constructed <code class="computeroutput"><span class="identifier">Sample</span></code>
            if it doesn't.<br>上面多数代码都可以很好地自解释，除了对参数包的使用可能会让你糊涂，如果你以前从来没有用过
            <a href="../../../libs/parameter/index.html" target="_top">Boost.Parameter</a>
            库的话。一个参数包是一簇值，其中每一个都可以通过键值来访问。所以可以使用 <code class="computeroutput"><span class="identifier">args</span><span class="special">[</span><span class="identifier">sample</span><span class="special">]</span></code> 从包中取出与 <code class="computeroutput"><span class="identifier">sample</span></code> 键相关联的值。而诡异的 <code class="computeroutput"><span class="identifier">args</span><span class="special">[</span><span class="identifier">sample</span> <span class="special">|</span> <span class="identifier">Sample</span><span class="special">()]</span></code> 将会在 <code class="computeroutput"><span class="identifier">sample</span></code> 键存在时求出其关联值，或者在该键不存在时给出一个缺省构造的 <code class="computeroutput"><span class="identifier">Sample</span></code>。
          </p>
<p>
            The example above demonstrates the most common attributes of an accumulator.
            There are other optional member functions that have special meaning.
            In particular:<br>以上例子示范了一个累加器最常用的属性。还有其它一些可选的成员函数具有特殊的意义。特别是：
          </p>
<div class="variablelist">
<p class="title"><b>Optional Accumulator Member Functions 可选的累加器成员函数</b></p>
<dl>
<dt><span class="term"><code class="literal">on_drop(Args)</code></span></dt>
<dd><p>
                Defines an action to be taken when this accumulator is dropped. See
                the section on <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator.droppable_accumulators">Droppable
                Accumulators</a>.<br>定义一个动作，在该累加器被删除时执行。请见 <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator.droppable_accumulators">可删除累加器</a>。</p></dd>
</dl>
</div>
<a name="accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator.accessing_other_accumulators_in_the_set"></a><h4>
<a name="id2609207"></a>
            <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator.accessing_other_accumulators_in_the_set">Accessing
            Other Accumulators in the Set 访问集合中的其它累加器</a>
          </h4>
<p>
            Some accumulators depend on other accumulators within the same accumulator
            set. In those cases, it is necessary to be able to access those other
            accumulators. To make this possible, the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            passes a reference to itself when invoking the member functions of its
            contained accumulators. It can be accessed by using the special <code class="computeroutput"><span class="identifier">accumulator</span></code> key with the argument pack.
            Consider how we might implement <code class="computeroutput"><span class="identifier">mean_accumulator</span></code>:<br>有些累加器要依赖于同一个累加器集中的其它累加器。这时，它需要可以访问那些其它累加器。为此，<code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            在执行所含累加器的成员函数时会传入一个它自身的引用。它可以通过对参数包使用特定的 <code class="computeroutput"><span class="identifier">accumulator</span></code> 键来访问。看一下我们可能会如何实现 <code class="computeroutput"><span class="identifier">mean_accumulator</span></code>：
          </p>
<pre class="programlisting"><span class="comment">// Mean == (Sum / Count) 平均值 == (总和 / 数量)<br></span><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Sample</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">mean_accumulator</span> <span class="special">:</span> <span class="identifier">accumulator_base</span>
<span class="special">{</span>
    <span class="keyword">typedef</span> <span class="identifier">Sample</span> <span class="identifier">result_type</span><span class="special">;</span>
    <span class="identifier">mean_accumulator</span><span class="special">(</span><span class="identifier">dont_care</span><span class="special">)</span> <span class="special">{}</span>

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Args</span><span class="special">&gt;</span>
    <span class="identifier">result_type</span> <span class="identifier">result</span><span class="special">(</span><span class="identifier">Args</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="identifier">args</span><span class="special">)</span> <span class="keyword">const</span>
    <span class="special">{</span>
        <span class="keyword">return</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">args</span><span class="special">[</span><span class="identifier">accumulator</span><span class="special">])</span> <span class="special">/</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">args</span><span class="special">[</span><span class="identifier">accumulator</span><span class="special">]);</span>
    <span class="special">}</span>
<span class="special">};</span>
</pre>
<p>
            <code class="computeroutput"><span class="identifier">mean</span></code> depends on the
            <code class="computeroutput"><span class="identifier">sum</span></code> and <code class="computeroutput"><span class="identifier">count</span></code> accumulators. (We'll see in the
            next section how to specify these dependencies.) The result of the mean
            accumulator is merely the result of the sum accumulator divided by the
            result of the count accumulator. Consider how we write that: <code class="computeroutput"><span class="identifier">sum</span><span class="special">(</span><span class="identifier">args</span><span class="special">[</span><span class="identifier">accumulator</span><span class="special">])</span>
            <span class="special">/</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">args</span><span class="special">[</span><span class="identifier">accumulator</span><span class="special">])</span></code>. The expression <code class="computeroutput"><span class="identifier">args</span><span class="special">[</span><span class="identifier">accumulator</span><span class="special">]</span></code> evaluates to a reference to the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> that contains this
            <code class="computeroutput"><span class="identifier">mean_accumulator</span></code>. It
            also contains the <code class="computeroutput"><span class="identifier">sum</span></code>
            and <code class="computeroutput"><span class="identifier">count</span></code> accumulators,
            and we can access their results with the extractors defined for those
            features: <code class="computeroutput"><span class="identifier">sum</span></code> and <code class="computeroutput"><span class="identifier">count</span></code>.<br><code class="computeroutput"><span class="identifier">mean</span></code> 依赖于
            <code class="computeroutput"><span class="identifier">sum</span></code> 和 <code class="computeroutput"><span class="identifier">count</span></code> 累加器。(在下一节我们将看到如何指定这些依赖关系)。mean
            累加器的结果不过是 sum 累加器的结果除以 count 累加器的结果。看看我们是如何写的：<code class="computeroutput"><span class="identifier">sum</span><span class="special">(</span><span class="identifier">args</span><span class="special">[</span><span class="identifier">accumulator</span><span class="special">])</span>
            <span class="special">/</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">args</span><span class="special">[</span><span class="identifier">accumulator</span><span class="special">])</span></code>。表达式 <code class="computeroutput"><span class="identifier">args</span><span class="special">[</span><span class="identifier">accumulator</span><span class="special">]</span></code> 被求值为包含这个
            <code class="computeroutput"><span class="identifier">mean_accumulator</span></code> 的 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 的引用。它同时还包含了 <code class="computeroutput"><span class="identifier">sum</span></code> 和 <code class="computeroutput"><span class="identifier">count</span></code> 累加器，所以我们可以通过为特征 <code class="computeroutput"><span class="identifier">sum</span></code> 和 <code class="computeroutput"><span class="identifier">count</span></code> 所定义的提取器来访问它们的结果。
          </p>
<div class="note"><table summary="Note" border="0">
<tbody><tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../doc/html/images/note.png"></td>
<th align="left">Note 说明</th>
</tr>
<tr><td align="left" valign="top"><p>
              Accumulators that inherit from <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_base.html" title="Struct accumulator_base">accumulator_base</a></code> get
              an empty <code class="computeroutput"><span class="keyword">operator</span> <span class="special">()</span></code>,
              so accumulators like <code class="computeroutput"><span class="identifier">mean_accumulator</span></code>
              above need not define one.</p><p>继承自 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_base.html" title="Struct accumulator_base">accumulator_base</a></code> 的累加器得到一个空的 <code class="computeroutput"><span class="keyword">operator</span> <span class="special">()</span></code>,
              因此象上述 <code class="computeroutput"><span class="identifier">mean_accumulator</span></code>
              这样的累加器无需再定义一个。
            </p></td></tr>
</tbody></table></div>
<p>
            All the member functions that accept an argument pack have access to
            the enclosing <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            via the <code class="computeroutput"><span class="identifier">accumulator</span></code> key,
            including the constructor. The accumulators within the set are constructed
            in an order determined by their interdependencies. As a result, it is
            safe for an accumulator to access one on which it depends during construction.<br>所有接受参数包的成员函数都可以通过 <code class="computeroutput"><span class="identifier">accumulator</span></code> 键访问它所在的 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>，包含构造函数。累加器集中的累加器是按照一个由它们的依赖关系所决定的顺序来构造的。因此，累加器在构造期间访问一个它所依赖的累加器是安全的。
          </p>
<a name="accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator.infix_notation_and_the_numeric_operators_sub_library"></a><h4>
<a name="id2609754"></a>
            <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator.infix_notation_and_the_numeric_operators_sub_library">Infix
            Notation and the Numeric Operators Sub-Library 中缀表示法和数学操作符子库</a>
          </h4>
<p>
            Although not necessary, it can be a good idea to put your accumulator
            implementations in the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">accumulators</span><span class="special">::</span><span class="identifier">impl</span></code>
            namespace. This namespace pulls in any operators defined in the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code> namespace with a using directive.
            The Numeric Operators Sub-Library defines some additional overloads that
            will make your accumulators work with all sorts of data types.<br>虽然不是必须，但是将你的累加器实现置于 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">accumulators</span><span class="special">::</span><span class="identifier">impl</span></code>
            名字空间下是一个好主意。这个名字空间通过 using 指示符注入了在 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code> 名字空间中定义的所有操作符。数学操作符子库定义了一些额外的重载，这样可以让你的累加器与所有数据类型共同工作。
          </p>
<p>
            Consider <code class="computeroutput"><span class="identifier">mean_accumulator</span></code>
            defined above. It divides the sum of the samples by the count. The type
            of the count is <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code>. What if the sample type doesn't
            define division by <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code>?
            That's the case for <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;&gt;</span></code>. You might think that if the
            sample type is <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;&gt;</span></code>,
            the code would not work, but in fact it does. That's because Numeric
            Operators Sub-Library defines an overloaded <code class="computeroutput"><span class="keyword">operator</span><span class="special">/</span></code> for <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;&gt;</span></code> and <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code>.
            This operator is defined in the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code>
            namespace and will be found within the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">accumulators</span><span class="special">::</span><span class="identifier">impl</span></code>
            namespace. That's why it's a good idea to put your accumulators there.<br>看一下前面定义的 <code class="computeroutput"><span class="identifier">mean_accumulator</span></code>。它要将样本的总和除以数量。数量的类型是 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code>。如果样本类型没有定义与 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code> 的除法，那会怎样？对于 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;&gt;</span></code> 就是如此。你可能想，如果样本类型是 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;&gt;</span></code>，这段代码将不能工作，但事实上它可以。这是因为数学操作符子库为 &nbsp;<code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">complex</span><span class="special">&lt;&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code> 定义了一个重载的 <code class="computeroutput"><span class="keyword">operator</span><span class="special">/</span></code>。这个操作符定义于 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code>
            名字空间中，可以在 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">accumulators</span><span class="special">::</span><span class="identifier">impl</span></code>
            名字空间内查找到。这就是为什么说将你的累加器放在那里是一个好主意的原因。
          </p>
<a name="accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator.droppable_accumulators"></a><h4>
<a name="id2610038"></a>
            <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_accumulator.droppable_accumulators">Droppable
            Accumulators 可删除累加器</a>
          </h4>
<p>
            The term "droppable" refers to an accumulator that can be removed
            from the <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>.
            You can request that an accumulator be made droppable by using the <code class="computeroutput">droppable&lt;&gt;</code> class template.<br>术语 "可删除" 是指一个累加器可以从 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 中删掉。你可以用 <code class="computeroutput">droppable&lt;&gt;</code> 类模板来指定一个累加器是可删除的。
          </p>
<pre class="programlisting"><span class="comment">// calculate sum and count, make sum droppable:<br>// 计算 sum 和 count，把 sum 定义为可删除：<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">count</span><span class="special">,</span> <span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="comment">// add some data 加入一些数据<br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">3.0</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">2.0</span><span class="special">);</span>

<span class="comment">// drop the sum (sum is 5 here) 删除 sum (现在的总和为5)<br></span><span class="identifier">acc</span><span class="special">.</span><span class="identifier">drop</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum</span><span class="special">&gt;();</span>

<span class="comment">// add more data 再加入一些数据<br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">1.0</span><span class="special">);</span>

<span class="comment">// This will display "3" and "5"<br>// 将显示 "3" 和 "5"<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="char">' '</span> <span class="special">&lt;&lt;</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">);</span>    <br></pre>
<p>
            Any accumulators that get added to an accumulator set in order to satisfy
            dependencies on droppable accumulators are themselves droppable. Consider
            the following accumulator:<br>为了满足某些可删除累加器的依赖关系而自动加入到累加器集中的累加器，其本身也是可删除的。考虑以下累加器：
          </p>
<pre class="programlisting"><span class="comment">// Sum is not droppable. Mean is droppable. Count, brought in to <br></span><span class="comment">// satisfy mean's dependencies, is implicitly droppable, too.<br>// Sum 不是可删除的。Mean 是可删除的。为了满足 mean 的依赖关系而带入的 Count 也是可删除的。<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum</span><span class="special">,</span> <span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
</pre>
<p>
            <code class="computeroutput"><span class="identifier">mean</span></code> depends on <code class="computeroutput"><span class="identifier">sum</span></code> and <code class="computeroutput"><span class="identifier">count</span></code>.
            Since <code class="computeroutput"><span class="identifier">mean</span></code> is droppable,
            so too is <code class="computeroutput"><span class="identifier">count</span></code>. However,
            we have explictitly requested that <code class="computeroutput"><span class="identifier">sum</span></code>
            be not droppable, so it isn't. Had we left <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum</span></code>
            out of the above declaration, the <code class="computeroutput"><span class="identifier">sum</span></code>
            accumulator would have been implicitly droppable.<br><code class="computeroutput"><span class="identifier">mean</span></code> 依赖于 <code class="computeroutput"><span class="identifier">sum</span></code> 和 <code class="computeroutput"><span class="identifier">count</span></code>。由于 <code class="computeroutput"><span class="identifier">mean</span></code> 是可删除的，所以 <code class="computeroutput"><span class="identifier">count</span></code> 也是。但是，我们显式指定了 <code class="computeroutput"><span class="identifier">sum</span></code>
            是不可删除的，所以它不是。如果我们在上述声明中去掉 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum</span></code>，则 <code class="computeroutput"><span class="identifier">sum</span></code>
            累加器也将是可删除的。
          </p>
<p>
            A droppable accumulator is reference counted, and is only really dropped
            after all the accumulators that depend on it have been dropped. This
            can lead to some surprising behavior in some situations.<br>可删除累加器是引用计数的，它只在所有依赖于它的累加器都被删除后才真正删除。在某些情况下可能会导致一些令人惊讶的行为。
          </p>
<pre class="programlisting"><span class="comment">// calculate sum and mean, make mean droppable. <br>// 计算 sum 和 mean，其中 mean 是可删除的。<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum</span><span class="special">,</span> <span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="comment">// add some data 加入一些数据<br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">1.0</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">2.0</span><span class="special">);</span>

<span class="comment">// drop the mean. mean's reference count<br></span><span class="comment">// drops to 0, so it's really dropped. So<br></span><span class="comment">// too, count's reference count drops to 0<br></span><span class="comment">// and is really dropped.<br>// 删除 mean。mean 的引用计数降至0，因此它被删除。<br>// 同样，count 的引用计数也降至0，所以也被删除。<br></span><span class="identifier">acc</span><span class="special">.</span><span class="identifier">drop</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">&gt;();</span>

<span class="comment">// add more data. Sum continues to accumulate!<br>// 再加入一些数据。Sum 继续进行累加！<br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">3.0</span><span class="special">);</span>

<span class="comment">// This will display "6 2 3"<br>// 以下将打印 "6 2 3"<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="char">' '</span>
          <span class="special">&lt;&lt;</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="char">' '</span>    <br>          <span class="special">&lt;&lt;</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc</span><span class="special">);</span>
</pre>
<p>
            Note that at the point at which <code class="computeroutput"><span class="identifier">mean</span></code>
            is dropped, <code class="computeroutput"><span class="identifier">sum</span></code> is 3,
            <code class="computeroutput"><span class="identifier">count</span></code> is 2, and therefore
            <code class="computeroutput"><span class="identifier">mean</span></code> is 1.5. But since
            <code class="computeroutput"><span class="identifier">sum</span></code> continues to accumulate
            even after <code class="computeroutput"><span class="identifier">mean</span></code> has been
            dropped, the value of <code class="computeroutput"><span class="identifier">mean</span></code>
            continues to change. If you want to remember the value of <code class="computeroutput"><span class="identifier">mean</span></code> at the point it is dropped, you
            should save its value into a local variable.<br>留意 <code class="computeroutput"><span class="identifier">mean</span></code>
            被删除的时间点，此时 <code class="computeroutput"><span class="identifier">sum</span></code> 为 3，<code class="computeroutput"><span class="identifier">count</span></code> 为 2，因此
            <code class="computeroutput"><span class="identifier">mean</span></code> 为 1.5。但是由于
            <code class="computeroutput"><span class="identifier">sum</span></code> 在 <code class="computeroutput"><span class="identifier">mean</span></code> 被删除之后继续累加，所以 <code class="computeroutput"><span class="identifier">mean</span></code>
            的值会继续变化。如果你想在 <code class="computeroutput"><span class="identifier">mean</span></code> 被删除的时候记住它的值，你应该将它的值保存在一个局部变量中。
          </p>
<p>
            The following rules more precisely specify how droppable and non-droppable
            accumulators behave within an accumulator set.<br>以下规则更好地说明了在一个累加器集内部的可删除累加器和不可删除累加器的行为。
          </p>
<div class="itemizedlist"><ul type="disc">
<li>
              There are two types of accumulators: droppable and non-droppable. The
              default is non-droppable.<br>有两类累加器：可删除的和不可删除的。缺省是不可删除的。
            </li>
<li>
              For any feature <code class="computeroutput"><span class="identifier">X</span></code>,
              both <code class="computeroutput"><span class="identifier">X</span></code> and <code class="computeroutput"><span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">&gt;</span></code>
              satisfy the <code class="computeroutput"><span class="identifier">X</span></code> dependency.<br>对于任意特征 <code class="computeroutput"><span class="identifier">X</span></code>， <code class="computeroutput"><span class="identifier">X</span></code> 和 <code class="computeroutput"><span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">&gt;</span></code> 都满足 <code class="computeroutput"><span class="identifier">X</span></code> 的依赖关系。
            </li>
<li>
              If feature <code class="computeroutput"><span class="identifier">X</span></code> depends
              on <code class="computeroutput"><span class="identifier">Y</span></code> and <code class="computeroutput"><span class="identifier">Z</span></code>, then <code class="computeroutput"><span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">&gt;</span></code> depends on <code class="computeroutput"><span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">Y</span><span class="special">&gt;</span></code> and <code class="computeroutput"><span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">Z</span><span class="special">&gt;</span></code>.<br>如果特征 <code class="computeroutput"><span class="identifier">X</span></code> 依赖于 <code class="computeroutput"><span class="identifier">Y</span></code> 和 <code class="computeroutput"><span class="identifier">Z</span></code>，则 <code class="computeroutput"><span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">&gt;</span></code> 依赖于 <code class="computeroutput"><span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">Y</span><span class="special">&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">droppable</span><span class="special">&lt;</span><span class="identifier">Z</span><span class="special">&gt;</span></code>。
            </li>
<li>
              All accumulators have <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code> and <code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code> member functions.<br>所有累加器都有 <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code> 和 <code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code> 成员函数。
            </li>
<li>
              For non-droppable accumulators, <code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code> is a no-op, and <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code> invokes <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code> on all accumulators corresponding
              to the features upon which the current accumulator depends.<br>对于不可删除的累加器，<code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code> 是空操作，而 <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code> 则对当前累加器所依赖的所有特征的累加器执行 <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code>。
            </li>
<li>
              Droppable accumulators have a reference count and define <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code>
              and <code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code>
              to manipulate the reference count.<br>可删除的累加器有一个引用计数，并定义了 <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code> 和 <code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code> 来维护该引用计数。
            </li>
<li>
              For droppable accumulators, <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code> increments the accumulator's reference
              count, and also <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code>'s the accumulators corresponding
              to the features upon which the current accumulator depends.<br>对于可删除累加器，<code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code> 递增该累加器的引用计数，并对当前累加器所依赖的所有特征的累加器执行 <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code>。
            </li>
<li>
              For droppable accumulators, <code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code> decrements the accumulator's reference
              count, and also <code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code>'s the accumulators corresponding
              to the features upon which the current accumulator depends.<br>对于可删除累加器，<code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code> 递减该累加器的引用计数，并对当前累加器所依赖的所有特征的累加器执行 <code class="computeroutput"><span class="identifier">drop</span><span class="special">()</span></code>。
            </li>
<li>
              The accumulator_set constructor walks the list of <span class="bold"><strong>user-specified</strong></span>
              features and <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code>'s the accumulator that corresponds
              to each of them. (Note: that means that an accumulator that is not
              user-specified but in the set merely to satisfy a dependency will be
              dropped as soon as all its dependencies have been dropped. Ones that
              have been user specified are not dropped until their dependencies have
              been dropped <span class="bold"><strong>and</strong></span> the user has explicitly
              dropped the accumulator.)<br>累加器集合的构造函数遍历<span class="bold"><strong>用户指定</strong></span>特征的列表，并对其中每一个所对应的累加器执行 <code class="computeroutput"><span class="identifier">add_ref</span><span class="special">()</span></code>。(注：这意味着如果一个累加器不是用户指定的，只是为了满足依赖关系而存在的，则当所有依赖它的累加器被删除时，它就会立即被删除。而对于用户指定的累加器，则直到依赖它的所有累加器被删除<span style="font-weight: bold;">且</span>用户显式删除该累加器时，才被删除。)
            </li>
<li>
              Droppable accumulators check their reference count in their accumulate
              member function. If the reference count is 0, the function is a no-op.<br>可删除累加器在它们的累加成员函数中检查其引用计数。如果引用计数为0，则函数为空操作。
            </li>
<li>
              Users are not allowed to drop a feature that is not user-specified
              and marked as droppable.<br>用户不允许删除不是用户指定的和未被标记为可删除的特征。
            </li>
</ul></div>
<p>
            And as an optimization:<br>作为一种优化，有：
          </p>
<div class="itemizedlist"><ul type="disc"><li>
              If the user specifies the non-droppable feature <code class="computeroutput"><span class="identifier">X</span></code>,
              which depends on <code class="computeroutput"><span class="identifier">Y</span></code>
              and <code class="computeroutput"><span class="identifier">Z</span></code>, then the accumulators
              for <code class="computeroutput"><span class="identifier">Y</span></code> and <code class="computeroutput"><span class="identifier">Z</span></code> can be safely made non-droppable,
              as well as any accumulators on which they depend.<br>如果用户指定了一个不可删除特征 <code class="computeroutput"><span class="identifier">X</span></code>，它依赖于 <code class="computeroutput"><span class="identifier">Y</span></code> 和 <code class="computeroutput"><span class="identifier">Z</span></code>，则 <code class="computeroutput"><span class="identifier">Y</span></code> 和 <code class="computeroutput"><span class="identifier">Z</span></code> 的累加器可以安全地设为不可删除，它们所依赖的任何累加器也是如此。
            </li></ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_feature"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_feature" title="Defining a New Feature">Defining
          a New Feature 定义新的特征</a>
</h5></div></div></div>
<p>
            Once we have implemented an accumulator, we must define a feature for
            it so that users can specify the feature when declaring an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>. We typically put
            the features into a nested namespace, so that later we can define an
            extractor of the same name. All features must satisfy the <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.concepts.feature_concept">Feature
            Concept</a>. Using <code class="computeroutput"><a class="link" href="../boost/accumulators/depends_on.html" title="Struct template depends_on">depends_on&lt;&gt;</a></code>
            makes satisfying the concept simple. Below is an example of a feature
            definition.<br>一旦我们完成了一个累加器，我们就必须为它定义一个特征，这样用户才可以在声明 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 时指定这个特征。我们应该将这个特征置于一个嵌套的名字空间中，这样稍后我们就可以定义一个同名的提取器。所有特征都必须满足 <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.concepts.feature_concept">特征概念</a>。使用 <code class="computeroutput"><a class="link" href="../boost/accumulators/depends_on.html" title="Struct template depends_on">depends_on&lt;&gt;</a></code>
            就可以很简单地满足该概念。以下是一个特征定义的例子。
          </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">accumulators</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">tag</span> <span class="special">{</span>

<span class="keyword">struct</span> <span class="identifier">mean</span>                         <span class="comment">// Features should inherit from </span><span class="comment">depends_on&lt;&gt; to specify dependencies</span><span class="comment"> <br></span>  <span class="special">:</span> <span class="identifier">depends_on</span><span class="special">&lt;</span> <span class="identifier">count</span><span class="special">,</span> <span class="identifier">sum</span> <span class="special">&gt;</span>        <span class="comment">// 特征应继承自 </span><span class="comment">depends_on&lt;&gt; 以指定依赖关系</span><span class="comment"><br></span><span class="special">{</span>
    <span class="comment">// Define a nested typedef called 'impl' that specifies which<br></span>    <span class="comment">// accumulator implements this feature. <br>    // 定义一个名为 'impl' 的嵌套 typedef，指定哪一个累加器实现了这个特征。<br></span>    <span class="keyword">typedef</span> <span class="identifier">impl</span><span class="special">::</span><span class="identifier">mean_accumulator</span><span class="special">&lt;</span> <span class="identifier">mpl</span><span class="special">::</span><span class="identifier">_1</span> <span class="special">&gt;</span> <span class="identifier">impl</span><span class="special">;</span>
<span class="special">};</span>

<span class="special">}}}</span>
</pre>
<p>
            The only two things we must do to define the <code class="computeroutput"><span class="identifier">mean</span></code>
            feature is to specify the dependencies with <code class="computeroutput"><a class="link" href="../boost/accumulators/depends_on.html" title="Struct template depends_on">depends_on&lt;&gt;</a></code>
            and define the nested <code class="computeroutput"><span class="identifier">impl</span></code>
            typedef. Even features that have no dependencies should inherit from
            <code class="computeroutput"><a class="link" href="../boost/accumulators/depends_on.html" title="Struct template depends_on">depends_on&lt;&gt;</a></code>. The nested <code class="computeroutput"><span class="identifier">impl</span></code> type must be an <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
            Lambda Expression</a>. The result of <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">apply</span><span class="special">&lt;</span> <span class="identifier">impl</span><span class="special">,</span> <em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em> <span class="special">&gt;::</span><span class="identifier">type</span></code> must be be the type of the accumulator
            that implements this feature. The use of <a href="../../../libs/mpl/index.html" target="_top">MPL</a>
            placeholders like <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">_1</span></code>
            make it especially easy to make a template such as <code class="computeroutput"><span class="identifier">mean_accumulator</span><span class="special">&lt;&gt;</span></code> an <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
            Lambda Expression</a>. Here, <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">_1</span></code>
            will be replaced with the sample type. Had we used <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">_2</span></code>,
            it would have been replaced with the weight type.&nbsp;<br>在定义 <code class="computeroutput"><span class="identifier">mean</span></code>
            特征时，我们必须要做的两件事是，用 <code class="computeroutput"><a class="link" href="../boost/accumulators/depends_on.html" title="Struct template depends_on">depends_on&lt;&gt;</a></code>
            指定依赖关系和定义嵌套的 <code class="computeroutput"><span class="identifier">impl</span></code>
            typedef。即使是没有依赖关系的特征，也要继承自
            <code class="computeroutput"><a class="link" href="../boost/accumulators/depends_on.html" title="Struct template depends_on">depends_on&lt;&gt;</a></code>。嵌套的 <code class="computeroutput"><span class="identifier">impl</span></code> 类型必须是一个 <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
            Lambda 表达式</a>。<code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">apply</span><span class="special">&lt;</span> <span class="identifier">impl</span><span class="special">,</span> <em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em> <span class="special">&gt;::</span><span class="identifier">type</span></code> 的结果必须是实现这一特征的累加器。使用象 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">_1</span></code>
 这样的 <a href="../../../libs/mpl/index.html" target="_top">MPL</a>
            占位符可以很容易地将象 <code class="computeroutput"><span class="identifier">mean_accumulator</span><span class="special">&lt;&gt;</span></code> 这样的模板变为 <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
            Lambda 表达式</a>。在这里，<code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">_1</span></code>
            将被样本类型所替换。如果我们使用了 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">_2</span></code>，它将会被权重类型所替换。
          </p>
<p>
            What about accumulator types that are not templates? If you have a <code class="computeroutput"><span class="identifier">foo_accumulator</span></code> which is a plain struct
            and not a template, you could turn it into an <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
            Lambda Expression</a> using <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">always</span><span class="special">&lt;&gt;</span></code>, like this:<br>那么对于非模板的累加器类型又该如何？如果你有一个 <code class="computeroutput"><span class="identifier">foo_accumulator</span></code>，它是一个简单结构而非模板，你可以用 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">always</span><span class="special">&lt;&gt;</span></code> 将它转为 <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
            Lambda 表达式</a><code class="computeroutput"><span class="special"></span></code>，象这样：
          </p>
<pre class="programlisting"><span class="comment">// An MPL lambda expression that always evaluates to </span><span class="comment">foo_accumulator:</span><span class="comment"> <br></span><span class="comment">// 一个 MPL Lambda 表达式，它总是被求值为</span><span class="comment"> foo_accumulator：</span><span class="comment"><br></span><span class="keyword">typedef</span> <span class="identifier">mpl</span><span class="special">::</span><span class="identifier">always</span><span class="special">&lt;</span> <span class="identifier">foo_accumulator</span> <span class="special">&gt;</span> <span class="identifier">impl</span><span class="special">;</span>
</pre>
<p>
            If you are ever unsure, or if you are not comfortable with MPL lambda
            expressions, you could always define <code class="computeroutput"><span class="identifier">impl</span></code>
            explicitly:<br>如果你不太确定，或者如果你不适应 MPL lambda
            表达式，你总可以显式地定义 <code class="computeroutput"><span class="identifier">impl</span></code>&nbsp;吧：
          </p>
<pre class="programlisting"><span class="comment">// Same as 'typedef mpl::always&lt; foo_accumulator &gt; impl;'<br>// 与</span><span class="comment"> 'typedef mpl::always&lt; foo_accumulator &gt; impl;'</span><span class="comment"> 一样<br></span><span class="keyword">struct</span> <span class="identifier">impl</span>
<span class="special">{</span>
    <span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">Sample</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">Weight</span> <span class="special">&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">apply</span>
    <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">foo_accumulator</span> <span class="identifier">type</span><span class="special">;</span>
    <span class="special">};</span>
<span class="special">};</span>
</pre>
<p>
            Here, <code class="computeroutput"><span class="identifier">impl</span></code> is a binary
            <a href="../../../libs/mpl/doc/refmanual/metafunction-class.html" target="_top">MPL
            Metafunction Class</a>, which is a kind of <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
            Lambda Expression</a>. The nested <code class="computeroutput"><span class="identifier">apply</span><span class="special">&lt;&gt;</span></code> template is part of the metafunction
            class protocol and tells MPL how to to build the accumulator type given
            the sample and weight types.<br>在这里，<code class="computeroutput"><span class="identifier">impl</span></code> 是一个二元
            <a href="../../../libs/mpl/doc/refmanual/metafunction-class.html" target="_top">MPL
            元函数类</a>，它是 <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
            Lambda 表达式</a> 中的一种。嵌套的 <code class="computeroutput"><span class="identifier">apply</span><span class="special">&lt;&gt;</span></code> 模板是元函数类协议的一部分，它告诉 MPL 如何根据给定的样本类型和权重类型来构建累加器类型。
          </p>
<p>
            All features must also provide a nested <code class="computeroutput"><span class="identifier">is_weight_accumulator</span></code>
            typedef. It must be either <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span></code>
            or <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span></code>. <code class="computeroutput"><a class="link" href="../boost/accumulators/depends_on.html" title="Struct template depends_on">depends_on&lt;&gt;</a></code>
            provides a default of <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span></code>
            for all features that inherit from it, but that can be overridden (or
            hidden, technically speaking) in the derived type. When the feature represents
            an accumulation of information about the weights instead of the samples,
            we can mark this feature as such with <code class="computeroutput"><span class="keyword">typedef</span>
            <span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span> <span class="identifier">is_weight_accumulator</span><span class="special">;</span></code>. The weight accumulators are made external
            if the weight type is specified using the <code class="computeroutput">external&lt;&gt;</code>
            template.<br>所有特征都必须提供一个嵌套的 <code class="computeroutput"><span class="identifier">is_weight_accumulator</span></code>
            typedef。它必须是 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span></code> 或 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span></code>。<code class="computeroutput"><a class="link" href="../boost/accumulators/depends_on.html" title="Struct template depends_on">depends_on&lt;&gt;</a></code>
            为所有派生自它的特征提供了一个缺省值 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span></code>，不过它是可以在派生类中被覆写的(或隐藏，技术上说)。当一个特征表示的是关于权重信息而不是样本信息的累加时，我们可以用 <code class="computeroutput"><span class="keyword">typedef</span>
            <span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span> <span class="identifier">is_weight_accumulator</span><span class="special">;</span></code> 来标记这一特征。如果权重类型是用 <code class="computeroutput">external&lt;&gt;</code>
            模板指定的，则加权累加器是在外部制造的。
          </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_extractor"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_extractor" title="Defining a New Extractor">Defining
          a New Extractor 定义新的提取器</a>
</h5></div></div></div>
<p>
            Now that we have an accumulator and a feature, the only thing lacking
            is a way to get results from the accumulator set. The Accumulators Framework
            provides the <code class="computeroutput">extractor&lt;&gt;</code>
            class template to make it simple to define an extractor for your feature.
            Here's an extractor for the <code class="computeroutput"><span class="identifier">mean</span></code>
            feature we defined above:<br>现在我们有了一个累加器和一个特征，唯一还缺少的就是从累加器集中取出结果的方法了。累加器框架提供了 <code class="computeroutput">extractor&lt;&gt;</code>
            类模板，它可以很简单地为你的特征定义一个提取器。以下是我们在前面定义的 <code class="computeroutput"><span class="identifier">mean</span></code>
            特征的一个提取器：
          </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span>
<span class="keyword">namespace</span> <span class="identifier">accumulators</span> <span class="special">{</span>                <span class="comment">// By convention, we put extractors </span><span class="comment">in the 'extract' namespace</span><span class="comment"> <br></span><span class="keyword">namespace</span> <span class="identifier">extract</span> <span class="special">{</span>                     <span class="comment">// 为方便起见，我们将提取器放在</span><span class="comment"> 'extract' 名字空间中</span><span class="comment"><br></span>
<span class="identifier">extractor</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span> <span class="special">&gt;</span> <span class="keyword">const</span> <span class="identifier">mean</span> <span class="special">=</span> <span class="special">{};</span> <span class="comment">// Simply define our extractor with </span><span class="comment">our feature tag, like this.</span><span class="comment"> <br></span>                                        <span class="comment">// 只要用我们的特征 tag 来定义我们的提取器就可以了，象这样。<br></span><span class="special">}</span>
<span class="keyword">using</span> <span class="identifier">extract</span><span class="special">::</span><span class="identifier">mean</span><span class="special">;</span>                    <span class="comment">// Pull the extractor into the </span><span class="comment">enclosing namespace.</span><span class="comment"> <br></span>                                        <span class="comment">// 将提取器注入外层名字空间。<br></span><span class="special">}}</span>                                            <br></pre>
<p>
            Once defined, the <code class="computeroutput"><span class="identifier">mean</span></code>
            extractor can be used to extract the result of the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span></code>
            feature from an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>.<br>一旦定义好了，<code class="computeroutput"><span class="identifier">mean</span></code>
            提取器就可以用来从一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code> 中取出 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span></code>
            特征的值。
          </p>
<p>
            Parameterized features complicate this simple picture. Consider the
            <code class="computeroutput"><span class="identifier">moment</span></code> feature, for calculating
            the <code class="literal"><span class="emphasis"><em>N</em></span></code>-th moment, where <code class="literal"><span class="emphasis"><em>N</em></span></code>
            is specified as a template parameter:<br>参数化的特征会复杂一些。考虑
            <code class="computeroutput"><span class="identifier">moment</span></code> 特征，它用于计算<code class="literal"><span class="emphasis"><em>N</em></span></code>次矩，其中 <code class="literal"><span class="emphasis"><em>N</em></span></code>
            是作为模板参数给定的：
          </p>
<pre class="programlisting"><span class="comment">// An accumulator set for calculating the N-th moment, for N == 2 ...<br>// 一个用于计算N次矩的累加器集，其中 N == 2 ...<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span> <span class="keyword">double</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="comment">// ... add some data ... 加入一些数据<br></span>
<span class="comment">// Display the 2nd moment ... 打印二次矩 ...<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"2nd moment is "</span> <span class="special">&lt;&lt;</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
</pre>
<p>
            In the expression <code class="computeroutput"><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">)</span></code>,
            what is <code class="computeroutput"><span class="identifier">moment</span></code>? It cannot
            be an object -- the syntax of C++ will not allow it. Clearly, if we want
            to provide this syntax, we must make <code class="computeroutput"><span class="identifier">moment</span></code>
            a function template. Here's what the definition of the <code class="computeroutput"><span class="identifier">moment</span></code> extractor looks like:<br>在表达式 <code class="computeroutput"><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">)</span></code> 中，<code class="computeroutput"><span class="identifier">moment</span></code> 是什么？它不可能是一个对象 -- C++的语法不允许。显然，如果我们想提供这一语法，那么 <code class="computeroutput"><span class="identifier">moment</span></code>
            必须是一个函数模板。<code class="computeroutput"><span class="identifier">moment</span></code> 提取器的定义可以象下面这样：
          </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span>
<span class="keyword">namespace</span> <span class="identifier">accumulators</span> <span class="special">{</span>                <span class="comment">// By convention, we put extractors </span><span class="comment"></span><span class="comment">in the 'extract' namespace</span><span class="comment"> <br></span><span class="keyword">namespace</span> <span class="identifier">extract</span> <span class="special">{</span>                     <span class="comment">// </span><span class="comment">为方便起见，我们将提取器放在</span><span class="comment"> 'extract' 名字空间中</span><span class="comment"><br></span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">int</span> <span class="identifier">N</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">AccumulatorSet</span><span class="special">&gt;</span>
<span class="keyword">typename</span> <span class="identifier">mpl</span><span class="special">::</span><span class="identifier">apply</span><span class="special">&lt;</span><span class="identifier">AccumulatorSet</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">moment</span><span class="special">&lt;</span><span class="identifier">N</span><span class="special">&gt;</span> <span class="special">&gt;::</span><span class="identifier">type</span><span class="special">::</span><span class="identifier">result_type</span>
<span class="identifier">moment</span><span class="special">(</span><span class="identifier">AccumulatorSet</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="identifier">acc</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">return</span> <span class="identifier">extract_result</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">moment</span><span class="special">&lt;</span><span class="identifier">N</span><span class="special">&gt;</span> <span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">);</span>
<span class="special">}</span>

<span class="special">}</span>
<span class="keyword">using</span> <span class="identifier">extract</span><span class="special">::</span><span class="identifier">moment</span><span class="special">;</span>                  <span class="comment">// Pull the extractor into the </span><span class="comment"></span><span class="comment">enclosing namespace.</span><span class="comment"> <br></span>                                        <span class="comment">// </span><span class="comment">将提取器注入外层名字空间。</span><span class="comment"><br></span><span class="special">}}</span>                                            <br></pre>
<p>
            The return type deserves some explanation. Every <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            type is actually a unary <a href="../../../libs/mpl/doc/refmanual/metafunction-class.html" target="_top">MPL
            Metafunction Class</a>. When you <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">apply</span><span class="special">&lt;&gt;</span></code> an <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            and a feature, the result is the type of the accumulator within the set
            that implements that feature. And every accumulator provides a nested
            <code class="computeroutput"><span class="identifier">result_type</span></code> typedef that
            tells what its return type is. The extractor simply delegates its work
            to the <code class="computeroutput"><a class="link" href="reference.html#boost.accumulators.extract_result_id2571840">extract_result()</a></code>
            function.<br>关于返回类型应该作一些解释。每一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            类型其实都是一个一元 <a href="../../../libs/mpl/doc/refmanual/metafunction-class.html" target="_top">MPL
            元函数类</a>。当你 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">apply</span><span class="special">&lt;&gt;</span></code> 一个 <code class="computeroutput"><a class="link" href="../boost/accumulators/accumulator_set.html" title="Struct template accumulator_set">accumulator_set&lt;&gt;</a></code>
            和一个特征时，返回结果是该集合内部实现该特征的累加器类型。并且每个累加器都提供一个嵌套的
            <code class="computeroutput"><span class="identifier">result_type</span></code> typedef，用于告知返回类型是什么。提取器只要将它的工作委托给 <code class="computeroutput"><a class="link" href="reference.html#boost.accumulators.extract_result_id2571840">extract_result()</a></code> 函数就可以了。
          </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.controlling_dependencies"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.controlling_dependencies" title="Controlling Dependencies">Controlling
          Dependencies 控制依赖关系</a>
</h5></div></div></div>
<p>
            The feature-based dependency resolution of the Accumulators Framework
            is designed to allow multiple different implementation strategies for
            each feature. For instance, two different accumulators may calculate
            the same quantity with different rounding modes, or using different algorithms
            with different size/speed tradeoffs. Other accumulators that depend on
            that quantity shouldn't care how it's calculated. The Accumulators Framework
            handles this by allowing several different accumulators satisfy the same
            feature.<br>累
加器框架的基于特征依赖关系的决议方式，是为了允许每个特征按多种不同策略来实现而设计的。例如，可能有两个不同的累加器，它们以不同的舍入方式来计算同
一个量，或者是使用具有不同空间/时间代价的算法实现。其它依赖于这个量的累加器不应关心它是如何计算的。累加器框架通过允许多个不同累加器满足同一个特
征来处理这一问题。 </p>
<p>
            <span class="bold"><strong>Aliasing feature dependencies with <code class="literal">feature_of&lt;&gt;<br></code></strong></span><span class="bold"><strong>用</strong></span><span class="bold"><strong> <code class="literal">feature_of&lt;&gt;</code></strong></span><span class="bold"><strong> 为特征依赖关系取别名<code class="literal"></code></strong></span>
          </p>
<p>
            Imagine that you would like to implement the hypothetical <span class="emphasis"><em>fubar</em></span>
            statistic, and that you know two ways to calculate fubar on a bunch of
            samples: an accurate but slow calculation and an approximate but fast
            calculation. You might opt to make the accurate calculation the default,
            so you implement two accumulators and call them <code class="computeroutput"><span class="identifier">impl</span><span class="special">::</span><span class="identifier">fubar_impl</span></code>
            and <code class="computeroutput"><span class="identifier">impl</span><span class="special">::</span><span class="identifier">fast_fubar_impl</span></code>. You would also define
            the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span></code> and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fast_fubar</span></code>
            features as described <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_feature" title="Defining a New Feature">above</a>.
            Now, you would like to inform the Accumulators Framework that these two
            features are the same from the point of view of dependency resolution.
            You can do that with <code class="computeroutput"><a class="link" href="../boost/accumulators/feature_of.html" title="Struct template feature_of">feature_of&lt;&gt;</a></code>,
            as follows:<br>想象一下你要实现假设的 <span class="emphasis"><em>fubar</em></span>
            统计，你知道两种方法来计算一组样本的 fubar：一种方法精确但计算速度慢，另一种方法近似但计算速度快。你可能选择将精确的算法作为缺省方法，于是你实现了两个累加器，名为 <code class="computeroutput"><span class="identifier">impl</span><span class="special">::</span><span class="identifier">fubar_impl</span></code> 和 <code class="computeroutput"><span class="identifier">impl</span><span class="special">::</span><span class="identifier">fast_fubar_impl</span></code>。你也如 <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.defining_a_new_feature" title="Defining a New Feature">上文</a> 所述定义了 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fast_fubar</span></code>
            特征。现在，你想通知累加器框架，这两个特征从依赖关系决议的角度而言是相同的。你可以用 <code class="computeroutput"><a class="link" href="../boost/accumulators/feature_of.html" title="Struct template feature_of">feature_of&lt;&gt;</a></code> 来声明，如下：
          </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">accumulators</span>
<span class="special">{</span>
    <span class="comment">// For the purposes of feature-based dependency resolution,<br></span>    <span class="comment">// fast_fubar provides the same feature as fubar<br>    // 对于基于特征的依赖关系决议来说，fast_fubar 提供了和 fubar 相同的特征<br></span>    <span class="keyword">template</span><span class="special">&lt;&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">feature_of</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fast_fubar</span><span class="special">&gt;</span>
      <span class="special">:</span> <span class="identifier">feature_of</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">&gt;</span>
    <span class="special">{</span>
    <span class="special">};</span>
<span class="special">}}</span>
</pre>
<p>
            The above code instructs the Accumulators Framework that, if another
            accumulator in the set depends on the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span></code>
            feature, the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fast_fubar</span></code> feature is an acceptable
            substitute.<br>以上代码指示累加器框架，如果累加器集中的某个累加器依赖于 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span></code>
            特征，则 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fast_fubar</span></code> 特征也是一个可接受的替代品。
          </p>
<p>
            <span class="bold"><strong>Registering feature variants with <code class="literal">as_feature&lt;&gt;<br></code></strong></span><span class="bold"><strong>用</strong></span><span class="bold"><strong> <code class="literal">as_feature&lt;&gt;</code></strong></span><span class="bold"><strong> 注册特征变体<code class="literal"></code></strong></span>
          </p>
<p>
            You may hve noticed that some feature variants in the Accumulators Framework
            can be specified with a nicer syntax. For instance, instead of <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span></code> and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">immediate_mean</span></code>
            you can specify them with <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">(</span><span class="identifier">lazy</span><span class="special">)</span></code> and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">(</span><span class="identifier">immediate</span><span class="special">)</span></code> respectively. These are merely aliases,
            but the syntax makes the relationship between the two clearer. You can
            create these feature aliases with the <code class="computeroutput"><a class="link" href="../boost/accumulators/as_feature.html" title="Struct template as_feature">as_feature&lt;&gt;</a></code>
            trait. Given the fubar example above, you might decide to alias <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">accurate</span><span class="special">)</span></code>
            with <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span></code> and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">fast</span><span class="special">)</span></code> with <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fast_fubar</span></code>.
            You would do that as follows:<br>你也许已经留意到，在累加器框架中有些特征变体可以用一种较漂亮的语法来指定。例如，要替代 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">immediate_mean</span></code>，你可以分别用 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">(</span><span class="identifier">lazy</span><span class="special">)</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">(</span><span class="identifier">immediate</span><span class="special">)</span></code> 来指定。它们不过是别名而已，不过这种语法使得两者的关系更为清晰。你可以用 <code class="computeroutput"><a class="link" href="../boost/accumulators/as_feature.html" title="Struct template as_feature">as_feature&lt;&gt;</a></code>
            trait 来创建这些特征的别名。以前面的 fubar 为例，你可能决定以 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">accurate</span><span class="special">)</span></code> 作为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span></code> 的别名，以 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">fast</span><span class="special">)</span></code> 作为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fast_fubar</span></code> 的别名。你可以象下面这样做：
          </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">accumulators</span>
<span class="special">{</span>
    <span class="keyword">struct</span> <span class="identifier">fast</span> <span class="special">{};</span>     <span class="comment">// OK to leave these tags empty 标记类型为空就可以了<br></span>    <span class="keyword">struct</span> <span class="identifier">accurate</span> <span class="special">{};</span>
    
    <span class="keyword">template</span><span class="special">&lt;&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">as_feature</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">accurate</span><span class="special">)&gt;</span>
    <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span> <span class="identifier">type</span><span class="special">;</span>
    <span class="special">};</span>
    
    <span class="keyword">template</span><span class="special">&lt;&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">as_feature</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">fast</span><span class="special">)&gt;</span>
    <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">fast_fubar</span> <span class="identifier">type</span><span class="special">;</span>
    <span class="special">};</span>
<span class="special">}}</span>
</pre>
<p>
            Once you have done this, users of your fubar accumulator can request
            the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">fast</span><span class="special">)</span></code>
            and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">accurate</span><span class="special">)</span></code>
            features when defining their <code class="computeroutput"><span class="identifier">accumulator_set</span></code>s
            and get the correct accumulator.<br>这样做了之后，你的 fubar 累加器的用户就可以在定义 <code class="computeroutput"><span class="identifier">accumulator_set</span></code> 时使用 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">fast</span><span class="special">)</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">fubar</span><span class="special">(</span><span class="identifier">accurate</span><span class="special">)</span></code>
            特征并获得正确的累加器了。
          </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.operators_ex"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.extending_the_accumulators_framework.operators_ex" title="Specializing Numeric Operators">
          Specializing Numeric Operators 特化数学操作符</a>
</h5></div></div></div>
<p>
            This section describes how to adapt third-party numeric types to work
            with the Accumulator Framework.<br>这一节描述如何让第三方的数学类型适用于累加器框架。
          </p>
<p>
            Rather than relying on the built-in operators, the Accumulators Framework
            relies on functions and operator overloads defined in the <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.numeric_operators_sub_library" title="Numeric Operators Sub-Library">Numeric
            Operators Sub-Library</a> for many of its numeric operations. This
            is so that it is possible to assign non-standard meanings to arithmetic
            operations. For instance, when calculating an average by dividing two
            integers, the standard integer division behavior would be mathematically
            incorrect for most statistical quantities. So rather than use <code class="computeroutput"><span class="identifier">x</span> <span class="special">/</span> <span class="identifier">y</span></code>, the Accumulators Framework uses
            <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">average</span><span class="special">(</span><span class="identifier">x</span><span class="special">,</span> <span class="identifier">y</span><span class="special">)</span></code>,
            which does floating-point division even if both <code class="computeroutput"><span class="identifier">x</span></code>
            and <code class="computeroutput"><span class="identifier">y</span></code> are integers.<br>对于多数的数学操作，累加器框架不是依赖于内建的操作符的，而是依赖于在 <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.numeric_operators_sub_library" title="Numeric Operators Sub-Library">数学操作符子库</a> 中定义的函数和操作符重载。这样就可以为算术操作赋予非标准的特殊意义。例如，在通过将两个整数相除以计算平均值时，标准的整数除法行为对于多数统计量来说在数学上是不正确的。所以累加器框架不使用 <code class="computeroutput"><span class="identifier">x</span> <span class="special">/</span> <span class="identifier">y</span></code>，而是使用
            <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">average</span><span class="special">(</span><span class="identifier">x</span><span class="special">,</span> <span class="identifier">y</span><span class="special">)</span></code>，即使 <code class="computeroutput"><span class="identifier">x</span></code> 和 <code class="computeroutput"><span class="identifier">y</span></code> 都是整数，它也会进行浮点除法。
          </p>
<p>
            Another example where the Numeric Operators Sub-Library is useful is
            when a type does not define the operator overloads required to use it
            for some statistical calculations. For instance, <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code> does not overload any arithmetic
            operators, yet it may be useful to use <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code> as a sample or variate type.
            The Numeric Operators Sub-Library defines the necessary operator overloads
            in the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code> namespace, which is brought
            into scope by the Accumulators Framework with a using directive.<br>说明数学操作符子库有用的另一个例子是，在一个类型没有定义某些统计运算所需的操作符重载的时候。例如，<code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code> 没有重载任何算术操作符，但是有可能需要将 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code> 用作样本类型或变值类型。数学操作符子库在 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">operators</span></code> 名字空间中定义了所需要的操作符重载，它们被累加器框架用一个 using 指示符带入到了作用域中。
          </p>
<p>
            <span class="bold"><strong>Numeric Function Objects and Tag Dispatching 数学函数对象和 Tag 分派</strong></span>
          </p>
<p>
            How are the numeric function object defined by the Numeric Operators
            Sub-Library made to work with types such as <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code>? The free functions in the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span></code> namespace are implemented in
            terms of the function objects in the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span></code>
            namespace, so to make <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">average</span><span class="special">()</span></code> do something sensible with a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code>,
            for instance, we'll need to partially specialize the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;&gt;</span></code> function object.<br>数学操作符子库定义的数学函数对象是如何可用于 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code> 这样的类型的呢？在 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span></code> 名字空间中的普通函数是根据 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span></code>
            名字空间中的函数对象来实现的，因此例如要让 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">average</span><span class="special">()</span></code> 能够对一个 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code> 做些有意义的事情，我们就需要偏特化 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;&gt;</span></code> 函数对象。
          </p>
<p>
            The functional objects make use of a technique known as <a href="http://www.boost.org/community/generic_programming.html#tag_dispatching" target="_top"><span class="emphasis"><em>tag
            dispatching</em></span></a> to select the proper implementation for
            the given operands. It works as follows:<br>函数对象使用一种被称为 <a href="http://www.boost.org/community/generic_programming.html#tag_dispatching" target="_top"><span class="emphasis"><em>tag
            分派</em></span></a> 的技术来为给定的操作数选择正确的实现。它的工作方式如下：
          </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">numeric</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">functional</span>
<span class="special">{</span>
    <span class="comment">// Metafunction for looking up the tag associated with </span><span class="comment">a given numeric type T.</span><span class="comment"> <br></span>    <span class="comment">// 用于查找与给定数学类型 T 相关联的 tag 的元函数<br></span>    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">tag</span>
    <span class="special">{</span>
        <span class="comment">// by default, all types have void as a tag type<br>        // 缺省情况下，所有类型以 void 作为 tag 类型<br></span>        <span class="keyword">typedef</span> <span class="keyword">void</span> <span class="identifier">type</span><span class="special">;</span>
    <span class="special">};</span>

    <span class="comment">// Forward declaration looks up the tag types of each operand<br>    // 前向声明，查找每个操作数的 tag 类型<br></span>    <span class="keyword">template</span><span class="special">&lt;</span>
        <span class="keyword">typename</span> <span class="identifier">Left</span>
      <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">Right</span>
      <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">LeftTag</span> <span class="special">=</span> <span class="keyword">typename</span> <span class="identifier">tag</span><span class="special">&lt;</span><span class="identifier">Left</span><span class="special">&gt;::</span><span class="identifier">type</span>
      <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">RightTag</span> <span class="special">=</span> <span class="keyword">typename</span> <span class="identifier">tag</span><span class="special">&lt;</span><span class="identifier">Right</span><span class="special">&gt;::</span><span class="identifier">type</span>
    <span class="special">&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">average</span><span class="special">;</span>
<span class="special">}}}</span>
</pre>
<p>
            If you have some user-defined type <code class="computeroutput"><span class="identifier">MyDouble</span></code>
            for which you would like to customimze the behavior of <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">average</span><span class="special">()</span></code>,
            you would specialize <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;&gt;</span></code> by first defining a tag type,
            as shown below:<br>如果你有一个用户自定义的类型 <code class="computeroutput"><span class="identifier">MyDouble</span></code>，你想针对它定制 <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">average</span><span class="special">()</span></code> 的行为，你应该通过定义一个 tag 类型来特化 <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;&gt;</span></code>，如下所示：
          </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">numeric</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">functional</span>
<span class="special">{</span>
    <span class="comment">// Tag type for MyDouble<br>    // MyDouble 的 Tag 类型<br></span>    <span class="keyword">struct</span> <span class="identifier">MyDoubleTag</span> <span class="special">{};</span>
    
    <span class="comment">// Specialize tag&lt;&gt; for MyDouble.<br></span>    <span class="comment">// This only needs to be done once.<br>    // 为 MyDouble 特化 tag&lt;&gt;。这只需要做一次。<br></span>    <span class="keyword">template</span><span class="special">&lt;&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">tag</span><span class="special">&lt;</span><span class="identifier">MyDouble</span><span class="special">&gt;</span>
    <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">MyDoubleTag</span> <span class="identifier">type</span><span class="special">;</span>
    <span class="special">};</span>

    <span class="comment">// Specify how to divide a MyDouble by an integral count<br>    // 指定如何将一个 MyDouble 除以一个整数数量<br></span>    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Left</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">Right</span><span class="special">&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">average</span><span class="special">&lt;</span><span class="identifier">Left</span><span class="special">,</span> <span class="identifier">Right</span><span class="special">,</span> <span class="identifier">MyDoubleTag</span><span class="special">,</span> <span class="keyword">void</span><span class="special">&gt;</span>
    <span class="special">{</span>
        <span class="comment">// Define the type of the result<br>        // 定义运算结果的类型<br></span>        <span class="keyword">typedef</span> <span class="special">...</span> <span class="identifier">result_type</span><span class="special">;</span>
        
        <span class="identifier">result_type</span> <span class="keyword">operator</span><span class="special">()(</span><span class="identifier">Left</span> <span class="special">&amp;</span> <span class="identifier">left</span><span class="special">,</span> <span class="identifier">Right</span> <span class="special">&amp;</span> <span class="identifier">right</span><span class="special">)</span> <span class="keyword">const</span>
        <span class="special">{</span>
            <span class="keyword">return</span> <span class="special">...;</span>
        <span class="special">}</span>
    <span class="special">};</span>
<span class="special">}}}</span>
</pre>
<p>
            Once you have done this, <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">average</span><span class="special">()</span></code> will use your specialization of <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;&gt;</span></code>
            when the first argument is a <code class="computeroutput"><span class="identifier">MyDouble</span></code>
            object. All of the function objects in the Numeric Operators Sub-Library
            can be customized in a similar fashion.<br>你做了这些以后，当第一个参数是&nbsp;<code class="computeroutput"><span class="identifier">MyDouble</span></code> 对象时，<code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">average</span><span class="special">()</span></code> 将使用你特化的 <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;&gt;</span></code>。数学操作符子库中的所有函数对象都可以按类似方式进行特化。
          </p>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_accumulators_framework.concepts"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.concepts" title="Concepts">Concepts 概念</a>
</h4></div></div></div>
<a name="accumulators.user_s_guide.the_accumulators_framework.concepts.accumulator_concept"></a><h3>
<a name="id2615158"></a>
          <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.concepts.accumulator_concept">Accumulator
          Concept 累加器概念</a>
        </h3>
<p>
          In the following table, <code class="computeroutput"><span class="identifier">Acc</span></code>
          is the type of an accumulator, <code class="computeroutput"><span class="identifier">acc</span></code>
          and <code class="computeroutput"><span class="identifier">acc2</span></code> are objects of
          type <code class="computeroutput"><span class="identifier">Acc</span></code>, and <code class="computeroutput"><span class="identifier">args</span></code> is the name of an argument pack
          from the <a href="../../../libs/parameter/index.html" target="_top">Boost.Parameter</a>
          library.<br>下表中，<code class="computeroutput"><span class="identifier">Acc</span></code>
          是一个累加器类型，<code class="computeroutput"><span class="identifier">acc</span></code> 和 <code class="computeroutput"><span class="identifier">acc2</span></code> 为类型 <code class="computeroutput"><span class="identifier">Acc</span></code> 的对象，<code class="computeroutput"><span class="identifier">args</span></code> 是来自于 <a href="../../../libs/parameter/index.html" target="_top">Boost.Parameter</a>
          库的参数包的名字。
        </p>
<div class="table">
<a name="id2615229"></a><p class="title"><b>Table&nbsp;1.2.&nbsp;Accumulator Requirements</b><b><br>表&nbsp;1.2. 累加器的要求</b></p>
<div class="table-contents"><table class="table" summary="Accumulator Requirements">
<colgroup><col><col><col></colgroup>
<thead><tr>
<th>
              <p>
                <span class="bold"><strong>Expression 表达式</strong></span>
              </p>
              </th>
<th>
              <p>
                <span class="bold"><strong>Return type 返回类型</strong></span>
              </p>
              </th>
<th>
              <p>
                <span class="bold"><strong>Assertion / Note / Pre- / Post-condition 断言/说明/前置条件/后置条件</strong></span>
              </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">Acc</span><span class="special">::</span><span class="identifier">result_type</span></code>
              </p>
              </td>
<td>
              <p>
                <span class="emphasis"><em>implementation defined</em></span></p><p><span class="emphasis"><em>实现定义</em></span>
              </p>
              </td>
<td>
              <p>
                The type returned by <code class="computeroutput"><span class="identifier">Acc</span><span class="special">::</span><span class="identifier">result</span><span class="special">()</span></code>.</p><p>由 <code class="computeroutput"><span class="identifier">Acc</span><span class="special">::</span><span class="identifier">result</span><span class="special">()</span></code> 返回的类型。
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">Acc</span> <span class="identifier">acc</span><span class="special">(</span><span class="identifier">args</span><span class="special">)</span></code>
              </p>
              </td>
<td>
              <p>
                none</p><p>无
              </p>
              </td>
<td>
              <p>
                Construct from an argument pack.</p><p>从一个参数包进行构造。
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">Acc</span> <span class="identifier">acc</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">)</span></code>
              </p>
              </td>
<td>
              <p>
                none</p><p>无
              </p>
              </td>
<td>
              <p>
                Post: <code class="computeroutput"><span class="identifier">acc</span><span class="special">.</span><span class="identifier">result</span><span class="special">(</span><span class="identifier">args</span><span class="special">)</span></code>
                is equivalent to <code class="computeroutput"><span class="identifier">acc2</span><span class="special">.</span><span class="identifier">result</span><span class="special">(</span><span class="identifier">args</span><span class="special">)</span></code></p><p><code class="computeroutput"><span class="special"></span></code>
                后置条件：<code class="computeroutput"><span class="identifier">acc</span><span class="special">.</span><span class="identifier">result</span><span class="special">(</span><span class="identifier">args</span><span class="special">)</span></code> 等价于 <code class="computeroutput"><span class="identifier">acc2</span><span class="special">.</span><span class="identifier">result</span><span class="special">(</span><span class="identifier">args</span><span class="special">)</span></code>
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">acc</span><span class="special">(</span><span class="identifier">args</span><span class="special">)</span></code>
              </p>
              </td>
<td>
              <p>
                <span class="emphasis"><em>unspecified</em></span></p><p><span class="emphasis"><em>未指定</em></span>
              </p>
              </td>
<td>
              <p>
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">acc</span><span class="special">.</span><span class="identifier">on_drop</span><span class="special">(</span><span class="identifier">args</span><span class="special">)</span></code>
              </p>
              </td>
<td>
              <p>
                <span class="emphasis"><em>unspecified</em></span></p><p><span class="emphasis"><em>未指定</em></span>
              </p>
              </td>
<td>
              <p>
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">acc</span><span class="special">.</span><span class="identifier">result</span><span class="special">(</span><span class="identifier">args</span><span class="special">)</span></code>
              </p>
              </td>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">Acc</span><span class="special">::</span><span class="identifier">result_type</span></code>
              </p>
              </td>
<td>
              <p>
              </p>
              </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><a name="accumulators.user_s_guide.the_accumulators_framework.concepts.feature_concept"></a><h3>
<a name="id2615670"></a>
          <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework.concepts.feature_concept">Feature
          Concept 特征概念</a>
        </h3>
<p>
          In the following table, <code class="computeroutput"><span class="identifier">F</span></code>
          is the type of a feature and <code class="computeroutput"><span class="identifier">S</span></code>
          is some scalar type.<br>下表中，<code class="computeroutput"><span class="identifier">F</span></code>
          是一个特征类型，<code class="computeroutput"><span class="identifier">S</span></code>
          是某个标量类型。
        </p>
<div class="table">
<a name="id2615706"></a><p class="title"><b>Table&nbsp;1.3.&nbsp;Featue Requirements<br>表 1.3. 特征的要求</b></p>
<div class="table-contents"><table class="table" summary="Featue Requirements">
<colgroup><col><col><col></colgroup>
<thead><tr>
<th>
              <p>
                <span class="bold"><strong>Expression 表达式</strong></span>
              </p>
              </th>
<th>
              <p>
                <span class="bold"><strong>Return type 返回类型</strong></span>
              </p>
              </th>
<th>
              <p>
                <span class="bold"><strong>Assertion / Note / Pre- / Post-condition&nbsp;</strong></span><span class="bold"><strong>断言/说明/前置条件/后置条件</strong></span>
              </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">F</span><span class="special">::</span><span class="identifier">dependencies</span></code>
              </p>
              </td>
<td>
              <p>
                <span class="emphasis"><em>unspecified</em></span></p><p><span class="emphasis"><em>未指定</em></span>
              </p>
              </td>
<td>
              <p>
                An MPL sequence of other features on which which <code class="computeroutput"><span class="identifier">F</span></code>
                depends.</p><p>由 <code class="computeroutput"><span class="identifier">F</span></code>
                所依赖的其它特征所组成的 MPL 序列。
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">F</span><span class="special">::</span><span class="identifier">is_weight_accumulator</span></code>
              </p>
              </td>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span></code> 或 <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span></code>
              </p>
              </td>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span></code> if the accumulator for this
                feature should be made external when the weight type for the accumulator
                set is <code class="computeroutput"><span class="identifier">external</span><span class="special">&lt;</span><span class="identifier">S</span><span class="special">&gt;</span></code>,
                <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span></code> otherwise.</p><p><code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">true_</span></code> 如果该特征的累加器在累加器集的权重类型为 <code class="computeroutput"><span class="identifier">external</span><span class="special">&lt;</span><span class="identifier">S</span><span class="special">&gt;</span></code> 时将在外部制造，否则为
                <code class="computeroutput"><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">false_</span></code> 。
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">F</span><span class="special">::</span><span class="identifier">impl</span></code>
              </p>
              </td>
<td>
              <p>
                <span class="emphasis"><em>unspecified</em></span></p><p><span class="emphasis"><em>未指定</em></span>
              </p>
              </td>
<td>
              <p>
                An <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
                Lambda Expression</a> that returns the type of the accumulator
                that implements this feature when passed a sample type and a weight
                type.</p><p>一个 <a href="../../../libs/mpl/doc/refmanual/lambda-expression.html" target="_top">MPL
                Lambda 表达式</a>，在传入一个样本类型和一个权重类型时返回实现该特征的累加器类型。
              </p>
              </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break">
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library" title="The Statistical Accumulators Library">The
      Statistical Accumulators Library 统计累加器库</a>
</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count">
        count</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.covariance">
        covariance</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.density">
        density</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.error_of_mean">
        error_of&lt;mean&gt;</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.extended_p_square">
        extended_p_square</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.extended_p_square_quantile">
        extended_p_square_quantile <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.kurtosis">
        kurtosis</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.max">
        max</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.mean">
        mean&nbsp;<span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.median">
        median&nbsp;<span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.min">
        min</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.moment">
        moment</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.p_square_cumulative_distribution">
        p_square_cumulative_distribution</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.p_square_quantile">
        p_square_quantile <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.peaks_over_threshold">
        peaks_over_threshold <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.pot_quantile">
        pot_quantile <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.pot_tail_mean">
        pot_tail_mean</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.skewness">
        skewness</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum">
        sum <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail">
        tail</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.coherent_tail_mean">
        coherent_tail_mean</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_tail_mean">
        non_coherent_tail_mean</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_quantile">
        tail_quantile</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate">
        tail_variate</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate_means">
        tail_variate_means <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.variance">
        variance <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_covariance">
        weighted_covariance</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_density">
        weighted_density</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_extended_p_square">
        weighted_extended_p_square</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_kurtosis">
        weighted_kurtosis</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_mean">
        weighted_mean <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_median">
        weighted_median <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_moment">
        weighted_moment</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_p_square_cumulative_distribution">
        weighted_p_square_cumulative_distribution</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_p_square_quantile">
        weighted_p_square_quantile <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_peaks_over_threshold">
        weighted_peaks_over_threshold <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_skewness">
        weighted_skewness</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_sum">
        weighted_sum <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_weighted_tail_mean">
        non_coherent_weighted_tail_mean</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_tail_quantile">
        weighted_tail_quantile</a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_tail_variate_means">
        weighted_tail_variate_means <span class="emphasis"><em>及其变体</em></span></a></span></dt>
<dt><span class="section"><a href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_variance">
        weighted_variance <span class="emphasis"><em>及其变体</em></span></a></span></dt>
</dl></div>
<p>
        The Statistical Accumulators Library defines accumulators for incremental
        statistial computations. It is built on top of <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework" title="The Accumulators Framework">The
        Accumulator Framework</a>.<br>统计累加器库定义了增量统计计算所用的累加器。它构建于 <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_accumulators_framework" title="The Accumulators Framework">累加器框架</a> 之上。
      </p>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.count"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count">
        count</a>
</h4></div></div></div>
<p>
          The <code class="computeroutput"><span class="identifier">count</span></code> feature is a
          simple counter that tracks the number of samples pushed into the accumulator
          set.<br><code class="computeroutput"><span class="identifier">count</span></code> 特征是一个简单的计数器，跟踪压入累加器集的样本数量。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.count.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/count.hpp&gt;">boost/accumulators/statistics/count.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">features</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">count</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">0</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">0</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">0</span><span class="special">);</span>
<span class="identifier">assert</span><span class="special">(</span><span class="number">3</span> <span class="special">==</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc"><li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/count_impl.html" title="Struct count_impl">count_impl</a></code></li></ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.covariance"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.covariance" title="covariance">
        covariance</a>
</h4></div></div></div>
<p>
          The <code class="computeroutput"><span class="identifier">covariance</span></code> feature
          is an iterative Monte Carlo estimator for the covariance. It is specified
          as <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariance</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>.<br><code class="computeroutput"><span class="identifier">covariance</span></code> 特征是用于协方差的一个迭代蒙特卡洛估算法。它用 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariance</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code> 指定。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">outer_product</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
  <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
<span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">mean</span></code> <br> <code class="computeroutput"><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">abstract_covariance</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <em class="replaceable"><code>
                variate-tag
              </code></em>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.covariance.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/covariance.hpp&gt;">boost/accumulators/statistics/covariance.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariance</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">2.</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">4.</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">2.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">3.</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">6.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">1.</span><span class="special">);</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">covariance</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)</span> <span class="special">==</span> <span class="special">-</span><span class="number">1.75</span><span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/covariance_impl.html" title="Struct template covariance_impl">covariance_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.mean" title="mean and variants"><code class="literal">mean</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.density"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.density" title="density">
        density</a>
</h4></div></div></div>
<p>
          The <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">density</span></code> feature returns a histogram of
          the sample distribution. For more implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/density_impl.html" title="Struct template density_impl">density_impl</a></code>.<br><code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">density</span></code> 特征返回样本分布的直方图。更多的实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/density_impl.html" title="Struct template density_impl">density_impl</a></code>.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span>
            <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
          <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
        <span class="special">&gt;</span>
    <span class="special">&gt;::</span><span class="identifier">iterator</span>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">min</span></code> <br> <code class="computeroutput"><span class="identifier">max</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">density</span><span class="special">::</span><span class="identifier">cache_size</span></code> <br> <code class="computeroutput"><span class="identifier">density</span><span class="special">::</span><span class="identifier">num_bins</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N)，其中 N 为 <code class="computeroutput"><span class="identifier">density</span><span class="special">::</span><span class="identifier">num_bins</span></code>
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.density.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/density.hpp&gt;">boost/accumulators/statistics/density.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/density_impl.html" title="Struct template density_impl">density_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.min" title="min"><code class="literal">min</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.max" title="max"><code class="literal">max</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.error_of_mean"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.error_of_mean" title="error_of&lt;mean&gt;">
        error_of&lt;mean&gt;</a>
</h4></div></div></div>
<p>
          The <code class="computeroutput"><span class="identifier">error_of</span><span class="special">&lt;</span><span class="identifier">mean</span><span class="special">&gt;</span></code>
          feature calculates the error of the mean feature. It is equal to <code class="computeroutput"><span class="identifier">sqrt</span><span class="special">(</span><span class="identifier">variance</span> <span class="special">/</span>
          <span class="special">(</span><span class="identifier">count</span>
          <span class="special">-</span> <span class="number">1</span><span class="special">))</span></code>.<br><code class="computeroutput"><span class="identifier">error_of</span><span class="special">&lt;</span><span class="identifier">mean</span><span class="special">&gt;</span></code>
          特征计算平均值特征的误差。它等于 <code class="computeroutput"><span class="identifier">sqrt</span><span class="special">(</span><span class="identifier">variance</span> <span class="special">/</span>
          <span class="special">(</span><span class="identifier">count</span>
          <span class="special">-</span> <span class="number">1</span><span class="special">))</span></code>.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">variance</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">error_of</span><span class="special">&lt;</span><span class="identifier">immediate_mean</span><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.error_of.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/error_of.hpp&gt;">boost/accumulators/statistics/error_of.hpp</a></code><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.error_of_mean.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/error_of_mean.hpp&gt;">boost/accumulators/statistics/error_of_mean.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">error_of</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">1.1</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">1.2</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">1.3</span><span class="special">);</span>
<span class="identifier">assert</span><span class="special">(</span><span class="number">0.057735</span> <span class="special">==</span> <span class="identifier">error_of</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">));</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/error_of_mean_impl.html" title="Struct template error_of_mean_impl">error_of_mean_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.variance" title="variance and variants"><code class="literal">variance</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.extended_p_square"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.extended_p_square" title="extended_p_square">
        extended_p_square</a>
</h4></div></div></div>
<p>
          Multiple quantile estimation with the extended <code class="literal">P^2</code> algorithm.
          For further details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/extended_p_square_impl.html" title="Struct template extended_p_square_impl">extended_p_square_impl</a></code>.<br>扩展 <code class="literal">P^2</code> 算法的多重分位数预估。更多细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/extended_p_square_impl.html" title="Struct template extended_p_square_impl">extended_p_square_impl</a></code>.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <em class="replaceable"><code>implementation-defined</code></em>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">extended_p_square</span><span class="special">::</span><span class="identifier">probabilities</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.extended_p_square.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/extended_p_square.hpp&gt;">boost/accumulators/statistics/extended_p_square.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">array</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">&gt;</span> <span class="identifier">probs</span> <span class="special">=</span> <span class="special">{</span><span class="number">0.001</span><span class="special">,</span><span class="number">0.01</span><span class="special">,</span><span class="number">0.1</span><span class="special">,</span><span class="number">0.25</span><span class="special">,</span><span class="number">0.5</span><span class="special">,</span><span class="number">0.75</span><span class="special">,</span><span class="number">0.9</span><span class="special">,</span><span class="number">0.99</span><span class="special">,</span><span class="number">0.999</span><span class="special">};</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">extended_p_square</span><span class="special">&gt;</span> <span class="special">&gt;</span>
    <span class="identifier">acc</span><span class="special">(</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">extended_p_square</span><span class="special">::</span><span class="identifier">probabilities</span> <span class="special">=</span> <span class="identifier">probs</span><span class="special">);</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span> <span class="comment">// a random number generator 随机数发生器<br></span><span class="keyword">for</span> <span class="special">(</span><span class="keyword">int</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">10000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
    <span class="identifier">acc</span><span class="special">(</span><span class="identifier">rng</span><span class="special">());</span>

<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="identifier">extended_p_square</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)[</span><span class="number">0</span><span class="special">],</span> <span class="identifier">probs</span><span class="special">[</span><span class="number">0</span><span class="special">],</span> <span class="number">25</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="identifier">extended_p_square</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)[</span><span class="number">1</span><span class="special">],</span> <span class="identifier">probs</span><span class="special">[</span><span class="number">1</span><span class="special">],</span> <span class="number">10</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="identifier">extended_p_square</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)[</span><span class="number">2</span><span class="special">],</span> <span class="identifier">probs</span><span class="special">[</span><span class="number">2</span><span class="special">],</span> <span class="number">5</span><span class="special">);</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span><span class="special">=</span><span class="number">3</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">probs</span><span class="special">.</span><span class="identifier">size</span><span class="special">();</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="identifier">extended_p_square</span><span class="special">(</span><span class="identifier">acc</span><span class="special">)[</span><span class="identifier">i</span><span class="special">],</span> <span class="identifier">probs</span><span class="special">[</span><span class="identifier">i</span><span class="special">],</span> <span class="number">2</span><span class="special">);</span>
<span class="special">}</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/extended_p_square_impl.html" title="Struct template extended_p_square_impl">extended_p_square_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.extended_p_square_quantile"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.extended_p_square_quantile" title="extended_p_square_quantile and variants">
        extended_p_square_quantile <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Quantile estimation using the extended <code class="literal">P^2</code> algorithm
          for weighted and unweighted samples. By default, the calculation is linear
          and unweighted, but quadratic and weighted variants are also provided.
          For further implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/extended_p_square_quantile_impl.html" title="Struct template extended_p_square_quantile_impl">extended_p_square_quantile_impl</a></code>.<br>分位数预估对加权和非加权样本使用了扩展的 <code class="literal">P^2</code> 算法。缺省情况下，计算是线性的和非加权的，不过也提供二次的和加权的的变体。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/extended_p_square_quantile_impl.html" title="Struct template extended_p_square_quantile_impl">extended_p_square_quantile_impl</a></code>.
        </p>
<p>
          All the variants share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">quantile</span></code>
          feature and can be extracted using the <code class="computeroutput"><span class="identifier">quantile</span><span class="special">()</span></code> extractor.<br>所有变体共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">quantile</span></code>
          特征，都可以用 <code class="computeroutput"><span class="identifier">quantile</span><span class="special">()</span></code> 提取器进行提取。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              weighted variants depend on <code class="computeroutput"><span class="identifier">weighted_extended_p_square</span></code>&nbsp;<br>加权的变体依赖于 <code class="computeroutput"><span class="identifier">weighted_extended_p_square</span></code>
              <br></p></dd><dd><p> unweighted variants depend on <code class="computeroutput"><span class="identifier">extended_p_square</span></code><br>非加权的变体依赖于 <code class="computeroutput"><span class="identifier">extended_p_square</span></code></p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">extended_p_square_quantile_quadratic</span></code>
              <br> <code class="computeroutput"><span class="identifier">weighted_extended_p_square_quantile</span></code>
              <br> <code class="computeroutput"><span class="identifier">weighted_extended_p_square_quantile_quadratic</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">extended_p_square</span><span class="special">::</span><span class="identifier">probabilities</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code> for the weighted
              variants<br><code class="computeroutput"><span class="identifier">weight</span></code> 对于加权的变体</p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N) 其中 N 为可能性的数量。
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.extended_p_square_quantile.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/extended_p_square_quantile.hpp&gt;">boost/accumulators/statistics/extended_p_square_quantile.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">extended_p_square_quantile</span><span class="special">&gt;</span> <span class="special">&gt;</span>
    <span class="identifier">accumulator_t</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_extended_p_square_quantile</span><span class="special">&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span>
    <span class="identifier">accumulator_t_weighted</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">extended_p_square_quantile</span><span class="special">(</span><span class="identifier">quadratic</span><span class="special">)&gt;</span> <span class="special">&gt;</span>
    <span class="identifier">accumulator_t_quadratic</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_extended_p_square_quantile</span><span class="special">(</span><span class="identifier">quadratic</span><span class="special">)&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span>
    <span class="identifier">accumulator_t_weighted_quadratic</span><span class="special">;</span>

<span class="comment">// tolerance 容许的误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>

<span class="comment">// a random number generator 随机数生成器<br></span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">array</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">&gt;</span> <span class="identifier">probs</span> <span class="special">=</span> <span class="special">{</span> <span class="number">0.990</span><span class="special">,</span> <span class="number">0.991</span><span class="special">,</span> <span class="number">0.992</span><span class="special">,</span> <span class="number">0.993</span><span class="special">,</span> <span class="number">0.994</span><span class="special">,</span> <br>                               <span class="number">0.995</span><span class="special">,</span> <span class="number">0.996</span><span class="special">,</span> <span class="number">0.997</span><span class="special">,</span> <span class="number">0.998</span><span class="special">,</span> <span class="number">0.999</span> <span class="special">};</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc</span><span class="special">(</span><span class="identifier">extended_p_square_probabilities</span> <span class="special">=</span> <span class="identifier">probs</span><span class="special">);</span>
<span class="identifier">accumulator_t_weighted</span> <span class="identifier">acc_weighted</span><span class="special">(</span><span class="identifier">extended_p_square_probabilities</span> <span class="special">=</span> <span class="identifier">probs</span><span class="special">);</span>
<span class="identifier">accumulator_t_quadratic</span> <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">extended_p_square_probabilities</span> <span class="special">=</span> <span class="identifier">probs</span><span class="special">);</span>
<span class="identifier">accumulator_t_weighted_quadratic</span> <span class="identifier">acc_weighted2</span><span class="special">(</span><span class="identifier">extended_p_square_probabilities</span> <span class="special">=</span> <span class="identifier">probs</span><span class="special">);</span>

<span class="keyword">for</span> <span class="special">(</span><span class="keyword">int</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">10000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">rng</span><span class="special">();</span>
    <span class="identifier">acc</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc_weighted</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.</span><span class="special">);</span>
    <span class="identifier">acc_weighted2</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.</span><span class="special">);</span>
<span class="special">}</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">probs</span><span class="special">.</span><span class="identifier">size</span><span class="special">()</span> <span class="special">-</span> <span class="number">1</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span>
        <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.99025</span> <span class="special">+</span> <span class="identifier">i</span><span class="special">*</span><span class="number">0.001</span><span class="special">)</span>
      <span class="special">,</span> <span class="number">0.99025</span> <span class="special">+</span> <span class="identifier">i</span><span class="special">*</span><span class="number">0.001</span>
      <span class="special">,</span> <span class="identifier">epsilon</span>
    <span class="special">);</span>
    <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span>
        <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.99025</span> <span class="special">+</span> <span class="identifier">i</span><span class="special">*</span><span class="number">0.001</span><span class="special">)</span>
      <span class="special">,</span> <span class="number">0.99025</span> <span class="special">+</span> <span class="identifier">i</span><span class="special">*</span><span class="number">0.001</span>
      <span class="special">,</span> <span class="identifier">epsilon</span>
    <span class="special">);</span>
    <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span>
        <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc_weighted</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.99025</span> <span class="special">+</span> <span class="identifier">i</span><span class="special">*</span><span class="number">0.001</span><span class="special">)</span>
      <span class="special">,</span> <span class="number">0.99025</span> <span class="special">+</span> <span class="identifier">i</span><span class="special">*</span><span class="number">0.001</span>
      <span class="special">,</span> <span class="identifier">epsilon</span>
    <span class="special">);</span>
    <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span>
        <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc_weighted2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.99025</span> <span class="special">+</span> <span class="identifier">i</span><span class="special">*</span><span class="number">0.001</span><span class="special">)</span>
      <span class="special">,</span> <span class="number">0.99025</span> <span class="special">+</span> <span class="identifier">i</span><span class="special">*</span><span class="number">0.001</span>
      <span class="special">,</span> <span class="identifier">epsilon</span>
    <span class="special">);</span>
<span class="special">}</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/extended_p_square_quantile_impl.html" title="Struct template extended_p_square_quantile_impl">extended_p_square_quantile_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.extended_p_square" title="extended_p_square"><code class="literal">extended_p_square</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_extended_p_square" title="weighted_extended_p_square"><code class="literal">weighted_extended_p_square</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.kurtosis"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.kurtosis" title="kurtosis">
        kurtosis</a>
</h4></div></div></div>
<p>
          The kurtosis of a sample distribution is defined as the ratio of the 4th
          central moment and the square of the 2nd central moment (the variance)
          of the samples, minus 3. The term <code class="literal">-3</code> is added in order
          to ensure that the normal distribution has zero kurtosis. For more implementation
          details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/kurtosis_impl.html" title="Struct template kurtosis_impl">kurtosis_impl</a><br></code>样本分布的峰度被定义为样本(变异)的4次中心矩与2次中心矩平方之比减3。这个 <code class="literal">-3</code> 是为了确保天上正态分布的峰度为0。更多的实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/kurtosis_impl.html" title="Struct template kurtosis_impl">kurtosis_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>sample-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">mean</span></code> <br> <code class="computeroutput"><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">3</span><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">4</span><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.kurtosis.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/kurtosis.hpp&gt;">boost/accumulators/statistics/kurtosis.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">kurtosis</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
    
<span class="identifier">acc</span><span class="special">(</span><span class="number">2</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">7</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">4</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">9</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">3</span><span class="special">);</span>

<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">5</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">159.</span><span class="special">/</span><span class="number">5.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">3</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1171.</span><span class="special">/</span><span class="number">5.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">4</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1863</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">kurtosis</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">-</span><span class="number">1.39965397924</span><span class="special">,</span> <span class="number">1e-6</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/kurtosis_impl.html" title="Struct template kurtosis_impl">kurtosis_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.mean" title="mean and variants"><code class="literal">mean</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.moment" title="moment"><code class="literal">moment</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.max"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.max" title="max">
        max</a>
</h4></div></div></div>
<p>
          Calculates the maximum value of all the samples.<br>计算所有样本中的最大值。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><em class="replaceable"><code>sample-type</code></em>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.max.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/max.hpp&gt;">boost/accumulators/statistics/max.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">max</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="special">(</span><span class="identifier">max</span><span class="special">)(</span><span class="identifier">acc</span><span class="special">));</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">0</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="special">(</span><span class="identifier">max</span><span class="special">)(</span><span class="identifier">acc</span><span class="special">));</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">2</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="special">(</span><span class="identifier">max</span><span class="special">)(</span><span class="identifier">acc</span><span class="special">));</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc"><li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/max_impl.html" title="Struct template max_impl">max_impl</a></code></li></ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.mean"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.mean" title="mean and variants">
        mean&nbsp;<span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Calculates the mean of samples, weights or variates. The calculation is
          either lazy (in the result extractor), or immediate (in the accumulator).
          The lazy implementation is the default. For more implementation details,
          see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/mean_impl.html" title="Struct template mean_impl">mean_impl</a></code>
          or. <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/immediate_mean_impl.html" title="Struct template immediate_mean_impl">immediate_mean_impl</a><br></code>计算样本、权重或变值的平均值。计算方法可以是延迟的(在结果提取器中计算)或立即的(在累加器中计算)。缺省实现是延迟方式。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/mean_impl.html" title="Struct template mean_impl">mean_impl</a></code> 或 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/immediate_mean_impl.html" title="Struct template immediate_mean_impl">immediate_mean_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd><p>对于样本，为 <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span></code> <br>对于权重，为 <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>weight-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span></code>
              <br>对于变值，为 <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span></code>
            </p></dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br>延迟方式的样本平均值依赖于 <code class="computeroutput"><span class="identifier">sum</span></code>
              <br>延迟方式的权重平均值依赖于&nbsp;<code class="computeroutput"><span class="identifier">sum_of_weights</span></code>
              <br>延迟方式的变值平均值依赖于&nbsp;<code class="computeroutput"><span class="identifier">sum_of_variates</span><span class="special">&lt;&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">mean_of_weights</span></code> <br>
              <code class="computeroutput"><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">immediate_mean</span></code>
              <br> <code class="computeroutput"><span class="identifier">immediate_mean_of_weights</span></code>
              <br> <code class="computeroutput"><span class="identifier">immediate_mean_of_variates</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.mean.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/mean.hpp&gt;">boost/accumulators/statistics/mean.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span>
    <span class="keyword">int</span>
  <span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span>
        <span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span>
      <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean_of_weights</span>
      <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;</span>
    <span class="special">&gt;</span>
  <span class="special">,</span> <span class="keyword">int</span> <br><span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">3</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">1u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">2.</span><span class="special">,</span> <span class="identifier">mean_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">3.</span><span class="special">,</span> <span class="special">(</span><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">)),</span> <span class="number">1e-5</span><span class="special">);</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">0</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">4</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">0.33333333333333333</span><span class="special">,</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">3.</span><span class="special">,</span> <span class="identifier">mean_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">3.5</span><span class="special">,</span> <span class="special">(</span><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">)),</span> <span class="number">1e-5</span><span class="special">);</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">9</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">8</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.33333333333333333</span><span class="special">,</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">3u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">20</span><span class="special">,</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">5.</span><span class="special">,</span> <span class="identifier">mean_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">5.</span><span class="special">,</span> <span class="special">(</span><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">)),</span> <span class="number">1e-5</span><span class="special">);</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span>
    <span class="keyword">int</span>
  <span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span>
        <span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span><span class="special">(</span><span class="identifier">immediate</span><span class="special">)</span>
      <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean_of_weights</span><span class="special">(</span><span class="identifier">immediate</span><span class="special">)</span>
      <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">immediate</span><span class="special">)</span>
    <span class="special">&gt;</span>
  <span class="special">,</span> <span class="keyword">int</span>
<span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">;</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">3</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">1u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">2.</span><span class="special">,</span> <span class="identifier">mean_of_weights</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">3.</span><span class="special">,</span> <span class="special">(</span><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">)),</span> <span class="number">1e-5</span><span class="special">);</span>
    
<span class="identifier">acc2</span><span class="special">(</span><span class="number">0</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">4</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">0.33333333333333333</span><span class="special">,</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">3.</span><span class="special">,</span> <span class="identifier">mean_of_weights</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">3.5</span><span class="special">,</span> <span class="special">(</span><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">)),</span> <span class="number">1e-5</span><span class="special">);</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">9</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">8</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.33333333333333333</span><span class="special">,</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">3u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">5.</span><span class="special">,</span> <span class="identifier">mean_of_weights</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">5.</span><span class="special">,</span> <span class="special">(</span><span class="identifier">mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">)),</span> <span class="number">1e-5</span><span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/mean_impl.html" title="Struct template mean_impl">mean_impl</a></code></li>
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/immediate_mean_impl.html" title="Struct template immediate_mean_impl">immediate_mean_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.median"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.median" title="median and variants">
        median&nbsp;<span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Median estimation based on the <code class="literal">P^2</code> quantile estimator,
          the density estimator, or the <code class="literal">P^2</code> cumulative distribution
          estimator. For more implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/median_impl.html" title="Struct template median_impl">median_impl</a></code>,
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/with_density_median_impl.html" title="Struct template with_density_median_impl">with_density_median_impl</a></code>,
          and <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/with_p_square_cumulative_distribution_median_impl.html" title="Struct template with_p_square_cumulative_distribution_median_impl">with_p_square_cumulative_distribution_median_impl</a></code>.<br>基于 <code class="literal">P^2</code> 分位数估算、密度估算或 <code class="literal">P^2</code> 累积分布估算的中值估算。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/median_impl.html" title="Struct template median_impl">median_impl</a></code>,
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/with_density_median_impl.html" title="Struct template with_density_median_impl">with_density_median_impl</a></code>, 和 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/with_p_square_cumulative_distribution_median_impl.html" title="Struct template with_p_square_cumulative_distribution_median_impl">with_p_square_cumulative_distribution_median_impl</a></code>.
        </p>
<p>
          The three median accumulators all satisfy the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">median</span></code>
          feature, and can all be extracted with the <code class="computeroutput"><span class="identifier">median</span><span class="special">()</span></code> extractor.<br>这三个中值估算累加器均满足 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">median</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">median</span><span class="special">()</span></code> 提取器进行提取。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">median</span></code> 依赖于 <code class="computeroutput"><span class="identifier">p_square_quantile_for_median</span></code>
              <br> <code class="computeroutput"><span class="identifier">with_density_median</span></code> 依赖于 <code class="computeroutput"><span class="identifier">count</span></code> 和
              <code class="computeroutput"><span class="identifier">density</span></code> <br> <code class="computeroutput"><span class="identifier">with_p_square_cumulative_distribution_median</span></code> 依赖于 <code class="computeroutput"><span class="identifier">p_square_cumulative_distribution</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">with_density_median</span></code>
              <br> <code class="computeroutput"><span class="identifier">with_p_square_cumulative_distribution_median</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">with_density_median</span></code> 要求 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">density</span><span class="special">::</span><span class="identifier">cache_size</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">density</span><span class="special">::</span><span class="identifier">num_bins</span></code>
              <br> <code class="computeroutput"><span class="identifier">with_p_square_cumulative_distribution_median</span></code> 要求 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">p_square_cumulative_distribution</span><span class="special">::</span><span class="identifier">num_cells</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.median.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/median.hpp&gt;">boost/accumulators/statistics/median.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// two random number generators 两个随机数生成器<br></span><span class="keyword">double</span> <span class="identifier">mu</span> <span class="special">=</span> <span class="number">1.</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma</span><span class="special">(</span><span class="identifier">mu</span><span class="special">,</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span>
    <span class="identifier">normal</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma</span><span class="special">);</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">median</span><span class="special">(</span><span class="identifier">with_p_square_quantile</span><span class="special">)</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">median</span><span class="special">(</span><span class="identifier">with_density</span><span class="special">)</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <br>    <span class="identifier">acc_dens</span><span class="special">(</span> <span class="identifier">density_cache_size</span> <span class="special">=</span> <span class="number">10000</span><span class="special">,</span> <span class="identifier">density_num_bins</span> <span class="special">=</span> <span class="number">1000</span> <span class="special">);</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">median</span><span class="special">(</span><span class="identifier">with_p_square_cumulative_distribution</span><span class="special">)</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <br>    <span class="identifier">acc_cdist</span><span class="special">(</span> <span class="identifier">p_square_cumulative_distribution_num_cells</span> <span class="special">=</span> <span class="number">100</span> <span class="special">);</span>
    
<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">normal</span><span class="special">();</span>
    <span class="identifier">acc</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc_dens</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc_cdist</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
<span class="special">}</span>

<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">median</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1.</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">median</span><span class="special">(</span><span class="identifier">acc_dens</span><span class="special">),</span> <span class="number">1.</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">median</span><span class="special">(</span><span class="identifier">acc_cdist</span><span class="special">),</span> <span class="number">3.</span><span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/median_impl.html" title="Struct template median_impl">median_impl</a></code></li>
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/with_density_median_impl.html" title="Struct template with_density_median_impl">with_density_median_impl</a></code></li>
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/with_p_square_cumulative_distribution_median_impl.html" title="Struct template with_p_square_cumulative_distribution_median_impl">with_p_square_cumulative_distribution_median_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.p_square_quantile" title="p_square_quantile and variants"><code class="literal">p_square_quantile</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.p_square_cumulative_distribution" title="p_square_cumulative_distribution"><code class="literal">p_square_cumulative_distribution</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.min"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.min" title="min">
        min</a>
</h4></div></div></div>
<p>
          Calculates the minimum value of all the samples.<br>计算所有样本中的最小值。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><em class="replaceable"><code>sample-type</code></em>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.min.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/min.hpp&gt;">boost/accumulators/statistics/min.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">min</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="special">(</span><span class="identifier">min</span><span class="special">)(</span><span class="identifier">acc</span><span class="special">));</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">0</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">0</span><span class="special">,</span> <span class="special">(</span><span class="identifier">min</span><span class="special">)(</span><span class="identifier">acc</span><span class="special">));</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">2</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">0</span><span class="special">,</span> <span class="special">(</span><span class="identifier">min</span><span class="special">)(</span><span class="identifier">acc</span><span class="special">));</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc"><li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/min_impl.html" title="Struct template min_impl">min_impl</a></code></li></ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.moment"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.moment" title="moment">
        moment</a>
</h4></div></div></div>
<p>
          Calculates the N-th moment of the samples, which is defined as the sum
          of the N-th power of the samples over the count of samples.<br>计算样本的N次矩，其定义为样本的N次方之和除以样本数量。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.moment.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/moment.hpp&gt;">boost/accumulators/statistics/moment.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc1</span><span class="special">;</span>

<span class="identifier">acc1</span><span class="special">(</span><span class="number">2</span><span class="special">);</span> <span class="comment">//    4<br></span><span class="identifier">acc1</span><span class="special">(</span><span class="number">4</span><span class="special">);</span> <span class="comment">//   16<br></span><span class="identifier">acc1</span><span class="special">(</span><span class="number">5</span><span class="special">);</span> <span class="comment">// + 25<br></span>         <span class="comment">// = 45 / 3 = 15<br></span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">15.</span><span class="special">,</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc1</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">5</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">;</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">2</span><span class="special">);</span> <span class="comment">//     32<br></span><span class="identifier">acc2</span><span class="special">(</span><span class="number">3</span><span class="special">);</span> <span class="comment">//    243<br></span><span class="identifier">acc2</span><span class="special">(</span><span class="number">4</span><span class="special">);</span> <span class="comment">//   1024<br></span><span class="identifier">acc2</span><span class="special">(</span><span class="number">5</span><span class="special">);</span> <span class="comment">// + 3125<br></span>         <span class="comment">// = 4424 / 4 = 1106<br></span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1106.</span><span class="special">,</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">5</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/moment_impl.html" title="Struct template moment_impl">moment_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.p_square_cumulative_distribution"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.p_square_cumulative_distribution" title="p_square_cumulative_distribution">
        p_square_cumulative_distribution</a>
</h4></div></div></div>
<p>
          Histogram calculation of the cumulative distribution with the <code class="literal">P^2</code>
          algorithm. For more implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/p_square_cumulative_distribution_impl.html" title="Struct template p_square_cumulative_distribution_impl">p_square_cumulative_distribution_impl</a></code>&nbsp;<br>用 <code class="literal">P^2</code>
          算法进行累积分布的直方图计算。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/p_square_cumulative_distribution_impl.html" title="Struct template p_square_cumulative_distribution_impl">p_square_cumulative_distribution_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span>
            <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
          <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
        <span class="special">&gt;</span>
    <span class="special">&gt;::</span><span class="identifier">iterator</span>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">p_square_cumulative_distribution</span><span class="special">::</span><span class="identifier">num_cells</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N) 其中 N 为 <code class="computeroutput"><span class="identifier">num_cells</span></code>
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.p_square_cumulative_distribution.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/p_square_cumulative_distribution.hpp&gt;">boost/accumulators/statistics/p_square_cumulative_distribution.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">3</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">p_square_cumulative_distribution</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">accumulator_t</span><span class="special">;</span>
    
<span class="identifier">accumulator_t</span> <span class="identifier">acc</span><span class="special">(</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">p_square_cumulative_distribution</span><span class="special">::</span><span class="identifier">num_cells</span> <span class="special">=</span> <span class="number">100</span><span class="special">);</span>

<span class="comment">// two random number generators 两个随机数生成器<br></span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma</span><span class="special">(</span><span class="number">0</span><span class="special">,</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma</span><span class="special">);</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">acc</span><span class="special">(</span><span class="identifier">normal</span><span class="special">());</span>
<span class="special">}</span>

<span class="keyword">typedef</span> <span class="identifier">iterator_range</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="keyword">double</span><span class="special">&gt;</span> <span class="special">&gt;::</span><span class="identifier">iterator</span> <span class="special">&gt;</span> <span class="identifier">histogram_type</span><span class="special">;</span>
<span class="identifier">histogram_type</span> <span class="identifier">histogram</span> <span class="special">=</span> <span class="identifier">p_square_cumulative_distribution</span><span class="special">(</span><span class="identifier">acc</span><span class="special">);</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">histogram</span><span class="special">.</span><span class="identifier">size</span><span class="special">();</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>   <br>    <span class="comment">// problem with small results: epsilon is relative (in percent), not absolute!<br>    // 结果较小的问题：epsilon 是相对的(百分比)，不是绝对的！<br></span>    <span class="keyword">if</span> <span class="special">(</span> <span class="identifier">histogram</span><span class="special">[</span><span class="identifier">i</span><span class="special">].</span><span class="identifier">second</span> <span class="special">&gt;</span> <span class="number">0.001</span> <span class="special">)</span>    <br>        <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="number">0.5</span> <span class="special">*</span> <span class="special">(</span><span class="number">1.0</span> <span class="special">+</span> <span class="identifier">erf</span><span class="special">(</span> <span class="identifier">histogram</span><span class="special">[</span><span class="identifier">i</span><span class="special">].</span><span class="identifier">first</span> <span class="special">/</span> <span class="identifier">sqrt</span><span class="special">(</span><span class="number">2.0</span><span class="special">)</span> <span class="special">)),</span> <span class="identifier">histogram</span><span class="special">[</span><span class="identifier">i</span><span class="special">].</span><span class="identifier">second</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="special">}</span>        <br></pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/p_square_cumulative_distribution_impl.html" title="Struct template p_square_cumulative_distribution_impl">p_square_cumulative_distribution_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.p_square_quantile"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.p_square_quantile" title="p_square_quantile and variants">
        p_square_quantile <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Single quantile estimation with the <code class="literal">P^2</code> algorithm. For
          more implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/p_square_quantile_impl.html" title="Struct template p_square_quantile_impl">p_square_quantile_impl</a><br></code>以 <code class="literal">P^2</code> 算法进行单分位数估算。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/p_square_quantile_impl.html" title="Struct template p_square_quantile_impl">p_square_quantile_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">p_square_quantile_for_median</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>, 缺省为 <code class="computeroutput"><span class="number">0.5</span></code>.
              (注：对于 <code class="computeroutput"><span class="identifier">p_square_quantile_for_median</span></code>, 参数 <code class="computeroutput"><span class="identifier">quantile_probability</span></code> 被忽略且设为 <code class="computeroutput"><span class="number">0.5</span></code>.)
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.p_square_quantile.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/p_square_quantile.hpp&gt;">boost/accumulators/statistics/p_square_quantile.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">p_square_quantile</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">accumulator_t</span><span class="special">;</span>

<span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>

<span class="comment">// a random number generator 随机数生成器<br></span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>

<span class="identifier">accumulator_t</span> <span class="identifier">acc0</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.001</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.01</span> <span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span>  <span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc3</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.25</span> <span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc4</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.5</span>  <span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc5</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.75</span> <span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc6</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span>  <span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc7</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.99</span> <span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc8</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">);</span>

<span class="keyword">for</span> <span class="special">(</span><span class="keyword">int</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">rng</span><span class="special">();</span>
    <span class="identifier">acc0</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc3</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc4</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc5</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc6</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc7</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc8</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
<span class="special">}</span>

<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">p_square_quantile</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">),</span> <span class="number">0.001</span><span class="special">,</span> <span class="number">15</span><span class="special">*</span><span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">p_square_quantile</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">),</span> <span class="number">0.01</span> <span class="special">,</span> <span class="number">5</span><span class="special">*</span><span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">p_square_quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">0.1</span>  <span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">p_square_quantile</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">),</span> <span class="number">0.25</span> <span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">p_square_quantile</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">),</span> <span class="number">0.5</span>  <span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">p_square_quantile</span><span class="special">(</span><span class="identifier">acc5</span><span class="special">),</span> <span class="number">0.75</span> <span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">p_square_quantile</span><span class="special">(</span><span class="identifier">acc6</span><span class="special">),</span> <span class="number">0.9</span>  <span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">p_square_quantile</span><span class="special">(</span><span class="identifier">acc7</span><span class="special">),</span> <span class="number">0.99</span> <span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">p_square_quantile</span><span class="special">(</span><span class="identifier">acc8</span><span class="special">),</span> <span class="number">0.999</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>    <br></pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/p_square_quantile_impl.html" title="Struct template p_square_quantile_impl">p_square_quantile_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.peaks_over_threshold"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.peaks_over_threshold" title="peaks_over_threshold and variants">
        peaks_over_threshold <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>

<p>
          Peaks Over Threshold method for quantile and tail mean estimation. For
          implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/peaks_over_threshold_impl.html" title="Struct template peaks_over_threshold_impl">peaks_over_threshold_impl</a></code>
          and <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/peaks_over_threshold_prob_impl.html" title="Struct template peaks_over_threshold_prob_impl">peaks_over_threshold_prob_impl</a></code>.<br>用于分位数和尾均值估算的高限峰值法(POT)。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/peaks_over_threshold_impl.html" title="Struct template peaks_over_threshold_impl">peaks_over_threshold_impl</a></code> 和 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/peaks_over_threshold_prob_impl.html" title="Struct template peaks_over_threshold_prob_impl">peaks_over_threshold_prob_impl</a></code>.
        </p>
<p>
          Both <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold</span></code> and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold_prob</span><span class="special">&lt;&gt;</span></code>
          satisfy the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_peaks_over_threshold</span></code> feature,
          and can be extracted with the <code class="computeroutput"><span class="identifier">peaks_over_threshold</span><span class="special">()</span></code> extractor. The result is a 3-tuple representing
          the fit parameters <code class="computeroutput"><span class="identifier">u_bar</span></code>,
          <code class="computeroutput"><span class="identifier">beta_bar</span></code> and <code class="computeroutput"><span class="identifier">xi_hat</span></code>.<br><code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold_prob</span><span class="special">&lt;&gt;</span></code>
          都满足 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_peaks_over_threshold</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">peaks_over_threshold</span><span class="special">()</span></code> 提取器进行提取。结果为一个3元组，分别表示合适参数 <code class="computeroutput"><span class="identifier">u_bar</span></code>,
          <code class="computeroutput"><span class="identifier">beta_bar</span></code> 和 <code class="computeroutput"><span class="identifier">xi_hat</span></code>.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">tuple</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span> <span class="comment">// u_bar<br></span>  <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span> <span class="comment">// beta_bar<br></span>  <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span> <span class="comment">// xi_hat<br></span><span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br>另外，<code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold_prob</span><span class="special">&lt;&gt;</span></code> 依赖于 <code class="computeroutput"><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">peaks_over_threshold_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold</span><span class="special">::</span><span class="identifier">threshold_value</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold_prob</span><span class="special">::</span><span class="identifier">threshold_probability</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.peaks_over_threshold.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/peaks_over_threshold.hpp&gt;">boost/accumulators/statistics/peaks_over_threshold.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<p>参见 <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.pot_quantile" title="pot_quantile and variants"><code class="literal">pot_quantile</code></a> 的例子。
        </p>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/peaks_over_threshold_impl.html" title="Struct template peaks_over_threshold_impl">peaks_over_threshold_impl</a></code></li>
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/peaks_over_threshold_prob_impl.html" title="Struct template peaks_over_threshold_prob_impl">peaks_over_threshold_prob_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail" title="tail"><code class="literal">tail</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.pot_quantile" title="pot_quantile and variants"><code class="literal">pot_quantile</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.pot_tail_mean" title="pot_tail_mean"><code class="literal">pot_tail_mean</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.pot_quantile"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.pot_quantile" title="pot_quantile and variants">
        pot_quantile <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Quantile estimation based on Peaks over Threshold method (for both left
          and right tails). For implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/pot_quantile_impl.html" title="Struct template pot_quantile_impl">pot_quantile_impl</a></code>.<br>基于高限峰值法(POT)的分位数估算(用于左右两端)。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/pot_quantile_impl.html" title="Struct template pot_quantile_impl">pot_quantile_impl</a></code>.
        </p>
<p>
          Both <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_quantile</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_quantile_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
          satisfy the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">quantile</span></code> feature and can be extracted
          using the <code class="computeroutput"><span class="identifier">quantile</span><span class="special">()</span></code>
          extractor.<br><code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_quantile</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_quantile_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 均满足 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">quantile</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">quantile</span><span class="special">()</span></code> 提取器进行提取。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">pot_quantile</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 依赖于 <code class="computeroutput"><span class="identifier">peaks_over_threshold</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">pot_quantile_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 依赖于 <code class="computeroutput"><span class="identifier">peaks_over_threshold_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">pot_quantile_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold</span><span class="special">::</span><span class="identifier">threshold_value</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold_prob</span><span class="special">::</span><span class="identifier">threshold_probability</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.pot_quantile.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/pot_quantile.hpp&gt;">boost/accumulators/statistics/pot_quantile.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1.</span><span class="special">;</span>

<span class="keyword">double</span> <span class="identifier">alpha</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">threshold_probability</span> <span class="special">=</span> <span class="number">0.99</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">threshold</span> <span class="special">=</span> <span class="number">3.</span><span class="special">;</span>

<span class="comment">// two random number generators 两个随机数生成器<br></span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma</span><span class="special">(</span><span class="number">0</span><span class="special">,</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">exponential_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">lambda</span><span class="special">(</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">exponential_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">exponential</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">lambda</span><span class="special">);</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;(</span><span class="identifier">with_threshold_value</span><span class="special">)&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc1</span><span class="special">(</span>
    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold</span><span class="special">::</span><span class="identifier">threshold_value</span> <span class="special">=</span> <span class="identifier">threshold</span>
<span class="special">);</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;(</span><span class="identifier">with_threshold_probability</span><span class="special">)&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">(</span>
    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="number">2000</span>
  <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold_prob</span><span class="special">::</span><span class="identifier">threshold_probability</span> <span class="special">=</span> <span class="identifier">threshold_probability</span>
<span class="special">);</span>

<span class="identifier">threshold_probability</span> <span class="special">=</span> <span class="number">0.995</span><span class="special">;</span>
<span class="identifier">threshold</span> <span class="special">=</span> <span class="number">5.</span><span class="special">;</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;(</span><span class="identifier">with_threshold_value</span><span class="special">)&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc3</span><span class="special">(</span>
    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold</span><span class="special">::</span><span class="identifier">threshold_value</span> <span class="special">=</span> <span class="identifier">threshold</span>
<span class="special">);</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;(</span><span class="identifier">with_threshold_probability</span><span class="special">)&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc4</span><span class="special">(</span>
    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="number">2000</span>
  <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold_prob</span><span class="special">::</span><span class="identifier">threshold_probability</span> <span class="special">=</span> <span class="identifier">threshold_probability</span>
<span class="special">);</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">normal</span><span class="special">();</span>
    <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
<span class="special">}</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">exponential</span><span class="special">();</span>
    <span class="identifier">acc3</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc4</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
<span class="special">}</span>

<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="identifier">alpha</span><span class="special">),</span> <span class="number">3.090232</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="identifier">alpha</span><span class="special">),</span> <span class="number">3.090232</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>  <br><br><span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="identifier">alpha</span><span class="special">),</span> <span class="number">6.908</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="identifier">alpha</span><span class="special">),</span> <span class="number">6.908</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>  <br></pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/pot_quantile_impl.html" title="Struct template pot_quantile_impl">pot_quantile_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.peaks_over_threshold" title="peaks_over_threshold and variants"><code class="literal">peaks_over_threshold</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.pot_tail_mean"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.pot_tail_mean" title="pot_tail_mean">
        pot_tail_mean</a>
</h4></div></div></div>
<p>
          Estimation of the (coherent) tail mean based on the peaks over threshold
          method (for both left and right tails). For inplementation details, see
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/pot_tail_mean_impl.html" title="Struct template pot_tail_mean_impl">pot_tail_mean_impl</a></code>.<br>基于POT的(连续)尾均值估算(用于左右两端)。更多实现细节，请见
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/pot_tail_mean_impl.html" title="Struct template pot_tail_mean_impl">pot_tail_mean_impl</a></code>.
        </p>
<p>
          Both <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_tail_mean</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_tail_mean_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
          satisfy the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_mean</span></code> feature and can be extracted
          using the <code class="computeroutput"><span class="identifier">tail_mean</span><span class="special">()</span></code>
          extractor.<br><code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_tail_mean</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">pot_tail_mean_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 均满足 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_mean</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">tail_mean</span><span class="special">()</span></code>
          提取器进行提取。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">pot_tail_mean</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 依赖于 <code class="computeroutput"><span class="identifier">peaks_over_threshold</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 于 <code class="computeroutput"><span class="identifier">pot_quantile</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> <br> <code class="computeroutput"><span class="identifier">pot_tail_mean_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 依赖于 <code class="computeroutput"><span class="identifier">peaks_over_threshold_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">pot_quantile_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">pot_tail_mean_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold</span><span class="special">::</span><span class="identifier">threshold_value</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold_prob</span><span class="special">::</span><span class="identifier">threshold_probability</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.pot_tail_mean.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/pot_tail_mean.hpp&gt;">boost/accumulators/statistics/pot_tail_mean.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// TODO 待完成<br></span></pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/pot_tail_mean_impl.html" title="Struct template pot_tail_mean_impl">pot_tail_mean_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.peaks_over_threshold" title="peaks_over_threshold and variants"><code class="literal">peaks_over_threshold</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.pot_quantile" title="pot_quantile and variants"><code class="literal">pot_quantile</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.skewness"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.skewness" title="skewness">
        skewness</a>
</h4></div></div></div>
<p>
          The skewness of a sample distribution is defined as the ratio of the 3rd
          central moment and the <code class="literal">3/2</code>-th power of the 2nd central
          moment (the variance) of the sampless 3. For implementation details, see
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/skewness_impl.html" title="Struct template skewness_impl">skewness_impl</a></code>.<br>样本分布的偏度被定义为样本(变异)的3次中心矩与2次中心矩的<code class="literal">3/2</code>次方之比。更多实现细节，请见
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/skewness_impl.html" title="Struct template skewness_impl">skewness_impl</a></code>.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>sample-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">mean</span></code> <br> <code class="computeroutput"><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">3</span><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.skewness.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/skewness.hpp&gt;">boost/accumulators/statistics/skewness.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">skewness</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">;</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">2</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">7</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">4</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">9</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">3</span><span class="special">);</span>

<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">5</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">159.</span><span class="special">/</span><span class="number">5.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">3</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1171.</span><span class="special">/</span><span class="number">5.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">skewness</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">0.406040288214</span><span class="special">,</span> <span class="number">1e-6</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/skewness_impl.html" title="Struct template skewness_impl">skewness_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.mean" title="mean and variants"><code class="literal">mean</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.moment" title="moment"><code class="literal">moment</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.sum"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants">
        sum <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          For summing the samples, weights or variates.<br>用于对样本、权重或变值进行求和。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd><p>
              <code class="computeroutput"><em class="replaceable"><code>sample-type</code></em></code> 对于样本求和<br> <code class="computeroutput"><em class="replaceable"><code>weight-type</code></em></code> 对于权重求和<br> <code class="computeroutput"><em class="replaceable"><code>variate-type</code></em></code>&nbsp;对于变值求和
            </p></dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum_of_weights</span></code>
              <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum_of_variates</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>&nbsp;对于权重求和<br> <code class="computeroutput"><em class="replaceable"><code>variate-tag</code></em></code>&nbsp;对于变值求和
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.sum.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/sum.hpp&gt;">boost/accumulators/statistics/sum.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span>
    <span class="keyword">int</span>
  <span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span>
        <span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum</span>
      <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum_of_weights</span>
      <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">sum_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;</span>
    <span class="special">&gt;</span>
  <span class="special">,</span> <span class="keyword">int</span>
<span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">3</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>  <span class="comment">// 加权样本 = 1 * 2<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">3</span><span class="special">,</span> <span class="identifier">sum_of_variates</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">6</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">10</span><span class="special">,</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span> <span class="comment">// </span><span class="comment">加权样本</span><span class="comment"> = 2 * 4<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">6</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">9</span><span class="special">,</span> <span class="identifier">sum_of_variates</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">3</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">6</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">9</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">28</span><span class="special">,</span> <span class="identifier">sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span> <span class="comment">// </span><span class="comment">加权样本</span><span class="comment"> = 3 * 6<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">12</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">18</span><span class="special">,</span> <span class="identifier">sum_of_variates</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc"><li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/sum_impl.html" title="Struct template sum_impl">sum_impl</a></code></li></ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.tail"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail" title="tail">
        tail</a>
</h4></div></div></div>
<p>
          Tracks the largest or smallest <code class="literal">N</code> values. <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>
          tracks the largest <code class="literal">N</code>, and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code> tracks the smallest. The parameter
          <code class="literal">N</code> is specified with the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code> initialization parameter.
          For implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_impl.html" title="Struct template tail_impl">tail_impl</a></code>.<br>跟踪最大或最小的 <code class="literal">N</code> 个值。<code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code> 跟踪最大的 <code class="literal">N</code> 个，而 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code> 则跟踪最小的。参数
          <code class="literal">N</code> 以初始化参数 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code> 指定。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_impl.html" title="Struct template tail_impl">tail_impl</a></code>.
        </p>
<p>
          Both <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>
          and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>
          satisfy the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_tail</span></code> feature and can be extracted
          with the <code class="computeroutput"><span class="identifier">tail</span><span class="special">()</span></code>
          extractor.<br><code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code> 均满足 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_tail</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">tail</span><span class="special">()</span></code> 提取器进行提取。.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">reverse_iterator</span><span class="special">&lt;</span>
        <span class="identifier">boost</span><span class="special">::</span><span class="identifier">permutation_iterator</span><span class="special">&lt;</span>
            <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">&gt;::</span><span class="identifier">const_iterator</span>  <span class="comment">// samples 样本<br></span>          <span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">iterator</span>          <span class="comment">// indices 索引<br></span>        <span class="special">&gt;</span>
    <span class="special">&gt;</span>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">abstract_tail</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(log N), 其中 N 为缓存大小
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N log N), 其中 N 为缓存大小
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.tail.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/tail.hpp&gt;">boost/accumulators/statistics/tail.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<p>参见 <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate" title="tail_variate"><code class="literal">tail_variate</code></a> 的例子。
        </p>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_impl.html" title="Struct template tail_impl">tail_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate" title="tail_variate"><code class="literal">tail_variate</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.coherent_tail_mean"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.coherent_tail_mean" title="coherent_tail_mean">
        coherent_tail_mean</a>
</h4></div></div></div>
<p>
          Estimation of the coherent tail mean based on order statistics (for both
          left and right tails). The left coherent tail mean feature is <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>,
          and the right choherent tail mean feature is <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>. They both share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_mean</span></code> feature and can be extracted
          with the <code class="computeroutput"><span class="identifier">tail_mean</span><span class="special">()</span></code>
          extractor. For more implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/coherent_tail_mean_impl.html" title="Struct template coherent_tail_mean_impl">coherent_tail_mean_impl</a></code>&nbsp;<br>基于次序统计估算连续尾均值(用于左右两端)。左端连续尾均值特征为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>，而右端连续尾均值特征为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>。两者共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_mean</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">tail_mean</span><span class="special">()</span></code>
          提取器进行提取。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/coherent_tail_mean_impl.html" title="Struct template coherent_tail_mean_impl">coherent_tail_mean_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">quantile</span></code> <br> <code class="computeroutput"><span class="identifier">non_coherent_tail_mean</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(log N), 其中 N 为缓存大小
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N log N),&nbsp;其中 N 为缓存大小
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.tail_mean.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/tail_mean.hpp&gt;">boost/accumulators/statistics/tail_mean.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<p>参见 <a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_tail_mean" title="non_coherent_tail_mean"><code class="literal">non_coherent_tail_mean</code></a> 的例子。
        </p>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/coherent_tail_mean_impl.html" title="Struct template coherent_tail_mean_impl">coherent_tail_mean_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.extended_p_square_quantile" title="extended_p_square_quantile and variants"><code class="literal">extended_p_square_quantile</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.pot_quantile" title="pot_quantile and variants"><code class="literal">pot_quantile</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_quantile" title="tail_quantile"><code class="literal">tail_quantile</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_tail_mean" title="non_coherent_tail_mean"><code class="literal">non_coherent_tail_mean</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_tail_mean"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_tail_mean" title="non_coherent_tail_mean">
        non_coherent_tail_mean</a>
</h4></div></div></div>
<p>
          Estimation of the (non-coherent) tail mean based on order statistics (for
          both left and right tails). The left non-coherent tail mean feature is
          <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>,
          and the right non-choherent tail mean feature is <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>. They both share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_non_coherent_tail_mean</span></code> feature
          and can be extracted with the <code class="computeroutput"><span class="identifier">non_coherent_tail_mean</span><span class="special">()</span></code> extractor. For more implementation details,
          see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/non_coherent_tail_mean_impl.html" title="Struct template non_coherent_tail_mean_impl">non_coherent_tail_mean_impl</a></code>&nbsp;<br>基于次序统计估算(松散)尾均值(用于左右两端)。左端松散尾均值的特征为
          <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>，而右端松散尾均值的特征为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>。它们共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_non_coherent_tail_mean</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">non_coherent_tail_mean</span><span class="special">()</span></code> 提取器进行提取。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/non_coherent_tail_mean_impl.html" title="Struct template non_coherent_tail_mean_impl">non_coherent_tail_mean_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">abstract_non_coherent_tail_mean</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(log N),&nbsp;其中 N 为缓存大小
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N log N),&nbsp;其中 N 为缓存大小
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.tail_mean.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/tail_mean.hpp&gt;">boost/accumulators/statistics/tail_mean.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>

<span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">n</span> <span class="special">=</span> <span class="number">100000</span><span class="special">;</span> <span class="comment">// number of MC steps  MC步数<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">c</span> <span class="special">=</span>  <span class="number">10000</span><span class="special">;</span> <span class="comment">// cache size  缓存大小<br></span>
<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">accumulator_t_right1</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">accumulator_t_left1</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">accumulator_t_right2</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">coherent_tail_mean</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">accumulator_t_left2</span><span class="special">;</span>

<span class="identifier">accumulator_t_right1</span> <span class="identifier">acc0</span><span class="special">(</span> <span class="identifier">right_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_t_left1</span> <span class="identifier">acc1</span><span class="special">(</span> <span class="identifier">left_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_t_right2</span> <span class="identifier">acc2</span><span class="special">(</span> <span class="identifier">right_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_t_left2</span> <span class="identifier">acc3</span><span class="special">(</span> <span class="identifier">left_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>

<span class="comment">// a random number generator 随机数生成器<br></span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">n</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">rng</span><span class="special">();</span>
    <span class="identifier">acc0</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
    <span class="identifier">acc3</span><span class="special">(</span><span class="identifier">sample</span><span class="special">);</span>
<span class="special">}</span>

<span class="comment">// check uniform distribution 检查均衡分布<br></span><span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_tail_mean</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.95</span><span class="special">),</span> <span class="number">0.975</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_tail_mean</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.975</span><span class="special">),</span> <span class="number">0.9875</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_tail_mean</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.99</span><span class="special">),</span> <span class="number">0.995</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_tail_mean</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">),</span> <span class="number">0.9995</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_tail_mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.05</span><span class="special">),</span> <span class="number">0.025</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_tail_mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.025</span><span class="special">),</span> <span class="number">0.0125</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_tail_mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.01</span><span class="special">),</span> <span class="number">0.005</span><span class="special">,</span> <span class="number">5</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_tail_mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.001</span><span class="special">),</span> <span class="number">0.0005</span><span class="special">,</span> <span class="number">10</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">tail_mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.95</span><span class="special">),</span> <span class="number">0.975</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">tail_mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.975</span><span class="special">),</span> <span class="number">0.9875</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">tail_mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.99</span><span class="special">),</span> <span class="number">0.995</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">tail_mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">),</span> <span class="number">0.9995</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">tail_mean</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.05</span><span class="special">),</span> <span class="number">0.025</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">tail_mean</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.025</span><span class="special">),</span> <span class="number">0.0125</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">tail_mean</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.01</span><span class="special">),</span> <span class="number">0.005</span><span class="special">,</span> <span class="number">5</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">tail_mean</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.001</span><span class="special">),</span> <span class="number">0.0005</span><span class="special">,</span> <span class="number">10</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/non_coherent_tail_mean_impl.html" title="Struct template non_coherent_tail_mean_impl">non_coherent_tail_mean_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail" title="tail"><code class="literal">tail</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.tail_quantile"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_quantile" title="tail_quantile">
        tail_quantile</a>
</h4></div></div></div>
<p>
          Tail quantile estimation based on order statistics (for both left and right
          tails). The left tail quantile feature is <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>, and the right tail quantile feature
          is <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>.
          They both share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">quantile</span></code>
          feature and can be extracted with the <code class="computeroutput"><span class="identifier">quantile</span><span class="special">()</span></code> extractor. For more implementation details,
          see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_quantile_impl.html" title="Struct template tail_quantile_impl">tail_quantile_impl</a></code>&nbsp;<br>基于次序统计的尾部分位数估算(用于左右两端)。左端尾部分位数的特征为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>，右端尾部分位数的特征为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>。它们共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">quantile</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">quantile</span><span class="special">()</span></code> 提取器进行提取。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_quantile_impl.html" title="Struct template tail_quantile_impl">tail_quantile_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><em class="replaceable"><code>sample-type</code></em>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(log N),&nbsp;其中 N 为缓存大小
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N log N),&nbsp;其中 N 为缓存大小
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.tail_quantile.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/tail_quantile.hpp&gt;">boost/accumulators/statistics/tail_quantile.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>

<span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">n</span> <span class="special">=</span> <span class="number">100000</span><span class="special">;</span> <span class="comment">// number of MC steps  MC步数<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">c</span> <span class="special">=</span>  <span class="number">10000</span><span class="special">;</span> <span class="comment">// cache size  缓存大小<br></span>    <br><span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">accumulator_t_right</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">accumulator_t_left</span><span class="special">;</span>

<span class="identifier">accumulator_t_right</span> <span class="identifier">acc0</span><span class="special">(</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_t_right</span> <span class="identifier">acc1</span><span class="special">(</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_t_left</span>  <span class="identifier">acc2</span><span class="special">(</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_t_left</span>  <span class="identifier">acc3</span><span class="special">(</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>

<span class="comment">// two random number generators 两个随机数生成器<br></span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma</span><span class="special">(</span><span class="number">0</span><span class="special">,</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma</span><span class="special">);</span>
                
<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">n</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample1</span> <span class="special">=</span> <span class="identifier">rng</span><span class="special">();</span>
    <span class="keyword">double</span> <span class="identifier">sample2</span> <span class="special">=</span> <span class="identifier">normal</span><span class="special">();</span>
    <span class="identifier">acc0</span><span class="special">(</span><span class="identifier">sample1</span><span class="special">);</span>
    <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">sample2</span><span class="special">);</span>
    <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">sample1</span><span class="special">);</span>
    <span class="identifier">acc3</span><span class="special">(</span><span class="identifier">sample2</span><span class="special">);</span>
<span class="special">}</span>

<span class="comment">// check uniform distribution 检查均衡分布<br></span><span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.95</span> <span class="special">),</span> <span class="number">0.95</span><span class="special">,</span>  <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.975</span><span class="special">),</span> <span class="number">0.975</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.99</span> <span class="special">),</span> <span class="number">0.99</span><span class="special">,</span>  <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">),</span> <span class="number">0.999</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span>  <span class="special">=</span> <span class="number">0.05</span> <span class="special">),</span> <span class="number">0.05</span><span class="special">,</span>  <span class="number">2</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span>  <span class="special">=</span> <span class="number">0.025</span><span class="special">),</span> <span class="number">0.025</span><span class="special">,</span> <span class="number">2</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span>  <span class="special">=</span> <span class="number">0.01</span> <span class="special">),</span> <span class="number">0.01</span><span class="special">,</span>  <span class="number">3</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span>  <span class="special">=</span> <span class="number">0.001</span><span class="special">),</span> <span class="number">0.001</span><span class="special">,</span> <span class="number">20</span> <span class="special">);</span>

<span class="comment">// check standard normal distribution 检查标准正态分布<br></span><span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.975</span><span class="special">),</span>  <span class="number">1.959963</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">),</span>  <span class="number">3.090232</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span>  <span class="special">=</span> <span class="number">0.025</span><span class="special">),</span> <span class="special">-</span><span class="number">1.959963</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span>  <span class="special">=</span> <span class="number">0.001</span><span class="special">),</span> <span class="special">-</span><span class="number">3.090232</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_quantile_impl.html" title="Struct template tail_quantile_impl">tail_quantile_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail" title="tail"><code class="literal">tail</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate" title="tail_variate">
        tail_variate</a>
</h4></div></div></div>
<p>
          Tracks the covariates of largest or smallest <code class="literal">N</code> samples.
          <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span> <span class="identifier">right</span><span class="special">&gt;</span></code> tracks the covariate associated with
          <em class="replaceable"><code>variate-tag</code></em> for the largest <code class="literal">N</code>, and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span>
          <span class="identifier">left</span><span class="special">&gt;</span></code>
          for the smallest. The parameter <code class="literal">N</code> is specified with
          the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
          initialization parameter. For implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_variate_impl.html" title="Struct template tail_variate_impl">tail_variate_impl</a></code>.<br>跟踪最大或最小的 <code class="literal">N</code> 个样本的协变量。<code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span> <span class="identifier">right</span><span class="special">&gt;</span></code> 跟踪最大 <code class="literal">N</code> 个样本的与
          <em class="replaceable"><code>variate-tag</code></em> 相关联的协变量<code class="literal"></code>，而 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span>
          <span class="identifier">left</span><span class="special">&gt;</span></code> 则用于最小样本。参数 <code class="literal">N</code> 由 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
          初始化参数指定。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_variate_impl.html" title="Struct template tail_variate_impl">tail_variate_impl</a></code>.
        </p>
<p>
          Both <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span> <span class="identifier">right</span><span class="special">&gt;</span></code> and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span>
          <span class="identifier">left</span><span class="special">&gt;</span></code>
          satisfy the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_tail_variate</span></code> feature and can
          be extracted with the <code class="computeroutput"><span class="identifier">tail_variate</span><span class="special">()</span></code> extractor.<br><code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span> <span class="identifier">right</span><span class="special">&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span>
          <span class="identifier">left</span><span class="special">&gt;</span></code>
          均满足 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_tail_variate</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">tail_variate</span><span class="special">()</span></code> 提取器进行提取。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">reverse_iterator</span><span class="special">&lt;</span>
        <span class="identifier">boost</span><span class="special">::</span><span class="identifier">permutation_iterator</span><span class="special">&lt;</span>
            <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">&gt;::</span><span class="identifier">const_iterator</span> <span class="comment">// variates 变值<br></span>          <span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">iterator</span>          <span class="comment">// indices 索引<br></span>        <span class="special">&gt;</span>
    <span class="special">&gt;</span>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">abstract_tail_variate</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(log N),&nbsp;其中 N 为缓存大小
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N log N),&nbsp;其中 N 为缓存大小
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.tail_variate.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/tail_variate.hpp&gt;">boost/accumulators/statistics/tail_variate.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">,</span> <span class="identifier">right</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">(</span>
    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="number">4</span>
<span class="special">);</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">8</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">3</span><span class="special">);</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">8</span><span class="special">});</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail_variate</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">3</span><span class="special">});</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">16</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">16</span><span class="special">,</span> <span class="number">8</span><span class="special">});</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail_variate</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">1</span><span class="special">,</span> <span class="number">3</span><span class="special">});</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">12</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">4</span><span class="special">);</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">16</span><span class="special">,</span> <span class="number">12</span><span class="special">,</span> <span class="number">8</span><span class="special">});</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail_variate</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">1</span><span class="special">,</span> <span class="number">4</span><span class="special">,</span> <span class="number">3</span><span class="special">});</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">24</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">5</span><span class="special">);</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">24</span><span class="special">,</span> <span class="number">16</span><span class="special">,</span> <span class="number">12</span><span class="special">,</span> <span class="number">8</span><span class="special">});</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail_variate</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">5</span><span class="special">,</span> <span class="number">1</span><span class="special">,</span> <span class="number">4</span><span class="special">,</span> <span class="number">3</span><span class="special">});</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">9</span><span class="special">);</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">24</span><span class="special">,</span> <span class="number">16</span><span class="special">,</span> <span class="number">12</span><span class="special">,</span> <span class="number">8</span><span class="special">});</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail_variate</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">5</span><span class="special">,</span> <span class="number">1</span><span class="special">,</span> <span class="number">4</span><span class="special">,</span> <span class="number">3</span><span class="special">});</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">9</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">7</span><span class="special">);</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">24</span><span class="special">,</span>  <span class="number">16</span><span class="special">,</span> <span class="number">12</span><span class="special">,</span> <span class="number">9</span><span class="special">});</span>
<span class="identifier">CHECK_RANGE_EQUAL</span><span class="special">(</span><span class="identifier">tail_variate</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">{</span><span class="number">5</span><span class="special">,</span> <span class="number">1</span><span class="special">,</span> <span class="number">4</span><span class="special">,</span> <span class="number">7</span><span class="special">});</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_variate_impl.html" title="Struct template tail_variate_impl">tail_variate_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail" title="tail"><code class="literal">tail</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate_means"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate_means" title="tail_variate_means and variants">
        tail_variate_means <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Estimation of the absolute and relative tail variate means (for both left
          and right tails). The absolute tail variate means has the feature <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">absolute_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
          and the relative tail variate mean has the feature <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">relative_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span>
          <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>. All absolute tail variate
          mean features share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_absolute_tail_variate_means</span></code>
          feature and can be extracted with the <code class="computeroutput"><span class="identifier">tail_variate_means</span><span class="special">()</span></code> extractor. All the relative tail variate
          mean features share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_relative_tail_variate_means</span></code>
          feature and can be extracted with the <code class="computeroutput"><span class="identifier">relative_tail_variate_means</span><span class="special">()</span></code> extractor.<br>估算绝对和相对的尾部变值平均值(用于左右两端)。绝对尾部变值平均值具有特征 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">absolute_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>，而相对尾部变值平均值具有特征 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">relative_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span>
          <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>。所有绝对尾部变值平均值共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_absolute_tail_variate_means</span></code> 特征并可以用 <code class="computeroutput"><span class="identifier">tail_variate_means</span><span class="special">()</span></code> 提取器进行提取。所有相对尾部变值平均值共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_relative_tail_variate_means</span></code> 特征并可以用 <code class="computeroutput"><span class="identifier">relative_tail_variate_means</span><span class="special">()</span></code> 提取器进行提取。
        </p>
<p>更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_variate_means_impl.html" title="Struct template tail_variate_means_impl">tail_variate_means_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span>
        <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
    <span class="special">&gt;::</span><span class="identifier">iterator</span>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">non_coherent_tail_mean</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span> <em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">absolute_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">relative_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(log N),&nbsp;其中 N 为缓存大小
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N log N),&nbsp;其中 N 为缓存大小
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.tail_variate_means.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/tail_variate_means.hpp&gt;">boost/accumulators/statistics/tail_variate_means.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">c</span> <span class="special">=</span> <span class="number">5</span><span class="special">;</span> <span class="comment">// cache size 缓存大小<br></span>
<span class="keyword">typedef</span> <span class="keyword">double</span> <span class="identifier">variate_type</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">variate_type</span><span class="special">&gt;</span> <span class="identifier">variate_set_type</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span>
    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate_means</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">,</span> <span class="identifier">variate_set_type</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">relative</span><span class="special">)&gt;,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span> <span class="special">&gt;</span>
<span class="identifier">accumulator_t1</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span>
    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate_means</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">,</span> <span class="identifier">variate_set_type</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">absolute</span><span class="special">)&gt;,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span> <span class="special">&gt;</span>
<span class="identifier">accumulator_t2</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span>
    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate_means</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">,</span> <span class="identifier">variate_set_type</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">relative</span><span class="special">)&gt;,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span> <span class="special">&gt;</span>
<span class="identifier">accumulator_t3</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span>
    <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail_variate_means</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">,</span> <span class="identifier">variate_set_type</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">absolute</span><span class="special">)&gt;,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span> <span class="special">&gt;</span>
<span class="identifier">accumulator_t4</span><span class="special">;</span>

<span class="identifier">accumulator_t1</span> <span class="identifier">acc1</span><span class="special">(</span> <span class="identifier">right_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_t2</span> <span class="identifier">acc2</span><span class="special">(</span> <span class="identifier">right_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_t3</span> <span class="identifier">acc3</span><span class="special">(</span> <span class="identifier">left_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_t4</span> <span class="identifier">acc4</span><span class="special">(</span> <span class="identifier">left_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>

<span class="identifier">variate_set_type</span> <span class="identifier">cov1</span><span class="special">,</span> <span class="identifier">cov2</span><span class="special">,</span> <span class="identifier">cov3</span><span class="special">,</span> <span class="identifier">cov4</span><span class="special">,</span> <span class="identifier">cov5</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">c1</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span> <span class="number">10.</span><span class="special">,</span> <span class="number">20.</span><span class="special">,</span> <span class="number">30.</span><span class="special">,</span> <span class="number">40.</span> <span class="special">};</span> <span class="comment">// 100<br></span><span class="keyword">double</span> <span class="identifier">c2</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span> <span class="number">26.</span><span class="special">,</span>  <span class="number">4.</span><span class="special">,</span> <span class="number">17.</span><span class="special">,</span>  <span class="number">3.</span> <span class="special">};</span> <span class="comment">// 50<br></span><span class="keyword">double</span> <span class="identifier">c3</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span> <span class="number">46.</span><span class="special">,</span> <span class="number">64.</span><span class="special">,</span> <span class="number">40.</span><span class="special">,</span> <span class="number">50.</span> <span class="special">};</span> <span class="comment">// 200<br></span><span class="keyword">double</span> <span class="identifier">c4</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span>  <span class="number">1.</span><span class="special">,</span>  <span class="number">3.</span><span class="special">,</span> <span class="number">70.</span><span class="special">,</span>  <span class="number">6.</span> <span class="special">};</span> <span class="comment">// 80<br></span><span class="keyword">double</span> <span class="identifier">c5</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span>  <span class="number">2.</span><span class="special">,</span>  <span class="number">2.</span><span class="special">,</span>  <span class="number">2.</span><span class="special">,</span> <span class="number">14.</span> <span class="special">};</span> <span class="comment">// 20<br></span><span class="identifier">cov1</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c1</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c1</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>
<span class="identifier">cov2</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c2</span><span class="special">,</span> <span class="identifier">c2</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c2</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>
<span class="identifier">cov3</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c3</span><span class="special">,</span> <span class="identifier">c3</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c3</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>
<span class="identifier">cov4</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c4</span><span class="special">,</span> <span class="identifier">c4</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c4</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>
<span class="identifier">cov5</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c5</span><span class="special">,</span> <span class="identifier">c5</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c5</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>            <br><br><span class="identifier">acc1</span><span class="special">(</span><span class="number">100.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov1</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span> <span class="number">50.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov2</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span><span class="number">200.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov3</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span> <span class="number">80.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov4</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span> <span class="number">20.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov5</span><span class="special">);</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">100.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov1</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span> <span class="number">50.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov2</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">200.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov3</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span> <span class="number">80.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov4</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span> <span class="number">20.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov5</span><span class="special">);</span>

<span class="identifier">acc3</span><span class="special">(</span><span class="number">100.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov1</span><span class="special">);</span>
<span class="identifier">acc3</span><span class="special">(</span> <span class="number">50.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov2</span><span class="special">);</span>
<span class="identifier">acc3</span><span class="special">(</span><span class="number">200.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov3</span><span class="special">);</span>
<span class="identifier">acc3</span><span class="special">(</span> <span class="number">80.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov4</span><span class="special">);</span>
<span class="identifier">acc3</span><span class="special">(</span> <span class="number">20.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov5</span><span class="special">);</span>

<span class="identifier">acc4</span><span class="special">(</span><span class="number">100.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov1</span><span class="special">);</span>
<span class="identifier">acc4</span><span class="special">(</span> <span class="number">50.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov2</span><span class="special">);</span>
<span class="identifier">acc4</span><span class="special">(</span><span class="number">200.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov3</span><span class="special">);</span>
<span class="identifier">acc4</span><span class="special">(</span> <span class="number">80.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov4</span><span class="special">);</span>
<span class="identifier">acc4</span><span class="special">(</span> <span class="number">20.</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov5</span><span class="special">);</span>

<span class="comment">// check relative risk contributions 检查相对风险分布<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>     <span class="special">),</span> <span class="number">14.</span><span class="special">/</span><span class="number">75.</span> <span class="special">);</span> <span class="comment">// (10 + 46) / 300 = 14/75<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span>  <span class="number">7.</span><span class="special">/</span><span class="number">25.</span> <span class="special">);</span> <span class="comment">// (20 + 64) / 300 =  7/25<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span>  <span class="number">7.</span><span class="special">/</span><span class="number">30.</span> <span class="special">);</span> <span class="comment">// (30 + 40) / 300 =  7/30<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span>  <span class="number">3.</span><span class="special">/</span><span class="number">10.</span> <span class="special">);</span> <span class="comment">// (40 + 50) / 300 =  3/10<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="number">14.</span><span class="special">/</span><span class="number">35.</span> <span class="special">);</span> <span class="comment">// (26 +  2) /  70 = 14/35<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span>  <span class="number">3.</span><span class="special">/</span><span class="number">35.</span> <span class="special">);</span> <span class="comment">// ( 4 +  2) /  70 =  3/35<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="number">19.</span><span class="special">/</span><span class="number">70.</span> <span class="special">);</span> <span class="comment">// (17 +  2) /  70 = 19/70<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="number">17.</span><span class="special">/</span><span class="number">70.</span> <span class="special">);</span> <span class="comment">// ( 3 + 14) /  70 = 17/70<br></span>
<span class="comment">// check absolute risk contributions 检查绝对风险分布<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="number">28</span> <span class="special">);</span> <span class="comment">// (10 + 46) / 2 = 28<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="number">42</span> <span class="special">);</span> <span class="comment">// (20 + 64) / 2 = 42<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="number">35</span> <span class="special">);</span> <span class="comment">// (30 + 40) / 2 = 35<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="number">45</span> <span class="special">);</span> <span class="comment">// (40 + 50) / 2 = 45<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="number">14</span> <span class="special">);</span> <span class="comment">// (26 +  2) / 2 = 14<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span>  <span class="number">3</span> <span class="special">);</span> <span class="comment">// ( 4 +  2) / 2 =  3<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span><span class="number">9.5</span> <span class="special">);</span> <span class="comment">// (17 +  2) / 2 =  9.5<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span><span class="number">8.5</span> <span class="special">);</span> <span class="comment">// ( 3 + 14) / 2 =  8.5<br></span>
<span class="comment">// check relative risk contributions 检查相对风险分布<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="number">23.</span><span class="special">/</span><span class="number">100.</span> <span class="special">);</span> <span class="comment">// 46/200 = 23/100<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span>  <span class="number">8.</span><span class="special">/</span><span class="number">25.</span>  <span class="special">);</span> <span class="comment">// 64/200 =  8/25<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span>  <span class="number">1.</span><span class="special">/</span><span class="number">5.</span>   <span class="special">);</span> <span class="comment">// 40/200 =  1/5<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span>  <span class="number">1.</span><span class="special">/</span><span class="number">4.</span>   <span class="special">);</span> <span class="comment">// 50/200 =  1/4<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span>  <span class="number">1.</span><span class="special">/</span><span class="number">10.</span>  <span class="special">);</span> <span class="comment">//  2/ 20 =  1/10<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span>  <span class="number">1.</span><span class="special">/</span><span class="number">10.</span>  <span class="special">);</span> <span class="comment">//  2/ 20 =  1/10<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span>  <span class="number">1.</span><span class="special">/</span><span class="number">10.</span>  <span class="special">);</span> <span class="comment">//  2/ 20 =  1/10<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span>  <span class="number">7.</span><span class="special">/</span><span class="number">10.</span>  <span class="special">);</span> <span class="comment">// 14/ 20 =  7/10<br></span>
<span class="comment">// check absolute risk contributions 检查绝对风险分布<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="number">46</span> <span class="special">);</span> <span class="comment">// 46<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="number">64</span> <span class="special">);</span> <span class="comment">// 64<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="number">40</span> <span class="special">);</span> <span class="comment">// 40<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="number">50</span> <span class="special">);</span> <span class="comment">// 50<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span>  <span class="number">2</span> <span class="special">);</span> <span class="comment">//  2<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span>  <span class="number">2</span> <span class="special">);</span> <span class="comment">//  2<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span>  <span class="number">2</span> <span class="special">);</span> <span class="comment">//  2<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="number">14</span> <span class="special">);</span> <span class="comment">// 14<br></span></pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/tail_variate_means_impl.html" title="Struct template tail_variate_means_impl">tail_variate_means_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_tail_mean" title="non_coherent_tail_mean"><code class="literal">non_coherent_tail_mean</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate" title="tail_variate"><code class="literal">tail_variate</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.variance"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.variance" title="variance and variants">
        variance <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Lazy or iterative calculation of the variance. The lazy calculation is
          associated with the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">lazy_variance</span></code>
          feature, and the iterative calculation with the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span></code>
          feature. Both can be extracted using the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span><span class="special">()</span></code> extractor. For more implementation details,
          see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/lazy_variance_impl.html" title="Struct template lazy_variance_impl">lazy_variance_impl</a></code>
          and <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/variance_impl.html" title="Struct template variance_impl">variance_impl</a></code>&nbsp;<br>对变值的延迟或迭代计算。延迟计算方式以 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">lazy_variance</span></code> 特征相关联，而迭代计算方式以 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span></code> 特征相关联。两者均可用 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span><span class="special">()</span></code> 提取器进行提取。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/lazy_variance_impl.html" title="Struct template lazy_variance_impl">lazy_variance_impl</a></code> 和 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/variance_impl.html" title="Struct template variance_impl">variance_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">lazy_variance</span></code> 依赖于 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">mean</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span></code> 依赖于 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">count</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">immediate_mean</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">lazy_variance</span></code> (又称为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span><span class="special">(</span><span class="identifier">lazy</span><span class="special">))</span></code>
              <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span></code> (又称为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span><span class="special">(</span><span class="identifier">immediate</span><span class="special">)</span></code>)
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.variance.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/variance.hpp&gt;">boost/accumulators/statistics/variance.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// lazy variance 延迟方式<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span><span class="special">(</span><span class="identifier">lazy</span><span class="special">)&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc1</span><span class="special">;</span>

<span class="identifier">acc1</span><span class="special">(</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span><span class="number">2</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span><span class="number">3</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span><span class="number">4</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span><span class="number">5</span><span class="special">);</span>

<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">5u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">3.</span><span class="special">,</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">11.</span><span class="special">,</span> <span class="identifier">moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc1</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">2.</span><span class="special">,</span> <span class="identifier">variance</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>

<span class="comment">// immediate variance 立即方式<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">variance</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">;</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">2</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">3</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">4</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">5</span><span class="special">);</span>

<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">5u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">3.</span><span class="special">,</span> <span class="identifier">mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">2.</span><span class="special">,</span> <span class="identifier">variance</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/lazy_variance_impl.html" title="Struct template lazy_variance_impl">lazy_variance_impl</a></code></li>
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/variance_impl.html" title="Struct template variance_impl">variance_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.mean" title="mean and variants"><code class="literal">mean</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.moment" title="moment"><code class="literal">moment</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_covariance"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_covariance" title="weighted_covariance">
        weighted_covariance</a>
</h4></div></div></div>
<p>
          An iterative Monte Carlo estimator for the weighted covariance. The feature
          is specified as <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_covariance</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code> and
          is extracted with the <code class="computeroutput"><span class="identifier">weighted_variate</span><span class="special">()</span></code> extractor. For more implementation details,
          see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_covariance_impl.html" title="Struct template weighted_covariance_impl">weighted_covariance_impl</a></code>&nbsp;<br>用于加权协方差的迭代蒙特卡洛估算法。该特征以 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_covariance</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code> 指定，并用 <code class="computeroutput"><span class="identifier">weighted_variate</span><span class="special">()</span></code> 提取器进行提取。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_covariance_impl.html" title="Struct template weighted_covariance_impl">weighted_covariance_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">outer_product</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span>
        <em class="replaceable"><code>weight-type</code></em>
      <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
    <span class="special">&gt;::</span><span class="identifier">result_type</span>
  <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span>
        <em class="replaceable"><code>weight-type</code></em>
      <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
    <span class="special">&gt;::</span><span class="identifier">result_type</span>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">sum_of_weights</span></code> <br> <code class="computeroutput"><span class="identifier">weighted_mean</span></code> <br> <code class="computeroutput"><span class="identifier">weighted_mean_of_variates</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">abstract_weighted_covariance</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code> <br> <code class="computeroutput"><em class="replaceable"><code>variate-tag</code></em></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_covariance.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_covariance.hpp&gt;">boost/accumulators/statistics/weighted_covariance.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_covariance</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;</span> <span class="special">&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.1</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">2.</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2.2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">4.</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">2.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">3.3</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">3.</span><span class="special">);</span>
<span class="identifier">acc</span><span class="special">(</span><span class="number">6.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4.4</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">1.</span><span class="special">);</span>        <br><br><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1e-6</span><span class="special">;</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="identifier">weighted_covariance</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="special">-</span><span class="number">2.39</span><span class="special">,</span> <span class="identifier">epsilon</span><span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_covariance_impl.html" title="Struct template weighted_covariance_impl">weighted_covariance_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_mean" title="weighted_mean and variants"><code class="literal">weighted_mean</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_density"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_density" title="weighted_density">
        weighted_density</a>
</h4></div></div></div>
<p>
          The <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_density</span></code> feature returns a histogram
          of the weighted sample distribution. For more implementation details, see
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_density_impl.html" title="Struct template weighted_density_impl">weighted_density_impl</a></code>.<br><code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_density</span></code> 特征返回加权样本分布的直方图。更多实现细节，请见
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_density_impl.html" title="Struct template weighted_density_impl">weighted_density_impl</a></code>.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span>
            <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>weight-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
          <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>weight-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
        <span class="special">&gt;</span>
    <span class="special">&gt;::</span><span class="identifier">iterator</span>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">sum_of_weights</span></code> <br> <code class="computeroutput"><span class="identifier">min</span></code> <br> <code class="computeroutput"><span class="identifier">max</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_density</span><span class="special">::</span><span class="identifier">cache_size</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_density</span><span class="special">::</span><span class="identifier">num_bins</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N), 其中 N 为 <code class="computeroutput"><span class="identifier">weighted_density</span><span class="special">::</span><span class="identifier">num_bins</span></code>
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_density.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_density.hpp&gt;">boost/accumulators/statistics/weighted_density.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_density_impl.html" title="Struct template weighted_density_impl">weighted_density_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.min" title="min"><code class="literal">min</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.max" title="max"><code class="literal">max</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_extended_p_square"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_extended_p_square" title="weighted_extended_p_square">
        weighted_extended_p_square</a>
</h4></div></div></div>
<p>
          Multiple quantile estimation with the extended <code class="literal">P^2</code> algorithm
          for weighted samples. For further details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_extended_p_square_impl.html" title="Struct template weighted_extended_p_square_impl">weighted_extended_p_square_impl</a></code>.<br>用于加权样本的多重分位数估算，使用扩展的 <code class="literal">P^2</code> 算法。更多细节请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_extended_p_square_impl.html" title="Struct template weighted_extended_p_square_impl">weighted_extended_p_square_impl</a></code>.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <em class="replaceable"><code>implementation-defined</code></em>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">sum_of_weights</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_extended_p_square</span><span class="special">::</span><span class="identifier">probabilities</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_extended_p_square.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_extended_p_square.hpp&gt;">boost/accumulators/statistics/weighted_extended_p_square.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_extended_p_square</span><span class="special">&gt;,</span> <span class="keyword">double</span><span class="special">&gt;</span> <span class="identifier">accumulator_t</span><span class="special">;</span>

<span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>

<span class="comment">// some random number generators 一些随机数生成器<br></span><span class="keyword">double</span> <span class="identifier">mu1</span> <span class="special">=</span> <span class="special">-</span><span class="number">1.0</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">mu2</span> <span class="special">=</span>  <span class="number">1.0</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma1</span><span class="special">(</span><span class="identifier">mu1</span><span class="special">,</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma2</span><span class="special">(</span><span class="identifier">mu2</span><span class="special">,</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal1</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal2</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma2</span><span class="special">);</span>

<span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">&gt;</span> <span class="identifier">probs_uniform</span><span class="special">,</span> <span class="identifier">probs_normal1</span><span class="special">,</span> <span class="identifier">probs_normal2</span><span class="special">,</span> <span class="identifier">probs_normal_exact1</span><span class="special">,</span> <span class="identifier">probs_normal_exact2</span><span class="special">;</span>

<span class="keyword">double</span> <span class="identifier">p1</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{/*</span><span class="number">0.001</span><span class="special">,*/</span> <span class="number">0.01</span><span class="special">,</span> <span class="number">0.1</span><span class="special">,</span> <span class="number">0.5</span><span class="special">,</span> <span class="number">0.9</span><span class="special">,</span> <span class="number">0.99</span><span class="special">,</span> <span class="number">0.999</span><span class="special">};</span>
<span class="identifier">probs_uniform</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">p1</span><span class="special">,</span> <span class="identifier">p1</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">p1</span><span class="special">)</span> <span class="special">/</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="keyword">double</span><span class="special">));</span>

<span class="keyword">double</span> <span class="identifier">p2</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span><span class="number">0.001</span><span class="special">,</span> <span class="number">0.025</span><span class="special">};</span>
<span class="keyword">double</span> <span class="identifier">p3</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span><span class="number">0.975</span><span class="special">,</span> <span class="number">0.999</span><span class="special">};</span>
<span class="identifier">probs_normal1</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">p2</span><span class="special">,</span> <span class="identifier">p2</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">p2</span><span class="special">)</span> <span class="special">/</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="keyword">double</span><span class="special">));</span>
<span class="identifier">probs_normal2</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">p3</span><span class="special">,</span> <span class="identifier">p3</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">p3</span><span class="special">)</span> <span class="special">/</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="keyword">double</span><span class="special">));</span>

<span class="keyword">double</span> <span class="identifier">p4</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{-</span><span class="number">3.090232</span><span class="special">,</span> <span class="special">-</span><span class="number">1.959963</span><span class="special">};</span>
<span class="keyword">double</span> <span class="identifier">p5</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span><span class="number">1.959963</span><span class="special">,</span> <span class="number">3.090232</span><span class="special">};</span>
<span class="identifier">probs_normal_exact1</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">p4</span><span class="special">,</span> <span class="identifier">p4</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">p4</span><span class="special">)</span> <span class="special">/</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="keyword">double</span><span class="special">));</span>
<span class="identifier">probs_normal_exact2</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">p5</span><span class="special">,</span> <span class="identifier">p5</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">p5</span><span class="special">)</span> <span class="special">/</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="keyword">double</span><span class="special">));</span>

<span class="identifier">accumulator_t</span> <span class="identifier">acc_uniform</span><span class="special">(</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_extended_p_square</span><span class="special">::</span><span class="identifier">probabilities</span> <span class="special">=</span> <span class="identifier">probs_uniform</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc_normal1</span><span class="special">(</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_extended_p_square</span><span class="special">::</span><span class="identifier">probabilities</span> <span class="special">=</span> <span class="identifier">probs_normal1</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc_normal2</span><span class="special">(</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_extended_p_square</span><span class="special">::</span><span class="identifier">probabilities</span> <span class="special">=</span> <span class="identifier">probs_normal2</span><span class="special">);</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">acc_uniform</span><span class="special">(</span><span class="identifier">rng</span><span class="special">(),</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.</span><span class="special">);</span>
    
    <span class="keyword">double</span> <span class="identifier">sample1</span> <span class="special">=</span> <span class="identifier">normal1</span><span class="special">();</span>
    <span class="keyword">double</span> <span class="identifier">sample2</span> <span class="special">=</span> <span class="identifier">normal2</span><span class="special">();</span>
    <span class="identifier">acc_normal1</span><span class="special">(</span><span class="identifier">sample1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu1</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample1</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu1</span><span class="special">)));</span>
    <span class="identifier">acc_normal2</span><span class="special">(</span><span class="identifier">sample2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu2</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample2</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu2</span><span class="special">)));</span>
<span class="special">}</span>

<span class="comment">// check for uniform distribution 检验均衡分布   <br></span><span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">probs_uniform</span><span class="special">.</span><span class="identifier">size</span><span class="special">();</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="identifier">weighted_extended_p_square</span><span class="special">(</span><span class="identifier">acc_uniform</span><span class="special">)[</span><span class="identifier">i</span><span class="special">],</span> <span class="identifier">probs_uniform</span><span class="special">[</span><span class="identifier">i</span><span class="special">],</span> <span class="identifier">epsilon</span><span class="special">);</span>
<span class="special">}</span>

<span class="comment">// check for standard normal distribution 检验标准正态分布<br></span><span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">probs_normal1</span><span class="special">.</span><span class="identifier">size</span><span class="special">();</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="identifier">weighted_extended_p_square</span><span class="special">(</span><span class="identifier">acc_normal1</span><span class="special">)[</span><span class="identifier">i</span><span class="special">],</span> <span class="identifier">probs_normal_exact1</span><span class="special">[</span><span class="identifier">i</span><span class="special">],</span> <span class="identifier">epsilon</span><span class="special">);</span>
    <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="identifier">weighted_extended_p_square</span><span class="special">(</span><span class="identifier">acc_normal2</span><span class="special">)[</span><span class="identifier">i</span><span class="special">],</span> <span class="identifier">probs_normal_exact2</span><span class="special">[</span><span class="identifier">i</span><span class="special">],</span> <span class="identifier">epsilon</span><span class="special">);</span>
<span class="special">}</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_extended_p_square_impl.html" title="Struct template weighted_extended_p_square_impl">weighted_extended_p_square_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_kurtosis"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_kurtosis" title="weighted_kurtosis">
        weighted_kurtosis</a>
</h4></div></div></div>
<p>
          The kurtosis of a sample distribution is defined as the ratio of the 4th
          central moment and the square of the 2nd central moment (the variance)
          of the samples, minus 3. The term <code class="literal">-3</code> is added in order
          to ensure that the normal distribution has zero kurtosis. For more implementation
          details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_kurtosis_impl.html" title="Struct template weighted_kurtosis_impl">weighted_kurtosis_impl</a></code>&nbsp;<br>样本分布的峰度被定义为样本(变异)的4次中心矩与2次中心矩平方之比减3。其中的 <code class="literal">-3</code> 是为了确保正态分布的峰度为零。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_kurtosis_impl.html" title="Struct template weighted_kurtosis_impl">weighted_kurtosis_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
  <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
<span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weighted_mean</span></code> <br>
              <code class="computeroutput"><span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">3</span><span class="special">&gt;</span></code> <br> <code class="computeroutput"><span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">4</span><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_kurtosis.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_kurtosis.hpp&gt;">boost/accumulators/statistics/weighted_kurtosis.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_kurtosis</span><span class="special">&gt;,</span> <span class="keyword">int</span> <span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">;</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">7</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">4</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">3</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">9</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">3</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">);</span>

<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">weighted_mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">42.</span><span class="special">/</span><span class="number">11.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">212.</span><span class="special">/</span><span class="number">11.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">3</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1350.</span><span class="special">/</span><span class="number">11.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">4</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">9956.</span><span class="special">/</span><span class="number">11.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_kurtosis</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">0.58137026432</span><span class="special">,</span> <span class="number">1e-6</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_kurtosis_impl.html" title="Struct template weighted_kurtosis_impl">weighted_kurtosis_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_mean" title="weighted_mean and variants"><code class="literal">weighted_mean</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_moment" title="weighted_moment"><code class="literal">weighted_moment</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_mean"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_mean" title="weighted_mean and variants">
        weighted_mean <span class="emphasis"><em>and variants</em></span></a>
</h4></div></div></div>
<p>
          Calculates the weighted mean of samples or variates. The calculation is
          either lazy (in the result extractor), or immediate (in the accumulator).
          The lazy implementation is the default. For more implementation details,
          see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_mean_impl.html" title="Struct template weighted_mean_impl">weighted_mean_impl</a></code>
          or. <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/immediate_weighted_mean_impl.html" title="Struct template immediate_weighted_mean_impl">immediate_weighted_mean_impl</a><br></code>计算样本或变值的加权平均值。计算方式可以是延迟的(在结果提取器中计算)，或立即的(在累加器中计算)。缺省方式是延迟的。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_mean_impl.html" title="Struct template weighted_mean_impl">weighted_mean_impl</a></code> 或 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/immediate_weighted_mean_impl.html" title="Struct template immediate_weighted_mean_impl">immediate_weighted_mean_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd><p>对于样本，<code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span></code> <br>对于变值，<code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span><span class="special">,</span>
              <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span></code>
            </p></dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">sum_of_weights</span></code> <br>样本均值的延迟方式依赖于 <code class="computeroutput"><span class="identifier">weighted_sum</span></code>
              <br>变值均值的延迟方式依赖于 <code class="computeroutput"><span class="identifier">weighted_sum_of_variates</span><span class="special">&lt;&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weighted_mean_of_variates</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code> <br> <code class="computeroutput"><span class="identifier">immediate_weighted_mean</span></code>
              <br> <code class="computeroutput"><span class="identifier">immediate_weighted_mean_of_variates</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_mean.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_mean.hpp&gt;">boost/accumulators/statistics/weighted_mean.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span>
    <span class="keyword">int</span>
  <span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span>
        <span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_mean</span>
      <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;</span>
    <span class="special">&gt;</span>
  <span class="special">,</span> <span class="keyword">int</span>
<span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">10</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">7</span><span class="special">);</span>          <span class="comment">//  20<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>    <span class="comment">//<br></span>                                              <span class="comment">//<br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">6</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">3</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">8</span><span class="special">);</span>           <span class="comment">//  18<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">5</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>    <span class="comment">//<br></span>                                              <span class="comment">//<br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">4</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">9</span><span class="special">);</span>           <span class="comment">//  16<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">9</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>    <span class="comment">//<br></span>                                              <span class="comment">//<br></span><span class="identifier">acc</span><span class="special">(</span><span class="number">6</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">5</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">6</span><span class="special">);</span>           <span class="comment">//+ 30<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">14</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>   <span class="comment">//<br></span>                                              <span class="comment">//= 84  / 14 = 6<br></span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">6.</span><span class="special">,</span> <span class="identifier">weighted_mean</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">52.</span><span class="special">/</span><span class="number">7.</span><span class="special">,</span> <span class="special">(</span><span class="identifier">weighted_mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">acc</span><span class="special">)));</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span>
    <span class="keyword">int</span>
  <span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span>
        <span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_mean</span><span class="special">(</span><span class="identifier">immediate</span><span class="special">)</span>
      <span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">immediate</span><span class="special">)</span>
    <span class="special">&gt;</span>
  <span class="special">,</span> <span class="keyword">int</span>
<span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">;</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">10</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">7</span><span class="special">);</span>         <span class="comment">//  20<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>   <span class="comment">//<br></span>                                              <span class="comment">//<br></span><span class="identifier">acc2</span><span class="special">(</span><span class="number">6</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">3</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">8</span><span class="special">);</span>          <span class="comment">//  18<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">5</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>   <span class="comment">//<br></span>                                              <span class="comment">//<br></span><span class="identifier">acc2</span><span class="special">(</span><span class="number">4</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">9</span><span class="special">);</span>          <span class="comment">//  16<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">9</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>   <span class="comment">//<br></span>                                              <span class="comment">//<br></span><span class="identifier">acc2</span><span class="special">(</span><span class="number">6</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">5</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">6</span><span class="special">);</span>          <span class="comment">//+ 30<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">14</span><span class="special">,</span> <span class="identifier">sum_of_weights</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>  <span class="comment">//<br></span>                                              <span class="comment">//= 84  / 14 = 6<br></span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">6.</span><span class="special">,</span> <span class="identifier">weighted_mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">52.</span><span class="special">/</span><span class="number">7.</span><span class="special">,</span> <span class="special">(</span><span class="identifier">weighted_mean_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">)));</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_mean_impl.html" title="Struct template weighted_mean_impl">weighted_mean_impl</a></code></li>
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/immediate_weighted_mean_impl.html" title="Struct template immediate_weighted_mean_impl">immediate_weighted_mean_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_sum" title="weighted_sum and variants"><code class="literal">weighted_sum</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_median"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_median" title="weighted_median and variants">
        weighted_median <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Median estimation for weighted samples based on the <code class="literal">P^2</code>
          quantile estimator, the density estimator, or the <code class="literal">P^2</code>
          cumulative distribution estimator. For more implementation details, see
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_median_impl.html" title="Struct template weighted_median_impl">weighted_median_impl</a></code>,
          <code class="computeroutput">with_weighted_density_median_impl</code>,
          and <code class="computeroutput">with_weighted_p_square_cumulative_distribution_median_impl</code>.<br>基于 <code class="literal">P^2</code> 分位数估算法、密度估算法或 <code class="literal">P^2</code>
          累积分布估算法的加权样本中值估算。更多实现细节，请见
          <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_median_impl.html" title="Struct template weighted_median_impl">weighted_median_impl</a></code>,
          <code class="computeroutput">with_weighted_density_median_impl</code>, 和 <code class="computeroutput">with_weighted_p_square_cumulative_distribution_median_impl</code>.
        </p>
<p>
          The three median accumulators all satisfy the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_median</span></code>
          feature, and can all be extracted with the <code class="computeroutput"><span class="identifier">weighted_median</span><span class="special">()</span></code> extractor.<br>以上三种中值累加器均满足 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_median</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">weighted_median</span><span class="special">()</span></code> 提取器进行提取。.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weighted_median</span></code> 依赖于 <code class="computeroutput"><span class="identifier">weighted_p_square_quantile_for_median</span></code>
              <br> <code class="computeroutput"><span class="identifier">with_weighted_density_median</span></code> 依赖于 <code class="computeroutput"><span class="identifier">count</span></code> and
              <code class="computeroutput"><span class="identifier">weighted_density</span></code> <br>
              <code class="computeroutput"><span class="identifier">with_weighted_p_square_cumulative_distribution_median</span></code> 依赖于 <code class="computeroutput"><span class="identifier">weighted_p_square_cumulative_distribution</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">with_weighted_density_median</span></code>
              (又称 <code class="computeroutput"><span class="identifier">weighted_median</span><span class="special">(</span><span class="identifier">with_weighted_density</span><span class="special">)</span></code>) <br> <code class="computeroutput"><span class="identifier">with_weighted_p_square_cumulative_distribution_median</span></code>
              (又称 <code class="computeroutput"><span class="identifier">weighted_median</span><span class="special">(</span><span class="identifier">with_weighted_p_square_cumulative_distribution</span><span class="special">)</span></code>)
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">with_weighted_density_median</span></code> 要求 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_density</span><span class="special">::</span><span class="identifier">cache_size</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_density</span><span class="special">::</span><span class="identifier">num_bins</span></code>
              <br> <code class="computeroutput"><span class="identifier">with_weighted_p_square_cumulative_distribution_median</span></code> 要求 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_p_square_cumulative_distribution</span><span class="special">::</span><span class="identifier">num_cells</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_median.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_median.hpp&gt;">boost/accumulators/statistics/weighted_median.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// Median estimation of normal distribution N(1,1) using samples from a narrow normal distribution N(1,0.01)<br></span><span class="comment">// The weights equal to the likelihood ratio of the corresponding samples<br>// 正态分布 N(1,1) 的中值估算使用了来自窄正态分布 N(1,0.01) 的样本。权重等于相应样本的概率<br></span>
<span class="comment">// two random number generators 两个随机数生成器<br></span><span class="keyword">double</span> <span class="identifier">mu</span> <span class="special">=</span> <span class="number">1.</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">sigma_narrow</span> <span class="special">=</span> <span class="number">0.01</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">sigma</span> <span class="special">=</span> <span class="number">1.</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma_narrow</span><span class="special">(</span><span class="identifier">mu</span><span class="special">,</span><span class="identifier">sigma_narrow</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal_narrow</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma_narrow</span><span class="special">);</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_median</span><span class="special">(</span><span class="identifier">with_weighted_p_square_quantile</span><span class="special">)</span> <span class="special">&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_median</span><span class="special">(</span><span class="identifier">with_weighted_density</span><span class="special">)</span> <span class="special">&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span> <br>    <span class="identifier">acc_dens</span><span class="special">(</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_density</span><span class="special">::</span><span class="identifier">cache_size</span> <span class="special">=</span> <span class="number">10000</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_density</span><span class="special">::</span><span class="identifier">num_bins</span> <span class="special">=</span> <span class="number">1000</span> <span class="special">);</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_median</span><span class="special">(</span><span class="identifier">with_weighted_p_square_cumulative_distribution</span><span class="special">)</span> <span class="special">&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span> <br>    <span class="identifier">acc_cdist</span><span class="special">(</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_p_square_cumulative_distribution</span><span class="special">::</span><span class="identifier">num_cells</span> <span class="special">=</span> <span class="number">100</span> <span class="special">);</span>
    
<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">normal_narrow</span><span class="special">();</span>
    <span class="identifier">acc</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(</span><span class="number">0.5</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample</span> <span class="special">-</span> <span class="identifier">mu</span><span class="special">)</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample</span> <span class="special">-</span> <span class="identifier">mu</span><span class="special">)</span> <span class="special">*</span> <span class="special">(</span> <span class="number">1.</span><span class="special">/</span><span class="identifier">sigma_narrow</span><span class="special">/</span><span class="identifier">sigma_narrow</span> <span class="special">-</span> <span class="number">1.</span><span class="special">/</span><span class="identifier">sigma</span><span class="special">/</span><span class="identifier">sigma</span> <span class="special">)));</span>
    <span class="identifier">acc_dens</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(</span><span class="number">0.5</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample</span> <span class="special">-</span> <span class="identifier">mu</span><span class="special">)</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample</span> <span class="special">-</span> <span class="identifier">mu</span><span class="special">)</span> <span class="special">*</span> <span class="special">(</span> <span class="number">1.</span><span class="special">/</span><span class="identifier">sigma_narrow</span><span class="special">/</span><span class="identifier">sigma_narrow</span> <span class="special">-</span> <span class="number">1.</span><span class="special">/</span><span class="identifier">sigma</span><span class="special">/</span><span class="identifier">sigma</span> <span class="special">)));</span>
    <span class="identifier">acc_cdist</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(</span><span class="number">0.5</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample</span> <span class="special">-</span> <span class="identifier">mu</span><span class="special">)</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample</span> <span class="special">-</span> <span class="identifier">mu</span><span class="special">)</span> <span class="special">*</span> <span class="special">(</span> <span class="number">1.</span><span class="special">/</span><span class="identifier">sigma_narrow</span><span class="special">/</span><span class="identifier">sigma_narrow</span> <span class="special">-</span> <span class="number">1.</span><span class="special">/</span><span class="identifier">sigma</span><span class="special">/</span><span class="identifier">sigma</span> <span class="special">)));</span>
<span class="special">}</span>

<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">weighted_median</span><span class="special">(</span><span class="identifier">acc</span><span class="special">),</span> <span class="number">1e-1</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">weighted_median</span><span class="special">(</span><span class="identifier">acc_dens</span><span class="special">),</span> <span class="number">1e-1</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">weighted_median</span><span class="special">(</span><span class="identifier">acc_cdist</span><span class="special">),</span> <span class="number">1e-1</span><span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_median_impl.html" title="Struct template weighted_median_impl">weighted_median_impl</a></code></li>
<li><code class="computeroutput">with_weighted_density_median_impl</code></li>
<li><code class="computeroutput">with_weighted_p_square_cumulative_distribution_median_impl</code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_p_square_quantile" title="weighted_p_square_quantile and variants"><code class="literal">weighted_p_square_quantile</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_p_square_cumulative_distribution" title="weighted_p_square_cumulative_distribution"><code class="literal">weighted_p_square_cumulative_distribution</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_moment"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_moment" title="weighted_moment">
        weighted_moment</a>
</h4></div></div></div>
<p>
          Calculates the N-th moment of the weighted samples, which is defined as
          the sum of the weighted N-th power of the samples over the sum of the weights.<br>计算加权样本的N次矩，其定义为样本N次方的加权和除以样本数量。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
  <span class="special">,</span> <span class="identifier">weight_type</span>
<span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">sum_of_weights</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_moment.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_moment.hpp&gt;">boost/accumulators/statistics/weighted_moment.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span> <span class="special">&gt;,</span> <span class="keyword">double</span><span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">;</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">7</span><span class="special">&gt;</span> <span class="special">&gt;,</span> <span class="keyword">double</span><span class="special">&gt;</span> <span class="identifier">acc7</span><span class="special">;</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">2.1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">2.7</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.4</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">1.8</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">);</span>

<span class="identifier">acc7</span><span class="special">(</span><span class="number">2.1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">);</span>
<span class="identifier">acc7</span><span class="special">(</span><span class="number">2.7</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.4</span><span class="special">);</span>
<span class="identifier">acc7</span><span class="special">(</span><span class="number">1.8</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">);</span>

<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">5.403</span><span class="special">,</span> <span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">548.54182</span><span class="special">,</span> <span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">7</span><span class="special">&gt;(</span><span class="identifier">acc7</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_moment_impl.html" title="Struct template weighted_moment_impl">weighted_moment_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_p_square_cumulative_distribution"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_p_square_cumulative_distribution" title="weighted_p_square_cumulative_distribution">
        weighted_p_square_cumulative_distribution</a>
</h4></div></div></div>
<p>
          Histogram calculation of the cumulative distribution with the <code class="literal">P^2</code>
          algorithm for weighted samples. For more implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_p_square_cumulative_distribution_impl.html" title="Struct template weighted_p_square_cumulative_distribution_impl">weighted_p_square_cumulative_distribution_impl</a></code>&nbsp;<br>用 <code class="literal">P^2</code> 算法对加权样本进行累积分布的直方图计算。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_p_square_cumulative_distribution_impl.html" title="Struct template weighted_p_square_cumulative_distribution_impl">weighted_p_square_cumulative_distribution_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span>
            <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><span class="identifier">weighted_sample</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
          <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span><span class="identifier">weighted_sample</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">result_type</span>
        <span class="special">&gt;</span>
    <span class="special">&gt;::</span><span class="identifier">iterator</span>
<span class="special">&gt;</span>
</pre>
<p>
              其中 <code class="computeroutput"><span class="identifier">weighted_sample</span></code> 为 <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span></code>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">sum_or_weights</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_p_square_cumulative_distribution</span><span class="special">::</span><span class="identifier">num_cells</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N) 其中 N 为 <code class="computeroutput"><span class="identifier">num_cells</span></code>
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_p_square_cumulative_distribution.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_p_square_cumulative_distribution.hpp&gt;">boost/accumulators/statistics/weighted_p_square_cumulative_distribution.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">4</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_p_square_cumulative_distribution</span><span class="special">&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">accumulator_t</span><span class="special">;</span>
    
<span class="identifier">accumulator_t</span> <span class="identifier">acc_upper</span><span class="special">(</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_p_square_cumulative_distribution</span><span class="special">::</span><span class="identifier">num_cells</span> <span class="special">=</span> <span class="number">100</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc_lower</span><span class="special">(</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_p_square_cumulative_distribution</span><span class="special">::</span><span class="identifier">num_cells</span> <span class="special">=</span> <span class="number">100</span><span class="special">);</span>

<span class="comment">// two random number generators 两个随机数生成器<br></span><span class="keyword">double</span> <span class="identifier">mu_upper</span> <span class="special">=</span> <span class="number">1.0</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">mu_lower</span> <span class="special">=</span> <span class="special">-</span><span class="number">1.0</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma_upper</span><span class="special">(</span><span class="identifier">mu_upper</span><span class="special">,</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma_lower</span><span class="special">(</span><span class="identifier">mu_lower</span><span class="special">,</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal_upper</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma_upper</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal_lower</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma_lower</span><span class="special">);</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">normal_upper</span><span class="special">();</span>
    <span class="identifier">acc_upper</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu_upper</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu_upper</span><span class="special">)));</span>
<span class="special">}</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">normal_lower</span><span class="special">();</span>
    <span class="identifier">acc_lower</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu_lower</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu_lower</span><span class="special">)));</span>
<span class="special">}</span>

<span class="keyword">typedef</span> <span class="identifier">iterator_range</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="keyword">double</span><span class="special">&gt;</span> <span class="special">&gt;::</span><span class="identifier">iterator</span> <span class="special">&gt;</span> <span class="identifier">histogram_type</span><span class="special">;</span>
<span class="identifier">histogram_type</span> <span class="identifier">histogram_upper</span> <span class="special">=</span> <span class="identifier">weighted_p_square_cumulative_distribution</span><span class="special">(</span><span class="identifier">acc_upper</span><span class="special">);</span>
<span class="identifier">histogram_type</span> <span class="identifier">histogram_lower</span> <span class="special">=</span> <span class="identifier">weighted_p_square_cumulative_distribution</span><span class="special">(</span><span class="identifier">acc_lower</span><span class="special">);</span>

<span class="comment">// Note that applaying importance sampling results in a region of the distribution <br></span><span class="comment">// to be estimated more accurately and another region to be estimated less accurately<br></span><span class="comment">// than without importance sampling, i.e., with unweighted samples<br>// 注意，将带有重要性的样本结果应用于一个分布区域，以便更精确地估算，另一个不太精确估算的区域则为不带重要性的样本，即非加权样本<br></span>
<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">histogram_upper</span><span class="special">.</span><span class="identifier">size</span><span class="special">();</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="comment">// problem with small results: epsilon is relative (in percent), not absolute!<br>    // 结果较小的问题：epsilon 是相对的(百分比)，不是绝对的！</span><span class="comment"> <br></span>    <br>    <span class="comment">// check upper region of distribution 检查分布的上区域<br></span>    <span class="keyword">if</span> <span class="special">(</span> <span class="identifier">histogram_upper</span><span class="special">[</span><span class="identifier">i</span><span class="special">].</span><span class="identifier">second</span> <span class="special">&gt;</span> <span class="number">0.1</span> <span class="special">)</span>    <br>        <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="number">0.5</span> <span class="special">*</span> <span class="special">(</span><span class="number">1.0</span> <span class="special">+</span> <span class="identifier">erf</span><span class="special">(</span> <span class="identifier">histogram_upper</span><span class="special">[</span><span class="identifier">i</span><span class="special">].</span><span class="identifier">first</span> <span class="special">/</span> <span class="identifier">sqrt</span><span class="special">(</span><span class="number">2.0</span><span class="special">)</span> <span class="special">)),</span> <span class="identifier">histogram_upper</span><span class="special">[</span><span class="identifier">i</span><span class="special">].</span><span class="identifier">second</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
    <span class="comment">// check lower region of distribution 检查分布的下区域<br></span>    <span class="keyword">if</span> <span class="special">(</span> <span class="identifier">histogram_lower</span><span class="special">[</span><span class="identifier">i</span><span class="special">].</span><span class="identifier">second</span> <span class="special">&lt;</span> <span class="special">-</span><span class="number">0.1</span> <span class="special">)</span>    <br>        <span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="number">0.5</span> <span class="special">*</span> <span class="special">(</span><span class="number">1.0</span> <span class="special">+</span> <span class="identifier">erf</span><span class="special">(</span> <span class="identifier">histogram_lower</span><span class="special">[</span><span class="identifier">i</span><span class="special">].</span><span class="identifier">first</span> <span class="special">/</span> <span class="identifier">sqrt</span><span class="special">(</span><span class="number">2.0</span><span class="special">)</span> <span class="special">)),</span> <span class="identifier">histogram_lower</span><span class="special">[</span><span class="identifier">i</span><span class="special">].</span><span class="identifier">second</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="special">}</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_p_square_cumulative_distribution_impl.html" title="Struct template weighted_p_square_cumulative_distribution_impl">weighted_p_square_cumulative_distribution_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_p_square_quantile"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_p_square_quantile" title="weighted_p_square_quantile and variants">
        weighted_p_square_quantile <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Single quantile estimation with the <code class="literal">P^2</code> algorithm. For
          more implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_p_square_quantile_impl.html" title="Struct template weighted_p_square_quantile_impl">weighted_p_square_quantile_impl</a></code>&nbsp;<br>以 <code class="literal">P^2</code> 算法进行单分位数估算。更多实现细节，请见&nbsp; <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_p_square_quantile_impl.html" title="Struct template weighted_p_square_quantile_impl">weighted_p_square_quantile_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
  <span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span>
<span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">count</span></code> <br> <code class="computeroutput"><span class="identifier">sum_of_weights</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weighted_p_square_quantile_for_median</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>,
              缺省为 <code class="computeroutput"><span class="number">0.5</span></code>.
              (注：对于 <code class="computeroutput"><span class="identifier">weighted_p_square_quantile_for_median</span></code>, 参数 <code class="computeroutput"><span class="identifier">quantile_probability</span></code> 被忽略且设为 <code class="computeroutput"><span class="number">0.5</span></code>.)
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_p_square_quantile.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_p_square_quantile.hpp&gt;">boost/accumulators/statistics/weighted_p_square_quantile.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_p_square_quantile</span><span class="special">&gt;,</span> <span class="keyword">double</span><span class="special">&gt;</span> <span class="identifier">accumulator_t</span><span class="special">;</span>

<span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>

<span class="comment">// some random number generators 一些随机数生成器<br></span><span class="keyword">double</span> <span class="identifier">mu4</span> <span class="special">=</span> <span class="special">-</span><span class="number">1.0</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">mu5</span> <span class="special">=</span> <span class="special">-</span><span class="number">1.0</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">mu6</span> <span class="special">=</span> <span class="number">1.0</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">mu7</span> <span class="special">=</span> <span class="number">1.0</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma4</span><span class="special">(</span><span class="identifier">mu4</span><span class="special">,</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma5</span><span class="special">(</span><span class="identifier">mu5</span><span class="special">,</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma6</span><span class="special">(</span><span class="identifier">mu6</span><span class="special">,</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma7</span><span class="special">(</span><span class="identifier">mu7</span><span class="special">,</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal4</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma4</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal5</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma5</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal6</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma6</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal7</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma7</span><span class="special">);</span>
    
<span class="identifier">accumulator_t</span> <span class="identifier">acc0</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.001</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.025</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.975</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc3</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">);</span>

<span class="identifier">accumulator_t</span> <span class="identifier">acc4</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.001</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc5</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.025</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc6</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.975</span><span class="special">);</span>
<span class="identifier">accumulator_t</span> <span class="identifier">acc7</span><span class="special">(</span><span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">);</span>

    
<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">100000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample</span> <span class="special">=</span> <span class="identifier">rng</span><span class="special">();</span>
    <span class="identifier">acc0</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.</span><span class="special">);</span>
    <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.</span><span class="special">);</span>
    <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.</span><span class="special">);</span>
    <span class="identifier">acc3</span><span class="special">(</span><span class="identifier">sample</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.</span><span class="special">);</span>
    
    <span class="keyword">double</span> <span class="identifier">sample4</span> <span class="special">=</span> <span class="identifier">normal4</span><span class="special">();</span>
    <span class="keyword">double</span> <span class="identifier">sample5</span> <span class="special">=</span> <span class="identifier">normal5</span><span class="special">();</span>
    <span class="keyword">double</span> <span class="identifier">sample6</span> <span class="special">=</span> <span class="identifier">normal6</span><span class="special">();</span>
    <span class="keyword">double</span> <span class="identifier">sample7</span> <span class="special">=</span> <span class="identifier">normal7</span><span class="special">();</span>
    <span class="identifier">acc4</span><span class="special">(</span><span class="identifier">sample4</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu4</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample4</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu4</span><span class="special">)));</span>
    <span class="identifier">acc5</span><span class="special">(</span><span class="identifier">sample5</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu5</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample5</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu5</span><span class="special">)));</span>
    <span class="identifier">acc6</span><span class="special">(</span><span class="identifier">sample6</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu6</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample6</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu6</span><span class="special">)));</span>
    <span class="identifier">acc7</span><span class="special">(</span><span class="identifier">sample7</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu7</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample7</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu7</span><span class="special">)));</span>
<span class="special">}</span>

<span class="comment">// check for uniform distribution with weight = 1 以权重 = 1 检验均衡分布<br></span><span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_p_square_quantile</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">),</span> <span class="number">0.001</span><span class="special">,</span> <span class="number">15</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_p_square_quantile</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">),</span> <span class="number">0.025</span><span class="special">,</span> <span class="number">5</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_p_square_quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">0.975</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_p_square_quantile</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">),</span> <span class="number">0.999</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>

<span class="comment">// check for shifted standard normal distribution ("importance sampling")<br>// 检验平移的标准正态分布("重要性样本")<br></span><span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_p_square_quantile</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">),</span> <span class="special">-</span><span class="number">3.090232</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_p_square_quantile</span><span class="special">(</span><span class="identifier">acc5</span><span class="special">),</span> <span class="special">-</span><span class="number">1.959963</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_p_square_quantile</span><span class="special">(</span><span class="identifier">acc6</span><span class="special">),</span>  <span class="number">1.959963</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_p_square_quantile</span><span class="special">(</span><span class="identifier">acc7</span><span class="special">),</span>  <span class="number">3.090232</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_p_square_quantile_impl.html" title="Struct template weighted_p_square_quantile_impl">weighted_p_square_quantile_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_peaks_over_threshold"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_peaks_over_threshold" title="weighted_peaks_over_threshold and variants">
        weighted_peaks_over_threshold <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Weighted peaks over threshold method for weighted quantile and weighted
          tail mean estimation. For more implementation details, see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_peaks_over_threshold_impl.html" title="Struct template weighted_peaks_over_threshold_impl">weighted_peaks_over_threshold_impl</a></code>
          and <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_peaks_over_threshold_prob_impl.html" title="Struct template weighted_peaks_over_threshold_prob_impl">weighted_peaks_over_threshold_prob_impl</a></code>.<br>用于加权分位数和加权尾均值估算的加权高限峰值法(WPOT)。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_peaks_over_threshold_impl.html" title="Struct template weighted_peaks_over_threshold_impl">weighted_peaks_over_threshold_impl</a></code>
          and <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_peaks_over_threshold_prob_impl.html" title="Struct template weighted_peaks_over_threshold_prob_impl">weighted_peaks_over_threshold_prob_impl</a></code>.
        </p>
<p>
          Both <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_peaks_over_threshold</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> and <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_peaks_over_threshold_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
          satisfy the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_peaks_over_threshold</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> feature and can be extracted using
          the <code class="computeroutput"><span class="identifier">weighted_peaks_over_threshold</span><span class="special">()</span></code> extractor.<br><code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_peaks_over_threshold</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_peaks_over_threshold_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 均满足 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_peaks_over_threshold</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">weighted_peaks_over_threshold</span><span class="special">()</span></code> 提取器进行提取。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              <code class="computeroutput"><span class="identifier">tuple</span><span class="special">&lt;</span><span class="identifier">float_type</span><span class="special">,</span>
              <span class="identifier">float_type</span><span class="special">,</span>
              <span class="identifier">float_type</span><span class="special">&gt;</span></code>
              where <code class="computeroutput"><span class="identifier">float_type</span></code> is
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
  <span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span>
<span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weighted_peaks_over_threshold</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 依赖于 <code class="computeroutput"><span class="identifier">sum_of_weights</span></code>
              <br> <code class="computeroutput"><span class="identifier">weighted_peaks_over_threshold_prob</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code> 依赖于 <code class="computeroutput"><span class="identifier">sum_of_weights</span></code>
              and <code class="computeroutput"><span class="identifier">tail_weights</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weighted_peaks_over_threshold_prob</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold</span><span class="special">::</span><span class="identifier">threshold_value</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">peaks_over_threshold_prob</span><span class="special">::</span><span class="identifier">threshold_probability</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              TODO 待办
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_peaks_over_threshold.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_peaks_over_threshold.hpp&gt;">boost/accumulators/statistics/weighted_peaks_over_threshold.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_peaks_over_threshold_impl.html" title="Struct template weighted_peaks_over_threshold_impl">weighted_peaks_over_threshold_impl</a></code></li>
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_peaks_over_threshold_prob_impl.html" title="Struct template weighted_peaks_over_threshold_prob_impl">weighted_peaks_over_threshold_prob_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail" title="tail"><code class="literal">tail</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_skewness"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_skewness" title="weighted_skewness">
        weighted_skewness</a>
</h4></div></div></div>
<p>
          The skewness of a sample distribution is defined as the ratio of the 3rd
          central moment and the <code class="literal">3/2</code>-th power of the 2nd central
          moment (the variance) of the sampless 3. The skewness estimator for weighted
          samples is formally identical to the estimator for unweighted samples,
          except that the weighted counterparts of all measures it depends on are
          to be taken.<br>样本分布的偏度被定义为样本(变异)的3次中心矩与2次中心矩的<code class="literal">3/2</code>次方之比。加权样本的偏度估算法形式上与非加权样本的相同，除了对所依赖的所有测量都使用加权的方式。
        </p>
<p>更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_skewness_impl.html" title="Struct template weighted_skewness_impl">weighted_skewness_impl</a></code>.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
  <span class="special">,</span> <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
<span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weighted_mean</span></code> <br>
              <code class="computeroutput"><span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">3</span><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_skewness.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_skewness.hpp&gt;">boost/accumulators/statistics/weighted_skewness.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_skewness</span><span class="special">&gt;,</span> <span class="keyword">int</span> <span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">;</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">7</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">4</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">3</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">9</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">3</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">);</span>

<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">weighted_mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">42.</span><span class="special">/</span><span class="number">11.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">212.</span><span class="special">/</span><span class="number">11.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">3</span><span class="special">&gt;(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1350.</span><span class="special">/</span><span class="number">11.</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">weighted_skewness</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1.30708406282</span><span class="special">,</span> <span class="number">1e-6</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_skewness_impl.html" title="Struct template weighted_skewness_impl">weighted_skewness_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_mean" title="weighted_mean and variants"><code class="literal">weighted_mean</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_moment" title="weighted_moment"><code class="literal">weighted_moment</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_sum"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_sum" title="weighted_sum and variants">
        weighted_sum <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          For summing the weighted samples or variates. All of the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_sum_of_variates</span><span class="special">&lt;&gt;</span></code>
          features can be extracted with the <code class="computeroutput"><span class="identifier">weighted_sum_of_variates</span><span class="special">()</span></code> extractor.<br>对加权样本或变值进行求和。所有 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_sum_of_variates</span><span class="special">&lt;&gt;</span></code>
          特征都可以用 <code class="computeroutput"><span class="identifier">weighted_sum_of_variates</span><span class="special">()</span></code> 提取器进行提取。
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span></code> 对于加权样本求和<br> <code class="computeroutput"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span></code> 对于加权变值求和
            </p></dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_sum</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_sum_of_variates</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code> <br> <code class="computeroutput"><em class="replaceable"><code>variate-tag</code></em></code> 对于变值求和 summing variates
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_sum.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_sum.hpp&gt;">boost/accumulators/statistics/weighted_sum.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_sum</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_sum_of_variates</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;</span> <span class="special">&gt;,</span> <span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">acc</span><span class="special">;</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">3</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weighted_sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">6</span><span class="special">,</span> <span class="identifier">weighted_sum_of_variates</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">3</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">6</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">8</span><span class="special">,</span> <span class="identifier">weighted_sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">24</span><span class="special">,</span> <span class="identifier">weighted_sum_of_variates</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>

<span class="identifier">acc</span><span class="special">(</span><span class="number">4</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">6</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="number">9</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">32</span><span class="special">,</span> <span class="identifier">weighted_sum</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">78</span><span class="special">,</span> <span class="identifier">weighted_sum_of_variates</span><span class="special">(</span><span class="identifier">acc</span><span class="special">));</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc"><li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_sum_impl.html" title="Struct template weighted_sum_impl">weighted_sum_impl</a></code></li></ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_weighted_tail_mean"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_weighted_tail_mean" title="non_coherent_weighted_tail_mean">
        non_coherent_weighted_tail_mean</a>
</h4></div></div></div>
<p>
          Estimation of the (non-coherent) weighted tail mean based on order statistics
          (for both left and right tails). The left non-coherent weighted tail mean
          feature is <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>,
          and the right non-choherent weighted tail mean feature is <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>.
          They both share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_non_coherent_tail_mean</span></code>
          feature with the unweighted non-coherent tail mean accumulators and can
          be extracted with either the <code class="computeroutput"><span class="identifier">non_coherent_tail_mean</span><span class="special">()</span></code> or the <code class="computeroutput"><span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">()</span></code> extractors. For more implementation details,
          see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/non_coherent_weighted_tail_mean_impl.html" title="Struct template non_coherent_weighted_tail_mean_impl">non_coherent_weighted_tail_mean_impl</a></code>.<br>基于次序统计估算(松散)加权尾均值(用于左右两端)。左端松散加权尾均值的特征为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_</span></code><code class="computeroutput"><span class="identifier">weighted</span></code><code class="computeroutput"><span class="identifier">_tail_mean</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>，而右端松散加权尾均值的特征为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_</span></code><code class="computeroutput"><span class="identifier">weighted</span></code><code class="computeroutput"><span class="identifier">_tail_mean</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>。它们和非加权的松散尾均值累加器一起共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_non_coherent_tail_mean</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">non_coherent_tail_mean</span><span class="special">()</span></code> 或 <code class="computeroutput"><span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">()</span></code>&nbsp; 提取器进行提取。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/non_coherent_weighted_tail_mean_impl.html" title="Struct template non_coherent_weighted_tail_mean_impl">non_coherent_weighted_tail_mean_impl</a></code>.
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
  <span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span>
<span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">sum_of_weights</span></code> <br>
              <code class="computeroutput"><span class="identifier">tail_weights</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">abstract_non_coherent_tail_mean</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(log N),&nbsp;其中 N 为缓存大小 
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N log N),&nbsp;其中 N 为缓存大小 
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_tail_mean.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_tail_mean.hpp&gt;">boost/accumulators/statistics/weighted_tail_mean.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>

<span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">n</span> <span class="special">=</span> <span class="number">100000</span><span class="special">;</span> <span class="comment">// number of MC steps  MC步数<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">c</span> <span class="special">=</span> <span class="number">25000</span><span class="special">;</span> <span class="comment">// cache size  缓存大小<br></span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span> <span class="special">&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span>
    <span class="identifier">acc0</span><span class="special">(</span> <span class="identifier">right_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span> <span class="special">&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span>
    <span class="identifier">acc1</span><span class="special">(</span> <span class="identifier">left_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>

<span class="comment">// random number generators 随机数生成器<br></span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">n</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">smpl</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">sqrt</span><span class="special">(</span><span class="identifier">rng</span><span class="special">());</span>
    <span class="identifier">acc0</span><span class="special">(</span><span class="identifier">smpl</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.</span><span class="special">/</span><span class="identifier">smpl</span><span class="special">);</span>
<span class="special">}</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">n</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">smpl</span> <span class="special">=</span> <span class="identifier">rng</span><span class="special">();</span>
    <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">smpl</span><span class="special">*</span><span class="identifier">smpl</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">smpl</span><span class="special">);</span>
<span class="special">}</span>

<span class="comment">// check uniform distribution 检查均衡分布<br></span><span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.95</span><span class="special">),</span> <span class="number">0.975</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.975</span><span class="special">),</span> <span class="number">0.9875</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.99</span><span class="special">),</span> <span class="number">0.995</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">(</span><span class="identifier">acc0</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">),</span> <span class="number">0.9995</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.05</span><span class="special">),</span> <span class="number">0.025</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.025</span><span class="special">),</span> <span class="number">0.0125</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.01</span><span class="special">),</span> <span class="number">0.005</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.001</span><span class="special">),</span> <span class="number">0.0005</span><span class="special">,</span> <span class="number">5</span><span class="special">*</span><span class="identifier">epsilon</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/non_coherent_weighted_tail_mean_impl.html" title="Struct template non_coherent_weighted_tail_mean_impl">non_coherent_weighted_tail_mean_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail" title="tail"><code class="literal">tail</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_tail_quantile"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_tail_quantile" title="weighted_tail_quantile">
        weighted_tail_quantile</a>
</h4></div></div></div>
<p>
          Tail quantile estimation based on order statistics of weighted samples
          (for both left and right tails). The left weighted tail quantile feature
          is <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_tail_quantile</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>,
          and the right weighted tail quantile feature is <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_tail_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>. They both share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">quantile</span></code> feature with the unweighted
          tail quantile accumulators and can be extracted with either the <code class="computeroutput"><span class="identifier">quantile</span><span class="special">()</span></code>
          or the <code class="computeroutput"><span class="identifier">weighted_tail_quantile</span><span class="special">()</span></code> extractors. For more implementation details,
          see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_tail_quantile_impl.html" title="Struct template weighted_tail_quantile_impl">weighted_tail_quantile_impl</a></code>&nbsp;<br>基于次序统计的加权样本尾部分位数估算(用于左右两端)。左端加权尾部分位数的特征为 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier"></span></code><code class="computeroutput"><span class="identifier">weighted_</span></code><code class="computeroutput"><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span></code>，右端加权尾部分位数的特征为 
<code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier"></span></code><code class="computeroutput"><span class="identifier">weighted_</span></code><code class="computeroutput"><span class="identifier">tail_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span></code>。它们和非加权尾部分位数累加器一起共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">quantile</span></code> 特征，都可以用 <code class="computeroutput"><span class="identifier">quantile</span><span class="special">()</span></code> 或 <code class="computeroutput"><span class="identifier">weighted_tail_quantile</span><span class="special">()</span></code>  
提取器进行提取。更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_tail_quantile_impl.html" title="Struct template weighted_tail_quantile_impl">weighted_tail_quantile_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><em class="replaceable"><code>sample-type</code></em>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">sum_of_weights</span></code> <br>
              <code class="computeroutput"><span class="identifier">tail_weights</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(log N),&nbsp;其中 N 为缓存大小 
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N log N),&nbsp;其中 N 为缓存大小 
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_tail_quantile.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_tail_quantile.hpp&gt;">boost/accumulators/statistics/weighted_tail_quantile.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// tolerance in % 以百分比表示的允许误差<br></span><span class="keyword">double</span> <span class="identifier">epsilon</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>

<span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">n</span> <span class="special">=</span> <span class="number">100000</span><span class="special">;</span> <span class="comment">// number of MC steps  MC步数<br></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">c</span> <span class="special">=</span>  <span class="number">20000</span><span class="special">;</span> <span class="comment">// cache size 缓存大小<br></span>
<span class="keyword">double</span> <span class="identifier">mu1</span> <span class="special">=</span> <span class="number">1.0</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">mu2</span> <span class="special">=</span> <span class="special">-</span><span class="number">1.0</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma1</span><span class="special">(</span><span class="identifier">mu1</span><span class="special">,</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma2</span><span class="special">(</span><span class="identifier">mu2</span><span class="special">,</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal1</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal2</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma2</span><span class="special">);</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_tail_quantile</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">&gt;</span> <span class="special">&gt;,</span> <span class="keyword">double</span><span class="special">&gt;</span>
    <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">right_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span><span class="special">);</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_tail_quantile</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">&gt;</span> <span class="special">&gt;,</span> <span class="keyword">double</span><span class="special">&gt;</span>
    <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">left_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span><span class="special">);</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">n</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sample1</span> <span class="special">=</span> <span class="identifier">normal1</span><span class="special">();</span>
    <span class="keyword">double</span> <span class="identifier">sample2</span> <span class="special">=</span> <span class="identifier">normal2</span><span class="special">();</span>
    <span class="identifier">acc1</span><span class="special">(</span><span class="identifier">sample1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu1</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample1</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu1</span><span class="special">)));</span>
    <span class="identifier">acc2</span><span class="special">(</span><span class="identifier">sample2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">exp</span><span class="special">(-</span><span class="identifier">mu2</span> <span class="special">*</span> <span class="special">(</span><span class="identifier">sample2</span> <span class="special">-</span> <span class="number">0.5</span> <span class="special">*</span> <span class="identifier">mu2</span><span class="special">)));</span>
<span class="special">}</span>

<span class="comment">// check standard normal distribution 检查标准正态分布<br></span><span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.975</span><span class="special">),</span>  <span class="number">1.959963</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.999</span><span class="special">),</span>  <span class="number">3.090232</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span>  <span class="special">=</span> <span class="number">0.025</span><span class="special">),</span> <span class="special">-</span><span class="number">1.959963</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span> <span class="identifier">quantile</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span>  <span class="special">=</span> <span class="number">0.001</span><span class="special">),</span> <span class="special">-</span><span class="number">3.090232</span><span class="special">,</span> <span class="identifier">epsilon</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_tail_quantile_impl.html" title="Struct template weighted_tail_quantile_impl">weighted_tail_quantile_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.sum" title="sum and variants"><code class="literal">sum</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail" title="tail"><code class="literal">tail</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_tail_variate_means"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_tail_variate_means" title="weighted_tail_variate_means and variants">
        weighted_tail_variate_means <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Estimation of the absolute and relative weighted tail variate means (for
          both left and right tails) The absolute weighted tail variate means has
          the feature <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">absolute_weighted_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span>
          <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code> and the relative weighted tail
          variate mean has the feature <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span>
          <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>. All absolute weighted tail
          variate mean features share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_absolute_tail_variate_means</span></code>
          feature with their unweighted variants and can be extracted with the <code class="computeroutput"><span class="identifier">tail_variate_means</span><span class="special">()</span></code>
          and <code class="computeroutput"><span class="identifier">weighted_tail_variate_means</span><span class="special">()</span></code> extractors. All the relative weighted
          tail variate mean features share the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_relative_tail_variate_means</span></code>
          feature with their unweighted variants and can be extracted with either
          the <code class="computeroutput"><span class="identifier">relative_tail_variate_means</span><span class="special">()</span></code> or <code class="computeroutput"><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">()</span></code> extractors.<br>估算绝对和相对的加权尾部变值平均值(用于左右两端)。绝对加权尾部变值平均值具有特征 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">absolute_</span></code><code class="computeroutput"><span class="identifier">weighted_</span></code><code class="computeroutput"><span class="identifier">tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> 
<em class="replaceable"><code>variate-type</code></em><span class="special">,</span> 
<em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>，而相对加权尾部变值平均值具有特征 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">relative_</span></code><code class="computeroutput"><span class="identifier">weighted_</span></code><code class="computeroutput"><span class="identifier">tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> 
<em class="replaceable"><code>variate-type</code></em><span class="special">,</span> 
<em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>。所有绝对加权尾部变值平均值与非加权的相应特征一些共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_absolute_tail_variate_means</span></code> 特征，并可以用 <code class="computeroutput"><span class="identifier">tail_variate_means</span><span class="special">()</span></code> 和 <code class="computeroutput"><span class="identifier">weighted_tail_variate_means</span><span class="special">()</span></code>提取器进行提取。所有相对加权尾部变值平均值与非加权的相应特征一起共享 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">abstract_relative_tail_variate_means</span></code> 特征，并可以用 <code class="computeroutput"><span class="identifier">relative_tail_variate_means</span><span class="special">()</span></code> 或 <code class="computeroutput"><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">()</span></code>提取器进行提取。
        </p>
<p>
          更多实现细节，请见 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_tail_variate_means_impl.html" title="Struct template weighted_tail_variate_means_impl">weighted_tail_variate_means_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span>
        <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
      <span class="special">,</span> <em class="replaceable"><code>weight-type</code></em>
    <span class="special">&gt;::</span><span class="identifier">result_type</span><span class="special">::</span><span class="identifier">iterator</span>
<span class="special">&gt;</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">non_coherent_weighted_tail_mean</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">tail_variate</span><span class="special">&lt;</span><em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">,</span> <em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">tail_weights</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">absolute_weighted_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
              <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">,</span> <em class="replaceable"><code>variate-type</code></em><span class="special">,</span> <em class="replaceable"><code>variate-tag</code></em><span class="special">&gt;</span></code>
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">tail</span><span class="special">&lt;</span><em class="replaceable"><code>left-or-right</code></em><span class="special">&gt;::</span><span class="identifier">cache_size</span></code>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">quantile_probability</span></code>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(log N),&nbsp;其中 N 为缓存大小 
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(N log N),&nbsp;其中 N 为缓存大小 
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_tail_variate_means.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_tail_variate_means.hpp&gt;">boost/accumulators/statistics/weighted_tail_variate_means.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">c</span> <span class="special">=</span> <span class="number">5</span><span class="special">;</span> <span class="comment">// cache size 缓存大小<br></span>
<span class="keyword">typedef</span> <span class="keyword">double</span> <span class="identifier">variate_type</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">variate_type</span><span class="special">&gt;</span> <span class="identifier">variate_set_type</span><span class="special">;</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_tail_variate_means</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">,</span> <span class="identifier">variate_set_type</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">relative</span><span class="special">)&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span>
    <span class="identifier">acc1</span><span class="special">(</span> <span class="identifier">right_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_tail_variate_means</span><span class="special">&lt;</span><span class="identifier">right</span><span class="special">,</span> <span class="identifier">variate_set_type</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">absolute</span><span class="special">)&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span>
    <span class="identifier">acc2</span><span class="special">(</span> <span class="identifier">right_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_tail_variate_means</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">,</span> <span class="identifier">variate_set_type</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">relative</span><span class="special">)&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span>
    <span class="identifier">acc3</span><span class="special">(</span> <span class="identifier">left_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>
<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_tail_variate_means</span><span class="special">&lt;</span><span class="identifier">left</span><span class="special">,</span> <span class="identifier">variate_set_type</span><span class="special">,</span> <span class="identifier">tag</span><span class="special">::</span><span class="identifier">covariate1</span><span class="special">&gt;(</span><span class="identifier">absolute</span><span class="special">)&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span>
    <span class="identifier">acc4</span><span class="special">(</span> <span class="identifier">left_tail_cache_size</span> <span class="special">=</span> <span class="identifier">c</span> <span class="special">);</span>

<span class="identifier">variate_set_type</span> <span class="identifier">cov1</span><span class="special">,</span> <span class="identifier">cov2</span><span class="special">,</span> <span class="identifier">cov3</span><span class="special">,</span> <span class="identifier">cov4</span><span class="special">,</span> <span class="identifier">cov5</span><span class="special">;</span>
<span class="keyword">double</span> <span class="identifier">c1</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span> <span class="number">10.</span><span class="special">,</span> <span class="number">20.</span><span class="special">,</span> <span class="number">30.</span><span class="special">,</span> <span class="number">40.</span> <span class="special">};</span> <span class="comment">// 100<br></span><span class="keyword">double</span> <span class="identifier">c2</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span> <span class="number">26.</span><span class="special">,</span>  <span class="number">4.</span><span class="special">,</span> <span class="number">17.</span><span class="special">,</span>  <span class="number">3.</span> <span class="special">};</span> <span class="comment">// 50<br></span><span class="keyword">double</span> <span class="identifier">c3</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span> <span class="number">46.</span><span class="special">,</span> <span class="number">64.</span><span class="special">,</span> <span class="number">40.</span><span class="special">,</span> <span class="number">50.</span> <span class="special">};</span> <span class="comment">// 200<br></span><span class="keyword">double</span> <span class="identifier">c4</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span>  <span class="number">1.</span><span class="special">,</span>  <span class="number">3.</span><span class="special">,</span> <span class="number">70.</span><span class="special">,</span>  <span class="number">6.</span> <span class="special">};</span> <span class="comment">// 80<br></span><span class="keyword">double</span> <span class="identifier">c5</span><span class="special">[]</span> <span class="special">=</span> <span class="special">{</span>  <span class="number">2.</span><span class="special">,</span>  <span class="number">2.</span><span class="special">,</span>  <span class="number">2.</span><span class="special">,</span> <span class="number">14.</span> <span class="special">};</span> <span class="comment">// 20<br></span><span class="identifier">cov1</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c1</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c1</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>
<span class="identifier">cov2</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c2</span><span class="special">,</span> <span class="identifier">c2</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c2</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>
<span class="identifier">cov3</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c3</span><span class="special">,</span> <span class="identifier">c3</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c3</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>
<span class="identifier">cov4</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c4</span><span class="special">,</span> <span class="identifier">c4</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c4</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>
<span class="identifier">cov5</span><span class="special">.</span><span class="identifier">assign</span><span class="special">(</span><span class="identifier">c5</span><span class="special">,</span> <span class="identifier">c5</span> <span class="special">+</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">c5</span><span class="special">)/</span><span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">variate_type</span><span class="special">));</span>

<span class="identifier">acc1</span><span class="special">(</span><span class="number">100.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.8</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov1</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span> <span class="number">50.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov2</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span><span class="number">200.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.0</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov3</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span> <span class="number">80.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.1</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov4</span><span class="special">);</span>
<span class="identifier">acc1</span><span class="special">(</span> <span class="number">20.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov5</span><span class="special">);</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">100.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.8</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov1</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span> <span class="number">50.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov2</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">200.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.0</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov3</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span> <span class="number">80.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.1</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov4</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span> <span class="number">20.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov5</span><span class="special">);</span>

<span class="identifier">acc3</span><span class="special">(</span><span class="number">100.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.8</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov1</span><span class="special">);</span>
<span class="identifier">acc3</span><span class="special">(</span> <span class="number">50.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov2</span><span class="special">);</span>
<span class="identifier">acc3</span><span class="special">(</span><span class="number">200.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.0</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov3</span><span class="special">);</span>
<span class="identifier">acc3</span><span class="special">(</span> <span class="number">80.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.1</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov4</span><span class="special">);</span>
<span class="identifier">acc3</span><span class="special">(</span> <span class="number">20.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov5</span><span class="special">);</span>

<span class="identifier">acc4</span><span class="special">(</span><span class="number">100.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.8</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov1</span><span class="special">);</span>
<span class="identifier">acc4</span><span class="special">(</span> <span class="number">50.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov2</span><span class="special">);</span>
<span class="identifier">acc4</span><span class="special">(</span><span class="number">200.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.0</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov3</span><span class="special">);</span>
<span class="identifier">acc4</span><span class="special">(</span> <span class="number">80.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.1</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov4</span><span class="special">);</span>
<span class="identifier">acc4</span><span class="special">(</span> <span class="number">20.</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1.2</span><span class="special">,</span> <span class="identifier">covariate1</span> <span class="special">=</span> <span class="identifier">cov5</span><span class="special">);</span>

<span class="comment">// check relative risk contributions 检查相对风险分布<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="special">(</span><span class="number">0.8</span><span class="special">*</span><span class="number">10</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">46</span><span class="special">)/(</span><span class="number">0.8</span><span class="special">*</span><span class="number">100</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">200</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="special">(</span><span class="number">0.8</span><span class="special">*</span><span class="number">20</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">64</span><span class="special">)/(</span><span class="number">0.8</span><span class="special">*</span><span class="number">100</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">200</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="special">(</span><span class="number">0.8</span><span class="special">*</span><span class="number">30</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">40</span><span class="special">)/(</span><span class="number">0.8</span><span class="special">*</span><span class="number">100</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">200</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="special">(</span><span class="number">0.8</span><span class="special">*</span><span class="number">40</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">50</span><span class="special">)/(</span><span class="number">0.8</span><span class="special">*</span><span class="number">100</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">200</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="special">(</span><span class="number">0.9</span><span class="special">*</span><span class="number">26</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">)/(</span><span class="number">0.9</span><span class="special">*</span><span class="number">50</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">20</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="special">(</span><span class="number">0.9</span><span class="special">*</span><span class="number">4</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">)/(</span><span class="number">0.9</span><span class="special">*</span><span class="number">50</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">20</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="special">(</span><span class="number">0.9</span><span class="special">*</span><span class="number">17</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">)/(</span><span class="number">0.9</span><span class="special">*</span><span class="number">50</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">20</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="special">(</span><span class="number">0.9</span><span class="special">*</span><span class="number">3</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">14</span><span class="special">)/(</span><span class="number">0.9</span><span class="special">*</span><span class="number">50</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">20</span><span class="special">)</span> <span class="special">);</span>

<span class="comment">// check absolute risk contributions 检查绝对风险分布<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="special">(</span><span class="number">0.8</span><span class="special">*</span><span class="number">10</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">46</span><span class="special">)/</span><span class="number">1.8</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="special">(</span><span class="number">0.8</span><span class="special">*</span><span class="number">20</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">64</span><span class="special">)/</span><span class="number">1.8</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="special">(</span><span class="number">0.8</span><span class="special">*</span><span class="number">30</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">40</span><span class="special">)/</span><span class="number">1.8</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.7</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="special">(</span><span class="number">0.8</span><span class="special">*</span><span class="number">40</span> <span class="special">+</span> <span class="number">1.0</span><span class="special">*</span><span class="number">50</span><span class="special">)/</span><span class="number">1.8</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="special">(</span><span class="number">0.9</span><span class="special">*</span><span class="number">26</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">)/</span><span class="number">2.1</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="special">(</span><span class="number">0.9</span><span class="special">*</span><span class="number">4</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">)/</span><span class="number">2.1</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="special">(</span><span class="number">0.9</span><span class="special">*</span><span class="number">17</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">)/</span><span class="number">2.1</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.3</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="special">(</span><span class="number">0.9</span><span class="special">*</span><span class="number">3</span> <span class="special">+</span> <span class="number">1.2</span><span class="special">*</span><span class="number">14</span><span class="special">)/</span><span class="number">2.1</span> <span class="special">);</span>

<span class="comment">// check relative risk contributions 检查相对风险分布<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="number">1.0</span><span class="special">*</span><span class="number">46</span><span class="special">/(</span><span class="number">1.0</span><span class="special">*</span><span class="number">200</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="number">1.0</span><span class="special">*</span><span class="number">64</span><span class="special">/(</span><span class="number">1.0</span><span class="special">*</span><span class="number">200</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="number">1.0</span><span class="special">*</span><span class="number">40</span><span class="special">/(</span><span class="number">1.0</span><span class="special">*</span><span class="number">200</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="number">1.0</span><span class="special">*</span><span class="number">50</span><span class="special">/(</span><span class="number">1.0</span><span class="special">*</span><span class="number">200</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">/(</span><span class="number">1.2</span><span class="special">*</span><span class="number">20</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">/(</span><span class="number">1.2</span><span class="special">*</span><span class="number">20</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">/(</span><span class="number">1.2</span><span class="special">*</span><span class="number">20</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">relative_weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc3</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="number">1.2</span><span class="special">*</span><span class="number">14</span><span class="special">/(</span><span class="number">1.2</span><span class="special">*</span><span class="number">20</span><span class="special">)</span> <span class="special">);</span>

<span class="comment">// check absolute risk contributions 检查绝对风险分布<br></span><span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="number">1.0</span><span class="special">*</span><span class="number">46</span><span class="special">/</span><span class="number">1.0</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="number">1.0</span><span class="special">*</span><span class="number">64</span><span class="special">/</span><span class="number">1.0</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="number">1.0</span><span class="special">*</span><span class="number">40</span><span class="special">/</span><span class="number">1.0</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.9</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="number">1.0</span><span class="special">*</span><span class="number">50</span><span class="special">/</span><span class="number">1.0</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span>    <span class="special">),</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">/</span><span class="number">1.2</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">1</span><span class="special">),</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">/</span><span class="number">1.2</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">2</span><span class="special">),</span> <span class="number">1.2</span><span class="special">*</span><span class="number">2</span><span class="special">/</span><span class="number">1.2</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="special">*(</span><span class="identifier">weighted_tail_variate_means</span><span class="special">(</span><span class="identifier">acc4</span><span class="special">,</span> <span class="identifier">quantile_probability</span> <span class="special">=</span> <span class="number">0.1</span><span class="special">).</span><span class="identifier">begin</span><span class="special">()</span> <span class="special">+</span> <span class="number">3</span><span class="special">),</span> <span class="number">1.2</span><span class="special">*</span><span class="number">14</span><span class="special">/</span><span class="number">1.2</span> <span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_tail_variate_means_impl.html" title="Struct template weighted_tail_variate_means_impl">weighted_tail_variate_means_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.non_coherent_weighted_tail_mean" title="non_coherent_weighted_tail_mean"><code class="literal">non_coherent_weighted_tail_mean</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail_variate" title="tail_variate"><code class="literal">tail_variate</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.tail" title="tail"><code class="literal">tail</code></a></li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="accumulators.user_s_guide.the_statistical_accumulators_library.weighted_variance"></a><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_variance" title="weighted_variance and variants">
        weighted_variance <span class="emphasis"><em>及其变体</em></span></a>
</h4></div></div></div>
<p>
          Lazy or iterative calculation of the weighted variance. The lazy calculation
          is associated with the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">lazy_weighted_variance</span></code>
          feature, and the iterative calculation with the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span></code>
          feature. Both can be extracted using the <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span><span class="special">()</span></code> extractor. For more implementation details,
          see <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/lazy_weighted_variance_impl.html" title="Struct template lazy_weighted_variance_impl">lazy_weighted_variance_impl</a></code>
          and <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_variance_impl.html" title="Struct template weighted_variance_impl">weighted_variance_impl</a></code><br>对加权方差的延迟或迭代计算。延迟计算方式以 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">lazy_</span></code><code class="computeroutput"><span class="identifier">weighted_</span></code><code class="computeroutput"><span class="identifier">variance</span></code> 特征相关联，而迭代计算方式以 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier"></span></code><code class="computeroutput"><span class="identifier">weighted_</span></code><code class="computeroutput"><span class="identifier">variance</span></code> 特征相关联。两者均可用 
<code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier"></span></code><code class="computeroutput"><span class="identifier">weighted_</span></code><code class="computeroutput"><span class="identifier">variance</span><span class="special">()</span></code> 提取器进行提取。更多实现细节，请见&nbsp; <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/lazy_weighted_variance_impl.html" title="Struct template lazy_weighted_variance_impl">lazy_weighted_variance_impl</a></code> 和 <code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_variance_impl.html" title="Struct template weighted_variance_impl">weighted_variance_impl</a></code>
        </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Result Type 返回类型</span></dt>
<dd>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">average</span><span class="special">&lt;</span>
    <span class="identifier">numeric</span><span class="special">::</span><span class="identifier">functional</span><span class="special">::</span><span class="identifier">multiplies</span><span class="special">&lt;</span><em class="replaceable"><code>sample-type</code></em><span class="special">,</span> <em class="replaceable"><code>weight-type</code></em><span class="special">&gt;::</span><span class="identifier">result_type</span>
  <span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span>
<span class="special">&gt;::</span><span class="identifier">result_type</span>
</pre>
<p>
            </p>
</dd>
<dt><span class="term">Depends On 依赖于</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">lazy_weighted_variance</span></code> 依赖于
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_mean</span></code> <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span></code> 依赖于 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">count</span></code> 和 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">immediate_weighted_mean</span></code>
            </p></dd>
<dt><span class="term">Variants 变体</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">lazy_weighted_variance</span></code> (又称 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span><span class="special">(</span><span class="identifier">lazy</span><span class="special">))</span></code>
              <br> <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span></code> (又称 <code class="computeroutput"><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span><span class="special">(</span><span class="identifier">immediate</span><span class="special">)</span></code>)
            </p></dd>
<dt><span class="term">Initialization Parameters 初始化参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Parameters 累加器参数</span></dt>
<dd><p>
              <code class="computeroutput"><span class="identifier">weight</span></code>
            </p></dd>
<dt><span class="term">Extractor Parameters 提取器参数</span></dt>
<dd><p>
              <span class="emphasis"><em>none 无</em></span>
            </p></dd>
<dt><span class="term">Accumulator Complexity 累加器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
<dt><span class="term">Extractor Complexity 提取器复杂度</span></dt>
<dd><p>
              O(1)
            </p></dd>
</dl>
</div>
<p>
          <span class="bold"><strong>Header 头文件</strong></span>
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><code class="computeroutput"><a class="link" href="reference.html#header.boost.accumulators.statistics.weighted_variance.hpp" title="Header 头文件 &lt;boost/accumulators/statistics/weighted_variance.hpp&gt;">boost/accumulators/statistics/weighted_variance.hpp</a></code><span class="special">&gt;</span>
</pre>
<p>
          <span class="bold"><strong>Example 例子</strong></span>
        </p>
<pre class="programlisting"><span class="comment">// lazy weighted_variance 延迟方式<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span><span class="special">(</span><span class="identifier">lazy</span><span class="special">)&gt;,</span> <span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">acc1</span><span class="special">;</span>

<span class="identifier">acc1</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">);</span>    <span class="comment">//  2<br></span><span class="identifier">acc1</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">3</span><span class="special">);</span>    <span class="comment">//  6<br></span><span class="identifier">acc1</span><span class="special">(</span><span class="number">3</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1</span><span class="special">);</span>    <span class="comment">//  3<br></span><span class="identifier">acc1</span><span class="special">(</span><span class="number">4</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">);</span>    <span class="comment">// 16<br></span><span class="identifier">acc1</span><span class="special">(</span><span class="number">5</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1</span><span class="special">);</span>    <span class="comment">//  5<br></span>
<span class="comment">// weighted_mean = (2+6+3+16+5) / (2+3+1+4+1) = 32 / 11 = 2.9090909090909090909090909090909<br></span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">5u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">2.9090909</span><span class="special">,</span> <span class="identifier">weighted_mean</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">10.1818182</span><span class="special">,</span> <span class="identifier">weighted_moment</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;(</span><span class="identifier">acc1</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.7190083</span><span class="special">,</span> <span class="identifier">weighted_variance</span><span class="special">(</span><span class="identifier">acc1</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>

<span class="comment">// immediate weighted_variance 立即方式<br></span><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span><span class="special">&gt;,</span> <span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">acc2</span><span class="special">;</span>

<span class="identifier">acc2</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">2</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">3</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">3</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">4</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">4</span><span class="special">);</span>
<span class="identifier">acc2</span><span class="special">(</span><span class="number">5</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="number">1</span><span class="special">);</span>

<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span><span class="number">5u</span><span class="special">,</span> <span class="identifier">count</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">));</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">2.9090909</span><span class="special">,</span> <span class="identifier">weighted_mean</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.7190083</span><span class="special">,</span> <span class="identifier">weighted_variance</span><span class="special">(</span><span class="identifier">acc2</span><span class="special">),</span> <span class="number">1e-5</span><span class="special">);</span>

<span class="comment">// check lazy and immediate variance with random numbers 用随机数检验延迟和立即方式<br></span>
<span class="comment">// two random number generators 两个随机数生成器<br></span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span> <span class="identifier">rng</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="identifier">mean_sigma</span><span class="special">(</span><span class="number">0</span><span class="special">,</span><span class="number">1</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">variate_generator</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lagged_fibonacci607</span><span class="special">&amp;,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">normal_distribution</span><span class="special">&lt;&gt;</span> <span class="special">&gt;</span> <span class="identifier">normal</span><span class="special">(</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">mean_sigma</span><span class="special">);</span>

<span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span><span class="special">&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">acc_lazy</span><span class="special">;</span>    <br><span class="identifier">accumulator_set</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">,</span> <span class="identifier">stats</span><span class="special">&lt;</span><span class="identifier">tag</span><span class="special">::</span><span class="identifier">weighted_variance</span><span class="special">(</span><span class="identifier">immediate</span><span class="special">)&gt;,</span> <span class="keyword">double</span> <span class="special">&gt;</span> <span class="identifier">acc_immediate</span><span class="special">;</span>

<span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span><span class="special">=</span><span class="number">0</span><span class="special">;</span> <span class="identifier">i</span><span class="special">&lt;</span><span class="number">10000</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">value</span> <span class="special">=</span> <span class="identifier">normal</span><span class="special">();</span>
    <span class="identifier">acc_lazy</span><span class="special">(</span><span class="identifier">value</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">rng</span><span class="special">());</span>
    <span class="identifier">acc_immediate</span><span class="special">(</span><span class="identifier">value</span><span class="special">,</span> <span class="identifier">weight</span> <span class="special">=</span> <span class="identifier">rng</span><span class="special">());</span>
<span class="special">}</span>

<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">weighted_variance</span><span class="special">(</span><span class="identifier">acc_lazy</span><span class="special">),</span> <span class="number">1.</span><span class="special">);</span>
<span class="identifier">BOOST_CHECK_CLOSE</span><span class="special">(</span><span class="number">1.</span><span class="special">,</span> <span class="identifier">weighted_variance</span><span class="special">(</span><span class="identifier">acc_immediate</span><span class="special">),</span> <span class="number">1.</span><span class="special">);</span>
</pre>
<p>
          <span class="bold"><strong>See also 参见</strong></span>
        </p>
<div class="itemizedlist"><ul type="disc">
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/lazy_weighted_variance_impl.html" title="Struct template lazy_weighted_variance_impl">lazy_weighted_variance_impl</a></code></li>
<li><code class="computeroutput"><a class="link" href="../boost/accumulators/impl/weighted_variance_impl.html" title="Struct template weighted_variance_impl">weighted_variance_impl</a></code></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.count" title="count"><code class="literal">count</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_mean" title="weighted_mean and variants"><code class="literal">weighted_mean</code></a></li>
<li><a class="link" href="user_s_guide.html#accumulators.user_s_guide.the_statistical_accumulators_library.weighted_moment" title="weighted_moment"><code class="literal">weighted_moment</code></a></li>
</ul></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tbody><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2005, 2006 Eric Niebler<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></tbody></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../accumulators.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../accumulators.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="acknowledgements.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body></html>