<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>History &amp; Compatibility Notes（历史和兼容性注记）</title>
<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.68.1">
<link rel="start" href="../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../function.html" title="Chapter 6. Boost.Function">
<link rel="prev" href="../function.html" title="Chapter 6. Boost.Function">
<link rel="next" href="tutorial.html" title="Tutorial">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%">
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../boost.png"></td>
<td align="center"><a href="../../../index.htm">Home</a></td>
<td align="center"><a href="../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="../../../people/people.htm">People</a></td>
<td align="center"><a href="../../../more/faq.htm">FAQ</a></td>
<td align="center"><a href="../../../more/index.htm">More</a></td>
</table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../function.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../function.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="tutorial.html"><img src="../images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="function.history"></a>History &amp; Compatibility Notes（历史和兼容性注记）</h2></div></div></div>
<div class="itemizedlist"><ul type="disc" compact>
<li>
<p><span class="bold"><strong>Version 1.34.0</strong></span>：</p>
<div class="itemizedlist"><ul type="circle" compact><li><p>Boost.Function 现在实现了一个 small buffer optimization（小缓冲优化），在拷贝或构造存储小函数对象的 Boost.Function 对象时强有力地提升了性能。例如，<code class="computeroutput">bind(&amp;X:foo, &amp;x, _1, _2)</code> 在放入一个 Boost.Function 对象时，不再请求堆分配。注意一些反对观点——安全保证被改变：赋值提供基本的异常保证而且 <code class="computeroutput">swap()</code> 可能抛出异常。</p></li></ul></div>
</li>
<li>
<p><span class="bold"><strong>Version 1.30.0</strong></span>：</p>
<div class="itemizedlist"><ul type="circle" compact>
<li><p>版本 1.29.0 中所有被列为反对的特性从 Boost.Function 中移除。</p></li>
<li><p><code class="computeroutput"><a href="../boost/function.html" title="Class template function">boost::function</a></code> 和 <code class="computeroutput"><a href="../boost/functionN.html" title="Class template functionN">boost::functionN</a></code> 可以被赋为 0（语义上等价于调用 <code class="computeroutput"><a href="../boost/function.html#id970240-bb">clear</a>()</code>），还可以和 0 进行比较（语义上等价于调用 <code class="computeroutput"><a href="../boost/function.html#id835072-bb">empty</a>()</code>）。</p></li>
<li><p>Boost.Function 的代码现在全部由 <a href="../../../libs/preprocessor/index.html" target="_top">Preprocessor</a> 库生成，所以现在为任何参数个数生成 <code class="computeroutput"><a href="../boost/function.html" title="Class template function">boost::function</a></code> 和 <code class="computeroutput"><a href="../boost/functionN.html" title="Class template functionN">boost::functionN</a></code> 类模板都是有可能的。</p></li>
<li><p>引入了 <code class="computeroutput"><a href="../boost/bad_function_call.html" title="Class bad_function_call">boost::bad_function_call</a></code> 异常类。</p></li>
</ul></div>
</li>
<li>
<p><span class="bold"><strong>Version 1.29.0</strong></span>：Boost.Function 的一部分被重新设计以最小化接口并使它更干净。几个很少使用或从来不用的旧 Boost.Function 的特性被列为反对并会在不远的将来被移除。以下是一个列表，列出这些被反对的特性，还有被反对后可能的影响，以及如何调整你的代码：</p>
<div class="itemizedlist"><ul type="circle" compact>
<li>
<p><code class="computeroutput">boost::function</code> 类模板的语法发生了变化。老的语法，比如 <code class="computeroutput">boost::function&lt;int, float, double, std::string&gt;</code> 被改变成更自然的语法 <code class="computeroutput">boost::function&lt;int (float, double, std::string)&gt;</code>，这里所有的返回和参数类型被编码到一个单独的函数类型参数中。任何其它模板参数（比如 <code class="computeroutput">Allocator</code>）跟在这个单独参数之后。</p>
<p>这一改变的决定依赖于你的编译器的能力：如果你的编译器支持模板偏特化并可以解析函数参数（大多数都可以），那就使用新的语法改变你的代码（推荐）或者直接使用那个语法没有变化的 <code class="computeroutput">functionN</code> 类。如果你的编译器不支持模板偏特化或函数类型，你必须使用后一种选择并使用带有编号的 Boost.Function 类。这一选择只不过需要将类似 <code class="computeroutput">boost::function&lt;void, int, int&gt;</code> 的类型改为 <code class="computeroutput">boost::function2&lt;void, int, int&gt;</code>（在类名的最后增加函数参数的个数）。</p>
<p><code class="computeroutput">boost::function</code> 类模板对旧语法的支持会持续一小段时间，但最终会被移除，以便我们可以提供更好的错误信息和连接兼容性。</p>
</li>
<li><p>invocation policy 类模板 (<code class="computeroutput">Policy</code>) 被列为反对并将被移除。对这一很少使用的特性没有直接的对应物。</p></li>
<li><p>mixin 模板参数 (<code class="computeroutput">Mixin</code>) 被列为反对并将被移除。对这一很少使用的特性没有直接的对应物。</p></li>
<li><p><code class="computeroutput">set</code> 方法被列为反对并将被移除。使用赋值操作符代替。</p></li>
</ul></div>
<p>
</p>
</li>
</ul></div>
</div>
<table width="100%"><tr>
<td align="left"><small><p>Last revised: November 03, 2006 at 19:41:09 GMT</p></small></td>
<td align="right"><small>Copyright  2001-2004 Douglas Gregor</small></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../function.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../function.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="tutorial.html"><img src="../images/next.png" alt="Next"></a>
</div>
</body>
</html>
