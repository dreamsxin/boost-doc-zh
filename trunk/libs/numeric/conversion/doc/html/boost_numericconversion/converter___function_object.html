<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>converter&lt;&gt; function object</title><link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../index.html" title="Chapter&nbsp;1.&nbsp;Boost.NumericConversion">
<link rel="up" href="../index.html" title="Chapter&nbsp;1.&nbsp;Boost.NumericConversion">
<link rel="prev" href="definitions.html" title="Definitions">
<link rel="next" href="type_requirements_and_user_defined_types_support.html" title="Type Requirements and User-defined-types support"></head>
<body alink="#0000ff" bgcolor="white" link="#0000ff" text="black" vlink="#840084">
<table cellpadding="2" width="100%"><tbody><tr>
<td valign="top"><img alt="Boost C++ Libraries" src="../../../../../../boost.png" height="86" width="277"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/people/people.htm">People</a></td>
<td align="center"><a href="http://www.boost.org/more/faq.htm">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></tbody></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="definitions.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="type_requirements_and_user_defined_types_support.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both;">
<a name="boost_numericconversion.converter___function_object"></a><a class="link" href="converter___function_object.html" title="converter&lt;&gt; function object">converter&lt;&gt;
    function object &nbsp;converter&lt;&gt; 函数对象</a>
</h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="converter___function_object.html#boost_numericconversion.converter___function_object.synopsis">Synopsis 摘要</a></span></dt>
<dt><span class="section"><a href="converter___function_object.html#boost_numericconversion.converter___function_object.template_parameters">Template
      parameters 模板参数</a></span></dt>
<dt><span class="section"><a href="converter___function_object.html#boost_numericconversion.converter___function_object.member_functions">Member
      functions 成员函数</a></span></dt>
<dt><span class="section"><a href="converter___function_object.html#boost_numericconversion.converter___function_object.range_checking_logic">Range
      Checking Logic 范围检查逻辑</a></span></dt>
<dt><span class="section"><a href="converter___function_object.html#boost_numericconversion.converter___function_object.examples">Examples 例子</a></span></dt>
</dl></div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_numericconversion.converter___function_object.synopsis"></a><a class="link" href="converter___function_object.html#boost_numericconversion.converter___function_object.synopsis" title="Synopsis">Synopsis 摘要</a>
</h3></div></div></div>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">numeric</span> <span class="special">{</span>


    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span>
             <span class="keyword">class</span> <span class="identifier">S</span><span class="special">,</span>
             <span class="keyword">class</span> <span class="identifier">Traits</span><span class="special">,</span>          <span class="special">=</span> <span class="identifier">conversion_traits</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">S</span><span class="special">&gt;</span>
             <span class="keyword">class</span> <span class="identifier">OverflowHandler</span>  <span class="special">=</span> <span class="identifier">def_overflow_handler</span><span class="special">,</span>
             <span class="keyword">class</span> <span class="identifier">Float2IntRounder</span> <span class="special">=</span> <span class="identifier">Trunc</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">Traits</span><span class="special">::</span><span class="identifier">source_type</span> <span class="special">&gt;,</span>
             <span class="keyword">class</span> <span class="identifier">RawConverter</span>     <span class="special">=</span> <span class="identifier">raw_converter</span><span class="special">&lt;</span><span class="identifier">Traits</span><span class="special">&gt;,</span>
             <span class="keyword">class</span> <span class="identifier">UserRangeChecker</span> <span class="special">=</span> <span class="identifier">UseInternalRangeChecker</span>
            <span class="special">&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">converter</span>
    <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">Traits</span> <span class="identifier">traits</span> <span class="special">;</span>

        <span class="keyword">typedef</span> <span class="keyword">typename</span> <span class="identifier">Traits</span><span class="special">::</span><span class="identifier">source_type</span>   <span class="identifier">source_type</span>   <span class="special">;</span>
        <span class="keyword">typedef</span> <span class="keyword">typename</span> <span class="identifier">Traits</span><span class="special">::</span><span class="identifier">argument_type</span> <span class="identifier">argument_type</span> <span class="special">;</span>
        <span class="keyword">typedef</span> <span class="keyword">typename</span> <span class="identifier">Traits</span><span class="special">::</span><span class="identifier">result_type</span>   <span class="identifier">result_type</span>   <span class="special">;</span>

        <span class="keyword">static</span> <span class="identifier">result_type</span> <span class="identifier">convert</span> <span class="special">(</span> <span class="identifier">argument_type</span> <span class="identifier">s</span> <span class="special">)</span> <span class="special">;</span>

        <span class="identifier">result_type</span> <span class="keyword">operator</span><span class="special">()</span> <span class="special">(</span> <span class="identifier">argument_type</span> <span class="identifier">s</span> <span class="special">)</span> <span class="keyword">const</span> <span class="special">;</span>

        <span class="comment">// Internal member functions: 内部成员函数：<br></span>
        <span class="keyword">static</span> <span class="identifier">range_check_result</span> <span class="identifier">out_of_range</span>      <span class="special">(</span> <span class="identifier">argument_type</span> <span class="identifier">s</span> <span class="special">)</span> <span class="special">;</span>
        <span class="keyword">static</span> <span class="keyword">void</span>               <span class="identifier">validate_range</span>    <span class="special">(</span> <span class="identifier">argument_type</span> <span class="identifier">s</span> <span class="special">)</span> <span class="special">;</span>
        <span class="keyword">static</span> <span class="identifier">result_type</span>        <span class="identifier">low_level_convert</span> <span class="special">(</span> <span class="identifier">argument_type</span> <span class="identifier">s</span> <span class="special">)</span> <span class="special">;</span>
        <span class="keyword">static</span> <span class="identifier">source_type</span>        <span class="identifier">nearbyint</span>         <span class="special">(</span> <span class="identifier">argument_type</span> <span class="identifier">s</span> <span class="special">)</span> <span class="special">;</span>

    <span class="special">}</span> <span class="special">;</span>

<span class="special">}</span> <span class="special">}</span> <span class="comment">// namespace numeric, boost<br></span></pre>
<p>
        <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">converter</span><span class="special">&lt;&gt;</span></code>
        is a <a href="http://www.sgi.com/tech/stl/UnaryFunction.html" target="_top">Unary Function
        Object</a> encapsulating the code to perform a numeric conversion with
        the direction and properties specified by the Traits template parameter.
        It can optionally take some <a class="link" href="../index.html#numeric_coversion_converter_policies">policies</a>
        which can be used to customize its behavior. The <code class="computeroutput"><span class="identifier">Traits</span></code>
        parameter is not a policy but the parameter that defines the conversion.<br><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">converter</span><span class="special">&lt;&gt;</span></code>
        是一个 <a href="http://www.sgi.com/tech/stl/UnaryFunction.html" target="_top">单参函数对象</a>，它封装了执行数字转换的代码，转换的方向和各种属性由 Traits 模板参数指定。它可选地接受一些 <a class="link" href="../index.html#numeric_coversion_converter_policies">策略</a> 以定制其行为。<code class="computeroutput"><span class="identifier">Traits</span></code>
        参数并非策略，但该参数定义了该转换。
      </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_numericconversion.converter___function_object.template_parameters"></a><a class="link" href="converter___function_object.html#boost_numericconversion.converter___function_object.template_parameters" title="Template parameters">Template
      parameters 模板参数</a>
</h3></div></div></div>
<div class="informaltable"><table class="table">
<colgroup><col><col></colgroup>
<thead><tr>
<th>
              <p>
              </p>
              </th>
<th>
              <p>
              </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">T</span></code>
              </p>
              </td>
<td>
              <p>
                The <a class="link" href="definitions.html#numeric_conversion_definitions_numeric_types">Numeric
                Type</a> which is the <span class="emphasis"><em>Target</em></span> of the conversion.</p><p>作为转换<span class="emphasis"><em>目标t</em></span>的 <a class="link" href="definitions.html#numeric_conversion_definitions_numeric_types">数字类型</a>。
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">S</span></code>
              </p>
              </td>
<td>
              <p>
                The <a class="link" href="definitions.html#numeric_conversion_definitions_numeric_types">Numeric
                Type</a> which is the <span class="emphasis"><em>Source</em></span> of the conversion.</p><p>作为转换<span class="emphasis"><em>源</em></span>的 <a class="link" href="definitions.html#numeric_conversion_definitions_numeric_types">数字类型</a>。
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">Traits</span></code>
              </p>
              </td>
<td>
              <p>
                This must be a conversion traits class with the interface of <a class="link" href="../index.html#numeric_conversion_traits"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">conversion_traits</span></code></a><br>必须是一个转换 traits 类，具有 <a class="link" href="../index.html#numeric_conversion_traits"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">conversion_traits</span></code></a> 的接口<a class="link" href="../index.html#numeric_conversion_traits"><code class="computeroutput"><span class="identifier"></span></code></a>
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">OverflowHandler</span></code>
              </p>
              </td>
<td>
              <p>
                <span class="bold"><strong>Stateless Policy</strong></span> called to administrate
                the result of the range checking.</p><p><span class="bold"><strong>无状态策略</strong></span>，被调用以处理范围检查的结果。
              </p>
              <p>
                It is a <span class="bold"><strong>Function Object</strong></span> which receives
                the result of <code class="computeroutput"><span class="identifier">out_of_range</span><span class="special">()</span></code> and is called inside the <code class="computeroutput"><span class="identifier">validate_range</span><span class="special">()</span></code>
                static member function exposed by the converter.<br>它是一个 <span class="bold"><strong>函数对象</strong></span>，接受 <code class="computeroutput"><span class="identifier">out_of_range</span><span class="special">()</span></code> 的结果，在由转换器所开放的 <code class="computeroutput"><span class="identifier">validate_range</span><span class="special">()</span></code> 静态成员函数中被调用。
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">Float2IntRounder</span></code>
              </p>
              </td>
<td>
              <p>
                <span class="bold"><strong>Stateless Policy</strong></span> which specifies
                the rounding mode used for float to integral conversions.</p><p><span class="bold"><strong>无状态策略</strong></span>，指定用于浮点数到整数转换的舍入方式。
              </p>
              <p>
                It supplies the <code class="computeroutput"><span class="identifier">nearbyint</span><span class="special">()</span></code> static member function exposed
                by the converter.<br>它提供由转换器开放的 <code class="computeroutput"><span class="identifier">nearbyint</span><span class="special">()</span></code> 静态成员函数。
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">RawConverter</span></code>
              </p>
              </td>
<td>
              <p>
                <span class="bold"><strong>Stateless Policy</strong></span> which is used to
                perform the actual conversion.</p><p><span class="bold"><strong>无状态策略</strong></span>，用于执行实际的转换。
              </p>
              <p>
                It supplies the <code class="computeroutput"><span class="identifier">low_level_convert</span><span class="special">()</span></code> static member function exposed
                by the converter.<br>它提供由转换器开放的 <code class="computeroutput"><span class="identifier">low_level_convert</span><span class="special">()</span></code> 过静态成员函数。
              </p>
              </td>
</tr>
<tr>
<td>
              <p>
                <code class="computeroutput"><span class="identifier">UserRangeChecker</span></code>
              </p>
              </td>
<td>
              <p>
                <span class="emphasis"><em>Special and Optional</em></span> <span class="bold"><strong>Stateless
                Policy</strong></span> which can be used to override the internal range
                checking logic.</p><p><span class="emphasis"><em>特定且可选的</em></span> <span class="bold"><strong>无状态策略</strong></span>，可用于覆盖内部的范围检查逻辑。
              </p>
              <p>
                If given, supplies alternative code for the <code class="computeroutput"><span class="identifier">out_of_range</span><span class="special">()</span></code> and <code class="computeroutput"><span class="identifier">validate_range</span><span class="special">()</span></code> static member functions exposed
                by the converter.<br>如果给出，则提供由转换器开放的 <code class="computeroutput"><span class="identifier">out_of_range</span><span class="special">()</span></code> 和 <code class="computeroutput"><span class="identifier">validate_range</span><span class="special">()</span></code> 静态成员函数的替换代码。
              </p>
              </td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_numericconversion.converter___function_object.member_functions"></a><a class="link" href="converter___function_object.html#boost_numericconversion.converter___function_object.member_functions" title="Member functions">Member
      functions 成员函数</a>
</h3></div></div></div>
<div class="blockquote"><blockquote class="blockquote">
<p>
          </p>
<p>
            <code class="computeroutput"><span class="keyword">static</span> <span class="identifier">result_type</span>
            <span class="identifier">converter</span><span class="special">&lt;&gt;::</span><span class="identifier">convert</span> <span class="special">(</span>
            <span class="identifier">argument_type</span> <span class="identifier">s</span>
            <span class="special">)</span> <span class="special">;</span>
            <span class="comment">// throw 有抛出 </span></code>
          </p>
<p>
        </p>
</blockquote></div>
<p>
        This static member function converts an rvalue of type <code class="computeroutput"><span class="identifier">source_type</span></code>
        to an rvalue of type <code class="computeroutput"><span class="identifier">target_type</span></code>.<br>该静态成员函数将一个类型为 <code class="computeroutput"><span class="identifier">source_type</span></code>
        的右值转换为一个类型为 <code class="computeroutput"><span class="identifier">target_type</span></code> 的右值。
      </p>

<p>
        If the conversion requires it, it performs a range checking before the conversion
        and passes the result of the check to the overflow handler policy (the default
        policy throws an exception if out-of-range is detected)<br>如果转换需要，则在转换前执行一个范围检查，并将检查结果传递给溢出处理器策略(缺省的策略是在检测到溢出时抛出一个异常)。
      </p>
<p>
        The implementation of this function is actually built from the policies and
        is basically as follows:<br>该函数的实现实际上是依据策略来建造，基本如下：
      </p>
<pre class="programlisting"><span class="identifier">result_type</span> <span class="identifier">converter</span><span class="special">&lt;&gt;::</span><span class="identifier">convert</span> <span class="special">(</span> <span class="identifier">argument_type</span> <span class="identifier">s</span> <span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">validate_range</span><span class="special">(</span><span class="identifier">s</span><span class="special">);</span> <span class="comment">// Implemented by the internal range checking logic<br></span>                       <span class="comment">// (which also calls the OverflowHandler policy)<br></span>                       <span class="comment">// or externally supplied by the UserRangeChecker policy.<br>                       // 由内部的范围检查逻辑来实现(它也调用 OverflowHandler 策略)<br>                       // 或者由 UserRangeChecker 策略所提供的外部逻辑来实现<br></span>
    <span class="identifier">s</span> <span class="special">=</span> <span class="identifier">nearbyint</span><span class="special">(</span><span class="identifier">s</span><span class="special">);</span> <span class="comment">// Externally supplied by the Float2IntRounder policy.<br></span>                      <span class="comment">// NOTE: This is actually called only for float to int conversions.<br>                      // 由 Float2IntRounder 策略提供的外部逻辑<br>                      // 注：仅在浮点数至整数转换时实际调用<br></span>
    <span class="keyword">return</span> <span class="identifier">low_level_convert</span><span class="special">(</span><span class="identifier">s</span><span class="special">);</span> <span class="comment">// Externally supplied by the RawConverter policy.<br>                                 // 由 RawConverter 策略提供的外部逻辑<br></span><span class="special">}</span>
</pre>
<p>
        </p><p>
        <code class="computeroutput"><span class="identifier">converter</span><span class="special">&lt;&gt;::</span><span class="keyword">operator</span><span class="special">()</span> <span class="keyword">const</span></code> just calls <code class="computeroutput"><span class="identifier">convert</span><span class="special">()</span><br><span class="identifier">converter</span><span class="special">&lt;&gt;::</span><span class="keyword">operator</span><span class="special">()</span> <span class="keyword">const</span></code> 只是调用 <code class="computeroutput"><span class="identifier">convert</span><span class="special">()</span></code>
      </p>
<p>
        <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span>
      </p>
<div class="blockquote"><blockquote class="blockquote">
<p>
          </p>
<p>
            <code class="computeroutput"><span class="keyword">static</span> <span class="identifier">range_check_result</span>
            <span class="identifier">numeric_converter</span><span class="special">&lt;&gt;::</span><span class="identifier">out_of_range</span> <span class="special">(</span>
            <span class="identifier">argument_type</span> <span class="identifier">s</span>
            <span class="special">)</span> <span class="special">;</span></code>
          </p>
<p>
        </p>
</blockquote></div>
<p>
        This <a class="link" href="converter___function_object.html#numeric_conversion_converter_internal">internal</a>
        static member function determines if the value <code class="computeroutput"><span class="identifier">s</span></code>
        can be represented by the target type without overflow.<br>该 <a class="link" href="converter___function_object.html#numeric_conversion_converter_internal">内部</a>
        静态成员函数判断值 <code class="computeroutput"><span class="identifier">s</span></code>
        是否可以被目标类型表示而没有溢出。
      </p>
<p>
        It does not determine if the conversion is <span class="emphasis"><em>exact</em></span>; that
        is, it does not detect <span class="emphasis"><em>inexact</em></span> conversions, only <span class="emphasis"><em>out-of-range</em></span>
        conversions (see the <a class="link" href="definitions.html#numeric_conversion_definitions_roundoff">Definitions</a>
        for further details).<br>它不判断转换是否 <span class="emphasis"><em>精确</em></span>；即它不检查 <span class="emphasis"><em>非精确的</em></span> 转换，只检查 <span class="emphasis"><em>超出范围的</em></span>
        转换(进一步的细节请见 <a class="link" href="definitions.html#numeric_conversion_definitions_roundoff">定义</a>)。</p><p>
        The return value is of enum type <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_converter_policies_range_check_result"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">range_check_result</span></code></a><br>返回值为枚举类型 <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_converter_policies_range_check_result"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">range_check_result</span></code></a>
      </p>

<p>
        The actual code for the range checking logic is optimized for the combined
        properties of the source and target types. For example, a non-subranged conversion
        (i.e: <code class="computeroutput"><span class="keyword">int</span></code>-&gt;<code class="computeroutput"><span class="keyword">float</span></code>), requires no range checking, so <code class="computeroutput"><span class="identifier">out_of_range</span><span class="special">()</span></code>
        returns <code class="computeroutput"><span class="identifier">cInRange</span></code> directly.
        See the following <a class="link" href="converter___function_object.html#numeric_conversion_converter_range_checking_logic">table</a>
        for more details.<br>范围检查逻辑的实际代码是根据源类型和目标类型的组合特性进行优化的。例如，一个非子范围的转换(如：<code class="computeroutput"><span class="keyword">int</span></code>-&gt;<code class="computeroutput"><span class="keyword">float</span></code>)，就不需要范围检查，所以 <code class="computeroutput"><span class="identifier">out_of_range</span><span class="special">()</span></code>
        直接返回 <code class="computeroutput"><span class="identifier">cInRange</span></code>。更多细节请见后文中的&nbsp;<a class="link" href="converter___function_object.html#numeric_conversion_converter_range_checking_logic">表格</a>。
      </p>
<p>
        If the user supplied a <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_user_range_checker">UserRangeChecker</a>
        policy, is this policy which implements this function, so the implementation
        is user defined, although it is expected to perform the same conceptual check
        and return the appropriate result.<br>如果用户提供了一个 <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_user_range_checker">UserRangeChecker</a>
        策略，该策略要实现这个函数，则该实现就是用户自定义的，当然所期望的是要执行相同概念上的检查并返回适当的结果。
      </p>
<p>
        <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span>
      </p>
<div class="blockquote"><blockquote class="blockquote">
<p>
          </p>
<p>
            <code class="computeroutput"><span class="keyword">static</span> <span class="keyword">void</span>
            <span class="identifier">numeric_converter</span><span class="special">&lt;&gt;::</span><span class="identifier">validate_range</span> <span class="special">(</span>
            <span class="identifier">argument_type</span> <span class="identifier">s</span>
            <span class="special">)</span> <span class="special">;</span>
            <span class="comment">// no throw 无抛出 </span></code>
          </p>
<p>
        </p>
</blockquote></div>
<p>
        This <a class="link" href="converter___function_object.html#numeric_conversion_converter_internal">internal</a>
        static member function calls out_of_range(s), and passes the result to the
        <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_overflow_handler">OverflowHandler</a>
        policy class.<br>该 <a class="link" href="converter___function_object.html#numeric_conversion_converter_internal">内部</a>
        静态成员函数调用 out_of_range(s)，并将结果传给
        <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_overflow_handler">OverflowHandler</a>
        策略类。
      </p>
<p>
        For those Target/Source combinations which don't require range checking,
        this is an empty inline function.<br>对于那些不需要范围检查的目标/源类型组合，它是一个空的内联函数。
      </p>
<p>
        If the user supplied a <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_user_range_checker">UserRangeChecker</a>
        policy, is this policy which implements this function, so the implementation
        is user defined, although it is expected to perform the same action as the
        default. In particular, it is expected to pass the result of the check to
        the overflow handler.<br>如果用户提供了一个 <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_user_range_checker">UserRangeChecker</a>
        策略，该策略要实现这个函数，则该实现就是用户自定义的，当然所期望的是要执行与缺省相同的动作。特别是，要将检查的结果传递给溢出处理器。
      </p>
<p>
        <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span>
      </p>
<div class="blockquote"><blockquote class="blockquote">
<p>
          </p>
<p>
            <code class="computeroutput"><span class="keyword">static</span> <span class="identifier">result_type</span>
            <span class="identifier">numeric_converter</span><span class="special">&lt;&gt;::</span><span class="identifier">low_level_convert</span> <span class="special">(</span>
            <span class="identifier">argument_type</span> <span class="identifier">s</span>
            <span class="special">)</span> <span class="special">;</span></code>
          </p>
<p>
        </p>
</blockquote></div>
<p>
        This <a class="link" href="converter___function_object.html#numeric_conversion_converter_internal">internal</a>
        static member function performs the actual conversion.<br>该 <a class="link" href="converter___function_object.html#numeric_conversion_converter_internal">内部</a>
        静态成员函数执行实际的转换。
      </p>
<p>
        This function is externally supplied by the <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_raw_converter">RawConverter</a>
        policy class.<br>该函数在外部由 <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_raw_converter">RawConverter</a>
        策略类提供。
      </p>
<p>
        <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span>
      </p>
<div class="blockquote"><blockquote class="blockquote">
<p>
          </p>
<p>
            <code class="computeroutput"><span class="keyword">static</span> <span class="identifier">source_type</span>
            <span class="identifier">converter</span><span class="special">&lt;&gt;::</span><span class="identifier">nearbyint</span> <span class="special">(</span>
            <span class="identifier">argument_type</span> <span class="identifier">s</span>
            <span class="special">)</span> <span class="special">;</span></code>
          </p>
<p>
        </p>
</blockquote></div>
<p>
        This <a class="link" href="converter___function_object.html#numeric_conversion_converter_internal">internal</a>
        static member function, which is <span class="underline">only used</span>
        for <code class="computeroutput"><span class="keyword">float</span></code> to <code class="computeroutput"><span class="keyword">int</span></code>
        conversions, returns an <span class="emphasis"><em>integer</em></span> value of <span class="emphasis"><em><span class="underline">floating-point type</span></em></span> according to some
        rounding direction.<br>该 <a class="link" href="converter___function_object.html#numeric_conversion_converter_internal">内部</a>
        静态成员函数，<span class="underline">仅用于</span> <code class="computeroutput"><span class="keyword">float</span></code> 至 <code class="computeroutput"><span class="keyword">int</span></code>
        的转换，根据某个舍入的方向返回<span class="emphasis"><em><span class="underline">浮点数类型</span></em></span>的一个<span class="emphasis"><em>整数</em></span>值。
      </p>
<p>
        This function is externally supplied by the <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_float_to_int_rounder">Float2IntRounder</a>
        policy class which encapsulates the specific rounding mode.<br>该函数在外部由封装了特定舍入方式的 <a class="link" href="numeric_converter_policy_classes.html#numeric_conversion_policy_float_to_int_rounder">Float2IntRounder</a>
        策略类提供。
      </p>
<p>
        <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span>
      </p>
<a name="numeric_conversion_converter_internal"></a><p>
      </p>
<a name="boost_numericconversion.converter___function_object.member_functions.internal_member_functions"></a><h5>
<a name="id2644439"></a>
        <a class="link" href="converter___function_object.html#boost_numericconversion.converter___function_object.member_functions.internal_member_functions">Internal
        Member Functions 内部成员函数</a>
      </h5>
<p>
        These static member functions build the actual conversion code used by <code class="computeroutput"><span class="identifier">convert</span><span class="special">()</span></code>.
        The user does not have to call these if calling <code class="computeroutput"><span class="identifier">convert</span><span class="special">()</span></code>, since <code class="computeroutput"><span class="identifier">convert</span><span class="special">()</span></code> calls them infernally, but they can be
        called separately for specific needs.<br>这些静态成员函数构建了用于 <code class="computeroutput"><span class="identifier">convert</span><span class="special">()</span></code> 的实际转换代码。用户代码如果调用了 <code class="computeroutput"><span class="identifier">convert</span><span class="special">()</span></code> 就无需调用它们，因为 <code class="computeroutput"><span class="identifier">convert</span><span class="special">()</span></code> 已经在内部调用了它们，不过如果有特别需要，它们也可以被单独调用。
      </p>
</div>
<a name="numeric_conversion_converter_range_checking_logic"></a><p>
    </p>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_numericconversion.converter___function_object.range_checking_logic"></a><a class="link" href="converter___function_object.html#boost_numericconversion.converter___function_object.range_checking_logic" title="Range Checking Logic">Range
      Checking Logic 范围检查逻辑</a>
</h3></div></div></div>
<p>
        The following table summarizes the internal range checking logic performed
        for each combination of the properties of Source and Target.<br>下表总结了对各种源类型和目标类型组合所执行的内部范围检查逻辑。
      </p>
<p>
        LowestT/HighestT denotes the highest and lowest values of the Target type,
        respectively.<br>LowestT/HighestT 分别表示目标类型的最大值和最小值。
      </p>
<p>
        <code class="computeroutput"><span class="identifier">S</span><span class="special">(</span><span class="identifier">n</span><span class="special">)</span></code> is short
        for <code class="computeroutput"><span class="keyword">static_cast</span><span class="special">&lt;</span><span class="identifier">S</span><span class="special">&gt;(</span><span class="identifier">n</span><span class="special">)</span></code> (<code class="computeroutput"><span class="identifier">S</span></code> denotes the Source type).<br><code class="computeroutput"><span class="identifier">S</span><span class="special">(</span><span class="identifier">n</span><span class="special">)</span></code> 是 <code class="computeroutput"><span class="keyword">static_cast</span><span class="special">&lt;</span><span class="identifier">S</span><span class="special">&gt;(</span><span class="identifier">n</span><span class="special">)</span></code> 的缩写(<code class="computeroutput"><span class="identifier">S</span></code> 表示源类型)。
      </p>
<p>
        <code class="computeroutput"><span class="identifier">NONE</span></code> indicates that for this
        case there is no range checking.<br><code class="computeroutput"><span class="identifier">NONE</span></code> 表示此种情况无范围检查。
      </p>
<pre class="programlisting"><code class="literal">
int_to_int    |--&gt; sig_to_sig     |--&gt; subranged     |--&gt; ( s &gt;= S(LowestT) ) &amp;&amp; ( s &lt;= S(HighestT) )
              |                   |--&gt; not subranged |--&gt; NONE
              |
              |--&gt; unsig_to_unsig |--&gt; subranged     |--&gt; ( s &gt;= S(LowestT) ) &amp;&amp; ( s &lt;= S(HighestT) )
              |                   |--&gt; not subranged |--&gt; NONE
              |
              |--&gt; sig_to_unsig   |--&gt; pos subranged     |--&gt; ( s &gt;= S(0) ) &amp;&amp; ( s &lt;= S(HighestT) )
              |                   |--&gt; not pos subranged |--&gt; ( s &gt;= S(0) )
              |
              |--&gt; unsig_to_sig   |--&gt; subranged     |--&gt; ( s &lt;= S(HighestT) )
              |                   |--&gt; not subranged |--&gt; NONE
</code>
<code class="literal">
int_to_float   |--&gt; NONE
</code>
<code class="literal">
float_to_int   |--&gt; round_to_zero         |--&gt; ( s &gt;  S(LowestT)-S(1)   ) &amp;&amp; ( s &lt;  S(HighestT)+S(1)   )
               |--&gt; round_to_even_nearest |--&gt; ( s &gt;= S(LowestT)-S(0.5) ) &amp;&amp; ( s &lt;  S(HighestT)+S(0.5) )
               |--&gt; round_to_infinity     |--&gt; ( s &gt;  S(LowestT)-S(1)   ) &amp;&amp; ( s &lt;= S(HighestT)        )
               |--&gt; round_to_neg_infinity |--&gt; ( s &gt;= S(LowestT)        ) &amp;&amp; ( s &lt;  S(HighestT)+S(1)   )
</code>
<code class="literal">
float_to_float |--&gt; subranged     |--&gt; ( s &gt;= S(LowestT) ) &amp;&amp; ( s &lt;= S(HighestT) )
               |--&gt; not subranged |--&gt; NONE
</code>
</pre>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_numericconversion.converter___function_object.examples"></a><a class="link" href="converter___function_object.html#boost_numericconversion.converter___function_object.examples" title="Examples">Examples 例子</a>
</h3></div></div></div>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">cassert</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">numeric</span><span class="special">/</span><span class="identifier">conversion</span><span class="special">/</span><span class="identifier">converter</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>

    <span class="keyword">typedef</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">converter</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span><span class="keyword">double</span><span class="special">&gt;</span> <span class="identifier">Double2Int</span> <span class="special">;</span>

    <span class="keyword">int</span> <span class="identifier">x</span> <span class="special">=</span> <span class="identifier">Double2Int</span><span class="special">::</span><span class="identifier">convert</span><span class="special">(</span><span class="number">2.0</span><span class="special">);</span>
    <span class="identifier">assert</span> <span class="special">(</span> <span class="identifier">x</span> <span class="special">==</span> <span class="number">2</span> <span class="special">);</span>

    <span class="keyword">int</span> <span class="identifier">y</span> <span class="special">=</span> <span class="identifier">Double2Int</span><span class="special">()(</span><span class="number">3.14</span><span class="special">);</span> <span class="comment">// As a function object. 因为是函数对象。<br></span>    <span class="identifier">assert</span> <span class="special">(</span> <span class="identifier">y</span> <span class="special">==</span> <span class="number">3</span> <span class="special">)</span> <span class="special">;</span> <span class="comment">// The default rounding is trunc. 缺省的舍入方式是截断。<br></span>
    <span class="keyword">try</span>
    <span class="special">{</span>
        <span class="keyword">double</span> <span class="identifier">m</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">bounds</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">&gt;::</span><span class="identifier">highest</span><span class="special">();</span>
        <span class="keyword">int</span> <span class="identifier">z</span> <span class="special">=</span> <span class="identifier">Double2Int</span><span class="special">::</span><span class="identifier">convert</span><span class="special">(</span><span class="identifier">m</span><span class="special">);</span> <span class="comment">// By default throws positive_overflow()<br>                                        // 缺省抛出 positive_overflow()<br></span>    <span class="special">}</span>
    <span class="keyword">catch</span> <span class="special">(</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">numeric</span><span class="special">::</span><span class="identifier">positive_overflow</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="special">)</span>
    <span class="special">{</span>
    <span class="special">}</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tbody><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2004 -2007 Fernando Luis Cacciola Carballal<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></tbody></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="definitions.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="type_requirements_and_user_defined_types_support.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body></html>