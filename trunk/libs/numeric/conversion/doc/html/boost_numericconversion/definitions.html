<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Definitions</title>

<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../index.html" title="Chapter&nbsp;1.&nbsp;Boost.NumericConversion">
<link rel="up" href="../index.html" title="Chapter&nbsp;1.&nbsp;Boost.NumericConversion">
<link rel="prev" href="../index.html" title="Chapter&nbsp;1.&nbsp;Boost.NumericConversion">
<link rel="next" href="converter___function_object.html" title="converter&lt;&gt; function object"></head>
<body style="color: black; background-color: white;" alink="#0000ff" link="#0000ff" vlink="#840084">
<table cellpadding="2" width="100%">
<tbody>
<tr>
<td valign="top"><img alt="Boost C++ Libraries" src="../../../../../../boost.png" height="86" width="277"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/people/people.htm">People</a></td>
<td align="center"><a href="http://www.boost.org/more/faq.htm">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr>
</tbody>
</table>
<hr>
<div class="spirit-nav"><a accesskey="p" href="../index.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="converter___function_object.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a></div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both;"><a name="boost_numericconversion.definitions"></a><a class="link" href="definitions.html" title="Definitions">Definitions
定义</a>
</h2>
</div>
</div>
</div>
<div class="toc">
<dl>
<dt><span class="section"><a href="definitions.html#boost_numericconversion.definitions.introduction">Introduction
简介</a></span></dt>
<dt><span class="section"><a href="definitions.html#boost_numericconversion.definitions.types_and_values">Types
and Values 类型与值</a></span></dt>
<dt><span class="section"><a href="definitions.html#boost_numericconversion.definitions.c___arithmetic_types">C++
Arithmetic Types &nbsp;C++的算术类型</a></span></dt>
<dt><span class="section"><a href="definitions.html#boost_numericconversion.definitions.numeric_types">Numeric
Types 数字类型</a></span></dt>
<dt><span class="section"><a href="definitions.html#boost_numericconversion.definitions.range_and_precision">Range
and Precision 范围和精度</a></span></dt>
<dt><span class="section"><a href="definitions.html#boost_numericconversion.definitions.exact__correctly_rounded_and_out_of_range_representations">Exact,
Correctly Rounded and Out-Of-Range Representations 精确的、适当舍入的和超出范围的表示法</a></span></dt>
<dt><span class="section"><a href="definitions.html#boost_numericconversion.definitions.standard__numeric__conversions">Standard
(numeric) Conversions 标准的(数字)转换</a></span></dt>
<dt><span class="section"><a href="definitions.html#boost_numericconversion.definitions.subranged_conversion_direction__subtype_and_supertype">Subranged
Conversion Direction, Subtype and Supertype 子范围转换方向、子类型和父类型</a></span></dt>
</dl>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_numericconversion.definitions.introduction"></a><a class="link" href="definitions.html#boost_numericconversion.definitions.introduction" title="Introduction">Introduction 简介</a>
</h3>
</div>
</div>
</div>
<p> This section provides definitions of terms used in the
Numeric Conversion library.<br>
本节提供了在 Numeric Conversion 库中所使用的术语的定义。 </p>
<div class="sidebar">
<p><span class="bold"><strong>Notation</strong></span>
<span class="underline">underlined text</span>
denotes terms defined in the C++ standard.<br>
<span class="bold"><strong>记号</strong></span>
<span class="underline">带下划线的文字</span>
表示在C++标准中定义的术语。 </p>
<p> <span class="bold"><strong>bold face</strong></span>
denotes terms defined here but not in the standard.<br>
<span class="bold"><strong>黒体字</strong></span>
表示在本文中定义而标准中没有的术语。 </p>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_numericconversion.definitions.types_and_values"></a><a class="link" href="definitions.html#boost_numericconversion.definitions.types_and_values" title="Types and Values">Types and Values 类型与值</a>
</h3>
</div>
</div>
</div>
<p> As defined by the <span class="underline">C++
Object Model</span> (§1.7) the <span class="underline">storage</span>
or memory on which a C++ program runs is a contiguous sequence of <span class="underline">bytes</span> where each byte is a
contiguous sequence of bits.&nbsp;<br>
如 <span class="underline">C++ 对象模型</span> (§1.7)
中所定义的，一个C++程序运行于其上的 <span class="underline">存储</span>
或内存是指一段连续的 <span class="underline">字节</span>，其中每个字节都
是一段连续的二进制位。 </p>
<p> An <span class="underline">object</span>
is a region of storage (§1.8) and has a type (§3.9).<br>
一个 <span class="underline">对象</span>
是指一块存储(§1.8)，它具有某种类型(§3.9)。 </p>
<p> A <span class="underline">type</span> is
a discrete set of values.<br>
一个 <span class="underline">类型</span> 是指多个值的一个离散集。 </p>
<p> An object of type <code class="computeroutput"><span class="identifier">T</span></code> has an <span class="underline">object representation</span> which
is the sequence of bytes stored in the object (§3.9/4)<br>
类型 <code class="computeroutput"><span class="identifier">T</span></code> 的一个对象有一个 <span class="underline">对象表示法</span>，即保存在该对象中的一段字节(§3.9/4) </p>
<p> An object of type <code class="computeroutput"><span class="identifier">T</span></code> has a <span class="underline">value representation</span> which is
the set of bits that determine the <span class="emphasis"><em>value</em></span>
of an object of that type (§3.9/4). For <span class="underline">POD</span>
types (§3.9/10), this bitset is given by the object representation, but
not all the bits in the storage need to participate in the value
representation (except for character types): for example, some bits
might be used for padding or there may be trap-bits.<br>
类型 <code class="computeroutput"><span class="identifier">T</span></code> 的一个对象有一个 <span class="underline">值表示法</span>，即一组二进制位的集合，它决定了该类型的一个对象的<span class="emphasis"><em>值</em></span>(§3.9/4)。
对于 <span class="underline">POD</span>
类型(§3.9/10)，这个位集合就是由对象表示法所给定的，但不是在存储中的每个二进制位都需要用于值表示法(除了字符类型以外)：例如，有些二进制
位可能被用于填充或者是 trap-bits。 </p>
<p> <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span> </p>
<p> The <span class="bold"><strong>typed value</strong></span>
that is held by an object is the value which is determined by its value
representation.<br>
由一个对象所持有的 <span class="bold"><strong>有类型值</strong></span>
即是由它的值表示法所确定的值。 </p>
<p> An <span class="bold"><strong>abstract
value</strong></span> (untyped) is the conceptual
information that is represented in a type (i.e. the number π).<br>
<span class="bold"><strong>抽象值</strong></span>
(无类型的) 是指在类型中所表示的概念上的信息(如数字 π)。 </p>
<p> The <span class="bold"><strong>intrinsic
value</strong></span> of an object is the binary value of
the sequence of unsigned characters which form its object
representation.<br>
一个对象的 <span class="bold"><strong>固有值</strong></span>
是指形成其对象表示法的一串无符号字符的二进制值。 </p>
<p> <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span> </p>
<p> <span class="emphasis"><em>Abstract</em></span>
values can be <span class="bold"><strong>represented</strong></span>
in a given type.<br>
<span class="emphasis"><em>抽象值</em></span>
可以在一个给定类型中进行 <span class="bold"><strong>表示</strong></span>。
</p>
<p> To <span class="bold"><strong>represent</strong></span>
an abstract value <code class="computeroutput"><span class="identifier">V</span></code> in a type <code class="computeroutput"><span class="identifier">T</span></code>
is to obtain a typed value <code class="computeroutput"><span class="identifier">v</span></code> which
corresponds to the abstract value <code class="computeroutput"><span class="identifier">V</span></code>.<br>
在类型 <code class="computeroutput"><span class="identifier">T</span></code> 中 <span class="bold"><strong>表示</strong></span>
抽象值 <code class="computeroutput"><span class="identifier">V</span></code> 是指，获得一个有类型值 <code class="computeroutput"><span class="identifier">v</span></code>，
它对应于抽象值 <code class="computeroutput"><span class="identifier">V</span></code>. </p>
<p> The operation is denoted using the <code class="computeroutput"><span class="identifier">rep</span><span class="special">()</span></code> operator, as
in: <code class="computeroutput"><span class="identifier">v</span><span class="special">=</span><span class="identifier">rep</span><span class="special">(</span><span class="identifier">V</span><span class="special">)</span></code>.
<code class="computeroutput"><span class="identifier">v</span></code>
is the <span class="bold"><strong>representation</strong></span>
of <code class="computeroutput"><span class="identifier">V</span></code> in the type <code class="computeroutput"><span class="identifier">T</span></code>.<br>
这一操作用 <code class="computeroutput"><span class="identifier">rep</span><span class="special">()</span></code>
操作符来表示，如：<code class="computeroutput"><span class="identifier">v</span><span class="special">=</span><span class="identifier">rep</span><span class="special">(</span><span class="identifier">V</span><span class="special">)</span></code>.
<code class="computeroutput"><span class="identifier">v</span></code>
是在类型 <code class="computeroutput"><span class="identifier">T</span></code> 中的 <code class="computeroutput"><span class="identifier">V</span></code>
的 <span class="bold"><strong>表示法</strong></span>。
</p>
<p> For example, the abstract value π can be represented in the
type <code class="computeroutput"><span class="keyword">double</span></code>
as the <code class="computeroutput"><span class="keyword">double</span> <span class="identifier">value</span> <span class="identifier">M_PI</span></code> and in the
type <code class="computeroutput"><span class="keyword">int</span></code>
as the <code class="computeroutput"><span class="keyword">int</span> <span class="identifier">value</span>
<span class="number">3<br>
</span></code>例如，抽象值 π 可以在类型 <code class="computeroutput"><span class="keyword">double</span></code>
中表示为 <code class="computeroutput"><span class="keyword">double</span>
<span class="identifier">value</span> <span class="identifier">M_PI</span></code>，而在类型 <code class="computeroutput"><span class="keyword">int</span></code>
中表示为 <code class="computeroutput"><span class="keyword">int</span>
<span class="identifier">value</span> <span class="number">3</span></code> </p>
<p> <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span> </p>
<p> Conversely, <span class="emphasis"><em>typed
values</em></span> can be <span class="bold"><strong>abstracted</strong></span>.<br>
反之，<span class="emphasis"><em>有类型值</em></span>
也可以被 <span class="bold"><strong>抽象</strong></span>。
</p>
<p> To <span class="bold"><strong>abstract</strong></span>
a typed value <code class="computeroutput"><span class="identifier">v</span></code> of type <code class="computeroutput"><span class="identifier">T</span></code>
is to obtain the abstract value <code class="computeroutput"><span class="identifier">V</span></code> whose
representation in <code class="computeroutput"><span class="identifier">T</span></code> is <code class="computeroutput"><span class="identifier">v</span></code>.<br>
要 <span class="bold"><strong>抽象</strong></span>
类型 <code class="computeroutput"><span class="identifier">T</span></code> 的一个有类型值 <code class="computeroutput"><span class="identifier">v</span></code><code class="computeroutput"><span class="identifier"></span></code>，
就是得到一个在 <code class="computeroutput"><span class="identifier">T</span></code> 中表示 <code class="computeroutput"><span class="identifier">v</span></code>
的抽象值 <code class="computeroutput"><span class="identifier">V</span></code><code class="computeroutput"><span class="identifier"></span></code>。&nbsp;
</p>
<p> The operation is denoted using the <code class="computeroutput"><span class="identifier">abt</span><span class="special">()</span></code> operator, as
in: <code class="computeroutput"><span class="identifier">V</span><span class="special">=</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">v</span><span class="special">)</span></code>.<br>
这一操作用 <code class="computeroutput"><span class="identifier">abt</span><span class="special">()</span></code>
操作符来表示，如：<code class="computeroutput"><span class="identifier">V</span><span class="special">=</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">v</span><span class="special">)</span></code>.
</p>
<p> <code class="computeroutput"><span class="identifier">V</span></code> is the <span class="bold"><strong>abstraction</strong></span>
of <code class="computeroutput"><span class="identifier">v</span></code> of type <code class="computeroutput"><span class="identifier">T</span></code>.<br>
<code class="computeroutput"><span class="identifier">V</span></code>
是类型 <code class="computeroutput"><span class="identifier">T</span></code> 的 <code class="computeroutput"><span class="identifier">v</span></code>
值的 <span class="bold"><strong>抽象</strong></span>。
</p>
<p> Abstraction is just an abstract operation (you can't do it);
but it is defined nevertheless because it will be used to give the
definitions in the rest of this document.<br>
抽象只是一个抽象的操作(你不能执行它)；但是我们仍然对它进行定义，因为它可以用于为本文档的其余部分给出定义。 </p>
</div>
<a name="numeric_conversion_cpp_arithmetic_types"></a>
<p> </p>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_numericconversion.definitions.c___arithmetic_types"></a><a class="link" href="definitions.html#boost_numericconversion.definitions.c___arithmetic_types" title="C++ Arithmetic Types">C++ Arithmetic Types
&nbsp;C++算术类型</a>
</h3>
</div>
</div>
</div>
<p> The C++ language defines <span class="underline">fundamental
types</span> (§3.9.1). The following subsets of the fundamental
types are intended to represent <span class="emphasis"><em>numbers</em></span>:<br>
C++ 语言定义了一些 <span class="underline">基本类型</span>
(§3.9.1)。以下是基本类型的一个子集，它们用于表示 <span class="emphasis"><em>数
字</em></span>： </p>
<div class="variablelist">
<dl>
<dt><span class="term"><span class="underline">signed
integer types</span> (§3.9.1/2):</span></dt>
<dt><span class="term"></span><span class="term"><span class="underline">有符号整数类型</span>
(§3.9.1/2):</span></dt>
<dd>
<p> <code class="computeroutput"><span class="special">{</span><span class="keyword">signed</span>
<span class="keyword">char</span><span class="special">,</span> <span class="keyword">signed</span>
<span class="keyword">short</span> <span class="keyword">int</span><span class="special">,</span>
<span class="keyword">signed</span> <span class="keyword">int</span><span class="special">,</span>
<span class="keyword">signed</span> <span class="keyword">long</span> <span class="keyword">int</span><span class="special">}</span></code> Can be used to
represent general integer numbers (both negative and positive).<br>
<code class="computeroutput"><span class="special">{</span><span class="keyword">signed</span> <span class="keyword">char</span><span class="special">,</span> <span class="keyword">signed</span>
<span class="keyword">short</span> <span class="keyword">int</span><span class="special">,</span>
<span class="keyword">signed</span> <span class="keyword">int</span><span class="special">,</span>
<span class="keyword">signed</span> <span class="keyword">long</span> <span class="keyword">int</span><span class="special">}</span></code>
可用于表示普通的整数(包括负数和正数)。 </p>
</dd>
<dt><span class="term"><span class="underline">unsigned
integer types</span> (§3.9.1/3):</span></dt>
<dt><span class="term"></span><span class="term"><span class="underline">无符号整数类型</span>
(§3.9.1/3):</span></dt>
<dd>
<p> <code class="computeroutput"><span class="special">{</span><span class="keyword">unsigned</span>
<span class="keyword">char</span><span class="special">,</span> <span class="keyword">unsigned</span>
<span class="keyword">short</span> <span class="keyword">int</span><span class="special">,</span>
<span class="keyword">unsigned</span> <span class="keyword">int</span><span class="special">,</span>
<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span><span class="special">}</span></code> Can be used to
represent positive integer numbers with modulo-arithmetic.<br>
<code class="computeroutput"><span class="special">{</span><span class="keyword">unsigned</span> <span class="keyword">char</span><span class="special">,</span>
<span class="keyword">unsigned</span> <span class="keyword">short</span> <span class="keyword">int</span><span class="special">,</span> <span class="keyword">unsigned</span>
<span class="keyword">int</span><span class="special">,</span> <span class="keyword">unsigned</span>
<span class="keyword">long</span> <span class="keyword">int</span><span class="special">}</span></code>
可用于表示模算术中的正整数。</p>
</dd>
<dt><span class="term"><span class="underline">floating-point
types</span> (§3.9.1/8):</span></dt>
<dt><span class="term"></span><span class="term"><span class="underline">浮点类型</span>
(§3.9.1/8):</span></dt>
<dd>
<p> <code class="computeroutput"><span class="special">{</span><span class="keyword">float</span><span class="special">,</span><span class="keyword">double</span><span class="special">,</span><span class="keyword">long</span>
<span class="keyword">double</span><span class="special">}</span></code> Can be used to
represent real numbers.<br>
<code class="computeroutput"><span class="special">{</span><span class="keyword">float</span><span class="special">,</span><span class="keyword">double</span><span class="special">,</span><span class="keyword">long</span> <span class="keyword">double</span><span class="special">}</span></code> 可用于表示实数。</p>
</dd>
<dt><span class="term"><span class="underline">integral
or integer types</span> (§3.9.1/7):</span></dt>
<dt><span class="term"></span><span class="term"><span class="underline">整型或整数类型</span>
(§3.9.1/7):</span></dt>
<dd>
<p> <code class="computeroutput"><span class="special">{{</span><span class="keyword">signed</span>
<span class="identifier">integers</span><span class="special">},{</span><span class="keyword">unsigned</span>
<span class="identifier">integers</span><span class="special">},</span> <span class="keyword">bool</span><span class="special">,</span> <span class="keyword">char</span>
<span class="keyword">and</span> <span class="keyword">wchar_t</span><span class="special">}</span></code>
</p>
</dd>
<dt><span class="term"><span class="underline">arithmetic
types</span> (§3.9.1/8):</span></dt>
<dt><span class="term"></span><span class="term"><span class="underline">算术类型</span>
(§3.9.1/8):</span></dt>
<dd>
<p> <code class="computeroutput"><span class="special">{{</span><span class="identifier">integer</span>
<span class="identifier">types</span><span class="special">},{</span><span class="identifier">floating</span>
<span class="identifier">types</span><span class="special">}}</span></code> </p>
</dd>
</dl>
</div>
<p> The integer types are required to have a <span class="emphasis"><em>binary</em></span>
value representation.<br>
整数类型要求具有一个<span class="emphasis"><em>二进制</em></span>的
值表示法。 </p>
<p> Additionally, the signed/unsigned integer types of the same
base type (<code class="computeroutput"><span class="keyword">short</span></code>, <code class="computeroutput"><span class="keyword">int</span></code>
or <code class="computeroutput"><span class="keyword">long</span></code>)
are required to have the same value representation, that is:<br>
另外，相同基本类型(<code class="computeroutput"><span class="keyword">short</span></code>, <code class="computeroutput"><span class="keyword">int</span></code>
或 <code class="computeroutput"><span class="keyword">long</span></code>)
的有符号/无符号整数类型要求具有相同的值表示法，即： </p>
<pre class="programlisting"> <span class="keyword">int</span> <span class="identifier">i</span> <span class="special">=</span> <span class="special">-</span><span class="number">3</span> <span class="special">;</span> <span class="comment">// suppose value representation is: 10011 (sign bit + 4 magnitude bits)<br> // 假设值表示法为：</span><span class="comment">10011 (符号位 + 4 数量位)</span><span class="comment"> <br></span><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">u</span> <span class="special">=</span> <span class="identifier">i</span> <span class="special">;</span> <span class="comment">// u is required to have the same 10011 as its value representation.<br> // u 被要求具有与 10011 相同的值表示法<br></span></pre>
<p> In other words, the integer types signed/unsigned X use the
same value representation but a different <span class="emphasis"><em>interpretation</em></span>
of it; that is, their <span class="emphasis"><em>typed
values</em></span> might differ.<br>
换言之，整数类型 signed/unsigned X 使用相同的值表示法，但有不同的<span class="emphasis"><em>解
释</em></span>；即它们的<span class="emphasis"><em>有
类型值</em></span>可能不同。 </p>
<p> Another consequence of this is that the range for signed X is
always a smaller subset of the range of unsigned X, as required by
§3.9.1/3.<br>
这一要求的另一个推论是，signed X 的范围总是 unsigned X 的范围的一个小子集，正如 §3.9.1/3 所要求的。 </p>
<div class="note">
<table summary="Note" border="0">
<tbody>
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/html/images/note.png"></td>
<th align="left">Note 说明</th>
</tr>
<tr>
<td align="left" valign="top">
<p> Always remember that unsigned types, unlike signed
types, have modulo-arithmetic; that is, they do not overflow. This
means that:</p>
<p>请记住，无符号类型不象有符号类型，它具有模算术；即它们不会溢出。这意味着： </p>
<p> <span class="bold"><strong>-</strong></span>
Always be extra careful when mixing signed/unsigned types<br>
<span class="bold"><strong>-</strong></span>
在混合使用有符号/无符号类型时，一定要额外小心 </p>
<p> <span class="bold"><strong>-</strong></span>
Use unsigned types only when you need modulo arithmetic or very very
large numbers. Don't use unsigned types just because you intend to deal
with positive values only (you can do this with signed types as well).<br>
<span class="bold"><strong>-</strong></span>
仅在你需要模算术或需要很大很大的数字时，才使用无符号类型。不要只是因为你想处理正整数而使用无符号类型(你可以用有符号类型来处理)。 </p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<a name="numeric_conversion_definitions_numeric_types"></a>
<p> </p>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_numericconversion.definitions.numeric_types"></a><a class="link" href="definitions.html#boost_numericconversion.definitions.numeric_types" title="Numeric Types">Numeric Types 数字类型</a>
</h3>
</div>
</div>
</div>
<p> This section introduces the following definitions intended to
integrate arithmetic types with user-defined types which behave like
numbers. Some definitions are purposely broad in order to include a
vast variety of user-defined number types.<br>
本节介绍以下定义，目的是将算术类型与行为与数字一样的用户自定义类型相集成。有些定义被故意放宽，以包容大量的用户自定义数字类型。 </p>
<p> Within this library, the term <span class="emphasis"><em>number</em></span>
refers to an abstract numeric value.<br>
在本库中，术语 <span class="emphasis"><em>数字</em></span>
是指一个抽象的数字值。 </p>
<p> A type is <span class="bold"><strong>numeric</strong></span>
if:<br>
一个类型是 <span class="bold"><strong>数字类型</strong></span>，
如果： </p>
<div class="itemizedlist">
<ul type="disc">
<li> It is an arithmetic type, or,<br>
它是一个算术类型，或者， </li>
<li> It is a user-defined type which<br>
它是一个用户自定义类型，满足
<div class="itemizedlist">
<ul type="circle">
<li> Represents numeric abstract values (i.e.
numbers).<br>
它表示了数字抽象值(如多位数字)。 </li>
<li> Can be converted (either implicitly or explicitly)
to/from at least one arithmetic type.<br>
它可以与至少一种算术类型相互转换(隐式或显式)。 </li>
<li> Has <a class="link" href="definitions.html#numeric_conversion_definitions_range">range</a>
(possibly unbounded) and <a class="link" href="definitions.html#numeric_conversion_definitions_range">precision</a>
(possibly dynamic or unlimited).<br>
它具有 <a class="link" href="definitions.html#numeric_conversion_definitions_range">范
围</a> (可能是无界的)和 <a class="link" href="definitions.html#numeric_conversion_definitions_range">精
度</a> (可能是动态或无限的)。 </li>
<li> Provides an specialization of <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">numeric_limits</span></code>.
<br>
它提供了对 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">numeric_limits</span></code>
的特化。 </li>
</ul>
</div>
</li>
</ul>
</div>
<p> A numeric type is <span class="bold"><strong>signed</strong></span>
if the abstract values it represent include negative numbers.<br>
一个数字类型是 <span class="bold"><strong>有符号的</strong></span>，
如果它所表示的抽象值包括负数。 </p>
<p> A numeric type is <span class="bold"><strong>unsigned</strong></span>
if the abstract values it represent exclude negative numbers.<br>
一个数字类型是 <span class="bold"><strong>无符号的</strong></span>，
如果它所表示的抽象值不包括负数。 </p>
<p> A numeric type is <span class="bold"><strong>modulo</strong></span>
if it has modulo-arithmetic (does not overflow).<br>
一个数字类型是 <span class="bold"><strong>带模的</strong></span>，
如果它具有模算术(不会溢出)。 </p>
<p> A numeric type is <span class="bold"><strong>integer</strong></span>
if the abstract values it represent are whole numbers.<br>
一个数字类型是 <span class="bold"><strong>整型的</strong></span>，
如果它所表示的抽象值是整数。 </p>
<p> A numeric type is <span class="bold"><strong>floating</strong></span>
if the abstract values it represent are real numbers.<br>
一个数字类型是 <span class="bold"><strong>浮点型的</strong></span>，
如果它所表示的抽象值是实数。 </p>
<p> An <span class="bold"><strong>arithmetic
value</strong></span> is the typed value of an arithmetic
type<br>
<span class="bold"><strong>算术值</strong></span>
是指算术类型的有类型值。 </p>
<p> A <span class="bold"><strong>numeric value</strong></span>
is the typed value of a numeric type<br>
<span class="bold"><strong>数字值</strong></span>
是指数字类型的有类型值。 </p>
<p> These definitions simply generalize the standard notions of
arithmetic types and values by introducing a superset called <span class="underline">numeric</span>. All arithmetic types
and values are numeric types and values, but not vice versa, since
user-defined numeric types are not arithmetic types.<br>
这些定义只是通过引用一个名为 <span class="underline">数字</span>
的超集，对标准中的算术类型和算术值进行了泛化。所有算术类型和算术值都是数字类型和数字值，但反之不然，因为用户自定义的数字类型不是算术类型。 </p>
<p> The following examples clarify the differences between
arithmetic and numeric types (and values):<br>
以下例子澄清了算术类型(和算术值)和数字类型(和数字值)间的差异： </p>
<pre class="programlisting"><span class="comment">// A numeric type which is not an arithmetic type (is user-defined)<br></span><span class="comment">// and which is intended to represent integer numbers (i.e., an 'integer' numeric type)<br>// 一个不是算术类型的数字类型(用户自定义的)，它用于表示整数(即一个'整型'的数字类型)<br></span><span class="keyword">class</span> <span class="identifier">MyInt</span><br><span class="special">{</span><br><span class="identifier">MyInt</span> <span class="special">(</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="identifier">v</span> <span class="special">)</span> <span class="special">;</span><br><span class="keyword">long</span> <span class="keyword">long</span> <span class="identifier">to_builtin</span><span class="special">();</span><br><span class="special">}</span> <span class="special">;</span><br><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span><br><span class="keyword">template</span><span class="special">&lt;&gt;</span> <span class="identifier">numeric_limits</span><span class="special">&lt;</span><span class="identifier">MyInt</span><span class="special">&gt;</span> <span class="special">{</span> <span class="special">...</span> <span class="special">}</span> <span class="special">;</span><br><span class="special">}</span><br><span class="comment">// A 'floating' numeric type (double) which is also an arithmetic type (built-in),<br></span><span class="comment">// with a float numeric value.<br>// 一个'浮点'的数字类型(double)，同时也是算术类型(内建的)，具有浮点数值。<br></span><span class="keyword">double</span> <span class="identifier">pi</span> <span class="special">=</span> <span class="identifier">M_PI</span> <span class="special">;</span><br><span class="comment">// A 'floating' numeric type with a whole numeric value.<br></span><span class="comment">// NOTE: numeric values are typed valued, hence, they are, for instance,<br></span><span class="comment">// integer or floating, despite the value itself being whole or including<br></span><span class="comment">// a fractional part.<br>// 一个具有整数值的'浮点'数字类型。注：数字值是有类型值，因此它们是整型的或浮点型的，<br>// 无论它的值本身是整数的还是带有小数的。<br></span><span class="keyword">double</span> <span class="identifier">two</span> <span class="special">=</span> <span class="number">2.0</span> <span class="special">;</span><br><span class="comment">// An integer numeric type with an integer numeric value.<br>// 一个具有整型数字值的整型数字类型。<br></span><span class="identifier">MyInt</span> <span class="identifier">i</span><span class="special">(</span><span class="number">1234</span><span class="special">);</span>
</pre>
</div>
<a name="numeric_conversion_definitions_range"></a>
<p> </p>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_numericconversion.definitions.range_and_precision"></a><a class="link" href="definitions.html#boost_numericconversion.definitions.range_and_precision" title="Range and Precision">Range and Precision 范围与精度</a>
</h3>
</div>
</div>
</div>
<p> Given a number set <code class="computeroutput"><span class="identifier">N</span></code>, some of its
elements are representable in a numeric type <code class="computeroutput"><span class="identifier">T</span></code>.<br>
给定一个数字集合 <code class="computeroutput"><span class="identifier">N</span></code>，它的一些元素可以在数字类型
<code class="computeroutput"><span class="identifier">T</span></code>
中表示。
</p>
<p> The set of representable values of type <code class="computeroutput"><span class="identifier">T</span></code>,
or numeric set of <code class="computeroutput"><span class="identifier">T</span></code>, is a set of
numeric values whose elements are the representation of some subset of <code class="computeroutput"><span class="identifier">N</span></code>.<br>
类型 <code class="computeroutput"><span class="identifier">T</span></code> 可表示的值的集合，或者说 <code class="computeroutput"><span class="identifier">T</span></code>
的数字集合，是指一个数字值的集合，其中的元素是 <code class="computeroutput"><span class="identifier">N</span></code> 的某个子集的表示法。
</p>
<p> For example, the interval of <code class="computeroutput"><span class="keyword">int</span></code> values <code class="computeroutput"><span class="special">[</span><span class="identifier">INT_MIN</span><span class="special">,</span><span class="identifier">INT_MAX</span><span class="special">]</span></code> is the set of
representable values of type <code class="computeroutput"><span class="keyword">int</span></code>, i.e. the <code class="computeroutput"><span class="keyword">int</span></code>
numeric set, and corresponds to the representation of the elements of
the interval of abstract values <code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">INT_MIN</span><span class="special">),</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">INT_MAX</span><span class="special">)]</span></code> from the
integer numbers.<br>
例如，<code class="computeroutput"><span class="keyword">int</span></code>
值区间 <code class="computeroutput"><span class="special">[</span><span class="identifier">INT_MIN</span><span class="special">,</span><span class="identifier">INT_MAX</span><span class="special">]</span></code> 就是类型 <code class="computeroutput"><span class="keyword">int</span></code>
的可表示值的集合，也就是 <code class="computeroutput"><span class="keyword">int</span></code>
数字集合，它对应于来自于整数抽象值区间 <code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">INT_MIN</span><span class="special">),</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">INT_MAX</span><span class="special">)]</span></code> 的各元素的表示法。 </p>
<p> Similarly, the interval of <code class="computeroutput"><span class="keyword">double</span></code> values <code class="computeroutput"><span class="special">[-</span><span class="identifier">DBL_MAX</span><span class="special">,</span><span class="identifier">DBL_MAX</span><span class="special">]</span></code> is the <code class="computeroutput"><span class="keyword">double</span></code>
numeric set, which corresponds to the subset of the real numbers from <code class="computeroutput"><span class="identifier">abt</span><span class="special">(-</span><span class="identifier">DBL_MAX</span><span class="special">)</span></code> to <code class="computeroutput"><span class="identifier">abt</span><span class="special">(</span><span class="identifier">DBL_MAX</span><span class="special">)</span></code>.<br>
类似地，<code class="computeroutput"><span class="keyword">double</span></code>
值区间 <code class="computeroutput"><span class="special">[-</span><span class="identifier">DBL_MAX</span><span class="special">,</span><span class="identifier">DBL_MAX</span><span class="special">]</span></code> 是 <code class="computeroutput"><span class="keyword">double</span></code>
数字集合，它对应于从 <code class="computeroutput"><span class="identifier">abt</span><span class="special">(-</span><span class="identifier">DBL_MAX</span><span class="special">)</span></code> 到 <code class="computeroutput"><span class="identifier">abt</span><span class="special">(</span><span class="identifier">DBL_MAX</span><span class="special">)</span></code> 的实数的一个子集。 </p>
<p> <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span> </p>
<p> Let <span class="bold"><strong><code class="computeroutput"><span class="identifier">next</span><span class="special">(</span><span class="identifier">x</span><span class="special">)</span></code></strong></span>
denote the lowest numeric value greater than x.<br>
用&nbsp;<span class="bold"><strong><code class="computeroutput"><span class="identifier">next</span><span class="special">(</span><span class="identifier">x</span><span class="special">)</span></code></strong></span>
表示大于 x 的最小数字值。 </p>
<p> Let <span class="bold"><strong><code class="computeroutput"><span class="identifier">prev</span><span class="special">(</span><span class="identifier">x</span><span class="special">)</span></code></strong></span>
denote the highest numeric value lower then x.<br>
用 <span class="bold"><strong><code class="computeroutput"><span class="identifier">prev</span><span class="special">(</span><span class="identifier">x</span><span class="special">)</span></code></strong></span>
表示小于 x 的最大数字值。 </p>
<p> Let <span class="bold"><strong><code class="computeroutput"><span class="identifier">v</span><span class="special">=</span><span class="identifier">prev</span><span class="special">(</span><span class="identifier">next</span><span class="special">(</span><span class="identifier">V</span><span class="special">))</span></code></strong></span>
and <span class="bold"><strong><code class="computeroutput"><span class="identifier">v</span><span class="special">=</span><span class="identifier">next</span><span class="special">(</span><span class="identifier">prev</span><span class="special">(</span><span class="identifier">V</span><span class="special">))</span></code></strong></span>
be identities that relate a numeric typed value <code class="computeroutput"><span class="identifier">v</span></code>
with a number <code class="computeroutput"><span class="identifier">V</span></code>.<br>
令 <span class="bold"><strong><code class="computeroutput"><span class="identifier">v</span><span class="special">=</span><span class="identifier">prev</span><span class="special">(</span><span class="identifier">next</span><span class="special">(</span><span class="identifier">V</span><span class="special">))</span></code></strong></span>
和 <span class="bold"><strong><code class="computeroutput"><span class="identifier">v</span><span class="special">=</span><span class="identifier">next</span><span class="special">(</span><span class="identifier">prev</span><span class="special">(</span><span class="identifier">V</span><span class="special">))</span></code></strong></span>
是相同的，将一个数字类型值 <code class="computeroutput"><span class="identifier">v</span></code>
与一个数字 <code class="computeroutput"><span class="identifier">V</span></code>&nbsp;关联起来。
</p>
<p> An ordered pair of numeric values <code class="computeroutput"><span class="identifier">x</span></code>,<code class="computeroutput"><span class="identifier">y</span></code>
s.t. <code class="computeroutput"><span class="identifier">x</span><span class="special">&lt;</span><span class="identifier">y</span></code> are <span class="bold"><strong>consecutive</strong></span>
iff <code class="computeroutput"><span class="identifier">next</span><span class="special">(</span><span class="identifier">x</span><span class="special">)==</span><span class="identifier">y</span></code>.<br>
一个有序的数字值对 <code class="computeroutput"><span class="identifier">x</span></code>,<code class="computeroutput"><span class="identifier">y</span></code>
s.t. <code class="computeroutput"><span class="identifier">x</span><span class="special">&lt;</span><span class="identifier">y</span></code> 是 <span class="bold"><strong>连续的</strong></span>
当且令当 <code class="computeroutput"><span class="identifier">next</span><span class="special">(</span><span class="identifier">x</span><span class="special">)==</span><span class="identifier">y</span></code>. </p>
<p> The abstract distance between consecutive numeric values is
usually referred to as a <span class="underline">Unit in
the Last Place</span>, or <span class="bold"><strong>ulp</strong></span>
for short. A ulp is a quantity whose abstract magnitude is relative to
the numeric values it corresponds to: If the numeric set is not evenly
distributed, that is, if the abstract distance between consecutive
numeric values varies along the set -as is the case with the
floating-point types-, the magnitude of 1ulp after the numeric value <code class="computeroutput"><span class="identifier">x</span></code>
might be (usually is) different from the magnitude of a 1ulp after the
numeric value y for <code class="computeroutput"><span class="identifier">x</span><span class="special">!=</span><span class="identifier">y</span></code>.<br>
两个连续数字值之间的抽象距离通常被称为 <span class="underline">最小单元</span>，
或简称 <span class="bold"><strong>ulp</strong></span>。ulp
是一个与相应数字值相关的抽象量：如果这个数字集合不是均匀分布的，即在集合中的两个连续数字值之间的抽象距离是变化的
-就象浮点类型那样-，那么在数字值 <code class="computeroutput"><span class="identifier">x</span></code>
之后的1个ulp可能会(通常就是)不同于另一个数字值 y 之后的1个ulp，如果 <code class="computeroutput"><span class="identifier">x</span><span class="special">!=</span><span class="identifier">y</span></code>。
</p>
<p> Since numbers are inherently ordered, a <span class="bold"><strong>numeric
set</strong></span> of type <code class="computeroutput"><span class="identifier">T</span></code> is an ordered
sequence of numeric values (of type <code class="computeroutput"><span class="identifier">T</span></code>) of the form:<br>
因为数字是有序的，所以类型 <code class="computeroutput"><span class="identifier">T</span></code> 的 <span class="bold"><strong>数字集合</strong></span>
就是一组数字值(类型为 <code class="computeroutput"><span class="identifier">T</span></code>)的有序排列，形如：
</p>
<pre class="programlisting"><span class="identifier">REP</span><span class="special">(</span><span class="identifier">T</span><span class="special">)={</span><span class="identifier">l</span><span class="special">,</span><span class="identifier">next</span><span class="special">(</span><span class="identifier">l</span><span class="special">),</span><span class="identifier">next</span><span class="special">(</span><span class="identifier">next</span><span class="special">(</span><span class="identifier">l</span><span class="special">)),...,</span><span class="identifier">prev</span><span class="special">(</span><span class="identifier">prev</span><span class="special">(</span><span class="identifier">h</span><span class="special">)),</span><span class="identifier">prev</span><span class="special">(</span><span class="identifier">h</span><span class="special">),</span><span class="identifier">h</span><span class="special">}</span>
</pre>
<p> where <code class="computeroutput"><span class="identifier">l</span></code> and <code class="computeroutput"><span class="identifier">h</span></code>
are respectively the lowest and highest values of type <code class="computeroutput"><span class="identifier">T</span></code>,
called the boundary values of type <code class="computeroutput"><span class="identifier">T</span></code>.<br>
其中 <code class="computeroutput"><span class="identifier">l</span></code> 和 <code class="computeroutput"><span class="identifier">h</span></code>
分别为类型 <code class="computeroutput"><span class="identifier">T</span></code> 的最小值和最大值，称为类型
<code class="computeroutput"><span class="identifier">T</span></code>
的边界值。 </p>
<p> <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span> </p>
<p> A numeric set is discrete. It has a <span class="bold"><strong>size</strong></span>
which is the number of numeric values in the set, a <span class="bold"><strong>width</strong></span>
which is the abstract difference between the highest and lowest
boundary values: <code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)-</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)]</span></code>, and a <span class="bold"><strong>density</strong></span>
which is the relation between its size and width: <code class="computeroutput"><span class="identifier">density</span><span class="special">=</span><span class="identifier">size</span><span class="special">/</span><span class="identifier">width</span></code>.<br>
数字集合是离散的。它具有一定的 <span class="bold"><strong>大小</strong></span>
即该集合中的数字值的数量，还有一定的 <span class="bold"><strong>广度</strong></span>
即最大值和最小值之间的抽象距离：<code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)-</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)]</span></code>，还有一定的 <span class="bold"><strong>密度</strong></span>
即它的大小与广度之比：<code class="computeroutput"><span class="identifier">density</span><span class="special">=</span><span class="identifier">size</span><span class="special">/</span><span class="identifier">width</span></code>.
</p>
<p> The integer types have density 1, which means that there are
no unrepresentable integer numbers between <code class="computeroutput"><span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)</span></code> and <code class="computeroutput"><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span></code> (i.e. there are
no gaps). On the other hand, floating types have density much smaller
than 1, which means that there are real numbers unrepresented between
consecutive floating values (i.e. there are gaps).&nbsp;<br>
整数类型的密度为1，这意味着在 <code class="computeroutput"><span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)</span></code>
和 <code class="computeroutput"><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span></code>
之间没有不可表示的整数(即没有间隙)。另一方面，浮点类型的密度远小于1，这意味着在相邻的浮点值之间存在无法表示的实数(即有一定间隙)。 </p>
<p> <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span> </p>
<p> The interval of <span class="underline">abstract
values</span> <code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">),</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)]</span></code> is the range of
the type <code class="computeroutput"><span class="identifier">T</span></code>, denoted <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code>.<br>
<span class="underline">抽象值</span> <code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">),</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)]</span></code>
的区间称为类型 <code class="computeroutput"><span class="identifier">T</span></code> 的范围，记为 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code>. </p>
<p> A range is a set of abstract values and not a set of numeric
values. In other documents, such as the C++ standard, the word <code class="computeroutput"><span class="identifier">range</span></code>
is <span class="emphasis"><em>sometimes</em></span>
used as synonym for <code class="computeroutput"><span class="identifier">numeric</span> <span class="identifier">set</span></code>, that is,
as the ordered sequence of numeric values from <code class="computeroutput"><span class="identifier">l</span></code>
to <code class="computeroutput"><span class="identifier">h</span></code>. In this
document, however, a range is an abstract interval which subtends the
numeric set.<br>
范围是指一组抽象值的集合而不是一组数字值的集合。在其它文档中，如C++标准，单词 <code class="computeroutput"><span class="identifier">range</span></code>
有时被用作 <code class="computeroutput"><span class="identifier">numeric</span> <span class="identifier">set</span></code> 的同义词，即从 <code class="computeroutput"><span class="identifier">l</span></code>
到 <code class="computeroutput"><span class="identifier">h</span></code>
的数字值的有序排列。不过在这个文档中，范围指的是一个抽象区间，它包含了数字集合。 </p>
<p> For example, the sequence <code class="computeroutput"><span class="special">[-</span><span class="identifier">DBL_MAX</span><span class="special">,</span><span class="identifier">DBL_MAX</span><span class="special">]</span></code> is the numeric
set of the type <code class="computeroutput"><span class="keyword">double</span></code>, and the
real interval <code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(-</span><span class="identifier">DBL_MAX</span><span class="special">),</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">DBL_MAX</span><span class="special">)]</span></code> is its range.<br>
例如，序列 <code class="computeroutput"><span class="special">[-</span><span class="identifier">DBL_MAX</span><span class="special">,</span><span class="identifier">DBL_MAX</span><span class="special">]</span></code> 是类型 <code class="computeroutput"><span class="keyword">double</span></code>
的数字集合，而实数区间 <code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(-</span><span class="identifier">DBL_MAX</span><span class="special">),</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">DBL_MAX</span><span class="special">)]</span></code> 则是它的范围。 </p>
<p> Notice, for instance, that the range of a floating-point type
is <span class="emphasis"><em>continuous</em></span>
unlike its numeric set.<br>
注意，浮点类型的范围是 <span class="emphasis"><em>连续的</em></span>，
与它的数字集合不同。 </p>
<p> This definition was chosen because:<br>
之所以选择这种定义，是因为： </p>
<div class="itemizedlist">
<ul type="disc">
<li>
<span class="bold"><strong>(a)</strong></span>
The discrete set of numeric values is already given by the numeric set.<br>
<span class="bold"><strong>(a)</strong></span>
数字值的离散集已经由数字集合给出。
</li>
<li>
<span class="bold"><strong>(b)</strong></span>
Abstract intervals are easier to compare and overlap since only
boundary values need to be considered.<br>
<span class="bold"><strong>(b)</strong></span>
抽象区间更易于比较和取交集，因为只需要考虑其边界值即可。 </li>
</ul>
</div>
<p> This definition allows for a concise definition of <code class="computeroutput"><span class="identifier">subranged</span></code>
as given in the last section.<br>
这种定义可以很简明地定义下一节所给出的 <code class="computeroutput"><span class="identifier">subranged</span></code>。 </p>
<p> The width of a numeric set, as defined, is exactly equivalent
to the width of a range.<br>
按定义，数字集合的广度与范围的广度精确相等。 </p>
<p> <span class="inlinemediaobject"><img src="../images/space.png" alt="space"></span> </p>
<p> The <span class="bold"><strong>precision</strong></span>
of a type is given by the width or density of the numeric set.<br>
一个类型的 <span class="bold"><strong>精度</strong></span>
由数字集合的广度或密度给定。 </p>
<p> For integer types, which have density 1, the precision is
conceptually equivalent&nbsp;to the range and is determined by the
number of
bits used in the value representation: The higher the number of bits
the bigger the size of the numeric set, the wider the range, and the
higher the precision.<br>
对于密度为1的整数类型，精度在概念上相当于范围，它由值表示法所用的二进制位数量所决定：二进制位数量越多则数字集合的大小越大，范围的广度越广，精度
也越高。 </p>
<p> For floating types, which have density &lt;&lt;1, the
precision is given not by the width of the range but by the density. In
a typical implementation, the range is determined by the number of bits
used in the exponent, and the precision by the number of bits used in
the mantissa (giving the maximum number of significant digits that can
be exactly represented). The higher the number of exponent bits the
wider the range, while the higher the number of mantissa bits, the
higher the precision.<br>
对于密度&lt;&lt;1的浮点类型，精度不是由范围的广度给定，而是由密度给定。在一个典型的实现中，范围是由用于表示指数的二进制
位数量所决定，而精度是由用于表示尾数(给出了可以精确表示的有效数字的最大位数)的二进制位数量所决定。表示指数的二进制位数量越多则范围越广，而尾数
的二进制位数量越多则精度越高。 </p>
</div>
<a name="numeric_conversion_definitions_roundoff"></a>
<p> </p>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_numericconversion.definitions.exact__correctly_rounded_and_out_of_range_representations"></a><a class="link" href="definitions.html#boost_numericconversion.definitions.exact__correctly_rounded_and_out_of_range_representations" title="Exact, Correctly Rounded and Out-Of-Range Representations">Exact,
Correctly Rounded and Out-Of-Range Representations 精确的、适当舍入的和超出范围的表示法</a>
</h3>
</div>
</div>
</div>
<p> Given an abstract value <code class="computeroutput"><span class="identifier">V</span></code> and a type <code class="computeroutput"><span class="identifier">T</span></code>
with its corresponding range <code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">),</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)]</span></code>:<br>
给定一个抽象角 <code class="computeroutput"><span class="identifier">V</span></code> 和一个范围为 <code class="computeroutput"><span class="special">[</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">),</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)]</span></code>
的类型 <code class="computeroutput"><span class="identifier">T</span></code>： </p>
<p> If <code class="computeroutput"><span class="identifier">V</span> <span class="special">&lt;</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)</span></code> or <code class="computeroutput"><span class="identifier">V</span>
<span class="special">&gt;</span> <span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span></code>,
<code class="computeroutput"><span class="identifier">V</span></code>
is <span class="bold"><strong>not representable</strong></span>
(cannot be represented) in the type <code class="computeroutput"><span class="identifier">T</span></code>, or,
equivalently, it's representation in the type <code class="computeroutput"><span class="identifier">T</span></code>
is <span class="bold"><strong>out of range</strong></span>,
or <span class="bold"><strong>overflows</strong></span>.<br>
如果 <code class="computeroutput"><span class="identifier">V</span> <span class="special">&lt;</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)</span></code> 或 <code class="computeroutput"><span class="identifier">V</span>
<span class="special">&gt;</span> <span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span></code>，
则
<code class="computeroutput"><span class="identifier">V</span></code>
在类型 <code class="computeroutput"><span class="identifier">T</span></code> 中是 <span class="bold"><strong>不可表示的</strong></span>(不
能被表示出来)，或者说，它在类型 <code class="computeroutput"><span class="identifier">T</span></code>
中的表示是 <span class="bold"><strong>超出范围的</strong></span>，
或是 <span class="bold"><strong>溢出的</strong></span>。
</p>
<div class="itemizedlist">
<ul type="disc">
<li> If <code class="computeroutput"><span class="identifier">V</span> <span class="special">&lt;</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)</span></code>, the <span class="bold"><strong>overflow is negative</strong></span>.<br>
如果 <code class="computeroutput"><span class="identifier">V</span> <span class="special">&lt;</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)</span></code>，则&nbsp;<span class="bold"><strong>溢出为负</strong></span>。
</li>
<li> If <code class="computeroutput"><span class="identifier">V</span> <span class="special">&gt;</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span></code>, the <span class="bold"><strong>overflow is positive</strong></span>.<br>
如果 <code class="computeroutput"><span class="identifier">V</span> <span class="special">&gt;</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span></code>，则 <span class="bold"><strong>溢出为正</strong></span>。
</li>
</ul>
</div>
<p> If <code class="computeroutput"><span class="identifier">V</span> <span class="special">&gt;=</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)</span></code> and <code class="computeroutput"><span class="identifier">V</span>
<span class="special">&lt;=</span> <span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span></code>,
<code class="computeroutput"><span class="identifier">V</span></code>
is <span class="bold"><strong>representable</strong></span>
(can be represented) in the type <code class="computeroutput"><span class="identifier">T</span></code>, or,
equivalently, its representation in the type <code class="computeroutput"><span class="identifier">T</span></code>
is <span class="bold"><strong>in range</strong></span>,
or <span class="bold"><strong>does not overflow</strong></span>.<br>
如果 <code class="computeroutput"><span class="identifier">V</span> <span class="special">&gt;=</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">l</span><span class="special">)</span></code> 且 <code class="computeroutput"><span class="identifier">V</span>
<span class="special">&lt;=</span> <span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span></code>，
则
<code class="computeroutput"><span class="identifier">V</span></code>&amp;
nbsp;在类型 <code class="computeroutput"><span class="identifier">T</span></code> 中是&nbsp;<span class="bold"><strong>可表示的</strong></span>(可
以被表示出来)，或者说它在类型 <code class="computeroutput"><span class="identifier">T</span></code>
中的表示是 <span class="bold"><strong>在范围内的</strong></span>，
或是 <span class="bold"><strong>未溢出的</strong></span>。
</p>
<p> Notice that a numeric type, such as a C++ unsigned type, can
define that any <code class="computeroutput"><span class="identifier">V</span></code> does not
overflow by always representing not <code class="computeroutput"><span class="identifier">V</span></code> itself but
the abstract value <code class="computeroutput"><span class="identifier">U</span> <span class="special">=</span>
<span class="special">[</span> <span class="identifier">V</span> <span class="special">%</span>
<span class="special">(</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)+</span><span class="number">1</span><span class="special">)</span>
<span class="special">]</span></code>, which
is always in range.<br>
注意，一个数字类型，如C++中的无符号类型，可以定义为任意 <code class="computeroutput"><span class="identifier">V</span></code> 都不会溢出，它的表示不是 <code class="computeroutput"><span class="identifier">V</span></code>
本身而是抽象值 <code class="computeroutput"><span class="identifier">U</span> <span class="special">=</span>
<span class="special">[</span> <span class="identifier">V</span> <span class="special">%</span>
<span class="special">(</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)+</span><span class="number">1</span><span class="special">)</span>
<span class="special">]</span></code>，这个值总是在范围内
的。 </p>
<p> Given an abstract value <code class="computeroutput"><span class="identifier">V</span></code> represented
in the type <code class="computeroutput"><span class="identifier">T</span></code> as <code class="computeroutput"><span class="identifier">v</span></code>,
the <span class="bold"><strong>roundoff</strong></span>
error of the representation is the abstract difference: <code class="computeroutput"><span class="special">(</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">v</span><span class="special">)-</span><span class="identifier">V</span><span class="special">)</span></code>.<br>
给定一个在类型 <code class="computeroutput"><span class="identifier">T</span></code> 中表示为 <code class="computeroutput"><span class="identifier">v</span></code>
的抽象值 <code class="computeroutput"><span class="identifier">V</span></code>，该表示法的 <span class="bold"><strong>舍入</strong></span>
误差是指抽象距离：<code class="computeroutput"><span class="special">(</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">v</span><span class="special">)-</span><span class="identifier">V</span><span class="special">)</span></code>.
</p>
<p> Notice that a representation is an <span class="emphasis"><em>operation</em></span>,
hence, the roundoff error corresponds to the representation operation
and not to the numeric value itself (i.e. numeric values do not have
any error themselves)<br>
注意，一个表示法是一个操作，因此舍入误差是对应于该表示法操作而不是对应于数字值本身(即数字值本身不存在误差)。 </p>
<div class="itemizedlist">
<ul type="disc">
<li> If the roundoff is 0, the representation is <span class="bold"><strong>exact</strong></span>,
and <code class="computeroutput"><span class="identifier">V</span></code> is exactly
representable in the type <code class="computeroutput"><span class="identifier">T</span></code>. <br>如果舍入为0，则表示是 <span class="bold"><strong>精确的</strong></span>，<code class="computeroutput"><span class="identifier">V</span></code>
在类型 <code class="computeroutput"><span class="identifier">T</span></code> 中可以精确表示。 </li>
<li> If the roundoff is not 0, the representation is <span class="bold"><strong>inexact</strong></span>,
and <code class="computeroutput"><span class="identifier">V</span></code> is inexactly
representable in the type <code class="computeroutput"><span class="identifier">T</span></code>. <br>如果舍入不是0，则表示是
<span class="bold"><strong>不精确的</strong></span>，<code class="computeroutput"><span class="identifier">V</span></code>
在类型 <code class="computeroutput"><span class="identifier">T</span></code> 中不能精确表示。 </li>
</ul>
</div>
<p> If a representation <code class="computeroutput"><span class="identifier">v</span></code> in a type <code class="computeroutput"><span class="identifier">T</span></code>
-either exact or inexact-, is any of the adjacents of <code class="computeroutput"><span class="identifier">V</span></code>
in that type, that is, if <code class="computeroutput"><span class="identifier">v</span><span class="special">==</span><span class="identifier">prev</span></code> or <code class="computeroutput"><span class="identifier">v</span><span class="special">==</span><span class="identifier">next</span></code>,
the representation is faithfully rounded. If the choice between <code class="computeroutput"><span class="identifier">prev</span></code>
and <code class="computeroutput"><span class="identifier">next</span></code> matches a
given <span class="bold"><strong>rounding direction</strong></span>,
it is <span class="bold"><strong>correctly rounded</strong></span>.<br>如果在类型 <code class="computeroutput"><span class="identifier">T</span></code> 中的一个表示 <code class="computeroutput"><span class="identifier">v</span></code><code class="computeroutput"><span class="identifier"></span></code>
-精确或不精确的-，是该类型中的 <code class="computeroutput"><span class="identifier">V</span></code>
的某个邻值，即如果 <code class="computeroutput"><span class="identifier">v</span><span class="special">==</span><span class="identifier">prev</span></code> 或 <code class="computeroutput"><span class="identifier">v</span><span class="special">==</span><span class="identifier">next</span></code>，则称该表示法是如实舍入的。如果 <code class="computeroutput"><span class="identifier">prev</span></code> 和 <code class="computeroutput"><span class="identifier">next</span></code> 间的选择符合一个给定的 <span class="bold"><strong>舍入方向</strong></span>，它就是 <span class="bold"><strong>适当舍入的</strong></span>。
</p>
<p> All exact representations are correctly rounded, but not all
inexact representations are. In particular, C++ requires numeric
conversions (described below) and the result of arithmetic operations
(not covered by this document) to be correctly rounded, but batch
operations propagate roundoff, thus final results are usually
incorrectly rounded, that is, the numeric value <code class="computeroutput"><span class="identifier">r</span></code>
which is the computed result is neither of the adjacents of the
abstract value <code class="computeroutput"><span class="identifier">R</span></code> which is the
theoretical result.<br>所有精确的表示都是适当舍入的，但不精确表示则不都是。特别地，C++要求数字转换(后文描述)和算术操作的结果(不在本文讨论范围之内)都是适当舍入的，但批量操作会传播舍入，因此最终结果通常都不是适当舍入的，即计算结果数字值 <code class="computeroutput"><span class="identifier">r</span></code>&nbsp;不是理论结果抽象值 <code class="computeroutput"><span class="identifier">R</span></code> 的邻值。 </p>
<p> Because a correctly rounded representation is always one of
adjacents of the abstract value being represented, the roundoff is
guaranteed to be at most 1ulp.<br>因为一个适当舍入的表示总是被表示的抽象值的某个邻值，所以舍入值可以保证最多为1个ulp。 </p>
<p> The following examples summarize the given definitions.
Consider:<br>以下例子总结了所给出的下定义。考虑以下类型： </p>
<div class="itemizedlist">
<ul type="disc">
<li> A numeric type <code class="computeroutput"><span class="identifier">Int</span></code>
representing integer numbers with a <span class="emphasis"><em>numeric
set</em></span>: <code class="computeroutput"><span class="special">{-</span><span class="number">2</span><span class="special">,-</span><span class="number">1</span><span class="special">,</span><span class="number">0</span><span class="special">,</span><span class="number">1</span><span class="special">,</span><span class="number">2</span><span class="special">}</span></code> and <span class="emphasis"><em>range</em></span>: <code class="computeroutput"><span class="special">[-</span><span class="number">2</span><span class="special">,</span><span class="number">2</span><span class="special">]</span></code><br>数字类型 <code class="computeroutput"><span class="identifier">Int</span></code> 表示 <span class="emphasis"><em>数字集合</em></span><code class="computeroutput"><span class="special">{-</span><span class="number">2</span><span class="special">,-</span><span class="number">1</span><span class="special">,</span><span class="number">0</span><span class="special">,</span><span class="number">1</span><span class="special">,</span><span class="number">2</span><span class="special">}</span></code> 和 <span class="emphasis"><em>范围</em></span> <code class="computeroutput"><span class="special">[-</span><span class="number">2</span><span class="special">,</span><span class="number">2</span><span class="special">]</span></code> 的整数
</li>
<li> A numeric type <code class="computeroutput"><span class="identifier">Cardinal</span></code>
representing integer numbers with a <span class="emphasis"><em>numeric
set</em></span>: <code class="computeroutput"><span class="special">{</span><span class="number">0</span><span class="special">,</span><span class="number">1</span><span class="special">,</span><span class="number">2</span><span class="special">,</span><span class="number">3</span><span class="special">,</span><span class="number">4</span><span class="special">,</span><span class="number">5</span><span class="special">,</span><span class="number">6</span><span class="special">,</span><span class="number">7</span><span class="special">,</span><span class="number">8</span><span class="special">,</span><span class="number">9</span><span class="special">}</span></code> and <span class="emphasis"><em>range</em></span>: <code class="computeroutput"><span class="special">[</span><span class="number">0</span><span class="special">,</span><span class="number">9</span><span class="special">]</span></code>
(no modulo-arithmetic here)<br>数字类型 <code class="computeroutput"><span class="identifier">Cardinal</span></code> 表示 <span class="emphasis"><em>数字集合</em></span><code class="computeroutput"><span class="special">{</span><span class="number">0</span><span class="special">,</span><span class="number">1</span><span class="special">,</span><span class="number">2</span><span class="special">,</span><span class="number">3</span><span class="special">,</span><span class="number">4</span><span class="special">,</span><span class="number">5</span><span class="special">,</span><span class="number">6</span><span class="special">,</span><span class="number">7</span><span class="special">,</span><span class="number">8</span><span class="special">,</span><span class="number">9</span><span class="special">}</span></code> 和 <span class="emphasis"><em>范围</em></span><code class="computeroutput"><span class="special">[</span><span class="number">0</span><span class="special">,</span><span class="number">9</span><span class="special">]</span></code>
(不带模算术) 的整数 </li>
<li> A numeric type <code class="computeroutput"><span class="identifier">Real</span></code>
representing real numbers with a <span class="emphasis"><em>numeric
set</em></span>: <code class="computeroutput"><span class="special">{-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.5</span><span class="special">,-</span><span class="number">1.0</span><span class="special">,-</span><span class="number">0.5</span><span class="special">,-</span><span class="number">0.0</span><span class="special">,+</span><span class="number">0.0</span><span class="special">,+</span><span class="number">0.5</span><span class="special">,+</span><span class="number">1.0</span><span class="special">,+</span><span class="number">1.5</span><span class="special">,+</span><span class="number">2.0</span><span class="special">}</span></code> and <span class="emphasis"><em>range</em></span>: <code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">]</span></code><br>数字类型 <code class="computeroutput"><span class="identifier">Real</span></code> 表示 <span class="emphasis"><em>数字集合</em></span><code class="computeroutput"><span class="special">{-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.5</span><span class="special">,-</span><span class="number">1.0</span><span class="special">,-</span><span class="number">0.5</span><span class="special">,-</span><span class="number">0.0</span><span class="special">,+</span><span class="number">0.0</span><span class="special">,+</span><span class="number">0.5</span><span class="special">,+</span><span class="number">1.0</span><span class="special">,+</span><span class="number">1.5</span><span class="special">,+</span><span class="number">2.0</span><span class="special">}</span></code> 和 <span class="emphasis"><em>范围</em></span><code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">]</span></code> 的实数
</li>
<li> A numeric type <code class="computeroutput"><span class="identifier">Whole</span></code>
representing real numbers with a <span class="emphasis"><em>numeric
set</em></span>: <code class="computeroutput"><span class="special">{-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.0</span><span class="special">,</span><span class="number">0.0</span><span class="special">,+</span><span class="number">1.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">}</span></code> and <span class="emphasis"><em>range</em></span>: <code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">]</span></code><br>如数字类型&nbsp;<code class="computeroutput"><span class="identifier">Whole</span></code> 表示 <span class="emphasis"><em>数字集合</em></span><code class="computeroutput"><span class="special">{-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.0</span><span class="special">,</span><span class="number">0.0</span><span class="special">,+</span><span class="number">1.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">}</span></code> 和 <span class="emphasis"><em>范围</em></span><code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">]</span></code> 的实数
</li>
</ul>
</div>
<p> First, notice that the types <code class="computeroutput"><span class="identifier">Real</span></code> and <code class="computeroutput"><span class="identifier">Whole</span></code>
both represent real numbers, have the same range, but different
precision.<br>首先，请留意类型 <code class="computeroutput"><span class="identifier">Real</span></code> 和 <code class="computeroutput"><span class="identifier">Whole</span></code>，它们都表示实数，具有相同的范围，但精度不同。</p>
<div class="itemizedlist">
<ul type="disc">
<li> The integer number <code class="computeroutput"><span class="number">1</span></code> (an abstract
value) can be exactly represented in any of these types.<br>整数 <code class="computeroutput"><span class="number">1</span></code> (抽象值)可以在以上任一个类型中被精确表示。 </li>
<li> The integer number <code class="computeroutput"><span class="special">-</span><span class="number">1</span></code>
can be exactly represented in <code class="computeroutput"><span class="identifier">Int</span></code>, <code class="computeroutput"><span class="identifier">Real</span></code>
and <code class="computeroutput"><span class="identifier">Whole</span></code>, but
cannot be represented in <code class="computeroutput"><span class="identifier">Cardinal</span></code>,
yielding negative overflow.<br>整数 <code class="computeroutput"><span class="special">-</span><span class="number">1</span></code>
可以在 <code class="computeroutput"><span class="identifier">Int</span></code>, <code class="computeroutput"><span class="identifier">Real</span></code> 和 <code class="computeroutput"><span class="identifier">Whole</span></code> 中被精确表示，但不能在 <code class="computeroutput"><span class="identifier">Cardinal</span></code> 中表示，会产生负溢出。 </li>
<li> The real number <code class="computeroutput"><span class="number">1.5</span></code> can be exactly
represented in <code class="computeroutput"><span class="identifier">Real</span></code>, and
inexactly represented in the other types.<br>实数 <code class="computeroutput"><span class="number">1.5</span></code> 可以在 <code class="computeroutput"><span class="identifier">Real</span></code> 中精确表示，并在其它类型中不精确地表示。 </li>
<li> If <code class="computeroutput"><span class="number">1.5</span></code> is represented
as either <code class="computeroutput"><span class="number">1</span></code> or <code class="computeroutput"><span class="number">2</span></code>
in any of the types (except <code class="computeroutput"><span class="identifier">Real</span></code>), the
representation is correctly rounded.<br>如果 <code class="computeroutput"><span class="number">1.5</span></code> 在任一类型(除了 <code class="computeroutput"><span class="identifier">Real</span></code>)中被表示为 <code class="computeroutput"><span class="number">1</span></code> 或 <code class="computeroutput"><span class="number">2</span></code>，该表示是适当舍入的。 </li>
<li> If <code class="computeroutput"><span class="number">0.5</span></code> is represented
as <code class="computeroutput"><span class="special">+</span><span class="number">1.5</span></code> in the type <code class="computeroutput"><span class="identifier">Real</span></code>,
it is incorrectly rounded.<br> 如果 <code class="computeroutput"><span class="number">0.5</span></code> 在类型&nbsp;<code class="computeroutput"><span class="identifier">Real</span></code> 中被表示为 <code class="computeroutput"><span class="special">+</span><span class="number">1.5</span></code>，则是不正确舍入的。 </li>
<li>
<code class="computeroutput"><span class="special">(-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.5</span><span class="special">)</span></code>
are the <code class="computeroutput"><span class="identifier">Real</span></code> adjacents
of any real number in the interval <code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.5</span><span class="special">]</span></code>, yet there are
no <code class="computeroutput"><span class="identifier">Real</span></code> adjacents
for <code class="computeroutput"><span class="identifier">x</span> <span class="special">&lt;</span>
<span class="special">-</span><span class="number">2.0</span></code>, nor for <code class="computeroutput"><span class="identifier">x</span>
<span class="special">&gt;</span> <span class="special">+</span><span class="number">2.0</span></code>.<br><code class="computeroutput"><span class="special">(-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.5</span><span class="special">)</span></code> 是区间 <code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.5</span><span class="special">]</span></code> 中任一实数的 <code class="computeroutput"><span class="identifier">Real</span></code> 邻值，但是对于 <code class="computeroutput"><span class="identifier">x</span> <span class="special">&lt;</span>
<span class="special">-</span><span class="number">2.0</span></code>, 和 <code class="computeroutput"><span class="identifier">x</span>
<span class="special">&gt;</span> <span class="special">+</span><span class="number">2.0</span></code> 则没有 <code class="computeroutput"><span class="identifier">Real</span></code> 邻值。
</li>
</ul>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_numericconversion.definitions.standard__numeric__conversions"></a><a class="link" href="definitions.html#boost_numericconversion.definitions.standard__numeric__conversions" title="Standard (numeric) Conversions">Standard (numeric)
Conversions 标准的(数字)转换</a>
</h3>
</div>
</div>
</div>
<p> The C++ language defines <span class="underline">Standard
Conversions</span> (§4) some of which are conversions between
arithmetic types.<br>C++语言定义了 <span class="underline">标准转换</span> (§4)，其中包括算术类型间的转换。 </p>
<p> These are <span class="underline">Integral
promotions</span> (§4.5), <span class="underline">Integral
conversions</span> (§4.7), <span class="underline">Floating
point promotions</span> (§4.6), <span class="underline">Floating
point conversions</span> (§4.8) and <span class="underline">Floating-integral
conversions</span> (§4.9).<br>包括有 <span class="underline">整型提升</span> (§4.5)，<span class="underline">整型转换</span> (§4.7)，<span class="underline">浮点提升</span> (§4.6)，<span class="underline">浮点转换</span> (§4.8) 和 <span class="underline">浮点-整型转换</span> (§4.9)。 </p>
<p> In the sequel, integral and floating point promotions are
called <span class="bold"><strong>arithmetic
promotions</strong></span>, and these plus integral,
floating-point and floating-integral conversions are called <span class="bold"><strong>arithmetic conversions</strong></span>
(i.e, promotions are conversions).<br>概括来说，整型和浮点提升被称为 <span class="bold"><strong>算术提升</strong></span>，它们再加上整型、浮点和浮点-整型转换，被称为 <span class="bold"><strong>算术转换</strong></span>
(即提升也是一种转换)。 </p>
<p> Promotions, both Integral and Floating point, are <span class="emphasis"><em>value-preserving</em></span>,
which means that the typed value is not changed with the conversion.<br>整型和浮点型的提升都是 <span class="emphasis"><em>保留原值的</em></span>，即在转换后有类型值不会被更改。 </p>
<p> In the sequel, consider a source typed value <code class="computeroutput"><span class="identifier">s</span></code>
of type <code class="computeroutput"><span class="identifier">S</span></code>, the source
abstract value <code class="computeroutput"><span class="identifier">N</span><span class="special">=</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span></code>,
a destination type <code class="computeroutput"><span class="identifier">T</span></code>; and whenever
possible, a result typed value <code class="computeroutput"><span class="identifier">t</span></code> of type <code class="computeroutput"><span class="identifier">T</span></code>.<br>概括来说，考虑一个源类型 <code class="computeroutput"><span class="identifier">S</span></code> 的有类型值 <code class="computeroutput"><span class="identifier">s</span></code>，源抽象值 <code class="computeroutput"><span class="identifier">N</span><span class="special">=</span><span class="identifier">abt</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span></code>，目标类型为 <code class="computeroutput"><span class="identifier">T</span></code>；如果能够转换，则结果是类型为 <code class="computeroutput"><span class="identifier">T</span></code> 的有类型值 <code class="computeroutput"><span class="identifier">t</span></code><code class="computeroutput"><span class="identifier"></span></code>。
</p>
<p> Integer to integer conversions are always defined:<br>整数到整数的转换总是有定义的： </p>
<div class="itemizedlist">
<ul type="disc">
<li> If <code class="computeroutput"><span class="identifier">T</span></code> is unsigned,
the abstract value which is effectively represented is not <code class="computeroutput"><span class="identifier">N</span></code>
but <code class="computeroutput"><span class="identifier">M</span><span class="special">=[</span>
<span class="identifier">N</span> <span class="special">%</span> <span class="special">(</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span> <span class="special">+</span>
<span class="number">1</span> <span class="special">)</span> <span class="special">]</span></code>,
where <code class="computeroutput"><span class="identifier">h</span></code> is the
highest unsigned typed value of type <code class="computeroutput"><span class="identifier">T</span></code>.<br> 如果&nbsp;<code class="computeroutput"><span class="identifier">T</span></code> 是无符号的，则有效表示的抽象值不是 <code class="computeroutput"><span class="identifier">N</span></code> 而是 <code class="computeroutput"><span class="identifier">M</span><span class="special">=[</span>
<span class="identifier">N</span> <span class="special">%</span> <span class="special">(</span>
<span class="identifier">abt</span><span class="special">(</span><span class="identifier">h</span><span class="special">)</span> <span class="special">+</span>
<span class="number">1</span> <span class="special">)</span> <span class="special">]</span></code>，其中 <code class="computeroutput"><span class="identifier">h</span></code> 是类型 <code class="computeroutput"><span class="identifier">T</span></code> 的最大无符号有类型值。 </li>
<li> If <code class="computeroutput"><span class="identifier">T</span></code> is signed and
<code class="computeroutput"><span class="identifier">N</span></code> is not
directly representable, the result <code class="computeroutput"><span class="identifier">t</span></code> is <span class="underline">implementation-defined</span>, which
means that the C++ implementation is required to produce a value <code class="computeroutput"><span class="identifier">t</span></code>
even if it is totally unrelated to <code class="computeroutput"><span class="identifier">s</span></code>.<br> 如果 <code class="computeroutput"><span class="identifier">T</span></code> 是有符号的且
<code class="computeroutput"><span class="identifier">N</span></code> 不是可直接表示的，则结果 <code class="computeroutput"><span class="identifier">t</span></code> 是 <span class="underline">依实现定义的</span>，即C++实现被要求产生一个值 <code class="computeroutput"><span class="identifier">t</span></code>
即使它与 <code class="computeroutput"><span class="identifier">s</span></code> 完全无关。 </li>
</ul>
</div>
<p> Floating to Floating conversions are defined only if <code class="computeroutput"><span class="identifier">N</span></code>
is representable; if it is not, the conversion has <span class="underline">undefined behavior</span>.<br> 浮点数到浮点数的转换仅当 <code class="computeroutput"><span class="identifier">N</span></code> 是可表示时有定义；否则转换就是 <span class="underline">未定义行为</span>。 </p>
<div class="itemizedlist">
<ul type="disc">
<li> If <code class="computeroutput"><span class="identifier">N</span></code> is exactly
representable, <code class="computeroutput"><span class="identifier">t</span></code> is required
to be the exact representation.<br> 如果&nbsp;<code class="computeroutput"><span class="identifier">N</span></code> 是可以精确表示的，则要求 <code class="computeroutput"><span class="identifier">t</span></code>&nbsp;是精确表示。 </li>
<li> If <code class="computeroutput"><span class="identifier">N</span></code> is inexactly
representable, <code class="computeroutput"><span class="identifier">t</span></code> is required
to be one of the two adjacents, with an implementation-defined choice
of rounding direction; that is, the conversion is required to be
correctly rounded.<br> 如果 <code class="computeroutput"><span class="identifier">N</span></code> 是不可精确表示的，则要求 <code class="computeroutput"><span class="identifier">t</span></code> 是两个邻值之一，舍入的方向由实现定义来选择；即要求转换是适当舍入的。 </li>
</ul>
</div>
<p> Floating to Integer conversions represent not <code class="computeroutput"><span class="identifier">N</span></code>
but <code class="computeroutput"><span class="identifier">M</span><span class="special">=</span><span class="identifier">trunc</span><span class="special">(</span><span class="identifier">N</span><span class="special">)</span></code>,
were <code class="computeroutput"><span class="identifier">trunc</span><span class="special">()</span></code>
is to truncate: i.e. to remove the fractional part, if any.<br>浮点数到整数的转换不是 <code class="computeroutput"><span class="identifier">N</span></code>
而是 <code class="computeroutput"><span class="identifier">M</span><span class="special">=</span><span class="identifier">trunc</span><span class="special">(</span><span class="identifier">N</span><span class="special">)</span></code>，其中 <code class="computeroutput"><span class="identifier">trunc</span><span class="special">()</span></code>
表示截断：即去掉小数部分，如果有的话。 </p>
<div class="itemizedlist">
<ul type="disc">
<li> If <code class="computeroutput"><span class="identifier">M</span></code> is not
representable in <code class="computeroutput"><span class="identifier">T</span></code>, the
conversion has <span class="underline">undefined behavior</span>
(unless <code class="computeroutput"><span class="identifier">T</span></code> is <code class="computeroutput"><span class="keyword">bool</span></code>,
see §4.12).<br> 如果 <code class="computeroutput"><span class="identifier">M</span></code> 在 <code class="computeroutput"><span class="identifier">T</span></code> 中不可表示，则转换是 <span class="underline">未定义行为</span>
(除非 <code class="computeroutput"><span class="identifier">T</span></code> 为 <code class="computeroutput"><span class="keyword">bool</span></code>，请见 §4.12)。 </li>
</ul>
</div>
<p> Integer to Floating conversions are always defined.<br>整数到浮点数的转换总是有定义的。 </p>
<div class="itemizedlist">
<ul type="disc">
<li> If <code class="computeroutput"><span class="identifier">N</span></code> is exactly
representable, <code class="computeroutput"><span class="identifier">t</span></code> is required
to be the exact representation.<br> 如果 <code class="computeroutput"><span class="identifier">N</span></code> 是可精确表示的，则要求 <code class="computeroutput"><span class="identifier">t</span></code> 是精确表示。 </li>
<li> If <code class="computeroutput"><span class="identifier">N</span></code> is inexactly
representable, <code class="computeroutput"><span class="identifier">t</span></code> is required
to be one of the two adjacents, with an implementation-defined choice
of rounding direction; that is, the conversion is required to be
correctly rounded.<br> 如果 <code class="computeroutput"><span class="identifier">N</span></code> 是不可精确表示的，则要求 <code class="computeroutput"><span class="identifier">t</span></code> 是两个邻值之一，舍入的方向由实现定义来选择；即要求转换是适当舍入的。 </li>
</ul>
</div>
</div>
<a name="numeric_conversion_definitions_subranged"></a>
<p> </p>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_numericconversion.definitions.subranged_conversion_direction__subtype_and_supertype"></a><a class="link" href="definitions.html#boost_numericconversion.definitions.subranged_conversion_direction__subtype_and_supertype" title="Subranged Conversion Direction, Subtype and Supertype">Subranged
Conversion Direction, Subtype and Supertype 子范围转换方向、子类型和父类型</a>
</h3>
</div>
</div>
</div>
<p> Given a source type <code class="computeroutput"><span class="identifier">S</span></code> and a
destination type <code class="computeroutput"><span class="identifier">T</span></code>, there is a <span class="bold"><strong>conversion direction</strong></span>
denoted: <code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code>.<br>给定一个源类型 <code class="computeroutput"><span class="identifier">S</span></code> 和一个目标类型 <code class="computeroutput"><span class="identifier">T</span></code>，<span class="bold"><strong>转换方向</strong></span>
记为：<code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code>. </p>
<p> For any two ranges the following <span class="emphasis"><em>range
relation</em></span> can be defined: A range <code class="computeroutput"><span class="identifier">X</span></code>
can be <span class="emphasis"><em>entirely contained</em></span>
in a range <code class="computeroutput"><span class="identifier">Y</span></code>, in which
case it is said that <code class="computeroutput"><span class="identifier">X</span></code> is enclosed
by <code class="computeroutput"><span class="identifier">Y</span></code>.<br>对于任意两个范围，可以定义 <span class="emphasis"><em>范围关系</em></span> 如下：范围 <code class="computeroutput"><span class="identifier">X</span></code> <span class="emphasis"><em>完全包含在</em></span> 范围 <code class="computeroutput"><span class="identifier">Y</span></code> 中，则称 <code class="computeroutput"><span class="identifier">X</span></code> 被 <code class="computeroutput"><span class="identifier">Y</span></code> 包含。 </p>
<div class="blockquote">
<blockquote class="blockquote">
<p> </p>
<p> <span class="bold"><strong>Formally:</strong></span>
<code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code> is enclosed by <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code> iif <code class="computeroutput"><span class="special">(</span><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span>
<span class="identifier">intersection</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">))</span>
<span class="special">==</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>.
</p>
<p> <span class="bold"><strong>正式定义：</strong></span><code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code> 被 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code> 所包含当且仅当 <code class="computeroutput"><span class="special">(</span><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span>
<span class="identifier">intersection</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">))</span>
<span class="special">==</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>.</p>
</blockquote>
</div>
<p> If the source type range, <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>,
is not enclosed in the target type range, <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code>; that is, if <code class="computeroutput"><span class="special">(</span><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span>
<span class="special">&amp;</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">))</span>
<span class="special">!=</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>,
the conversion direction is said to be <span class="bold"><strong>subranged</strong></span>,
which means that <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>
is not entirely contained in <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code>
and therefore there is some portion of the source range which falls
outside the target range. In other words, if a conversion direction <code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code> is subranged,
there are values in <code class="computeroutput"><span class="identifier">S</span></code> which cannot
be represented in <code class="computeroutput"><span class="identifier">T</span></code> because they
are out of range. Notice that for <code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code>, the
adjective subranged applies to <code class="computeroutput"><span class="identifier">T</span></code>.<br>如果源类型范围 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>，不是被目标类型范围 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code> 所包含；即如果 <code class="computeroutput"><span class="special">(</span><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span>
<span class="special">&amp;</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">))</span>
<span class="special">!=</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>，则转换方向被称为 <span class="bold"><strong>子范围的</strong></span>，即 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>
不完全包含在 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code>
之中，因此源范围中有一部分落在了目标范围以外。换句话说，如果转换方向 <code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code> 是子范围的，则 <code class="computeroutput"><span class="identifier">S</span></code> 中有些值不能在 <code class="computeroutput"><span class="identifier">T</span></code> 中表示，因为它们超出了范围。注意，对于 <code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code>，形容词"子范围的"是对 <code class="computeroutput"><span class="identifier">T</span></code> 而言的。 </p>
<p> Examples:&nbsp;<br>例子： </p>
<p> Given the following numeric types all representing real
numbers:<br>给定以下表示实数的数字类型： </p>
<div class="itemizedlist">
<ul type="disc">
<li>
<code class="computeroutput"><span class="identifier">X</span></code> with numeric
set <code class="computeroutput"><span class="special">{-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.0</span><span class="special">,</span><span class="number">0.0</span><span class="special">,+</span><span class="number">1.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">}</span></code>
and range <code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">]</span></code><br><code class="computeroutput"><span class="identifier">X</span></code> 的数字集合为 <code class="computeroutput"><span class="special">{-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.0</span><span class="special">,</span><span class="number">0.0</span><span class="special">,+</span><span class="number">1.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">}</span></code> 范围为 <code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">]</span></code>
</li>
<li>
<code class="computeroutput"><span class="identifier">Y</span></code> with numeric
set <code class="computeroutput"><span class="special">{-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.5</span><span class="special">,-</span><span class="number">1.0</span><span class="special">,-</span><span class="number">0.5</span><span class="special">,</span><span class="number">0.0</span><span class="special">,+</span><span class="number">0.5</span><span class="special">,+</span><span class="number">1.0</span><span class="special">,+</span><span class="number">1.5</span><span class="special">,+</span><span class="number">2.0</span><span class="special">}</span></code>
and range <code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">]</span></code><br><code class="computeroutput"><span class="identifier">Y</span></code> 的数字集合为 <code class="computeroutput"><span class="special">{-</span><span class="number">2.0</span><span class="special">,-</span><span class="number">1.5</span><span class="special">,-</span><span class="number">1.0</span><span class="special">,-</span><span class="number">0.5</span><span class="special">,</span><span class="number">0.0</span><span class="special">,+</span><span class="number">0.5</span><span class="special">,+</span><span class="number">1.0</span><span class="special">,+</span><span class="number">1.5</span><span class="special">,+</span><span class="number">2.0</span><span class="special">}</span></code> 范围为 <code class="computeroutput"><span class="special">[-</span><span class="number">2.0</span><span class="special">,+</span><span class="number">2.0</span><span class="special">]</span></code>
</li>
<li>
<code class="computeroutput"><span class="identifier">Z</span></code> with numeric
set <code class="computeroutput"><span class="special">{-</span><span class="number">1.0</span><span class="special">,</span><span class="number">0.0</span><span class="special">,+</span><span class="number">1.0</span><span class="special">}</span></code>
and range <code class="computeroutput"><span class="special">[-</span><span class="number">1.0</span><span class="special">,+</span><span class="number">1.0</span><span class="special">]</span></code><br><code class="computeroutput"><span class="identifier">Z</span></code> 的数字集合为 <code class="computeroutput"><span class="special">{-</span><span class="number">1.0</span><span class="special">,</span><span class="number">0.0</span><span class="special">,+</span><span class="number">1.0</span><span class="special">}</span></code> 范围为 <code class="computeroutput"><span class="special">[-</span><span class="number">1.0</span><span class="special">,+</span><span class="number">1.0</span><span class="special">]</span></code>
</li>
</ul>
</div>
<p> For:<br>对于： </p>
<div class="variablelist">
<p class="title"></p>
<dl>
<dt><span class="term">(a) X-&gt;Y:</span></dt>
<dd>
<p> <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span>
<span class="special">&amp;</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">Y</span><span class="special">)</span>
<span class="special">==</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span></code>,
then <code class="computeroutput"><span class="identifier">X</span><span class="special">-&gt;</span><span class="identifier">Y</span></code> is not
subranged. Thus, all values of type <code class="computeroutput"><span class="identifier">X</span></code> are
representable in the type <code class="computeroutput"><span class="identifier">Y</span></code>.<code class="computeroutput"><span class="special"></span></code><br><code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span>
<span class="special">&amp;</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">Y</span><span class="special">)</span>
<span class="special">==</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span></code>，则 <code class="computeroutput"><span class="identifier">X</span><span class="special">-&gt;</span><span class="identifier">Y</span></code> 不是子范围的。因此，类型 <code class="computeroutput"><span class="identifier">X</span></code> 的所有值在类型 <code class="computeroutput"><span class="identifier">Y</span></code> 中都可以表示。 </p>
</dd>
<dt><span class="term">(b) Y-&gt;X:</span></dt>
<dd>
<p> <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">Y</span><span class="special">)</span>
<span class="special">&amp;</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span>
<span class="special">==</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">Y</span><span class="special">)</span></code>,
then <code class="computeroutput"><span class="identifier">Y</span><span class="special">-&gt;</span><span class="identifier">X</span></code> is not
subranged. Thus, all values of type <code class="computeroutput"><span class="identifier">Y</span></code> are
representable in the type <code class="computeroutput"><span class="identifier">X</span></code>, but in this
case, some values are <span class="emphasis"><em>inexactly</em></span>
representable (all the halves). (note: it is to permit this case that a
range is an interval of abstract values and not an interval of typed
values)<code class="computeroutput"><span class="special"></span></code><br><code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">Y</span><span class="special">)</span>
<span class="special">&amp;</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span>
<span class="special">==</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">Y</span><span class="special">)</span></code>，则 <code class="computeroutput"><span class="identifier">Y</span><span class="special">-&gt;</span><span class="identifier">X</span></code> 不是子范围的。因此，类型 <code class="computeroutput"><span class="identifier">Y</span></code> 的所有值在类型 <code class="computeroutput"><span class="identifier">X</span></code> 中都可以表示，但是有些值是非精确表示的(所有带0.5的)。(注：可以允许这种情形，即范围是一个抽象值的区间而不是一个有类型值的区间) </p>
</dd>
<dt><span class="term">(b) X-&gt;Z:</span></dt>
<dd>
<p> <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span>
<span class="special">&amp;</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">Z</span><span class="special">)</span>
<span class="special">!=</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span></code>,
then <code class="computeroutput"><span class="identifier">X</span><span class="special">-&gt;</span><span class="identifier">Z</span></code> is subranged.
Thus, some values of type <code class="computeroutput"><span class="identifier">X</span></code> are not
representable in the type <code class="computeroutput"><span class="identifier">Z</span></code>, they fall
out of range <code class="computeroutput"><span class="special">(-</span><span class="number">2.0</span>
<span class="keyword">and</span> <span class="special">+</span><span class="number">2.0</span><span class="special">)</span></code>.<code class="computeroutput"><span class="special"></span></code><br><code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span>
<span class="special">&amp;</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">Z</span><span class="special">)</span>
<span class="special">!=</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">X</span><span class="special">)</span></code>, 则 <code class="computeroutput"><span class="identifier">X</span><span class="special">-&gt;</span><span class="identifier">Z</span></code>&nbsp;是子范围的。因此，类型 <code class="computeroutput"><span class="identifier">X</span></code> 有些值在类型 <code class="computeroutput"><span class="identifier">Z</span></code> 中不能表示，它们超出了 <code class="computeroutput"><span class="special">(-</span><span class="number">2.0</span>
<span class="keyword">and</span> <span class="special">+</span><span class="number">2.0</span><span class="special">)</span></code> 的范围。 </p>
</dd>
</dl>
</div>
<p> It is possible that <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>
is not enclosed by <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code>,
while neither is <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code>
enclosed by <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>;
for example, <code class="computeroutput"><span class="identifier">UNSIG</span><span class="special">=[</span><span class="number">0</span><span class="special">,</span><span class="number">255</span><span class="special">]</span></code>
is not enclosed by <code class="computeroutput"><span class="identifier">SIG</span><span class="special">=[-</span><span class="number">128</span><span class="special">,</span><span class="number">127</span><span class="special">]</span></code>;
neither is <code class="computeroutput"><span class="identifier">SIG</span></code> enclosed by
<code class="computeroutput"><span class="identifier">UNSIG</span></code>.
This implies that is possible that a conversion direction is subranged
both ways. This occurs when a mixture of signed/unsigned types are
involved and indicates that in both directions there are values which
can fall out of range.<br>有可能 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code>
不被 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code> 所包含，而 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code>
也不被 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="identifier">S</span><span class="special">)</span></code> 所包含；例如，<code class="computeroutput"><span class="identifier">UNSIG</span><span class="special">=[</span><span class="number">0</span><span class="special">,</span><span class="number">255</span><span class="special">]</span></code>
就不被 <code class="computeroutput"><span class="identifier">SIG</span><span class="special">=[-</span><span class="number">128</span><span class="special">,</span><span class="number">127</span><span class="special">]</span></code> 所包含；同样 <code class="computeroutput"><span class="identifier">SIG</span></code> 也不被
<code class="computeroutput"><span class="identifier">UNSIG</span></code> 所包含。这意味着有可能转换在两个方向上都是子范围的。在混合使用有符号/无符号类型时就会发生这种情况，它表示在两个方向上都有一些值超出范围。 </p>

<p> Given the range relation (subranged or not) of a conversion
direction <code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code>, it is
possible to classify <code class="computeroutput"><span class="identifier">S</span></code> and <code class="computeroutput"><span class="identifier">T</span></code>
as <span class="bold"><strong>supertype</strong></span>
and <span class="bold"><strong>subtype</strong></span>:
If the conversion is subranged, which means that <code class="computeroutput"><span class="identifier">T</span></code>
cannot represent all possible values of type <code class="computeroutput"><span class="identifier">S</span></code>,
<code class="computeroutput"><span class="identifier">S</span></code>
is the supertype and <code class="computeroutput"><span class="identifier">T</span></code> the subtype;
otherwise, <code class="computeroutput"><span class="identifier">T</span></code> is the
supertype and <code class="computeroutput"><span class="identifier">S</span></code> the subtype.<br>给定一个转换方向 <code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code> 的范围关系(子范围的或不是)，可以将 <code class="computeroutput"><span class="identifier">S</span></code> 和 <code class="computeroutput"><span class="identifier">T</span></code>
分为 <span class="bold"><strong>父类型</strong></span> 和 <span class="bold"><strong>子类型</strong></span>：如果转换是子范围的，即 <code class="computeroutput"><span class="identifier">T</span></code>
不能表示类型 <code class="computeroutput"><span class="identifier">S</span></code> 的所有可能值，则 <code class="computeroutput"><span class="identifier">S</span></code>
为父类型而 <code class="computeroutput"><span class="identifier">T</span></code> 为子类型；否则，<code class="computeroutput"><span class="identifier">T</span></code> 为父类型而 <code class="computeroutput"><span class="identifier">S</span></code> 为子类型。 </p>
<p> For example:<br>例如： </p>
<div class="blockquote">
<blockquote class="blockquote">
<p> </p>


<p> <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="keyword">float</span><span class="special">)=[-</span><span class="identifier">FLT_MAX</span><span class="special">,</span><span class="identifier">FLT_MAX</span><span class="special">]</span></code> and <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="keyword">double</span><span class="special">)=[-</span><span class="identifier">DBL_MAX</span><span class="special">,</span><span class="identifier">DBL_MAX</span><span class="special">]</span><br><span class="identifier">R</span><span class="special">(</span><span class="keyword">float</span><span class="special">)=[-</span><span class="identifier">FLT_MAX</span><span class="special">,</span><span class="identifier">FLT_MAX</span><span class="special">]</span></code> 且 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="keyword">double</span><span class="special">)=[-</span><span class="identifier">DBL_MAX</span><span class="special">,</span><span class="identifier">DBL_MAX</span><span class="special">]</span></code></p>
</blockquote>
</div>
<p> If <code class="computeroutput"><span class="identifier">FLT_MAX</span> <span class="special">&lt;</span> <span class="identifier">DBL_MAX</span></code>:<br>如果 <code class="computeroutput"><span class="identifier">FLT_MAX</span> <span class="special">&lt;</span> <span class="identifier">DBL_MAX</span></code>: </p>
<div class="itemizedlist">
<ul type="disc">
<li>
<code class="computeroutput"><span class="keyword">double</span><span class="special">-&gt;</span><span class="keyword">float</span></code> is subranged
and <code class="computeroutput"><span class="identifier">supertype</span><span class="special">=</span><span class="keyword">double</span></code>,
<code class="computeroutput"><span class="identifier">subtype</span><span class="special">=</span><span class="keyword">float</span></code>.<code class="computeroutput"><span class="special"></span></code><br><code class="computeroutput"><span class="keyword">double</span><span class="special">-&gt;</span><span class="keyword">float</span></code> 是子范围的且 <code class="computeroutput"><span class="identifier">supertype</span><span class="special">=</span><span class="keyword">double</span></code>,
<code class="computeroutput"><span class="identifier">subtype</span><span class="special">=</span><span class="keyword">float</span></code>.
</li>
<li>
<code class="computeroutput"><span class="keyword">float</span><span class="special">-&gt;</span><span class="keyword">double</span></code> is not
subranged and <code class="computeroutput"><span class="identifier">supertype</span><span class="special">=</span><span class="keyword">double</span></code>,
<code class="computeroutput"><span class="identifier">subtype</span><span class="special">=</span><span class="keyword">float</span></code>.<code class="computeroutput"><span class="special"></span></code><br><code class="computeroutput"><span class="keyword">float</span><span class="special">-&gt;</span><span class="keyword">double</span></code> 不是子范围的且 <code class="computeroutput"><span class="identifier">supertype</span><span class="special">=</span><span class="keyword">double</span></code>,
<code class="computeroutput"><span class="identifier">subtype</span><span class="special">=</span><span class="keyword">float</span></code>.
</li>
</ul>
</div>
<p> Notice that while <code class="computeroutput"><span class="keyword">double</span><span class="special">-&gt;</span><span class="keyword">float</span></code> is
subranged, <code class="computeroutput"><span class="keyword">float</span><span class="special">-&gt;</span><span class="keyword">double</span></code> is not,
which yields the same supertype,subtype for both directions.<br>注意，由于 <code class="computeroutput"><span class="keyword">double</span><span class="special">-&gt;</span><span class="keyword">float</span></code> 是子范围的，而 <code class="computeroutput"><span class="keyword">float</span><span class="special">-&gt;</span><span class="keyword">double</span></code> 不是，所以两个方向均得到相同的父类型和子类型。 </p>
<p> Now consider:<br>现在考虑： </p>
<div class="blockquote">
<blockquote class="blockquote">
<p> </p>

<p> <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="keyword">int</span><span class="special">)=[</span><span class="identifier">INT_MIN</span><span class="special">,</span><span class="identifier">INT_MAX</span><span class="special">]</span></code> and <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="keyword">unsigned</span>
<span class="keyword">int</span><span class="special">)=[</span><span class="number">0</span><span class="special">,</span><span class="identifier">UINT_MAX</span><span class="special">]</span><br><span class="identifier">R</span><span class="special">(</span><span class="keyword">int</span><span class="special">)=[</span><span class="identifier">INT_MIN</span><span class="special">,</span><span class="identifier">INT_MAX</span><span class="special">]</span></code> 且 <code class="computeroutput"><span class="identifier">R</span><span class="special">(</span><span class="keyword">unsigned</span>
<span class="keyword">int</span><span class="special">)=[</span><span class="number">0</span><span class="special">,</span><span class="identifier">UINT_MAX</span><span class="special">]</span></code> </p>
</blockquote>
</div>
<p> A C++ implementation is required to have <code class="computeroutput"><span class="identifier">UINT_MAX</span>
<span class="special">&gt;</span> <span class="identifier">INT_MAX</span></code>
(§3.9/3), so:<br>C++ 实现要求具有 <code class="computeroutput"><span class="identifier">UINT_MAX</span>
<span class="special">&gt;</span> <span class="identifier">INT_MAX</span></code>
(§3.9/3)，所以： </p>
<div class="itemizedlist">
<ul type="disc">
<li> 'int-&gt;unsigned' is subranged (negative values fall
out of range) and <code class="computeroutput"><span class="identifier">supertype</span><span class="special">=</span><span class="keyword">int</span></code>,
<code class="computeroutput"><span class="identifier">subtype</span><span class="special">=</span><span class="keyword">unsigned</span></code>.<code class="computeroutput"><span class="special"></span></code><br> 'int-&gt;unsigned' 是子范围的(负值超出了范围)且 <code class="computeroutput"><span class="identifier">supertype</span><span class="special">=</span><span class="keyword">int</span></code>,
<code class="computeroutput"><span class="identifier">subtype</span><span class="special">=</span><span class="keyword">unsigned</span></code>.
</li>
<li> 'unsigned-&gt;int' is <span class="emphasis"><em>also</em></span>
subranged (high positive values fall out of range) and <code class="computeroutput"><span class="identifier">supertype</span><span class="special">=</span><span class="keyword">unsigned</span></code>,
<code class="computeroutput"><span class="identifier">subtype</span><span class="special">=</span><span class="keyword">int</span></code>.<code class="computeroutput"><span class="special"></span></code><br> 'unsigned-&gt;int' 也是子范围的(高位值超出了范围)且 <code class="computeroutput"><span class="identifier">supertype</span><span class="special">=</span><span class="keyword">unsigned</span></code>,
<code class="computeroutput"><span class="identifier">subtype</span><span class="special">=</span><span class="keyword">int</span></code>.
</li>
</ul>
</div>
<p> In this case, the conversion is subranged in both directions
and the supertype,subtype pairs are not invariant (under inversion of
direction). This indicates that none of the types can represent all the
values of the other.<br>这种情况下，两个方向的转换都是子范围的，父类型、子类型对就不相同了(在相反的方向)。这表示没有一个类型可以表示另一个类型的所有值。 </p>
<p> When the supertype is the same for both <code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code> and <code class="computeroutput"><span class="identifier">T</span><span class="special">-&gt;</span><span class="identifier">S</span></code>, it is
effectively indicating a type which can represent all the values of the
subtype. Consequently, if a conversion <code class="computeroutput"><span class="identifier">X</span><span class="special">-&gt;</span><span class="identifier">Y</span></code> is not
subranged, but the opposite <code class="computeroutput"><span class="special">(</span><span class="identifier">Y</span><span class="special">-&gt;</span><span class="identifier">X</span><span class="special">)</span></code>
is, so that the supertype is always <code class="computeroutput"><span class="identifier">Y</span></code>, it is said
that the direction <code class="computeroutput"><span class="identifier">X</span><span class="special">-&gt;</span><span class="identifier">Y</span></code> is <span class="bold"><strong>correctly rounded value preserving</strong></span>,
meaning that all such conversions are guaranteed to produce results in
range and correctly rounded (even if inexact). For example, all integer
to floating conversions are correctly rounded value preserving.<br>如果对于 <code class="computeroutput"><span class="identifier">S</span><span class="special">-&gt;</span><span class="identifier">T</span></code> 和 <code class="computeroutput"><span class="identifier">T</span><span class="special">-&gt;</span><span class="identifier">S</span></code> 都有相同的父类型，则表明父类型可以表示子类型的所有值。因此，如果转换 <code class="computeroutput"><span class="identifier">X</span><span class="special">-&gt;</span><span class="identifier">Y</span></code> 不是子范围的，而相反的 <code class="computeroutput"><span class="special">(</span><span class="identifier">Y</span><span class="special">-&gt;</span><span class="identifier">X</span><span class="special">)</span></code>
是子范围的，则父类型总是 <code class="computeroutput"><span class="identifier">Y</span></code>，我们称方向 <code class="computeroutput"><span class="identifier">X</span><span class="special">-&gt;</span><span class="identifier">Y</span></code> 是 <span class="bold"><strong>保留适当舍入值的</strong></span>，意思是所有此种转换都保证产生一个在范围之内的结果且适当舍入(虽然可能不精确)。例如，所有整数到浮点数的转换都是保留适当舍入值的。 </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%">
<tbody>
<tr>
<td align="left"></td>
<td align="right">
<div class="copyright-footer">Copyright © 2004 -2007
Fernando Luis Cacciola Carballal
<p> Distributed under the Boost Software License, Version
1.0. (See accompanying file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
</p>
</div>
</td>
</tr>
</tbody>
</table>
<hr>
<div class="spirit-nav"><a accesskey="p" href="../index.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="converter___function_object.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a></div>
</body></html>