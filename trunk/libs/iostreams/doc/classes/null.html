<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">

    
    
  
  <title>Null Devices</title><link rel="stylesheet" href="../../../../boost.css">

    
  <link rel="stylesheet" href="../theme/iostreams.css"></head>

<body>


<!-- Begin Banner -->

    
<h1 class="title">空设备</h1>

    
<hr class="banner">

<!-- End Banner -->

<dl class="page-index">

  <dt><a href="#overview">简介</a></dt>

  <dt><a href="#acknowledgments">感谢</a></dt>

  <dt><a href="#headers">头文件</a></dt>

  <dt><a href="#reference">参考</a>
    </dt>
  <dl>

      <dt><a href="#null_source">类模板 <code>basic_null_source</code></a></dt>

      <dt><a href="#null_sink">类模板 <code>basic_null_sink</code></a></dt>

      <dt><a href="#null_device">类模板 <code>basic_null_device</code></a></dt>

    
  </dl>

  
</dl>


<hr>

<a name="overview"></a>
<h2>简介</h2>


<p>类模板 <code>basic_null_source</code>, <code>basic_null_sink</code> 和 <code>basic_null_device</code> 都是 Device 的 model，其成员函数都是被实现为平凡的。<code>basic_null_source</code> 是一个 <a href="../concepts/source.html">Source</a>，其成员函数 <code>read</code> 返回 <code>-1</code>, 以表示序列结束。<code>basic_null_sink</code> 是一个 <a href="../concepts/sink.html">Sink</a>，其成员函数 <code>write</code> 消耗并忽略传入的字符。<code>basic_null_device</code> 合并 — 取决于它的模板参数 <a href="#null_device_params"><code>Mode</code></a> — 平凡的 <code>read</code> 和 <code>write</code> 函数并定义一个总是返回无效流位置的成员 <code>seek</code>&nbsp;.
</p>


<p>另外，以上每个模板都是 <a href="../concepts/closable.html">Closable</a> 的，带一个空操作的 <code>close</code>.
</p>


<a name="acknowledgments"></a>
<h2>感谢</h2>


<p>这里描述的模板来自于 <a href="../../../../people/daryle_walker.html" target="_top">Daryle Walker的</a> <code>basic_nullbuf</code> 模板。见 <a href="http://cvs.sourceforge.net/viewcvs.py/boost-sandbox/boost-sandbox/libs/io/doc/null_stream.html" target="_top">Disconnected Streams</a>.
</p>


<a name="headers"></a>
<h2>头文件</h2>


<dl class="page-index">

  <dt><a class="header" href="../../../../boost/iostreams/device/null.hpp"><code>&lt;boost/iostreams/device/null.hpp&gt;</code></a></dt>

</dl>


<a name="reference"></a>
<h2>参考</h2>


<a name="null_source"></a>
<h3>类模板 <code>basic_null_source</code></h3>


<h4>描述</h4>


<p><a href="../concepts/source.html">Source</a> 的 model，其成员函数 <code>read</code> 返回 <code>-1</code>, 表示流结束。</p>


<h4>摘要</h4>


<pre class="broken_ie"><span class="keyword">namespace</span> boost { <span class="keyword">namespace</span> iostreams {<br><br><span class="keyword">template</span>&lt;<span class="keyword">typename</span> <a class="documented" href="#null_source_params">Ch</a>&gt;<br><span class="keyword">class</span> <a class="documented" href="#null_source_params">basic_null_source</a> { <br><span class="keyword">public</span>:<br>    <span class="keyword">typedef</span> Ch                        char_type;<br>    <span class="keyword">typedef</span> <span class="omitted">[implementation-defined]</span>  category;<br><br>    <a class="documented" href="#null_source_ctor">basic_null_source</a>();    <br>    std::streamsize <a class="documented" href="#null_source_read">read</a>(char_type* s, std::streamsize n);<br>    <span class="keyword">void</span> <a class="documented" href="#null_source_close">close</a>();<br>};<br><br><span class="keyword">typedef</span> basic_null_source&lt;<span class="keyword">char</span>&gt;     <span class="defined">null_source</span>;<br><span class="keyword">typedef</span> basic_null_source&lt;<span class="keyword">wchar_t</span>&gt;  <span class="defined">wnull_source</span>;<br><br>} } <span class="comment">// End namespace boost::io</span></pre>


<a name="null_source_params"></a>
<h4>模板参数</h4>


<table style="margin-left: 2em;">

  <tbody>
    <tr>

    <td>
      <p><i>Ch</i></p>
      </td>
      <td valign="top">-</td>

    <td>
      <p>&nbsp;<a href="../guide/traits.html#char_type">字符类型</a></p>
      </td>

    </tr>

  </tbody>
</table>


<a name="null_source_ctor"></a>

<h4><code>basic_null_source::basic_null_source</code></h4>


<a name="null_source_ctor"></a>
<pre class="broken_ie">    basic_null_source();</pre>


<p>构造一个 <code>basic_null_source</code>.</p>


<a name="null_source_read"></a>
<h4><code>basic_null_source::read</code></h4>


<pre class="broken_ie">    std::streamsize read(char_type* s, std::streamsize n);</pre>


<p>返回 <code>-1</code>.</p>


<a name="null_source_close"></a>
<h4><code>basic_null_source::close</code></h4>


<pre class="broken_ie">    <span class="keyword">void</span> close();</pre>


<p>空操作。</p>


<a name="null_sink"></a>
<h3>类模板 <code>basic_null_sink</code></h3>


<h4>描述</h4>


<p><a href="../concepts/sink.html">Sink</a> 的 model，其成员函数 <code>write</code> 消耗并忽略传入的字符缓冲区内容。

</p>
<h4>摘要</h4>


<pre class="broken_ie"><span class="keyword">namespace</span> boost { <span class="keyword">namespace</span> iostreams {<br><br><span class="keyword">template</span>&lt;<span class="keyword">typename</span> <a class="documented" href="#null_sink_params">Ch</a>&gt;<br><span class="keyword">class</span> <a class="documented" href="#null_sink_params">basic_null_sink</a> { <br><span class="keyword">public</span>:<br>    <span class="keyword">typedef</span> Ch                        char_type;<br>    <span class="keyword">typedef</span> <span class="omitted">[implementation-defined]</span>  category;<br><br>    <a class="documented" href="#null_sink_ctor">basic_null_sink</a>();<br>    std::streamsize <a class="documented" href="#null_sink_write">write</a>(<span class="keyword">const</span> char_type* s, std::streamsize n);<br>    <span class="keyword">void</span> <a class="documented" href="#null_sink_close">close</a>();<br>};<br><br><span class="keyword">typedef</span> basic_null_sink&lt;<span class="keyword">char</span>&gt;     <span class="defined">null_sink</span>;<br><span class="keyword">typedef</span> basic_null_sink&lt;<span class="keyword">wchar_t</span>&gt;  <span class="defined">wnull_sink</span>;<br><br>} } <span class="comment">// End namespace boost::io</span></pre>


<a name="null_sink_params"></a>
<h4>模板参数</h4>


<table style="margin-left: 2em;">

  <tbody>
    <tr>

    <td>
      <p><i>Ch</i></p>
      </td>
      <td valign="top">-</td>

    <td>
      <p>&nbsp;<a href="../guide/traits.html#char_type">字符类型</a></p>
      </td>

    </tr>

  </tbody>
</table>


<a name="null_sink_ctor"></a>

<h4><code>basic_null_sink::basic_null_sink</code></h4>


<a name="null_sink_ctor"></a>
<pre class="broken_ie">    basic_null_sink();</pre>


<p>构造一个 <code>basic_null_sink</code>.</p>


<a name="null_sink_write"></a>
<h4><code>basic_null_sink::write</code></h4>


<pre class="broken_ie">    std::streamsize write(<span class="keyword">const</span> char_type* s, std::streamsize n);</pre>


<p>返回 <code>n</code>.</p>


<a name="null_sink_close"></a>
<h4><code>basic_null_sink::close</code></h4>


<pre class="broken_ie">    <span class="keyword">void</span> close();</pre>


<p>空操作。</p>


<a name="null_device"></a>
<h3>类模板 <code>basic_null_device</code></h3>


<h4>描述</h4>


<p><a href="../concepts/seekable_device.html">Device</a> 的 model，其模式由模板参数指定，其成员函数具有平凡的实现，如下：</p>

<ul>

  <li><code>read</code> 返回 <code>-1</code>, 表示流结束
  </li>
  <li><code>write</code> 消耗但忽略传入的字符缓冲区中的所有内容
  </li>
  <li><code>seek</code> 消耗但忽略传入的字符缓冲区中的所有内容
  </li>
</ul>


<h4>摘要</h4>


<pre class="broken_ie"><span class="keyword">namespace</span> boost { <span class="keyword">namespace</span> iostreams {<br><br><span class="keyword">template</span>&lt;<span class="keyword">typename</span> <a class="documented" href="#null_device_params">Ch</a>, <span class="keyword">typename</span> <a class="documented" href="#null_device_params">Mode</a>&gt;<br><span class="keyword">class</span> <a class="documented" href="#null_device_params">basic_null_device</a> {<br><span class="keyword">public</span>:    <br>    <span class="keyword">typedef</span> Ch                        char_type;<br>    <span class="keyword">typedef</span> <span class="omitted">[implementation-defined]</span>  category;<br><br>    <a class="documented" href="#null_device_ctor">basic_null_device</a>();<br>    std::streamsize <a class="documented" href="#null_device_read">read</a>(char_type* s, std::streamsize n);<br>    std::streamsize <a class="documented" href="#null_device_write">write</a>(<span class="keyword">const</span> char_type* s, std::streamsize n);<br>    <a class="documented" href="../functions/positioning.html#synopsis">stream_offset</a> <a class="documented" href="#null_device_seek">seek</a>( <a class="documented" href="../functions/positioning.html#synopsis">stream_offset</a> off, std::ios_base::seekdir way,<br>                        std::ios_base::openmode which =<br>                            std::ios_base::in | std::ios_base::out );<br>    <span class="keyword">void</span> <a class="documented" href="#null_device_close">close</a>();<br>};<br><br>} } <span class="comment">// End namespace boost::io</span></pre>


<a name="null_device_params"></a>
<h4>模板参数</h4>


<table style="margin-left: 2em;">

  <tbody>
    <tr>

    <td>
      <p><i>Ch</i></p>
      </td>
      <td valign="top">-</td>

    <td>
      <p>&nbsp;<a href="../guide/traits.html#char_type">字符类型</a></p>
      </td>

    </tr>

    <tr>

    <td>
      <p><i>Mode</i></p>
      </td>
      <td valign="top">-</td>

    <td>
      <p>&nbsp;<a href="../guide/modes.html">mode模式</a></p>
      </td>

    </tr>

  </tbody>
</table>


<a name="null_device_ctor"></a>
<h4><code>basic_null_device::basic_null_device</code></h4>


<pre class="broken_ie">    basic_null_device();</pre>


<p>构造一个 <code>basic_null_device</code>.</p>


<a name="null_device_read"></a>
<h4><code>basic_null_device::read</code></h4>


<pre class="broken_ie">    std::streamsize read(char_type* s, std::streamsize n);</pre>


<p>返回 <code>-1</code>. 当 <code>Mode</code> 强化自 <a href="../guide/modes.html#mode_tags"><code>input</code></a> 时有效。</p>


<a name="null_device_write"></a>
<h4><code>basic_null_device::write</code></h4>


<pre class="broken_ie">    std::streamsize write(<span class="keyword">const</span> char_type* s, std::streamsize n);</pre>


<p>返回 <code>n</code>. 当 <code>Mode</code> 强化自 <a href="../guide/modes.html#mode_tags"><code>output</code></a> 时有效。</p>


<a name="null_device_seek"></a>
<h4><code>basic_null_device::seek</code></h4>


<pre class="broken_ie">     <a class="documented" href="../functions/positioning.html#synopsis">stream_offset</a> seek( <a class="documented" href="../functions/positioning.html#synopsis">stream_offset</a> off, std::ios_base::seekdir way,<br>                         std::ios_base::openmode which =<br>                             std::ios_base::in | std::ios_base::out );</pre>


<p>返回一个无效流位置。当 <code>Mode</code> 允许随机访问时有效。</p>


<a name="null_device_close"></a>
<h4><code>basic_null_device::close</code></h4>


<pre class="broken_ie">    <span class="keyword">void</span> close();</pre>


<p>空操作。</p>


<!-- Begin Footer -->

<hr>
<p class="copyright">Revised
<!--webbot bot="Timestamp" S-Type="EDITED" S-Format="%d %B, %Y" startspan -->
20 May, 2004
<!--webbot bot="Timestamp" endspan i-checksum="38504" -->
</p>


<p class="copyright">© Copyright <a href="http://www.kangaroologic.com" target="_top">Jonathan Turkanis</a>, 2004</p>

<p class="copyright"> 
    Distributed under the Boost Software License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt">http://www.boost.org/LICENSE_1_0.txt</a>)
</p>


<!-- End Footer -->

</body></html>