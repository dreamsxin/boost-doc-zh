<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0.1 Transitional//EN">
<html>
<head>



  
  
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">




  
  
  
  
  <title>Boost.Flyweight Documentation - Holders reference</title>
  <link rel="stylesheet" href="../style.css" type="text/css">



  
  
  <link rel="start" href="../index.html">



  
  
  <link rel="prev" href="factories.html">



  
  
  <link rel="up" href="index.html">



  
  
  <link rel="next" href="locking.html">
</head>


<body>



<h1><img src="../../../../boost.png" alt="Boost logo" align="middle" height="86" width="277">Boost.Flyweight
Holders reference</h1>




<div class="prev_link"><a href="factories.html"><img src="../prev.gif" alt="factories" border="0"><br>



Factories
</a></div>



<div class="up_link"><a href="index.html"><img src="../up.gif" alt="Boost.Flyweight reference" border="0"><br>



Boost.Flyweight reference
</a></div>



<div class="next_link"><a href="locking.html"><img src="../next.gif" alt="locking policies" border="0"><br>



Locking policies
</a></div>


<br style="" clear="all">




<hr>

<h2>Contents &nbsp;&#30446;&#24405;</h2>




<ul>



  <li><a href="#holder">Holders and holder specifiers</a></li>



  <li><a href="#holder_tag_synopsis">Header
    <code>"boost/flyweight/holder_tag.hpp"</code> synopsis</a>
    
    
    
    <ul>



      <li><a href="#is_holder">Class template <code>is_holder</code></a></li>



      <li><a href="#holder_construct">Class template <code>holder</code></a></li>



    
    
    
    </ul>


    
  </li>



  <li><a href="#static_holder_fwd_synopsis">Header
    <code>"boost/flyweight/static_holder_fwd.hpp"</code> synopsis</a>
  </li>



  <li><a href="#static_holder_synopsis">Header
    <code>"boost/flyweight/static_holder.hpp"</code> synopsis</a>
    
    
    
    <ul>



      <li><a href="#static_holder_class">Class template <code>static_holder_class</code></a></li>



      <li><a href="#static_holder">Class <code>static_holder</code></a></li>



    
    
    
    </ul>


    
  </li>



  <li><a href="#intermodule_holder_fwd_synopsis">Header
    <code>"boost/flyweight/intermodule_holder_fwd.hpp"</code> synopsis</a>
  </li>



  <li><a href="#intermodule_holder_synopsis">Header
    <code>"boost/flyweight/intermodule_holder.hpp"</code> synopsis</a>
    
    
    
    <ul>



      <li><a href="#intermodule_holder_class">Class template <code>intermodule_holder_class</code></a></li>



      <li><a href="#intermodule_holder">Class <code>intermodule_holder</code></a></li>



    
    
    
    </ul>


    
  </li>



</ul>




<h2><a name="holder">Holders and holder specifiers &nbsp;Holder&#21644;Holder&#25551;&#36848;&#31526;</a></h2>




<p>
Given a type <code>C</code>, a type <code>Holder</code> is said to be a <i>holder
of <code>C</code></i> if the expression <code>Holder::get()</code> returns
a reference to a default initialized <code>C</code> object unique to
<code>Holder</code>. No invocation of <code>Holder::get()</code>, except possibly
the first one in the program, does throw.
<a href="flyweight.html#flyweight"><code>flyweight</code></a>
privately uses a holder to instantiate a <a href="factories.html#factory">factory</a>
and some additional data (like a <a href="locking.html#preliminary">mutex</a> for
internal synchronization) unique to each instantiation type of the class template.</p>
<p>&#32473;&#23450;&#19968;&#20010;&#31867;&#22411;<code>C</code>&#65292;&#22914;&#26524;&#34920;&#36798;&#24335;<big><code>Holder::get()</code></big>&#26524;&#36820;&#22238;&#19968;&#20010;&#23545;<big><code>Holder</code></big>&#26469;&#35828;&#21807;&#19968;&#30340;&#21040;&#40664;&#35748;&#21021;&#22987;&#21270;&#30340;<code>C</code>&#23545;&#35937;&#30340;&#24341;&#29992;&#65292;&#37027;&#20040;&#31867;&#22411;<big><code>Holder</code></big>&#34987;&#31216;&#20026;<big><i style="font-style: italic;"><code>C</code></i></big><span style="font-style: italic;">&#30340;&#19968;&#20010;</span><i style="font-style: italic;">holder</i>&#12290;&#38500;&#20102;&#31243;&#24207;&#20013;&#30340;&#31532;&#19968;&#27425;&#35843;&#29992;&#20043;&#22806;&#65292;<big><code>Holder::get()</code></big>&#30340;&#35843;&#29992;&#19981;&#20250;&#25243;&#20986;&#24322;&#24120;&#12290;<big><a href="flyweight.html#flyweight"><code>flyweight</code></a></big>&#31169;&#19979;&#30340;&#20351;&#29992;&#19968;&#20010;holder&#26469;&#23454;&#20363;&#21270;&#23545;&#36825;&#20010;&#31867;&#27169;&#26495;&#30340;&#27599;&#20010;&#23454;&#20363;&#31867;&#22411;&#26469;&#35828;&#21807;&#19968;&#30340;&#19968;&#20010;<a href="factories.html#factory">&#24037;&#21378;</a>&#21644;&#19968;&#20123;&#38468;&#21152;&#25968;&#25454;&#65288;&#20363;&#22914;&#29992;&#26469;&#20570;&#20869;&#37096;&#21516;&#27493;&#30340;<a href="locking.html#preliminary">&#20114;&#26021;&#20307;</a>&#65289;&#12290;
</p>




<p>
A type <code>S</code> is a <i>holder specifier</i> if: &nbsp;&#19968;&#20010;&#31867;&#22411;<code>S</code>&#26159;&#19968;&#20010;<i style="font-style: italic;">holder</i><span style="font-style: italic;">&#25551;&#36848;&#31526;</span>&#22914;&#26524;&#65306;
</p>


<ol>



  <li>One of the following conditions is satisfied: &nbsp;&#20197;&#19979;&#26465;&#20214;&#20043;&#19968;&#28385;&#36275;
    
    
    
    <ol type="a">



      <li><a href="#is_holder"><code>is_holder&lt;S&gt;::type</code></a> is
      <a href="../../../mpl/doc/refmanual/bool.html"><code>boost::mpl::true_</code></a>, &nbsp;<a href="holders.html#is_holder"><code>is_holder&lt;S&gt;::type</code></a> &#26159;
      <a href="../../../mpl/doc/refmanual/bool.html"><code>boost::mpl::true_</code></a></li>



      <li><code>S</code> is of the form <a href="#holder_construct"><code>holder&lt;S'&gt;</code></a>. &nbsp;<code>S</code>&#30340;&#26684;&#24335;&#26159;<a href="holders.html#holder_construct"><code>holder&lt;S'&gt;</code></a></li>



    
    
    
    </ol>



  </li>



  <li><code>S</code>, or <code>S'</code> if (b) applies, is an
    <a href="../../../mpl/doc/refmanual/lambda-expression.html"><code>MPL Lambda
    Expression</code></a> such that invoking it with type <code>C</code> resolves to
    a holder of <code>C</code>.</li>



</ol>
<div style="margin-left: 40px;">S&#65292;&#25110;&#32773;S'&#22914;&#26524;&#26465;&#20214;b&#36866;&#29992;&#65292;&#26159;&#19968;&#20010;<a href="../../../mpl/doc/refmanual/lambda-expression.html"><big><code>MPL Lambda
    </code></big>&#34920;&#36798;&#24335;<code></code></a>&#65292;&#24403;&#29992;&#31867;&#22411;<code>C</code>&#35843;&#29992;&#26102;&#24471;&#21040;&#19968;&#20010;<code>C</code>&#30340;holder</div>
<h2><a name="holder_tag_synopsis">Header
</a><a href="../../../../boost/flyweight/holder_tag.hpp"><code>"boost/flyweight/holder_tag.hpp"</code></a> synopsis &nbsp;</h2>
<h2>&#22836;&#25991;&#20214;<a href="../../../../boost/flyweight/holder_tag.hpp"><code>"boost/flyweight/holder_tag.hpp"</code></a>&#22823;&#24847;</h2>




<blockquote>
  
  
  <pre><span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">{</span>

<span class="keyword">namespace</span> <span class="identifier">flyweights</span><span class="special">{</span>

<span class="keyword">struct</span> <span class="identifier">holder_marker</span><span class="special">;</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">is_holder</span><span class="special">;</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">holder</span><span class="special">;</span>

<span class="special">}</span> <span class="comment">// namespace boost::flyweights</span>

<span class="special">}</span> <span class="comment">// namespace boost</span>  </pre>


</blockquote>




<h3><a name="is_holder">Class template <code>is_holder &nbsp;&#31867;&#27169;&#26495; is_holder</code></a></h3>




<p>
Unless specialized by the user, <code>is_holder&lt;T&gt;::type</code> is
<a href="../../../mpl/doc/refmanual/bool.html"><code>boost::mpl::true_</code></a>
if <code>T</code> is derived from <code>holder_marker</code>, and it is
<a href="../../../mpl/doc/refmanual/bool.html"><code>boost::mpl::false_</code></a>
otherwise.</p>
<p>&#38500;&#38750;&#29992;&#25143;&#36827;&#34892;&#19987;&#38376;&#21270;&#65292;&#22914;&#26524;<big><code>T</code></big>&#26159;&#20174;<big><code>holder_marker</code></big>&#27966;&#29983;&#30340;&#65292;<big><code>is_holder&lt;T&gt;::type</code></big>&#26159;<big><a href="../../../mpl/doc/refmanual/bool.html"><code>boost::mpl::true_</code></a></big>&#65292;&#21542;&#21017;&#26159;<big><a href="../../../mpl/doc/refmanual/bool.html"><code>boost::mpl::false_</code></a></big>&#12290;
</p>




<h3><a name="holder_construct">Class template <code>holder &nbsp;&#31867;&#27169;&#26495; holder</code></a></h3>




<p>
<code>holder&lt;T&gt;</code> is a syntactic construct meant to indicate
that <code>T</code> is a holder specifier without resorting to the
mechanisms provided by the <code>is_holder</code> class template.</p>
<p><code>holder&lt;T&gt;</code>&#26159;&#19968;&#31181;&#34920;&#26126;<code>T</code>&#26159;&#19968;&#20010;holder&#25551;&#36848;&#31526;&#30340;&#35821;&#27861;&#26500;&#36896;&#65292;&#36825;&#26679;&#23601;&#19981;&#38656;&#35201;&#20511;&#21161;&#20110;<big><code>is_holder</code></big>&#31867;&#27169;&#26495;&#25552;&#20379;&#30340;&#26426;&#21046;&#12290;
</p>




<h2><a name="static_holder_fwd_synopsis">Header
</a><a href="../../../../boost/flyweight/static_holder_fwd.hpp"><code>"boost/flyweight/static_holder_fwd.hpp"</code></a> synopsis &nbsp;</h2>
<h2>&#22836;&#25991;&#20214;<a href="../../../../boost/flyweight/static_holder_fwd.hpp"><code>"boost/flyweight/static_holder_fwd.hpp"</code></a>&#22823;&#24847;</h2>




<blockquote>
  
  
  <pre><span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">{</span>

<span class="keyword">namespace</span> <span class="identifier">flyweights</span><span class="special">{</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">C</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">static_holder_class</span><span class="special">;</span>

<span class="keyword">struct</span> <span class="identifier">static_holder</span><span class="special">;</span>

<span class="special">}</span> <span class="comment">// namespace boost::flyweights</span>

<span class="special">}</span> <span class="comment">// namespace boost</span>  </pre>


</blockquote>




<p>
<code>static_holder_fwd.hpp</code> forward declares 
<a href="#static_holder_class"><code>static_holder_class</code></a>
and <a href="#static_holder"><code>static_holder</code></a>.</p>


<p><big><code>static_holder_fwd.hpp</code></big>&#21069;&#32622;&#22768;&#26126;<big><a href="holders.html#static_holder_class"><code>static_holder_class</code></a></big> &#21644; <big><a href="holders.html#static_holder"><code>static_holder</code></a></big>&#12290;
</p>




<h2><a name="static_holder_synopsis">Header
</a><a href="../../../../boost/flyweight/static_holder.hpp"><code>"boost/flyweight/static_holder.hpp"</code></a> synopsis &nbsp;</h2>
<h2>&#22836;&#25991;&#20214;<a href="../../../../boost/flyweight/static_holder.hpp"><code>"boost/flyweight/static_holder.hpp"</code></a>&#22823;&#24847;</h2>




<h3><a name="static_holder_class">Class template <code>static_holder_class &nbsp;&#31867;&#27169;&#26495; static_holder_class</code></a></h3>




<p>
<code>static_holder_class&lt;C&gt;</code> keeps its unique instance of <code>C</code> as a
local static object.</p>


<p><big><code>static_holder_class&lt;C&gt;</code></big>&#20445;&#23384;&#23427;&#30340;<code>C</code>&#30340;&#21807;&#19968;&#23454;&#20363;&#20316;&#20026;&#19968;&#20010;&#23616;&#37096;&#38745;&#24577;&#23545;&#35937;&#12290;
</p>




<h3><a name="static_holder">Class <code>static_holder &nbsp;&#31867;&#27169;&#26495; static_holder</code></a></h3>




<p>
<a href="#holder"><code>Holder Specifier</code></a> for <a href="#static_holder_class"><code>static_holder_class</code></a>.</p>
<p><big><a href="holders.html#static_holder_class"><code>static_holder_class</code></a></big>&#30340;<a href="holders.html#holder"><big><code>Holder&nbsp;</code></big>&#25551;&#36848;&#31526;</a>
</p>




<h2><a name="intermodule_holder_fwd_synopsis">Header
</a><a href="../../../../boost/flyweight/intermodule_holder_fwd.hpp"><code>"boost/flyweight/intermodule_holder_fwd.hpp"</code></a> synopsis &nbsp;</h2>
<h2>&#22836;&#25991;&#20214;<a href="../../../../boost/flyweight/intermodule_holder_fwd.hpp"><code>"boost/flyweight/intermodule_holder_fwd.hpp"</code></a>&#22823;&#24847;</h2>




<blockquote>
  
  
  <pre><span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">{</span>

<span class="keyword">namespace</span> <span class="identifier">flyweights</span><span class="special">{</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">C</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">intermodule_holder_class</span><span class="special">;</span>

<span class="keyword">struct</span> <span class="identifier">intermodule_holder</span><span class="special">;</span>

<span class="special">}</span> <span class="comment">// namespace boost::flyweights</span>

<span class="special">}</span> <span class="comment">// namespace boost</span>  </pre>


</blockquote>




<p>
<code>intermodule_holder_fwd.hpp</code> forward declares 
<a href="#intermodule_holder_class"><code>intermodule_holder_class</code></a>
and <a href="#intermodule_holder"><code>intermodule_holder</code></a>.</p>

<p><big><code>intermodule_holder_fwd.hpp</code></big>&#21069;&#32622;&#22768;&#26126;<big><a href="holders.html#intermodule_holder_class"><code>intermodule_holder_class</code></a> </big>&#21644; <big><a href="holders.html#intermodule_holder"><code>intermodule_holder</code></a></big>
</p>




<h2><a name="intermodule_holder_synopsis">Header
</a><a href="../../../../boost/flyweight/intermodule_holder.hpp"><code>"boost/flyweight/intermodule_holder.hpp"</code></a> synopsis &nbsp;</h2>

<h2>&#22836;&#25991;&#20214;<a href="file:///boost/flyweight/intermodule_holder.hpp"><code>"boost/flyweight/intermodule_holder.hpp"</code></a>&#22823;&#24847;</h2>




<h3><a name="intermodule_holder_class">Class template <code>intermodule_holder_class &nbsp;&#31867;&#27169;&#26495; intermodule_holder_class</code></a></h3>




<p>
<code>intermodule_holder_class&lt;C&gt;</code> maintains a <code>C</code>
instance which is unique even across different dynamically linked modules of
the program using this same type. In general, this guarantee is not provided by
<a href="#static_holder_class"><code>static_holder_class</code></a>, as most
C++ implementations are not able to merge duplicates of static variables stored
in different dynamic modules of a program.</p>


<p><big><code>intermodule_holder_class&lt;C&gt;</code></big>&#32500;&#25252;&#30528;&#19968;&#20010;<big><code>C</code></big>&#30340;&#23454;&#20363;&#65292;&#35813;&#23454;&#20363;&#21363;&#20351;&#26159;&#22312;&#20351;&#29992;&#35813;&#31867;&#22411;&#30340;&#31243;&#24207;&#30340;&#19981;&#21516;&#30340;&#21160;&#24577;&#38142;&#25509;&#30340;&#27169;&#22359;&#38388;&#20063;&#26159;&#21807;&#19968;&#30340;&#12290;&#36890;&#24120;&#65292;<big><a href="holders.html#static_holder_class"><code>static_holder_class</code></a></big>&#27809;&#26377;&#25552;&#20379;&#36825;&#31181;&#20445;&#35777;&#65292;&#22240;&#20026;&#32477;&#22823;&#22810;&#25968;&#30340;C++&#23454;&#29616;&#19981;&#33021;&#21512;&#24182;&#19968;&#20010;&#31243;&#24207;&#30340;&#19981;&#21516;&#30340;&#21160;&#24577;&#27169;&#22359;&#20013;&#37325;&#22797;&#30340;&#38745;&#24577;&#21464;&#37327;&#12290;
</p>




<h3><a name="intermodule_holder">Class <code>intermodule_holder &nbsp;&#31867; intermodule_holder</code></a></h3>




<p>
<a href="#holder"><code>Holder Specifier</code></a> for <a href="#intermodule_holder_class"><code>intermodule_holder_class</code></a>. &nbsp;</p>
<p><big><a href="holders.html#intermodule_holder_class"><code>intermodule_holder_class</code></a></big>&#30340;<a href="holders.html#holder"><code><big>Holder</big> </code>&#25551;&#36848;&#31526;<code></code></a>
</p>




<hr>

<div class="prev_link"><a href="factories.html"><img src="../prev.gif" alt="factories" border="0"><br>



Factories
</a></div>



<div class="up_link"><a href="index.html"><img src="../up.gif" alt="Boost.Flyweight reference" border="0"><br>



Boost.Flyweight reference
</a></div>



<div class="next_link"><a href="locking.html"><img src="../next.gif" alt="locking policies" border="0"><br>



Locking policies
</a></div>


<br style="" clear="all">




<br>




<p>Revised August 11th 2008</p>




<p>&copy; Copyright 2006-2008 Joaqu&iacute;n M L&oacute;pez Mu&ntilde;oz.
Distributed under the Boost Software 
License, Version 1.0. (See accompanying file <a href="../../../../LICENSE_1_0.txt">
LICENSE_1_0.txt</a> or copy at <a href="http://www.boost.org/LICENSE_1_0.txt">
http://www.boost.org/LICENSE_1_0.txt</a>)
</p>




</body>
</html>
