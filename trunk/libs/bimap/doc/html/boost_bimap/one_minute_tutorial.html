<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>One minute tutorial</title>

<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../index.html" title="Chapter&nbsp;1.&nbsp;Boost.Bimap">
<link rel="up" href="../index.html" title="Chapter&nbsp;1.&nbsp;Boost.Bimap">
<link rel="prev" href="introduction.html" title="Introduction">
<link rel="next" href="the_tutorial.html" title="The tutorial"></head>
<body style="color: black; background-color: white;" alink="#0000ff" link="#0000ff" vlink="#840084">
<table cellpadding="2" width="100%">
<tbody>
<tr>
<td valign="top"><img alt="Boost C++ Libraries" src="../../../../../boost.png" height="86" width="277"></td>
<td align="center"><a href="../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/people/people.htm">People</a></td>
<td align="center"><a href="http://www.boost.org/more/faq.htm">FAQ</a></td>
<td align="center"><a href="../../../../../more/index.htm">More</a></td>
</tr>
</tbody>
</table>
<hr>
<div class="spirit-nav"><a accesskey="p" href="introduction.html"><img src="../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="the_tutorial.html"><img src="../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both;"><a name="boost_bimap.one_minute_tutorial"></a><a class="link" href="one_minute_tutorial.html" title="One minute tutorial">One minute tutorial 一分钟教程</a>
</h2>
</div>
</div>
</div>
<a name="boost_bimap.one_minute_tutorial.what_is_a_bimap_"></a>
<h4><a name="id2585613"></a> <a class="link" href="one_minute_tutorial.html#boost_bimap.one_minute_tutorial.what_is_a_bimap_">What
is a bimap? 什么是 bimap？</a> </h4>
<p> A Bimap is a data structure that represents bidirectional
relations between elements of two collections. The container is
designed to work as two opposed STL maps. A bimap between a collection <code class="computeroutput"><span class="identifier">X</span></code>
and a collection <code class="computeroutput"><span class="identifier">Y</span></code> can be viewed
as a map from <code class="computeroutput"><span class="identifier">X</span></code> to <code class="computeroutput"><span class="identifier">Y</span></code>
(this view will be called the <span class="emphasis"><em>left
map view</em></span>) or as a map from <code class="computeroutput"><span class="identifier">Y</span></code>
to <code class="computeroutput"><span class="identifier">X</span></code> (known as the
<span class="emphasis"><em>right map view</em></span>).
Additionally, the bimap can also be viewed as a set of relations
between <code class="computeroutput"><span class="identifier">X</span></code> and <code class="computeroutput"><span class="identifier">Y</span></code>
(named the <span class="emphasis"><em>collection of
relations view</em></span>). </p>
<p> Bimap 是一个数据结构，它表示了两组元素间的双向关系。该容器被设计为象两个相对的 STL map 那样。一个 <code class="computeroutput"><span class="identifier">X</span></code>
和 <code class="computeroutput"><span class="identifier">Y</span></code>
间的 bimap，可以被视作为从 <code class="computeroutput"><span class="identifier">X</span></code> 到 <code class="computeroutput"><span class="identifier">Y</span></code>
的 map (这种视角称为 <span class="emphasis"><em>左映射视图</em></span>)
或者被视作为从 <code class="computeroutput"><span class="identifier">Y</span></code> 到 <code class="computeroutput"><span class="identifier">X</span></code>
的map(被称为 <span class="emphasis"><em>右映射视图</em></span>)。
另外，bimap 也可以被视用为 <code class="computeroutput"><span class="identifier">X</span></code> 和 <code class="computeroutput"><span class="identifier">Y</span></code>
之间的一组关系(称为 <span class="emphasis"><em>关系视图组</em></span>)。
</p>
<p> The following code creates an empty bimap container:</p>
<p>以下代码创建一个空的 bimap 容器： </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;</span> <span class="identifier">bm_type</span><span class="special">;</span><br><span class="identifier">bm_type</span> <span class="identifier">bm</span><span class="special">;</span>
</pre>
<p> Given this code, the following is the complete description of
the resulting bimap. <sup>[<a name="id2585800" href="one_minute_tutorial.html#ftn.id2585800" class="footnote">1</a>]</sup></p>
<p>给定以上代码，以下是对所得 bimap 的完整描述。<sup>[<a name="id2585800" href="#ftn.id2585800" class="footnote">1</a>]</sup>
</p>
<div class="itemizedlist">
<ul type="disc">
<li>
<code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span></code> is
signature-compatible with <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;</span><br><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span></code> 的签名兼容于 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;</span></code></li>
<li>
<code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span></code> is
signature-compatible with <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">Y</span><span class="special">,</span><span class="identifier">X</span><span class="special">&gt;</span><br><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span></code> 的签名兼容于 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">Y</span><span class="special">,</span><span class="identifier">X</span><span class="special">&gt;</span></code></li>
<li>
<code class="computeroutput"><span class="identifier">bm</span></code> is
signature-compatible with <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">set</span><span class="special">&lt;</span>
<span class="identifier">relation</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;</span>
<span class="special">&gt;</span><br><span class="identifier">bm</span></code> 的签名兼容于 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">set</span><span class="special">&lt;</span>
<span class="identifier">relation</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;</span>
<span class="special">&gt;</span></code></li>
</ul>
</div>
<p> <span class="inlinemediaobject"><img src="../images/bimap/simple.bimap.png" alt="simple.bimap"></span>
</p>
<p> You can see how a bimap container offers three views over the
same collection of bidirectional relations. </p>
<p>你可以看到，一个 bimap 容器是如何在同一组双向关系上提供三种视图的。 </p>
<p> If we have any generic function that work with maps</p><p>如果我们有一个使用 map 的泛型函数： </p>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">class</span> <span class="identifier">MapType</span> <span class="special">&gt;</span><br><span class="keyword">void</span> <span class="identifier">print_map</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">MapType</span> <span class="special">&amp;</span> <span class="identifier">m</span><span class="special">)</span><br><span class="special">{</span><br><span class="keyword">typedef</span> <span class="keyword">typename</span> <span class="identifier">MapType</span><span class="special">::</span><span class="identifier">const_iterator</span> <span class="identifier">const_iterator</span><span class="special">;</span><br><span class="keyword">for</span><span class="special">(</span> <span class="identifier">const_iterator</span> <span class="identifier">iter</span> <span class="special">=</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">iend</span> <span class="special">=</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span> <span class="identifier">iter</span> <span class="special">!=</span> <span class="identifier">iend</span><span class="special">;</span> <span class="special">++</span><span class="identifier">iter</span> <span class="special">)</span><br><span class="special">{</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">iter</span><span class="special">-&gt;</span><span class="identifier">first</span> <span class="special">&lt;&lt;</span> <span class="string">"--&gt;"</span> <span class="special">&lt;&lt;</span> <span class="identifier">iter</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="special">}</span><br><span class="special">}</span>
</pre>
<p> We can use the <span class="emphasis"><em>left
map view</em></span> and the <span class="emphasis"><em>right
map view</em></span> with it</p><p>我们就可以对它使用 <span class="emphasis"><em>左映射视图</em></span> 或 <span class="emphasis"><em>右映射视图</em></span>： </p>
<pre class="programlisting"><span class="identifier">bimap</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;</span> <span class="identifier">bm</span><span class="special">;</span><br><span class="special">...</span><br><span class="identifier">print_map</span><span class="special">(</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span> <span class="special">);</span><br><span class="identifier">print_map</span><span class="special">(</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span> <span class="special">);</span>
</pre>
<p> And the output will be</p><p>输出如下： </p>
<pre class="programlisting"><code class="literal">1 --&gt; one</code><br><code class="literal">2 --&gt; two</code><br>...<br><code class="literal">one --&gt; 1</code><br><code class="literal">two --&gt; 2</code><br>...<br></pre>
<a name="boost_bimap.one_minute_tutorial.layout_of_the_relation_and_the_pairs_of_a_bimap"></a>
<h4><a name="id2636318"></a> <a class="link" href="one_minute_tutorial.html#boost_bimap.one_minute_tutorial.layout_of_the_relation_and_the_pairs_of_a_bimap">Layout
of the relation and the pairs of a bimap&nbsp; bimap 中的关系与元素对的布局</a> </h4>
<p> The <code class="computeroutput"><span class="identifier">relation</span></code> class
represents two related elements. The two values are named left and
right to express the symmetry of this type. The bimap pair classes are
signature-compatible with <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">pairs</span></code>.</p><p> <code class="computeroutput"><span class="identifier">relation</span></code> 类表示了两个相关元素。这两个值分别命名为 left 和
right，表示这种类型的对称性。bimap pair 类的签名兼容于 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">pairs</span></code>. </p>
<p> <span class="inlinemediaobject"><img src="../images/bimap/relation.and.pair.png" alt="relation.and.pair"></span> </p>
<a name="boost_bimap.one_minute_tutorial.step_by_step"></a>
<h4><a name="id2636390"></a> <a class="link" href="one_minute_tutorial.html#boost_bimap.one_minute_tutorial.step_by_step">Step
by step 一步步来</a> </h4>
<p> A convinience header is avaiable in the boost directory:</p><p>在 boost 目录下有一个便于使用的头文件： </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">bimap</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p> Lets define a bidirectional map between integers and strings:
</p>
<p> 我们来定义一个整数与字符串间的双向 map:</p>

<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">bimap</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;</span> <span class="identifier">bm_type</span><span class="special">;</span><br><span class="identifier">bm_type</span> <span class="identifier">bm</span><span class="special">;</span>
</pre>
<p> </p>
<p> </p>
<a name="boost_bimap.one_minute_tutorial.the_collection_of_relations_view"></a>
<h4><a name="id2636546"></a> <a class="link" href="one_minute_tutorial.html#boost_bimap.one_minute_tutorial.the_collection_of_relations_view">The
collection of relations view 关系视图组</a> </h4>
<p> Remember that <code class="computeroutput"><span class="identifier">bm</span></code> alone can be
used as a set of relations. We can insert elements or iterate over them
using this view. </p>

<p> 记住，<code class="computeroutput"><span class="identifier">bm</span></code> 可单独用作关系的 set。我们可以插入元素，或者使用该视图进行遍历。</p>
<pre class="programlisting"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="string">"one"</span> <span class="special">)</span> <span class="special">);</span><br><span class="identifier">bm</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">(</span><span class="number">2</span><span class="special">,</span> <span class="string">"two"</span> <span class="special">)</span> <span class="special">);</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"There are "</span> <span class="special">&lt;&lt;</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">size</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="string">"relations"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="keyword">for</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">const_iterator</span> <span class="identifier">iter</span> <span class="special">=</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">iend</span> <span class="special">=</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span> <br> <span class="identifier">iter</span> <span class="special">!=</span> <span class="identifier">iend</span><span class="special">;</span> <span class="special">++</span><span class="identifier">iter</span> <span class="special">)</span><br><span class="special">{</span><br><span class="comment">// iter-&gt;left : data : int<br></span> <span class="comment">// iter-&gt;right : data : std::string<br></span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">iter</span><span class="special">-&gt;</span><span class="identifier">left</span> <span class="special">&lt;&lt;</span> <span class="string">" &lt;--&gt; "</span> <span class="special">&lt;&lt;</span> <span class="identifier">iter</span><span class="special">-&gt;</span><span class="identifier">right</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="special">}</span>
</pre>
<p> </p>
<p> </p>
<a name="boost_bimap.one_minute_tutorial.the_left_map_view"></a>
<h4><a name="id2637012"></a> <a class="link" href="one_minute_tutorial.html#boost_bimap.one_minute_tutorial.the_left_map_view">The
left map view 左映射视图</a> </h4>
<p> <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span></code> works like
a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span>
<span class="special">&gt;</span></code>.
We use it in the same way we will use a standard map. </p>
<p> <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span></code> 的用法和 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span>
<span class="special">&gt;</span></code> 一样。我们按照使用标准 map 一样使用它。</p>

<pre class="programlisting"><span class="line_callout_bug"><a class="co" name="boost_bimap0co" href="one_minute_tutorial.html#boost_bimap0"><img src="../images/callouts/1.png" alt="1" border="0"></a></span><span class="keyword">typedef</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_map</span><span class="special">::</span><span class="identifier">const_iterator</span> <span class="identifier">left_const_iterator</span><span class="special">;</span><br><span class="keyword">for</span><span class="special">(</span> <span class="identifier">left_const_iterator</span> <span class="identifier">left_iter</span> <span class="special">=</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">iend</span> <span class="special">=</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span><br><span class="identifier">left_iter</span> <span class="special">!=</span> <span class="identifier">iend</span><span class="special">;</span> <span class="special">++</span><span class="identifier">left_iter</span> <span class="special">)</span><br><span class="special">{</span><br><span class="comment">// left_iter-&gt;first : key : int<br></span> <span class="comment">// left_iter-&gt;second : data : std::string<br></span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">left_iter</span><span class="special">-&gt;</span><span class="identifier">first</span> <span class="special">&lt;&lt;</span> <span class="string">" --&gt; "</span> <span class="special">&lt;&lt;</span> <span class="identifier">left_iter</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="special">}</span>
<span class="line_callout_bug"><a class="co" name="boost_bimap1co" href="one_minute_tutorial.html#boost_bimap1"><img src="../images/callouts/2.png" alt="2" border="0"></a></span><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_const_iterator</span> <span class="identifier">left_iter</span> <span class="special">=</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span><span class="special">.</span><span class="identifier">find</span><span class="special">(</span><span class="number">2</span><span class="special">);</span><br><span class="identifier">assert</span><span class="special">(</span> <span class="identifier">left_iter</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">==</span> <span class="string">"two"</span> <span class="special">);</span>
<span class="line_callout_bug"><a class="co" name="boost_bimap2co" href="one_minute_tutorial.html#boost_bimap2"><img src="../images/callouts/3.png" alt="3" border="0"></a></span><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_value_type</span><span class="special">(</span> <span class="number">3</span><span class="special">,</span> <span class="string">"three"</span> <span class="special">)</span> <span class="special">);</span>
</pre>
<p> </p>
<p> </p>
<p> </p>
<div class="calloutlist">
<table summary="Callout list" border="0">
<tbody>
<tr>
<td align="left" valign="top" width="5%">
<p><a name="boost_bimap0"></a><a href="#boost_bimap0co"><img src="../images/callouts/1.png" alt="1" border="0"></a> </p>
</td>
<td align="left" valign="top">
<p> The type of <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span></code> is <code class="computeroutput"><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_map</span></code>
and the type of <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span></code> is <code class="computeroutput"><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">right_map</span></code></p><p><code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span></code> 的类型为 <code class="computeroutput"><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_map</span></code>，<code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span></code> 的类型为 <code class="computeroutput"><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">right_map</span></code>
</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a name="boost_bimap1"></a><a href="#boost_bimap1co"><img src="../images/callouts/2.png" alt="2" border="0"></a> </p>
</td>
<td align="left" valign="top">
<p> <code class="computeroutput"><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_</span></code>-type-
can be used as a shortcut for the more verbose <code class="computeroutput"><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_map</span><span class="special">::</span></code>-type-</p><p><code class="computeroutput"><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_</span></code>-type-
可以作为 <code class="computeroutput"><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_map</span><span class="special">::</span></code>-type- 的简写 </p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a name="boost_bimap2"></a><a href="#boost_bimap2co"><img src="../images/callouts/3.png" alt="3" border="0"></a> </p>
</td>
<td align="left" valign="top">
<p> This line produces the same effect of <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">(</span><span class="number">3</span><span class="special">,</span><span class="string">"three"</span><span class="special">)</span> <span class="special">);</span></code></p><p> 这行代码的作用与 <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">(</span><span class="number">3</span><span class="special">,</span><span class="string">"three"</span><span class="special">)</span> <span class="special">);</span></code> 相同<code class="computeroutput"><span class="special"></span></code>
</p>
</td>
</tr>
</tbody>
</table>
</div>
<p> </p>
<p> </p>
<a name="boost_bimap.one_minute_tutorial.the_right_map_view"></a>
<h4><a name="id2637765"></a> <a class="link" href="one_minute_tutorial.html#boost_bimap.one_minute_tutorial.the_right_map_view">The
right map view 右映射视图</a> </h4>
<p> <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span></code> works
like a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="keyword">int</span>
<span class="special">&gt;</span></code>.
It is important to note that the key is the first type and the data is
the second one, exactly as with standard maps. </p>
<p> <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span></code> 的用法和 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="keyword">int</span>
<span class="special">&gt;</span></code> 一样。重要的是，要注意键值为 first&nbsp;而数据为 second，其它的和标准 map 一样。 </p>


<pre class="programlisting"><span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">right_const_iterator</span> <span class="identifier">right_iter</span> <span class="special">=</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">find</span><span class="special">(</span><span class="string">"two"</span><span class="special">);</span><br><span class="comment">// right_iter-&gt;first : key : std::string<br></span><span class="comment">// right_iter-&gt;second : data : int<br></span><br><span class="identifier">assert</span><span class="special">(</span> <span class="identifier">right_iter</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">==</span> <span class="number">2</span> <span class="special">);</span><br><span class="identifier">assert</span><span class="special">(</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">at</span><span class="special">(</span><span class="string">"one"</span><span class="special">)</span> <span class="special">==</span> <span class="number">1</span> <span class="special">);</span><br><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">erase</span><span class="special">(</span><span class="string">"two"</span><span class="special">);</span>
<span class="line_callout_bug"><a class="co" name="boost_bimap3co" href="one_minute_tutorial.html#boost_bimap3"><img src="../images/callouts/1.png" alt="1" border="0"></a></span><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">right_value_type</span><span class="special">(</span> <span class="string">"four"</span><span class="special">,</span> <span class="number">4</span> <span class="special">)</span> <span class="special">);</span>
</pre>
<p> </p>
<p> </p>
<p> </p>
<div class="calloutlist">
<table summary="Callout list" border="0">
<tbody>
<tr>
<td align="left" valign="top" width="5%">
<p><a name="boost_bimap3"></a><a href="#boost_bimap3co"><img src="../images/callouts/1.png" alt="1" border="0"></a> </p>
</td>
<td align="left" valign="top">
<p> This line produces the same effect of <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">(</span><span class="number">4</span><span class="special">,</span><span class="string">"four"</span><span class="special">)</span> <span class="special">);</span></code></p><p>这行代码的作用和 <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">(</span><span class="number">4</span><span class="special">,</span><span class="string">"four"</span><span class="special">)</span> <span class="special">);</span></code> 相同<code class="computeroutput"><span class="special"></span></code>
</p>
</td>
</tr>
</tbody>
</table>
</div>
<p> </p>
<p> </p>
<a name="boost_bimap.one_minute_tutorial.differences_with_std__map"></a>
<h4><a name="id2638220"></a> <a class="link" href="one_minute_tutorial.html#boost_bimap.one_minute_tutorial.differences_with_std__map">Differences
with std::map 与 std::map 的差别</a> </h4>
<p> The main difference between bimap views and their standard
containers counterparts is that, because of the bidirectional nature of
a bimap, the values stored in it can not be modified directly using
iterators. For example, when a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;</span></code>
iterator is dereferenced the return type is <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="keyword">const</span>
<span class="identifier">X</span><span class="special">,</span> <span class="identifier">Y</span><span class="special">&gt;</span></code>, so the
following code is valid: <code class="computeroutput"><span class="identifier">m</span><span class="special">.</span><span class="identifier">begin</span><span class="special">()-&gt;</span><span class="identifier">second</span> <span class="special">=</span> <span class="identifier">new_value</span><span class="special">;</span></code>. However
dereferencing a <code class="computeroutput"><span class="identifier">bimap</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;::</span><span class="identifier">left_iterator</span></code>
returns a type that is <span class="emphasis"><em>signature-compatible</em></span>
with a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="keyword">const</span> <span class="identifier">X</span><span class="special">,</span>
<span class="keyword">const</span> <span class="identifier">Y</span><span class="special">&gt;</span></code></p><p><code class="computeroutput"><span class="special"></span></code>bimap 视图与相对应的标准容器之间最主要的差别在于，由于 bimap 本身的双向性，它所保存的值不可能直接用迭代器去修改。例如，当一个 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;</span></code>
迭代器被提领时，返回的类型是 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="keyword">const</span>
<span class="identifier">X</span><span class="special">,</span> <span class="identifier">Y</span><span class="special">&gt;</span></code>，所以以下代码是有效的：<code class="computeroutput"><span class="identifier">m</span><span class="special">.</span><span class="identifier">begin</span><span class="special">()-&gt;</span><span class="identifier">second</span> <span class="special">=</span> <span class="identifier">new_value</span><span class="special">;</span></code>. 但是提领一个 <code class="computeroutput"><span class="identifier">bimap</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;::</span><span class="identifier">left_iterator</span></code> 所返回的类型的<span style="font-style: italic;">签名兼容于</span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="keyword">const</span> <span class="identifier">X</span><span class="special">,</span>
<span class="keyword">const</span> <span class="identifier">Y</span><span class="special">&gt;</span></code>
</p>
<pre class="programlisting"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span><span class="special">.</span><span class="identifier">find</span><span class="special">(</span><span class="number">1</span><span class="special">)-&gt;</span><span class="identifier">second</span> <span class="special">=</span> <span class="string">"1"</span><span class="special">;</span> <span class="comment">// Compilation error 编译错误<br></span></pre>
<p> If you insert <code class="computeroutput"><span class="special">(</span><span class="number">1</span><span class="special">,</span><span class="string">"one"</span><span class="special">)</span></code> and <code class="computeroutput"><span class="special">(</span><span class="number">1</span><span class="special">,</span><span class="string">"1"</span><span class="special">)</span></code>
in a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;</span></code> the
second insertion will have no effect. In a <code class="computeroutput"><span class="identifier">bimap</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;</span></code>
both keys have to remain unique. The insertion may fail in other
situtions too. Lets see an example</p><p>如果你往一个 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;</span></code> 中插入 <code class="computeroutput"><span class="special">(</span><span class="number">1</span><span class="special">,</span><span class="string">"one"</span><span class="special">)</span></code> 和 <code class="computeroutput"><span class="special">(</span><span class="number">1</span><span class="special">,</span><span class="string">"1"</span><span class="special">)</span></code>，那么第二个插入是无效的。在一个 <code class="computeroutput"><span class="identifier">bimap</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">,</span><span class="identifier">Y</span><span class="special">&gt;</span></code>
中，两个键都必须是唯一的。其它情况的插入都会失败。我们来看一个例子： </p>
<pre class="programlisting"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">clear</span><span class="special">();</span><br><span class="identifier">bm</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">(</span> <span class="number">1</span><span class="special">,</span> <span class="string">"one"</span> <span class="special">)</span> <span class="special">);</span><br><span class="identifier">bm</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">(</span> <span class="number">1</span><span class="special">,</span> <span class="string">"1"</span> <span class="special">)</span> <span class="special">);</span> <span class="comment">// No effect! 没有作用！<br></span><span class="identifier">bm</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">(</span> <span class="number">2</span><span class="special">,</span> <span class="string">"one"</span> <span class="special">)</span> <span class="special">);</span> <span class="comment">// No effect! 没有作用！<br></span><br><span class="identifier">assert</span><span class="special">(</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">size</span><span class="special">()</span> <span class="special">==</span> <span class="number">1</span> <span class="special">);</span>
</pre>
<a name="boost_bimap.one_minute_tutorial.a_simple_example"></a>
<h4><a name="id2638910"></a> <a class="link" href="one_minute_tutorial.html#boost_bimap.one_minute_tutorial.a_simple_example">A
simple example 一个简单的例子</a> </h4>
<p> Look how you can reuse code that is intend to be used with
std::maps, like the print_map function in this example. </p>
<p>我们来看看你可以如何重用原本要用于
std::maps 的代码，如本例中的 print_map 函数。 </p>
 <p><a href="../../../example/simple_bimap.cpp" target="_top">Go to source code 查看源代码</a> </p>


<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">string</span><span class="special">&gt;</span><br><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span><br><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">bimap</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span><br><span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">class</span> <span class="identifier">MapType</span> <span class="special">&gt;</span><br><span class="keyword">void</span> <span class="identifier">print_map</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">MapType</span> <span class="special">&amp;</span> <span class="identifier">map</span><span class="special">,</span><br><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&amp;</span> <span class="identifier">separator</span><span class="special">,</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">ostream</span> <span class="special">&amp;</span> <span class="identifier">os</span> <span class="special">)</span><br><span class="special">{</span><br><span class="keyword">typedef</span> <span class="keyword">typename</span> <span class="identifier">MapType</span><span class="special">::</span><span class="identifier">const_iterator</span> <span class="identifier">const_iterator</span><span class="special">;</span><br><span class="keyword">for</span><span class="special">(</span> <span class="identifier">const_iterator</span> <span class="identifier">i</span> <span class="special">=</span> <span class="identifier">map</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">iend</span> <span class="special">=</span> <span class="identifier">map</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span> <span class="identifier">i</span> <span class="special">!=</span> <span class="identifier">iend</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span> <span class="special">)</span><br><span class="special">{</span><br><span class="identifier">os</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">first</span> <span class="special">&lt;&lt;</span> <span class="identifier">separator</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="special">}</span><br><span class="special">}</span><br><span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span><br><span class="special">{</span><br><span class="comment">// Soccer World cup 足球世界杯<br></span><br><span class="keyword">typedef</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">bimap</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="keyword">int</span> <span class="special">&gt;</span> <span class="identifier">results_bimap</span><span class="special">;</span><br><span class="keyword">typedef</span> <span class="identifier">results_bimap</span><span class="special">::</span><span class="identifier">value_type</span> <span class="identifier">position</span><span class="special">;</span><br><span class="identifier">results_bimap</span> <span class="identifier">results</span><span class="special">;</span><br><span class="identifier">results</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">position</span><span class="special">(</span><span class="string">"Argentina"</span> <span class="special">,</span><span class="number">1</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">results</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">position</span><span class="special">(</span><span class="string">"Spain"</span> <span class="special">,</span><span class="number">2</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">results</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">position</span><span class="special">(</span><span class="string">"Germany"</span> <span class="special">,</span><span class="number">3</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">results</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">position</span><span class="special">(</span><span class="string">"France"</span> <span class="special">,</span><span class="number">4</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"The number of countries is "</span> <span class="special">&lt;&lt;</span> <span class="identifier">results</span><span class="special">.</span><span class="identifier">size</span><span class="special">()</span><br><span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"The winner is "</span> <span class="special">&lt;&lt;</span> <span class="identifier">results</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">at</span><span class="special">(</span><span class="number">1</span><span class="special">)</span><br><span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><br><span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Countries names ordered by their final position:"</span><br><span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="comment">// results.right works like a std::map&lt; int, std::string &gt;<br>// </span><span class="comment">results.right 和 std::map&lt; int, std::string &gt;</span><span class="comment"> 一样使用<br></span><br><span class="identifier">print_map</span><span class="special">(</span> <span class="identifier">results</span><span class="special">.</span><span class="identifier">right</span><span class="special">,</span> <span class="string">") "</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">);</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><br><span class="special">&lt;&lt;</span> <span class="string">"Countries names ordered alphabetically along with"</span><br><span class="string">"their final position:"</span><br><span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="comment">// results.left works like a std::map&lt; std::string, int &gt;<br></span><span class="comment">// results.left 和 std::map&lt; std::string, int &gt; 一样使用<br></span><br><span class="identifier">print_map</span><span class="special">(</span> <span class="identifier">results</span><span class="special">.</span><span class="identifier">left</span><span class="special">,</span> <span class="string">" ends in position "</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">);</span><br><span class="keyword">return</span> <span class="number">0</span><span class="special">;</span><br><span class="special">}</span>
</pre>
<p> </p>
<p>  The output of this program will be the following:</p>
<p>这个程序的输出如下： </p>
<pre class="programlisting"><code class="literal">The number of countries is 4</code><br><code class="literal">The winner is Argentina</code><br><code class="literal">Countries names ordered by their final position:</code><br><code class="literal">1) Argentina</code><br><code class="literal">2) Spain</code><br><code class="literal">3) Germany</code><br><code class="literal">4) France</code><br><code class="literal">Countries names ordered alphabetically along with their final position:</code><br><code class="literal">Argentina ends in position 1</code><br><code class="literal">France ends in position 4</code><br><code class="literal">Germany ends in position 3</code><br><code class="literal">Spain ends in position 2</code>
</pre>
<a name="boost_bimap.one_minute_tutorial.continuing_the_journey"></a>
<h4><a name="id2640226"></a> <a class="link" href="one_minute_tutorial.html#boost_bimap.one_minute_tutorial.continuing_the_journey">Continuing
the journey 继续我们的旅程</a> </h4>
<p> For information on function signatures, see any standard
library documentation or read the <a class="link" href="reference.html" title="Reference">reference</a>
section of this documentation.</p><p>有关函数签名的相关信息，请见标准库的文档或阅读本文档的 <a class="link" href="reference.html" title="Reference">参考</a>
一节。 </p>
<div class="caution">
<table summary="Caution" border="0">
<tbody>
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="../../../../../doc/html/images/caution.png"></td>
<th align="left">Caution 警告</th>
</tr>
<tr>
<td align="left" valign="top">
<p> Be aware that a bidirectional map is only
signature-compatible with standard containers. Some functions may give
different results, such as in the case of inserting a pair into the
left map where the second value conflicts with a stored relation in the
container. The functions may be slower in a bimap because of the
duplicated constraints. It is strongly recommended that you read <a class="link" href="the_tutorial.html" title="The tutorial">The full tutorial</a> if you
intend to use a bimap in a serious project.</p><p>要知道双向 map 只是签名兼容于标准容器。有些函数可以有不同的结果，如在插入一个值对到左映射时，第二个值与容器中已有数据发生冲突。bimap 中的函数可能会由于双重约束条件而更慢些。如果你要在一个重要项目中使用 bimap，强烈建议你先阅读 <a class="link" href="the_tutorial.html" title="The tutorial">完整的指南</a>。 </p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="footnotes">
<br>
<hr align="left" width="100">
<div class="footnote">
<p><sup>[<a name="ftn.id2585800" href="#id2585800" class="para">1</a>] </sup> A type is <span class="emphasis"><em>signature-compatible</em></span>
with other type if it has the same signature for functions and
metadata. Preconditions, postconditions and the order of operations
need not be the same.&nbsp;</p><p>一个类型的 <span class="emphasis"><em>签名兼容于</em></span> 另一个类型，如果它们具有相同的函数签名和元数据。前提条件、后置条件和操作的顺序则不必相同。 </p>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%">
<tbody>
<tr>
<td align="left"></td>
<td align="right">
<div class="copyright-footer">Copyright © 2006 -2007
Matias Capeletto
<p> Distributed under the Boost Software License, Version
1.0. (See accompanying file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
</p>
</div>
</td>
</tr>
</tbody>
</table>
<hr>
<div class="spirit-nav"><a accesskey="p" href="introduction.html"><img src="../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="the_tutorial.html"><img src="../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body></html>