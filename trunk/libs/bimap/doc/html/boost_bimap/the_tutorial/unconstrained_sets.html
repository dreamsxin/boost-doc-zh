<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Unconstrained Sets &#19981;&#21463;&#38480;&#30340;set</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../../index.html" title="Chapter 1. Boost.Bimap">
<link rel="up" href="../the_tutorial.html" title="The tutorial &#25351;&#21335;">
<link rel="prev" href="bimaps_with_user_defined_names.html" title="Bimaps with user defined names &#29992;&#25143;&#33258;&#23450;&#20041;&#21517;&#23383;&#30340;Bimap">
<link rel="next" href="additional_information.html" title="Additional information &#26356;&#22810;&#30340;&#20449;&#24687;">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="bimaps_with_user_defined_names.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../the_tutorial.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="additional_information.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_bimap.the_tutorial.unconstrained_sets"></a><a class="link" href="unconstrained_sets.html" title="Unconstrained Sets &#19981;&#21463;&#38480;&#30340;set"> Unconstrained
      Sets &#19981;&#21463;&#38480;&#30340;set</a>
</h3></div></div></div>
<p>
        Unconstrained sets allow the user to disable one of the views of a bimap.
        Doing so makes the bimap operations execute faster and reduces memory consumption.
        This completes the bidirectional mapping framework by including unidirectional
        mappings as a particular case.<br> &#19981;&#21463;&#38480; set &#20801;&#35768;&#29992;&#25143;&#20851;&#38381; bimap
        &#30340;&#26576;&#20010;&#35270;&#22270;&#12290;&#36825;&#26679;&#20570;&#21487;&#20197;&#20351;&#24471; bimap &#30340;&#25805;&#20316;&#25191;&#34892;&#24471;&#26356;&#24555;&#65292;
        &#24182;&#19988;&#20943;&#23569;&#20869;&#23384;&#28040;&#32791;&#12290;&#36825;&#23436;&#21892;&#20102;&#21452;&#21521;&#26144;&#23556;&#26694;&#26550;&#65292;&#21253;&#21547;&#20102;&#21333;&#21521;&#26144;&#23556;&#20316;&#20026;&#20854;&#20013;&#30340;&#19968;&#31181;&#29305;&#27530;&#24773;&#20917;&#12290;
      </p>
<p>
        Unconstrained sets are useful for the following reasons:<br> &#30001;&#20110;&#20197;&#19979;&#21407;&#22240;&#65292;&#19981;&#21463;&#38480;
        set &#36824;&#26159;&#24456;&#26377;&#29992;&#30340;&#65306;
      </p>
<div class="itemizedlist"><ul type="disc">
<li>
          A bimap type has stronger guarantees than its standard equivalent, and
          includes some useful functions (replace, modify) that the standard does
          not have.<br> bimap &#31867;&#22411;&#27604;&#26631;&#20934;&#30340;&#29289;&#20215;&#29289;&#26377;&#26356;&#24378;&#30340;&#20445;&#35777;&#65292;&#24182;&#21253;&#21547;&#19968;&#20123;&#26631;&#20934;&#20013;&#27809;&#26377;&#30340;&#26377;&#29992;&#20989;&#25968;(replace,
          modify)&#12290;
        </li>
<li>
          You can view the mapping as a collection of relations.<br> &#20320;&#21487;&#20197;&#23558;&#26144;&#23556;&#24403;&#20316;&#19968;&#32452;&#20851;&#31995;&#26469;&#23519;&#30475;&#12290;
        </li>
<li>
          Using this kind of map makes the code very extensible. If, at any moment
          of the development, the need to perform searches from the right side of
          the mapping arises, the only necessary change is to the <code class="computeroutput"><span class="keyword">typedef</span></code>.<br>
          &#20351;&#29992;&#36825;&#31181; map &#21487;&#20197;&#35753;&#20195;&#30721;&#38750;&#24120;&#22909;&#25193;&#23637;&#12290;&#22914;&#26524;&#22312;&#24320;&#21457;&#30340;&#36807;&#31243;&#20013;&#65292;&#22686;&#21152;&#20102;&#35201;&#20174;&#26144;&#23556;&#30340;&#21491;&#20391;&#36827;&#34892;&#26597;&#25214;&#30340;&#38656;&#27714;&#65292;&#35201;&#20462;&#25913;&#30340;&#21482;&#26159;
          <code class="computeroutput"><span class="keyword">typedef</span></code>.
        </li>
</ul></div>
<p>
        Given this bimap instance,<br> &#32473;&#20986;&#19968;&#20010; bimap &#20363;&#23376;&#65306;
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">unconstrained_set_of</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">bm_type</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">bm_type</span><span class="special">::</span><span class="identifier">left_map</span> <span class="identifier">map_type</span><span class="special">;</span>

<span class="identifier">bm_type</span> <span class="identifier">bm</span><span class="special">;</span>
<span class="identifier">map_type</span> <span class="special">&amp;</span> <span class="identifier">m</span> <span class="special">=</span> <span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span><span class="special">;</span>
</pre>
<p>
        </p>
<p>
      </p>
<p>
        or this standard map one<br> &#25110;&#32773;&#19968;&#20010;&#26631;&#20934;&#30340; map&#65306;
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="keyword">int</span> <span class="special">&gt;</span> <span class="identifier">map_type</span><span class="special">;</span>

<span class="identifier">map_type</span> <span class="identifier">m</span><span class="special">;</span>
</pre>
<p>
        </p>
<p>
      </p>
<p>
        The following code snippet is valid<br> &#20197;&#19979;&#20195;&#30721;&#29255;&#26029;&#26159;&#26377;&#25928;&#30340;&#65306;
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting"><span class="identifier">m</span><span class="special">[</span><span class="string">"one"</span><span class="special">]</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>

<span class="identifier">assert</span><span class="special">(</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">find</span><span class="special">(</span><span class="string">"one"</span><span class="special">)</span> <span class="special">!=</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">end</span><span class="special">()</span> <span class="special">);</span>

<span class="keyword">for</span><span class="special">(</span> <span class="identifier">map_type</span><span class="special">::</span><span class="identifier">iterator</span> <span class="identifier">i</span> <span class="special">=</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">iend</span> <span class="special">=</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span> <span class="identifier">i</span> <span class="special">!=</span> <span class="identifier">iend</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span> <span class="special">)</span>
<span class="special">{</span>
    <span class="line_callout_bug"><a class="co" name="boost_bimap14co" href="unconstrained_sets.html#boost_bimap14"><img src="../../../../../../doc/src/images/callouts/1.png" alt="1" border="0"></a></span><span class="special">++(</span><span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">second</span><span class="special">);</span>
<span class="special">}</span>

<span class="identifier">m</span><span class="special">.</span><span class="identifier">erase</span><span class="special">(</span><span class="string">"one"</span><span class="special">);</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"><tr>
<td width="5%" valign="top" align="left"><p><a name="boost_bimap14"></a><a href="#boost_bimap14co"><img src="../../../../../../doc/src/images/callouts/1.png" alt="1" border="0"></a> </p></td>
<td valign="top" align="left"><p> The right collection of the bimap is mutable so its elements can be modified
          using iterators. </p></td>
</tr></table></div>
<p>
        </p>
<p>
      </p>
<p>
        But using a bimap has some benefits<br> &#20294;&#26159;&#22914;&#26524;&#20351;&#29992; bimap&#65292;&#21017;&#26377;&#26356;&#22810;&#22909;&#22788;&#65306;
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">map_type</span><span class="special">::</span><span class="identifier">const_iterator</span> <span class="identifier">const_iterator</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">const_iterator</span><span class="special">,</span><span class="identifier">const_iterator</span><span class="special">&gt;</span> <span class="identifier">const_range</span><span class="special">;</span>

<span class="line_callout_bug"><a class="co" name="boost_bimap15co" href="unconstrained_sets.html#boost_bimap15"><img src="../../../../../../doc/src/images/callouts/1.png" alt="1" border="0"></a></span><span class="identifier">const_range</span> <span class="identifier">r</span> <span class="special">=</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">range</span><span class="special">(</span> <span class="string">"one"</span> <span class="special">&lt;=</span> <span class="identifier">_key</span><span class="special">,</span> <span class="identifier">_key</span> <span class="special">&lt;=</span> <span class="string">"two"</span> <span class="special">);</span>
<span class="keyword">for</span><span class="special">(</span> <span class="identifier">const_iterator</span> <span class="identifier">i</span> <span class="special">=</span> <span class="identifier">r</span><span class="special">.</span><span class="identifier">first</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">!=</span> <span class="identifier">r</span><span class="special">.</span><span class="identifier">second</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span> <span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">first</span> <span class="special">&lt;&lt;</span> <span class="string">"--&gt;"</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
<span class="special">}</span>

<span class="identifier">m</span><span class="special">.</span><span class="identifier">modify_key</span><span class="special">(</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">_key</span> <span class="special">=</span> <span class="string">"1"</span> <span class="special">);</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"><tr>
<td width="5%" valign="top" align="left"><p><a name="boost_bimap15"></a><a href="#boost_bimap15co"><img src="../../../../../../doc/src/images/callouts/1.png" alt="1" border="0"></a> </p></td>
<td valign="top" align="left"><p> This range is a model of BidirectionalRange, read the docs of Boost.Range
          for more information. </p></td>
</tr></table></div>
<p>
        </p>
<p>
      </p>
<p>
        <a href="../../../../example/unconstrained_collection.cpp" target="_top">Go to source code
        &#23519;&#30475;&#28304;&#20195;&#30721;</a>
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2006 -2007 Matias Capeletto<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="bimaps_with_user_defined_names.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../the_tutorial.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="additional_information.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
