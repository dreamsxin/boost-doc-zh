<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Controlling collection types &#25511;&#21046;&#32452;&#21512;&#30340;&#31867;&#22411;</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;Boost.Bimap">
<link rel="up" href="../the_tutorial.html" title="The tutorial &#25351;&#21335;">
<link rel="prev" href="discovering_the_bimap_framework.html" title="Discovering the bimap framework &#20171;&#32461;bimap&#26694;&#26550;">
<link rel="next" href="the_collection_of_relations_type.html" title="The collection of relations type &#20851;&#31995;&#32452;&#21512;&#30340;&#31867;&#22411;">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="discovering_the_bimap_framework.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../the_tutorial.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="the_collection_of_relations_type.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_bimap.the_tutorial.controlling_collection_types"></a><a class="link" href="controlling_collection_types.html" title="Controlling collection types &#25511;&#21046;&#32452;&#21512;&#30340;&#31867;&#22411;">
      Controlling collection types &#25511;&#21046;&#32452;&#21512;&#30340;&#31867;&#22411;</a>
</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.freedom_of_choice">
        Freedom of choice &#36873;&#25321;&#30340;&#33258;&#30001;</a></span></dt>
<dt><span class="section"><a href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.configuration_parameters">
        Configuration parameters &#37197;&#32622;&#21442;&#25968;</a></span></dt>
<dt><span class="section"><a href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.examples">
        Examples &#31034;&#20363;</a></span></dt>
</dl></div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_bimap.the_tutorial.controlling_collection_types.freedom_of_choice"></a><a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.freedom_of_choice" title="Freedom of choice &#36873;&#25321;&#30340;&#33258;&#30001;">
        Freedom of choice &#36873;&#25321;&#30340;&#33258;&#30001;</a>
</h4></div></div></div>
<p>
          As has already been said, in STL maps, you can only control the constraints
          from one of the collections, namely the one that you are viewing. In Boost.Bimap,
          you can control both and it is as easy as using the STL.<br> &#22914;&#21069;&#25152;&#35828;&#65292;&#22312;STL
          map &#20013;&#65292;&#20320;&#21482;&#33021;&#20174;&#19968;&#26041;&#25968;&#25454;&#32452;&#25511;&#21046;&#32422;&#26463;&#24615;&#65292;&#21363;&#20320;&#23519;&#30475;&#30340;&#37027;&#19968;&#26041;&#12290;
          &#22312; Boost.Bimap &#20013;&#65292;&#20320;&#21487;&#20197;&#21516;&#26102;&#20174;&#20004;&#26041;&#25511;&#21046;&#65292;&#32780;&#19988;&#21644;STL&#19968;&#26679;&#23481;&#26131;&#20351;&#29992;&#12290;
        </p>
<p>
          <span class="inlinemediaobject"><img src="../../images/bimap/extended.mapping.framework.png" alt="extended.mapping.framework"></span>
        </p>
<p>
          The idea is to use the same constraint names that are used in the standard.
          If you don't specify the collection type, Boost.Bimap assumes that the
          collection is a set. The instantiation of a bimap with custom collection
          types looks like this:<br> &#24605;&#36335;&#26159;&#65292;&#20351;&#29992;&#19982;&#26631;&#20934;&#19968;&#26679;&#30340;&#32422;&#26463;&#21517;&#23383;&#12290;&#22914;&#26524;&#20320;&#19981;&#25351;&#23450;&#25968;&#25454;&#32452;&#21512;&#30340;&#31867;&#22411;&#65292;Boost.Bimap
          &#23601;&#20551;&#23450;&#25968;&#25454;&#32452;&#21512;&#20026;&#19968;&#20010; set&#12290; &#24102;&#23450;&#21046;&#32452;&#21512;&#31867;&#22411;&#30340; bimap &#23454;&#20363;&#22914;&#19979;&#65306;
        </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span> <span class="bold"><strong>CollectionType</strong></span><span class="identifier">_of</span><span class="special">&lt;</span><span class="identifier">A</span><span class="special">&gt;,</span> <span class="bold"><strong>CollectionType</strong></span><span class="identifier">_of</span><span class="special">&lt;</span><span class="identifier">B</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">bm_type</span><span class="special">;</span>
</pre>
<p>
          The following is the list of all supported collection types.<br> &#20197;&#19979;&#21015;&#20986;&#20102;&#25152;&#26377;&#34987;&#25903;&#25345;&#30340;&#32452;&#21512;&#31867;&#22411;&#12290;
        </p>
<div class="table">
<a name="id5103254"></a><p class="title"><b>Table&#160;1.2.&#160;Collection of Key Types &#38190;&#31867;&#22411;&#30340;&#32452;&#21512;</b></p>
<div class="table-contents"><table class="table" summary="Collection of Key Types &#38190;&#31867;&#22411;&#30340;&#32452;&#21512;">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    name &#21517;&#23383;
                  </p>
                </th>
<th>
                  <p>
                    Features &#29305;&#24615;
                  </p>
                </th>
<th>
                  <p>
                    map view type &#26144;&#23556;&#35270;&#22270;&#31867;&#22411;
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">set_of</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <span class="emphasis"><em>ordered, unique &#26377;&#24207;&#65292;&#21807;&#19968;</em></span>
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">map</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">multiset_of</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <span class="emphasis"><em>ordered &#26377;&#24207;</em></span>
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">multimap</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">unordered_set_of</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <span class="emphasis"><em>hashed, unique &#25955;&#21015;&#65292;&#21807;&#19968;</em></span>
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">unordered_map</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">unordered_multiset_of</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <span class="emphasis"><em>hashed &#25955;&#21015;</em></span>
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">unordered_multimap</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">list_of</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <span class="emphasis"><em>sequenced &#24207;&#21015;</em></span>
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">list_map</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">vector_of</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <span class="emphasis"><em>random access &#38543;&#26426;&#35775;&#38382;</em></span>
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">vector_map</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">unconstrained_set_of</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <span class="emphasis"><em>unconstrained &#26080;&#32422;&#26463;</em></span>
                  </p>
                </td>
<td>
                  <p>
                    <span class="emphasis"><em>can not be viewed &#19981;&#21487;&#23519;&#30475;</em></span>
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
          <code class="computeroutput"><span class="identifier">list_of</span></code> and <code class="computeroutput"><span class="identifier">vector_of</span></code> map views are not associated
          with any existing STL associative containers. They are two examples of
          unsorted associative containers. <code class="computeroutput"><span class="identifier">unconstrained_set_of</span></code>
          allow the user to ignore a view. This will be explained later.<br> <code class="computeroutput"><span class="identifier">list_of</span></code> &#21644; <code class="computeroutput"><span class="identifier">vector_of</span></code>
          &#26144;&#23556;&#35270;&#22270;&#19981;&#19982;&#20219;&#20309;&#24050;&#26377;STL&#20851;&#32852;&#24335;&#23481;&#22120;&#30456;&#20851;&#32852;&#12290;&#23427;&#20204;&#26159;&#20004;&#31181;&#26080;&#24207;&#20851;&#32852;&#24335;&#23481;&#22120;&#12290;
          <code class="computeroutput"><span class="identifier">unconstrained_set_of</span></code> &#21017;&#20801;&#35768;&#29992;&#25143;&#24573;&#30053;&#35270;&#22270;&#12290;&#31245;&#21518;&#23558;&#20250;&#26377;&#35299;&#37322;&#12290;
        </p>
<p>
          <span class="inlinemediaobject"><img src="../../images/bimap/bimap.structures.png" alt="bimap.structures"></span>
        </p>
<p>
          The selection of the collection type affects the possible operations that
          you can perform with each side of the bimap and the time it takes to do
          each. If we have:<br> &#23545;&#25968;&#25454;&#32452;&#21512;&#31867;&#22411;&#30340;&#36873;&#25321;&#20250;&#24433;&#21709;&#20320;&#21487;&#20197;&#23545;
          bimap &#21508;&#26041;&#25968;&#25454;&#25191;&#34892;&#30340;&#25805;&#20316;&#65292;&#20197;&#21450;&#21508;&#31181;&#25805;&#20316;&#30340;&#26102;&#38388;&#12290;&#22914;&#26524;&#25105;&#20204;&#26377;&#65306;
        </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span> <span class="bold"><strong>CollectionType</strong></span><span class="identifier">_of</span><span class="special">&lt;</span><span class="identifier">A</span><span class="special">&gt;,</span> <span class="bold"><strong>CollectionType</strong></span><span class="identifier">_of</span><span class="special">&lt;</span><span class="identifier">B</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">bm_type</span><span class="special">;</span>
<span class="identifier">bm_type</span> <span class="identifier">bm</span><span class="special">;</span>
</pre>
<p>
          The following now describes the resulting map views of the bidirectional
          map.<br> &#20197;&#19979;&#25551;&#36848;&#20102;&#35813;&#21452;&#21521;&#26144;&#23556;&#30340;&#32467;&#26524;&#26144;&#23556;&#35270;&#22270;&#12290;
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
              <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span></code> is signature-compatible with
              <span class="bold"><strong>LeftMapType</strong></span><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">A</span><span class="special">,</span><span class="identifier">B</span><span class="special">&gt;</span></code>
            </li>
<li class="listitem">
              <code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span></code> is signature-compatible with
              <span class="bold"><strong>RightMapType</strong></span><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">B</span><span class="special">,</span><span class="identifier">A</span><span class="special">&gt;</span></code>
            </li>
</ul></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_bimap.the_tutorial.controlling_collection_types.configuration_parameters"></a><a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.configuration_parameters" title="Configuration parameters &#37197;&#32622;&#21442;&#25968;">
        Configuration parameters &#37197;&#32622;&#21442;&#25968;</a>
</h4></div></div></div>
<p>
          Each collection type template has different parameters to control its behaviour.
          For example, in <code class="computeroutput"><span class="identifier">set_of</span></code>
          specification, you can pass a Functor type that compares two types. All
          of these parameters are exactly the same as those of the standard library
          container, except for the allocator type. You will learn later how to change
          the allocator for a bimap.<br> &#27599;&#20010;&#32452;&#21512;&#31867;&#22411;&#27169;&#26495;&#37117;&#26377;&#19981;&#21516;&#30340;&#21442;&#25968;&#26469;&#25511;&#21046;&#20854;&#34892;&#20026;&#12290;&#20363;&#22914;&#65292;&#23545;&#20110;
          <code class="computeroutput"><span class="identifier">set_of</span></code>&#65292;&#20320;&#21487;&#20197;&#20256;&#20837;&#19968;&#20010;&#20989;&#25968;&#23545;&#35937;&#31867;&#22411;&#26469;&#27604;&#36739;&#20004;&#20010;&#31867;&#22411;&#12290;
          &#25152;&#26377;&#36825;&#20123;&#21442;&#25968;&#37117;&#19982;&#26631;&#20934;&#24211;&#23481;&#22120;&#20013;&#30340;&#23436;&#20840;&#30456;&#21516;&#65292;&#38500;&#20102;&#20998;&#37197;&#22120;&#31867;&#22411;&#12290;&#31245;&#21518;&#20320;&#23558;&#23398;&#21040;&#22914;&#20309;&#25913;&#21464;&#19968;&#20010;
          bimap &#30340;&#20998;&#37197;&#22120;&#12290;
        </p>
<p>
          The following table lists the meanings of each collection type's parameters.<br>
          &#19979;&#34920;&#21015;&#20986;&#20102;&#27599;&#20010;&#32452;&#21512;&#31867;&#22411;&#30340;&#21442;&#25968;&#21547;&#20041;&#12290;
        </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    name &#21517;&#23383;
                  </p>
                </th>
<th>
                  <p>
                    Additional Parameters &#39069;&#22806;&#21442;&#25968;
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">set_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">KeyComp</span><span class="special">&gt;</span></code>
                  </p>
                  <p>
                    <code class="computeroutput"><span class="identifier">multiset_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">KeyComp</span><span class="special">&gt;</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <span class="bold"><strong>KeyComp </strong></span> is a Functor that compares
                    two types using a less-than operator. By default, this is <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">less</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
                    <br> <span class="bold"><strong>KeyComp</strong></span> &#26159;&#19968;&#20010;&#20989;&#25968;&#23545;&#35937;&#65292;&#20351;&#29992;&#23567;&#20110;&#25805;&#20316;&#31526;&#27604;&#36739;&#20004;&#20010;&#31867;&#22411;&#12290;&#23427;&#32570;&#30465;&#20026;
                    <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">less</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">unordered_set_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">HashFunctor</span><span class="special">,</span><span class="identifier">EqualKey</span><span class="special">&gt;</span></code>
                  </p>
                  <p>
                    <code class="computeroutput"><span class="identifier">unordered_multiset_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">HashFunctor</span><span class="special">,</span><span class="identifier">EqualKey</span><span class="special">&gt;</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <span class="bold"><strong>HashFunctor </strong></span> converts a <code class="computeroutput"><span class="identifier">T</span></code> object into an <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code> value. By default it
                    is <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">hash</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.<br>
                    <span class="bold"><strong>HashFunctor</strong></span> &#23558;&#19968;&#20010; <code class="computeroutput"><span class="identifier">T</span></code> &#23545;&#35937;&#36716;&#25442;&#20026;&#19968;&#20010; <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code> &#20540;&#12290;&#23427;&#32570;&#30465;&#20026;
                    <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">hash</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
                  </p>
                  <p>
                    <span class="bold"><strong>EqualKey </strong></span> is a Functor that
                    tests two types for equality. By default, the equality operator
                    is <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">equal_to</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
                    <br> <span class="bold"><strong>EqualKey</strong></span> &#26159;&#19968;&#20010;&#20989;&#25968;&#23545;&#35937;&#65292;&#26816;&#27979;&#20004;&#20010;&#31867;&#22411;&#30340;&#31561;&#20215;&#24615;&#12290;&#32570;&#30465;&#30340;&#31561;&#20215;&#25805;&#20316;&#31526;&#26159;
                    <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">equal_to</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">list_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>
                  </p>
                </td>
<td>
                  <p>
                    No additional parameters.<br> &#26080;&#39069;&#22806;&#21442;&#25968;&#12290;
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">vector_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>
                  </p>
                </td>
<td>
                  <p>
                    No additional parameters.<br> &#26080;&#39069;&#22806;&#21442;&#25968;&#12290;
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">unconstrained_set_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>
                  </p>
                </td>
<td>
                  <p>
                    No additional parameters.<br> &#26080;&#39069;&#22806;&#21442;&#25968;&#12290;
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_bimap.the_tutorial.controlling_collection_types.examples"></a><a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.examples" title="Examples &#31034;&#20363;">
        Examples &#31034;&#20363;</a>
</h4></div></div></div>
<a name="boost_bimap.the_tutorial.controlling_collection_types.examples.countries_populations_____________"></a><h6>
<a name="id5104638"></a>
          <a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.examples.countries_populations_____________">Countries
          Populations &#21508;&#22269;&#20154;&#21475;</a>
        </h6>
<p>
          We want to store countries populations. The requeriments are:<br> &#25105;&#20204;&#24819;&#20445;&#23384;&#21508;&#22269;&#20154;&#21475;&#25968;&#25454;&#12290;&#38656;&#27714;&#22914;&#19979;&#65306;
        </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
              Get a list of countries in decresing order of their populations.<br>
              &#33719;&#21462;&#21508;&#22269;&#30340;&#21015;&#34920;&#65292;&#20197;&#20154;&#21475;&#25968;&#37327;&#36882;&#20943;&#25490;&#24207;&#12290;
            </li>
<li class="listitem">
              Given a countrie, get their population.<br> &#32473;&#23450;&#19968;&#20010;&#22269;&#23478;&#65292;&#33719;&#21462;&#20854;&#20154;&#21475;&#25968;&#12290;
            </li>
</ol></div>
<p>
          Lets create the appropiate bimap.<br> &#25105;&#20204;&#26469;&#21019;&#24314;&#19968;&#20010;&#36866;&#24403;&#30340;
          bimap&#12290;
        </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span>

    <span class="identifier">unordered_set_of</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;,</span>
    <span class="identifier">multiset_of</span><span class="special">&lt;</span> <span class="keyword">long</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">greater</span><span class="special">&lt;</span><span class="keyword">long</span><span class="special">&gt;</span> <span class="special">&gt;</span>

<span class="special">&gt;</span> <span class="identifier">populations_bimap</span><span class="special">;</span>
</pre>
<p>
          First of all countries names are unique identifiers, while two countries
          may have the same population. This is why we choose <span class="bold"><strong>multi</strong></span><code class="computeroutput"><span class="identifier">set_of</span></code> for populations.<br> &#39318;&#20808;&#65292;&#25152;&#26377;&#22269;&#23478;&#30340;&#21517;&#23383;&#26159;&#21807;&#19968;&#30340;&#26631;&#35782;&#31526;&#65292;&#32780;&#20004;&#20010;&#22269;&#23478;&#26377;&#21487;&#33021;&#20855;&#26377;&#30456;&#21516;&#25968;&#37327;&#30340;&#20154;&#21475;&#12290;
          &#36825;&#27491;&#26159;&#25105;&#20204;&#23545;&#20154;&#21475;&#25968;&#36873;&#29992; <span class="bold"><strong>multi</strong></span><code class="computeroutput"><span class="identifier">set_of</span></code> &#30340;&#21407;&#22240;&#12290;
        </p>
<p>
          Using a <code class="computeroutput"><span class="identifier">multiset_of</span></code> for
          population allow us to iterate over the data. Since listing countries ordered
          by their names is not a requisite, we can use an <code class="computeroutput"><span class="identifier">unordered_set_of</span></code>
          that allows constant order look up.<br> &#23545;&#20154;&#21475;&#25968;&#20351;&#29992; <code class="computeroutput"><span class="identifier">multiset_of</span></code>&#65292;&#20351;&#24471;&#25105;&#20204;&#21487;&#20197;&#36941;&#21382;&#35813;&#25968;&#25454;&#12290;&#30001;&#20110;&#24182;&#19981;&#35201;&#27714;&#25353;&#21517;&#23383;&#39034;&#24207;&#21015;&#20986;&#21508;&#20010;&#22269;&#23478;&#65292;
          &#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992; <code class="computeroutput"><span class="identifier">unordered_set_of</span></code>&#65292;&#25353;&#22266;&#23450;&#30340;&#39034;&#24207;&#26469;&#26597;&#25214;&#12290;
        </p>
<p>
          And now lets use it in a complete example<br> &#29616;&#22312;&#25105;&#20204;&#29992;&#23427;&#26469;&#20030;&#19968;&#20010;&#23436;&#25972;&#30340;&#20363;&#23376;&#12290;
        </p>
<p>
          <a href="../../../../example/population_bimap.cpp" target="_top">Go to source code &#23519;&#30475;&#28304;&#20195;&#30721;</a>
        </p>
<p>
          
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span>

    <span class="identifier">unordered_set_of</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;,</span>
    <span class="identifier">multiset_of</span><span class="special">&lt;</span> <span class="keyword">long</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">greater</span><span class="special">&lt;</span><span class="keyword">long</span><span class="special">&gt;</span> <span class="special">&gt;</span>

<span class="special">&gt;</span> <span class="identifier">population_bimap</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">population_bimap</span><span class="special">::</span><span class="identifier">value_type</span> <span class="identifier">population</span><span class="special">;</span>

<span class="identifier">population_bimap</span> <span class="identifier">pop</span><span class="special">;</span>
<span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"China"</span><span class="special">,</span>          <span class="number">1321000000</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"India"</span><span class="special">,</span>          <span class="number">1129000000</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"United States"</span><span class="special">,</span>   <span class="number">301950000</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"Indonesia"</span><span class="special">,</span>       <span class="number">234950000</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"Brazil"</span><span class="special">,</span>          <span class="number">186500000</span><span class="special">)</span> <span class="special">);</span>
<span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"Pakistan"</span><span class="special">,</span>        <span class="number">163630000</span><span class="special">)</span> <span class="special">);</span>

<span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Countries by their population:"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>

<span class="comment">// First requirement
</span><a class="co" name="boost_bimap4co" href="controlling_collection_types.html#boost_bimap4"><img src="../../../../../../doc/src/images/callouts/1.png" alt="1" border="0"></a><span class="keyword">for</span><span class="special">(</span> <span class="identifier">population_bimap</span><span class="special">::</span><span class="identifier">right_const_iterator</span>
        <span class="identifier">i</span> <span class="special">=</span> <span class="identifier">pop</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">iend</span> <span class="special">=</span> <span class="identifier">pop</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span>
        <span class="identifier">i</span> <span class="special">!=</span> <span class="identifier">iend</span> <span class="special">;</span> <span class="special">++</span><span class="identifier">i</span> <span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">&lt;&lt;</span> <span class="string">" with "</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">first</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
<span class="special">}</span>

<span class="comment">// Second requirement
</span><a class="co" name="boost_bimap5co" href="controlling_collection_types.html#boost_bimap5"><img src="../../../../../../doc/src/images/callouts/2.png" alt="2" border="0"></a><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Population of China: "</span> <span class="special">&lt;&lt;</span> <span class="identifier">pop</span><span class="special">.</span><span class="identifier">left</span><span class="special">.</span><span class="identifier">at</span><span class="special">(</span><span class="string">"China"</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
</pre>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list">
<tr>
<td width="5%" valign="top" align="left"><p><a name="boost_bimap4"></a><a href="#boost_bimap4co"><img src="../../../../../../doc/src/images/callouts/1.png" alt="1" border="0"></a> </p></td>
<td valign="top" align="left"><p> The right map view works like a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">multimap</span><span class="special">&lt;</span> <span class="keyword">long</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">greater</span><span class="special">&lt;</span><span class="keyword">long</span><span class="special">&gt;</span> <span class="special">&gt;</span></code>,
          We can iterate over it to print the results in the required order. </p></td>
</tr>
<tr>
<td width="5%" valign="top" align="left"><p><a name="boost_bimap5"></a><a href="#boost_bimap5co"><img src="../../../../../../doc/src/images/callouts/2.png" alt="2" border="0"></a> </p></td>
<td valign="top" align="left"><p> The
          left map view works like a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">unordered_map</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="keyword">long</span> <span class="special">&gt;</span></code>, given the name of the country we can
          use it to search for the population in constant time </p></td>
</tr>
</table></div>
<p>
        </p>
<a name="boost_bimap.the_tutorial.controlling_collection_types.examples.repetitions_counter___________________"></a><h6>
<a name="id5105916"></a>
          <a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.examples.repetitions_counter___________________">Repetitions
          counter &#37325;&#22797;&#27425;&#25968;&#35745;&#25968;</a>
        </h6>
<p>
          We want to count the repetitions for each word in a text and print them
          in order of appearance.<br> &#25105;&#20204;&#35201;&#35745;&#31639;&#19968;&#31687;&#25991;&#26412;&#20013;&#21508;&#20010;&#21333;&#35789;&#30340;&#37325;&#22797;&#27425;&#25968;&#65292;&#24182;&#25353;&#23427;&#20204;&#20986;&#29616;&#30340;&#39034;&#24207;&#25171;&#21360;&#12290;
        </p>
<p>
          <a href="../../../../example/repetitions_counter.cpp" target="_top">Go to source code &#23519;&#30475;&#28304;&#20195;&#30721;</a>
        </p>
<p>
          
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span>
<span class="special">&lt;</span>
    <span class="identifier">unordered_set_of</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;,</span>
    <span class="identifier">list_of</span><span class="special">&lt;</span> <span class="identifier">counter</span> <span class="special">&gt;</span> <a class="co" name="boost_bimap6co" href="controlling_collection_types.html#boost_bimap6"><img src="../../../../../../doc/src/images/callouts/1.png" alt="1" border="0"></a>

<span class="special">&gt;</span> <span class="identifier">word_counter</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">tokenizer</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">char_separator</span><span class="special">&lt;</span><span class="keyword">char</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">text_tokenizer</span><span class="special">;</span>

<span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">text</span><span class="special">=</span>
    <span class="string">"Relations between data in the STL are represented with maps."</span>
    <span class="string">"A map is a directed relation, by using it you are representing "</span>
    <span class="string">"a mapping. In this directed relation, the first type is related to "</span>
    <span class="string">"the second type but it is not true that the inverse relationship "</span>
    <span class="string">"holds. This is useful in a lot of situations, but there are some "</span>
    <span class="string">"relationships that are bidirectional by nature."</span><span class="special">;</span>

<span class="comment">// feed the text into the container
</span><span class="identifier">word_counter</span>   <span class="identifier">wc</span><span class="special">;</span>
<span class="identifier">text_tokenizer</span> <span class="identifier">tok</span><span class="special">(</span><span class="identifier">text</span><span class="special">,</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">char_separator</span><span class="special">&lt;</span><span class="keyword">char</span><span class="special">&gt;(</span><span class="string">" \t\n.,;:!?'\"-"</span><span class="special">));</span>

<span class="keyword">for</span><span class="special">(</span> <span class="identifier">text_tokenizer</span><span class="special">::</span><span class="identifier">const_iterator</span> <span class="identifier">it</span> <span class="special">=</span> <span class="identifier">tok</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">it_end</span> <span class="special">=</span> <span class="identifier">tok</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span>
     <span class="identifier">it</span> <span class="special">!=</span> <span class="identifier">it_end</span> <span class="special">;</span> <span class="special">++</span><span class="identifier">it</span> <span class="special">)</span>
<span class="special">{</span>
    <a class="co" name="boost_bimap7co" href="controlling_collection_types.html#boost_bimap7"><img src="../../../../../../doc/src/images/callouts/2.png" alt="2" border="0"></a><span class="special">++</span> <span class="identifier">wc</span><span class="special">.</span><span class="identifier">left</span><span class="special">[*</span><span class="identifier">it</span><span class="special">];</span>
<span class="special">}</span>

<span class="comment">// list words with counters by order of appearance
</span><a class="co" name="boost_bimap8co" href="controlling_collection_types.html#boost_bimap8"><img src="../../../../../../doc/src/images/callouts/3.png" alt="3" border="0"></a><span class="keyword">for</span><span class="special">(</span> <span class="identifier">word_counter</span><span class="special">::</span><span class="identifier">right_const_iterator</span>
        <span class="identifier">wit</span> <span class="special">=</span> <span class="identifier">wc</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">wit_end</span> <span class="special">=</span> <span class="identifier">wc</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span>

     <span class="identifier">wit</span> <span class="special">!=</span> <span class="identifier">wit_end</span><span class="special">;</span> <span class="special">++</span><span class="identifier">wit</span> <span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">wit</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">&lt;&lt;</span> <span class="string">": "</span> <span class="special">&lt;&lt;</span> <span class="identifier">wit</span><span class="special">-&gt;</span><span class="identifier">first</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list">
<tr>
<td width="5%" valign="top" align="left"><p><a name="boost_bimap6"></a><a href="#boost_bimap6co"><img src="../../../../../../doc/src/images/callouts/1.png" alt="1" border="0"></a> </p></td>
<td valign="top" align="left"><p> <code class="computeroutput"><span class="identifier">counter</span></code> is an integer that
          is initialized in zero in the constructor </p></td>
</tr>
<tr>
<td width="5%" valign="top" align="left"><p><a name="boost_bimap7"></a><a href="#boost_bimap7co"><img src="../../../../../../doc/src/images/callouts/2.png" alt="2" border="0"></a> </p></td>
<td valign="top" align="left"><p> Because the right collection
          type is <code class="computeroutput"><span class="identifier">list_of</span></code>, the right
          data is not used a key and can be modified in the same way as with standard
          maps. </p></td>
</tr>
<tr>
<td width="5%" valign="top" align="left"><p><a name="boost_bimap8"></a><a href="#boost_bimap8co"><img src="../../../../../../doc/src/images/callouts/3.png" alt="3" border="0"></a> </p></td>
<td valign="top" align="left"><p> When we insert the elements using the left map view, the element
          is inserted at the end of the list. </p></td>
</tr>
</table></div>
<p>
        </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2006 -2007 Matias Capeletto<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="discovering_the_bimap_framework.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../the_tutorial.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="the_collection_of_relations_type.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
