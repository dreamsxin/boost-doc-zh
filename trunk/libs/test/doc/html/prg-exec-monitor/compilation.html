<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>The Program Execution Monitor compilation</title>
<link rel="stylesheet" href="../../style/style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.74.0">
<link rel="home" href="../index.html" title="Boost Test Library">
<link rel="up" href="../prg-exec-monitor.html" title="Part II. Boost Test Library: The Program Execution Monitor">
<link rel="prev" href="impl.html" title="The Program Execution Monitor implementation">
<link rel="next" href="../minimal.html" title="Part III. Boost Test Library: The minimal testing facility">
<script language="JavaScript1.2" src="../../js/boost-test.js"></script>
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table width="100%"><tr>
<td width="10%"><a href="../index.html"><img alt="Home" width="229" height="61" border="0" src="../../../../../libs/test/docbook/img/boost.test.logo.png"></a></td>
<td valign="middle" align="left"> &gt; <a href="../prg-exec-monitor.html">The Program Execution Monitor</a><a href="../minimal.html">
      &gt;
      </a><b>Compilation</b>
</td>
<td><div class="spirit-nav">
<a href="impl.html"><img src="../../../../../doc/html/images/prev.png" alt="Prev"></a><a href="../minimal.html"><img src="../../../../../doc/html/images/next.png" alt="Next"></a>
</div></td>
</tr></table>
<hr>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="pem.compilation"></a>The Program Execution Monitor compilation</h3></div></div></div>
<p class="first-line-indented">
   In comparison with many other boost libraries, which are completely implemented in header files, compilation and
   linking with the Program Execution Monitor may require additional steps. The Program Execution Monitor presents you with options to either
   <a class="link" href="compilation.html#pem.compilation.standalone" title="Standalone library compilation">built and link with a standalone library</a> or
   <a class="link" href="compilation.html#pem.compilation.direct-include" title="Including the Program Execution Monitor directly into your program">include the implementation directly</a> into your 
   program. If you opt to use the library the Program Execution Monitor header implements the 
   <a class="link" href="compilation.html#pem.compilation.auto-linking" title="Support of the auto-linking feature">auto-linking support</a> and following flags can be used to configure 
   compilation of the Program Execution Monitor library and your program:
   <br />
   同 boost 大多数其它完全实在在头文件的库相比，Program Execution Monitor 的编译链接需要额外的步骤。
   Program Execution Monitor 提供选项能够在程序中<a class="link" href="compilation.html#pem.compilation.standalone" title="Standalone library compilation">生成并链接独立的库 (built and link with a standalone library)</a> 或<a class="link" href="compilation.html#pem.compilation.direct-include" title="Including the Program Execution Monitor directly into your program">直接包含实现文件 (include the implementation directly)</a>。
   如果选择使用库，Program Execution Monitor 头文件实现了<a class="link" href="compilation.html#pem.compilation.auto-linking" title="Support of the auto-linking feature">自动链接支持 (auto-linking support)</a>，
   下面的标签用来配置 Program Execution Monitor 库和自己程序的编译：
  </p>
<div class="table">
<a name="pem.compilation.flags"></a><p class="title"><b>Table 2. Program Execution Monitor compilation flags</b></p>
<div class="table-contents"><table class="table" summary="Program Execution Monitor compilation flags">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>Variable</th>
<th>Usage</th>
</tr></thead>
<tbody>
<tr>
<td>
<a name="pem.flag.dyn-link"></a>BOOST_TEST_DYN_LINK</td>
<td>Define this flag to build/use dynamic library. 定义这个标签会生成 / 使用动态库</td>
</tr>
<tr>
<td>
<a name="pem.flag.no-lib"></a>BOOST_TEST_NO_LIB</td>
<td>Define this flag to prevent auto-linking. 定义这个标签阻止自动链接</td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="pem.compilation.standalone"></a>Standalone library compilation</h4></div></div></div>
<p class="first-line-indented">
    If you opted to link your program with the standalone library, you need to build it first. To build a standalone 
    library all C++ files (.cpp), that constitute Program Execution Monitor <a class="link" href="impl.html" title="The Program Execution Monitor implementation">implementation</a> need to be 
    listed as source files in your makefile<sup>[<a name="id642858" href="#ftn.id642858" class="footnote">1</a>]</sup>.
    <br />
    如果你选择将你的程序链接到独立的库，需要首先生成它。
    要将所有的 C++ 文件 (.cpp) 生成独立的库，组成 Program Execution Monitor <a class="link" href="impl.html" title="The Program Execution Monitor implementation">实现 (implementation)</a> 需要列在 makefile<sup>[<a name="id642858" href="#ftn.id642858" class="footnote">1</a>]</sup> 中。
   </p>
<p class="first-line-indented">
    The makefile for use with Boost.Build system is supplied in <code class="filename">libs/test/build</code>
    directory. The Program Execution Monitor can be built as either <a class="link" href="compilation.html#pem.compilation.standalone.static" title="Static library compilation">static</a> 
    or <a class="link" href="compilation.html#pem.compilation.standalone.dynamic" title="Dynamic library compilation">dynamic</a> library.
    <br />
    Boost.Build 系统使用的 makefile 在 <code class="filename">libs/test/build</code> 目录。
    Program Execution Monitor 可以作为<a class="link" href="compilation.html#pem.compilation.standalone.static" title="Static library compilation">静态库 (static) </a>或<a class="link" href="compilation.html#pem.compilation.standalone.dynamic" title="Dynamic library compilation">动态库 (dynamic) </a>生成。
   </p>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="pem.compilation.standalone.static"></a>Static library compilation</h5></div></div></div>
<p class="first-line-indented">
     There are no additional build defines or options required to build static library. Using Boost.Build system you 
     can build the static library with a following command from libs/test/build directory:
     <br />
     生成静态库并不需要额外的生成定义或选项。
     使用 Boost.Build 系统可以用下面的命令从 libs/test/build 目录生成静态库：
    </p>
<div class="cmdsynopsis"><p><code class="command">bjam</code>  [-sTOOLS=&lt;your-tool-name&gt;] {-sBUILD=boost_prg_exec_monitor}</p></div>
<p class="first-line-indented">
     Also on Windows you can use the Microsoft Visual Studio .NET project file provided.
     <br />
     在 Windows 上你可以使用 Microsoft Visual Studio .NET 的工程文件。
    </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="pem.compilation.standalone.dynamic"></a>Dynamic library compilation</h5></div></div></div>
<p class="first-line-indented">
     To build the dynamic library<sup>[<a name="id643007" href="#ftn.id643007" class="footnote">2</a>]</sup> you 
     need to add <a class="xref" href="compilation.html#pem.flag.dyn-link">BOOST_TEST_DYN_LINK</a> to the list of macro definitions in the 
     makefile. Using the Boost.Build system you can build the dynamic library with the following command from 
     <code class="filename">libs/test/build</code> directory:
     <br />
     要生成静态库<sup>[<a name="id643007" href="#ftn.id643007" class="footnote">2</a>]</sup>，
     需要在 makefile 的宏列表中添加 <a class="xref" href="compilation.html#pem.flag.dyn-link">BOOST_TEST_DYN_LINK</a>。
     使用 Boost.Build 系统你可以用下面的命令从 <code class="filename">libs/test/build</code> 目录生成动态库：
    </p>
<div class="cmdsynopsis"><p><code class="command">bjam</code>  [-sTOOLS=&lt;your-tool-name&gt;] {-sBUILD=boost_prg_exec_monitor}</p></div>
<p class="first-line-indented">
     Also on Windows you can use the Microsoft Visual Studio .NET project file provided.
     <br />
     在 Windows 上可以使用 Microsoft Visual Studio .NET 工程文件。
    </p>
<div class="important"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../../../../../doc/html/images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top"><p>
      For your program to successfully link with the dynamic library the flag
      <a class="xref" href="compilation.html#pem.flag.dyn-link">BOOST_TEST_DYN_LINK</a> needs to be defined both during dynamic library 
      build and during your program compilation.
      <br />
      你的程序要正确链接动态库，标签 <a class="xref" href="compilation.html#pem.flag.dyn-link">BOOST_TEST_DYN_LINK</a> 需要在生成动态库和编译自己程序时都定义。
     </p></td></tr>
</table></div>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="pem.compilation.auto-linking"></a>Support of the auto-linking feature</h4></div></div></div>
<p class="first-line-indented">
    For the Microsoft family of compilers the Program Execution Monitor provides an ability to automatically select proper library name
    and add it to the list of objects to be linked with. To employ this feature you required to include either header
    <a href="../../../../../boost/test/prg_exec_monitor.hpp" target="_top"><code class="filename">boost/test/prg_exec_monitor.hpp</code></a>
    or header
    <a href="../../../../../boost/test/included/prg_exec_monitor.hpp" target="_top"><code class="filename">boost/test/included/prg_exec_monitor.hpp</code></a>
    By default the feature is going to be enabled. To disable it you have to define the flag 
    <a class="xref" href="compilation.html#pem.flag.no-lib">BOOST_TEST_NO_LIB</a>. 
    <br />
    对于 Microsoft 族的编译器，Program Execution Monitor 提供了自动选择合适的库名称并将其加入到链接的对象列表中的功能。
    要使用这个特性，需要包含 <a href="../../../../../boost/test/prg_exec_monitor.hpp" target="_top"><code class="filename">boost/test/prg_exec_monitor.hpp</code></a> 或 <a href="../../../../../boost/test/included/prg_exec_monitor.hpp" target="_top"><code class="filename">boost/test/included/prg_exec_monitor.hpp</code></a> 头文件。
    这个特性默认被开启。如果想要关闭，需要定义标签 <a class="xref" href="compilation.html#pem.flag.no-lib">BOOST_TEST_NO_LIB</a>。
   </p>
<p class="first-line-indented">
    For more details on the auto-linking feature implementation and configuration you should consult the 
    <a href="../under_construction.html" target="_top">appropriate documentation</a>.
    <br />
    关于自动链接特性更多的实现和配置请参见<a href="../under_construction.html" target="_top">相关文档</a>。
   </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="pem.compilation.direct-include"></a>Including the Program Execution Monitor directly into your program</h4></div></div></div>
<p class="first-line-indented">
    If you prefer to avoid the standalone library compilation you have two alternative usage variants: you can either 
    include all files that constitute the static library in your program's makefile or include them as a part of
    your program's source file. To facilitate the later variant the Program Execution Monitor implementation presents the header
    <a href="../../../../../boost/test/included/prg_exec_monitor.hpp" target="_top"><code class="filename">boost/test/included/prg_exec_monitor.hpp</code></a>
    In both variants neither <a class="xref" href="compilation.html#pem.flag.dyn-link">BOOST_TEST_DYN_LINK</a> nor 
    <a class="xref" href="compilation.html#pem.flag.no-lib">BOOST_TEST_NO_LIB</a> are applicable. This solution may not be the best choice
    in a long run, since it requires the Program Execution Monitor sources recompilation for every program you use it with.
    <br />
    如果你想避免独立库的编译，你有两种选择：在程序的 makefile 中加入组成静态库的所有文件，或者将它们作为源文件的一部分。
    为了简化后一种选择，Program Execution Monitor 的实现提供了头文件 <a href="../../../../../boost/test/included/prg_exec_monitor.hpp" target="_top"><code class="filename">boost/test/included/prg_exec_monitor.hpp</code></a>。
    在两种情况下 <a class="xref" href="compilation.html#pem.flag.dyn-link">BOOST_TEST_DYN_LINK</a> 或 <a class="xref" href="compilation.html#pem.flag.no-lib">BOOST_TEST_NO_LIB</a> 都可以应用。
    这个解决方案在长时间使用中可能并不适用，因为它要求在每个使用的程序中都重新编译 Program Execution Monitor 的源文件。
   </p>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a name="ftn.id642858" href="#id642858" class="simpara">1</a>] </sup>There are varieties of make systems that can be used. To name 
    a few: <acronym class="acronym">GNU</acronym> make (and other make clones) and build systems integrated into <acronym class="acronym">IDE</acronym>s
    (for  example Microsoft  Visual Studio). The Boost preferred solution is Boost.Build system that is based on top of 
    bjam  tool. Make  systems require some kind of configuration file that lists all files that constitute the library 
    and all build  options. For example the makefile that is used by make, or the Microsoft Visual Studio project file, 
    Jamfile is  used by Boost.Build. For the sake of simplicity let's call this file the makefile.
     <br />
     有多种生成系统可以使用。例如：<acronym class="acronym">GNU</acronym> make (包括其它 make 的拷贝) 以及和 <acronym class="acronym">IDE</acronym> 结合的生成系统 (例如 Microsoft Visual Studio)。
     Boost 推荐的解决方案是 Boost.Build 系统，基于 bjam 工具。
     生成系统需要一些类型的配置文件列出组成库的所有的文件和生成选项。
     例如 makefile 用于 make，或者 Microsoft Visual Studio 工程文件，Jamfile 用于 Boost.Build。
     出于简化的目的，我们都称为 makefile。
</p></div>
<div class="footnote"><p><sup>[<a name="ftn.id643007" href="#id643007" class="simpara">2</a>] </sup>What is meant by the term dynamic library is a <em class="firstterm">dynamically 
     loaded library</em>, alternatively called a <em class="firstterm">shared library</em>.
     <br />
     动态库是<em class="firstterm">动态加载库 (dynamically loaded library)</em>，或者叫做<em class="firstterm">共享库 (shared library)</em>。
</p></div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2001-2007 Gennadiy Rozental</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="impl.html"><img src="../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../prg-exec-monitor.html"><img src="../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="../minimal.html"><img src="../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
