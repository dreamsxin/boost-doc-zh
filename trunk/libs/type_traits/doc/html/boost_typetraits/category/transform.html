<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Type Traits that Transform One Type to Another &#23558;&#19968;&#31181;&#31867;&#22411;&#36716;&#25442;&#25104;&#21478;&#19968;&#31181;&#30340; Type Traits</title>
<link rel="stylesheet" href="../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;Boost.TypeTraits">
<link rel="up" href="../category.html" title="Type Traits by Category Type Traits&#20998;&#31867;">
<link rel="prev" href="value_traits/relate.html" title="Relationships Between Two Types &#20004;&#20010;&#31867;&#22411;&#20043;&#38388;&#30340;&#20851;&#31995;">
<link rel="next" href="alignment.html" title="Synthesizing Types with Specific Alignments &#29992;&#25351;&#23450;&#30340;&#23545;&#40784;&#26041;&#24335;&#32452;&#21512;&#31867;&#22411;">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="value_traits/relate.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../category.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="alignment.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_typetraits.category.transform"></a><a class="link" href="transform.html" title="Type Traits that Transform One Type to Another &#23558;&#19968;&#31181;&#31867;&#22411;&#36716;&#25442;&#25104;&#21478;&#19968;&#31181;&#30340; Type Traits"> Type Traits that
      Transform One Type to Another &#23558;&#19968;&#31181;&#31867;&#22411;&#36716;&#25442;&#25104;&#21478;&#19968;&#31181;&#30340; Type Traits</a>
</h3></div></div></div>
<p>
        The following templates transform one type to another, based upon some well-defined
        rule. Each template has a single member called <code class="computeroutput"><span class="identifier">type</span></code>
        that is the result of applying the transformation to the template argument
        <code class="computeroutput"><span class="identifier">T</span></code>.<br> &#19979;&#38754;&#30340;&#27169;&#26495;&#22522;&#20110;&#19968;&#20123;&#33391;&#22909;&#23450;&#20041;&#30340;&#35268;&#21017;&#65292;&#23558;&#26576;&#31181;&#31867;&#22411;&#36716;&#25442;&#25104;&#21478;&#19968;&#31181;&#65292;&#27599;&#19968;&#20010;&#27169;&#26495;&#21482;&#26377;&#19968;&#20010;&#21333;&#29420;&#30340;&#21517;&#20026;
        <code class="computeroutput"><span class="identifier">type</span></code> &#30340;&#25104;&#21592;&#65292;&#23427;&#26159;&#23558;&#36716;&#25442;&#24212;&#29992;&#21040;&#27169;&#26495;&#21442;&#25968;
        <code class="computeroutput"><span class="identifier">T</span></code> &#19978;&#20043;&#21518;&#24471;&#21040;&#30340;&#32467;&#26524;&#12290;
      </p>
<p>
        <span class="bold"><strong>Synopsis &#27010;&#35201;:</strong></span>
      </p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/add_const.html" title="add_const">add_const</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/add_cv.html" title="add_cv">add_cv</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/add_pointer.html" title="add_pointer">add_pointer</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/add_reference.html" title="add_reference">add_reference</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/add_volatile.html" title="add_volatile">add_volatile</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/decay.html" title="decay">decay</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/floating_point_promotion.html" title="floating_point_promotion">floating_point_promotion</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/integral_promotion.html" title="integral_promotion">integral_promotion</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/make_signed.html" title="make_signed">make_signed</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/make_unsigned.html" title="make_unsigned">make_unsigned</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/promote.html" title="promote">promote</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/remove_all_extents.html" title="remove_all_extents">remove_all_extents</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/remove_const.html" title="remove_const">remove_const</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/remove_cv.html" title="remove_cv">remove_cv</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/remove_extent.html" title="remove_extent">remove_extent</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/remove_pointer.html" title="remove_pointer">remove_pointer</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/remove_reference.html" title="remove_reference">remove_reference</a><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <a class="link" href="../reference/remove_volatile.html" title="remove_volatile">remove_volatile</a><span class="special">;</span>
</pre>
<a name="boost_typetraits.category.transform.broken_compiler_workarounds_"></a><h5>
<a name="id5101614"></a>
        <a class="link" href="transform.html#boost_typetraits.category.transform.broken_compiler_workarounds_">Broken
        Compiler Workarounds:</a>
      </h5>
<a name="boost_typetraits.category.transform.____________________________________"></a><h5>
<a name="id5101634"></a>
        <a class="link" href="transform.html#boost_typetraits.category.transform.____________________________________">&#19981;&#26631;&#20934;&#32534;&#35793;&#22120;&#30340;&#21464;&#36890;&#26041;&#27861;&#65306;</a>
      </h5>
<p>
        For all of these templates support for partial specialization of class templates
        is required to correctly implement the transformation. On the other hand,
        practice shows that many of the templates from this category are very useful,
        and often essential for implementing some generic libraries. Lack of these
        templates is often one of the major limiting factors in porting those libraries
        to compilers that do not yet support this language feature. As some of these
        compilers are going to be around for a while, and at least one of them is
        very wide-spread, it was decided that the library should provide workarounds
        where possible. <br> &#23545;&#20110;&#25152;&#26377;&#36825;&#20123;&#27169;&#26495;&#65292;&#37117;&#35201;&#27714;&#23545;&#27169;&#26495;&#31867;&#20559;&#29305;&#21270;&#30340;&#25903;&#25345;&#65292;&#36825;&#26159;&#27491;&#30830;&#23454;&#29616;&#36825;&#20123;&#36716;&#25442;&#30340;&#38656;&#35201;&#12290;
        &#21478;&#19968;&#26041;&#38754;&#65292;&#23454;&#36341;&#34920;&#26126;&#36825;&#19968;&#31867;&#27169;&#26495;&#20013;&#30340;&#22823;&#22810;&#25968;&#37117;&#38750;&#24120;&#26377;&#29992;&#65292;&#24182;&#32463;&#24120;&#20250;&#25104;&#20026;&#23454;&#29616;&#26576;&#20123;&#27867;&#22411;&#24211;&#30340;&#22522;&#30784;&#12290;
        &#36825;&#20123;&#27169;&#26495;&#30340;&#36825;&#19968;&#38656;&#27714;&#36890;&#24120;&#26159;&#23558;&#37027;&#20123;&#24211;&#31227;&#26893;&#21040;&#36824;&#19981;&#25903;&#25345;&#36825;&#19968;&#35821;&#35328;&#29305;&#24615;&#30340;&#32534;&#35793;&#22120;&#20013;&#30340;&#26368;&#37325;&#35201;&#30340;&#38480;&#21046;&#22240;&#32032;&#20043;&#19968;&#12290;
        &#22240;&#20026;&#37027;&#20123;&#32534;&#35793;&#22120;&#20013;&#30340;&#19968;&#37096;&#20998;&#26242;&#26102;&#36824;&#20250;&#21543;&#34987;&#20351;&#29992;&#65292;&#32780;&#19988;&#33267;&#23569;&#20854;&#20013;&#20043;&#19968;&#36824;&#24191;&#20026;&#27969;&#20256;&#65292;&#36825;&#23601;&#20915;&#23450;&#20102;&#36825;&#20010;&#24211;&#22312;&#21487;&#33021;&#30340;&#24773;&#20917;&#19979;&#24212;&#35813;&#25552;&#20379;&#21464;&#36890;&#26041;&#26696;(workaround)&#12290;
      </p>
<p>
        The basic idea behind the workaround is to manually define full specializations
        of all type transformation templates for all fundamental types, and all their
        1st and 2nd rank cv-[un]qualified derivative pointer types, and to provide
        a user-level macro that will define all the explicit specializations needed
        for any user-defined type T. <br> workaround &#32972;&#21518;&#30340;&#26368;&#22522;&#26412;&#30340;&#24819;&#27861;&#26159;&#20026;&#25152;&#26377;&#22522;&#26412;&#31867;&#22411;&#65292;&#20197;&#21450;&#23427;&#20204;&#30340;&#25152;&#26377;&#31532;&#19968;&#21644;&#31532;&#20108;&#32423;
        cv-[un] &#20462;&#39280;&#30340;&#27966;&#29983;&#25351;&#38024;&#31867;&#22411;&#25163;&#24037;&#23450;&#20041;&#25152;&#26377;&#31867;&#22411;&#36716;&#25442;&#27169;&#26495;&#30340;&#23436;&#20840;&#29305;&#21270;&#65292;&#24182;&#25552;&#20379;&#19968;&#20010;&#29992;&#25143;&#23618;&#27425;&#30340;&#23439;&#20026;&#25152;&#26377;&#29992;&#25143;&#23450;&#20041;&#31867;&#22411;
        T &#23450;&#20041;&#25152;&#38656;&#35201;&#30340;&#20840;&#37096;&#26174;&#24335;&#29305;&#21270;&#12290;
      </p>
<p>
        The first part guarantees the successful compilation of something like this:<br>
        &#31532;&#19968;&#37096;&#20998;&#20445;&#35777;&#36825;&#26679;&#30340;&#20195;&#30721;&#21487;&#20197;&#25104;&#21151;&#32534;&#35793;&#65306;
      </p>
<pre class="programlisting"><span class="identifier">BOOST_STATIC_ASSERT</span><span class="special">((</span><span class="identifier">is_same</span><span class="special">&lt;</span><span class="keyword">char</span><span class="special">,</span> <span class="identifier">remove_reference</span><span class="special">&lt;</span><span class="keyword">char</span><span class="special">&amp;&gt;::</span><span class="identifier">type</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">));</span>
<span class="identifier">BOOST_STATIC_ASSERT</span><span class="special">((</span><span class="identifier">is_same</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">const</span><span class="special">,</span> <span class="identifier">remove_reference</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">const</span><span class="special">&amp;&gt;::</span><span class="identifier">type</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">));</span>
<span class="identifier">BOOST_STATIC_ASSERT</span><span class="special">((</span><span class="identifier">is_same</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">volatile</span><span class="special">,</span> <span class="identifier">remove_reference</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">volatile</span><span class="special">&amp;&gt;::</span><span class="identifier">type</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">));</span>
<span class="identifier">BOOST_STATIC_ASSERT</span><span class="special">((</span><span class="identifier">is_same</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">const</span> <span class="keyword">volatile</span><span class="special">,</span> <span class="identifier">remove_reference</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">const</span> <span class="keyword">volatile</span><span class="special">&amp;&gt;::</span><span class="identifier">type</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">));</span>
<span class="identifier">BOOST_STATIC_ASSERT</span><span class="special">((</span><span class="identifier">is_same</span><span class="special">&lt;</span><span class="keyword">char</span><span class="special">*,</span> <span class="identifier">remove_reference</span><span class="special">&lt;</span><span class="keyword">char</span><span class="special">*&amp;&gt;::</span><span class="identifier">type</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">));</span>
<span class="identifier">BOOST_STATIC_ASSERT</span><span class="special">((</span><span class="identifier">is_same</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">const</span><span class="special">*,</span> <span class="identifier">remove_reference</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">const</span><span class="special">*&amp;&gt;::</span><span class="identifier">type</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">));</span>
<span class="special">...</span>
<span class="identifier">BOOST_STATIC_ASSERT</span><span class="special">((</span><span class="identifier">is_same</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">const</span> <span class="keyword">volatile</span><span class="special">*</span> <span class="keyword">const</span> <span class="keyword">volatile</span><span class="special">*</span> <span class="keyword">const</span> <span class="keyword">volatile</span><span class="special">,</span> <span class="identifier">remove_reference</span><span class="special">&lt;</span><span class="keyword">char</span> <span class="keyword">const</span> <span class="keyword">volatile</span><span class="special">*</span> <span class="keyword">const</span> <span class="keyword">volatile</span><span class="special">*</span> <span class="keyword">const</span> <span class="keyword">volatile</span><span class="special">&amp;&gt;::</span><span class="identifier">type</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">));</span>
</pre>
<p>
        and the second part provides the library's users with a mechanism to make
        the above code work not only for <code class="computeroutput"><span class="keyword">char</span></code>,
        <code class="computeroutput"><span class="keyword">int</span></code> or other built-in type,
        but for their own types as well:<br> &#31532;&#20108;&#37096;&#20998;&#20026;&#24211;&#29992;&#25143;&#25552;&#20379;&#19968;&#31181;&#26426;&#21046;&#65292;&#21487;&#20197;&#35753;&#19978;&#38754;&#30340;&#20195;&#30721;&#19981;&#20165;&#20165;&#20320;&#23545;
        <code class="computeroutput"><span class="keyword">char</span></code>&#65292;<code class="computeroutput"><span class="keyword">int</span></code>
        &#25110;&#20854;&#23427;&#20869;&#24314;&#31867;&#22411;&#26377;&#25928;&#65292;&#24182;&#21516;&#26679;&#21487;&#20197;&#29992;&#20110;&#23427;&#20204;&#33258;&#24049;&#30340;&#31867;&#22411;&#65306;
      </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">myspace</span><span class="special">{</span>
   <span class="keyword">struct</span> <span class="identifier">MyClass</span> <span class="special">{};</span>
<span class="special">}</span>
<span class="comment">// declare this at global scope:
</span><span class="identifier">BOOST_BROKEN_COMPILER_TYPE_TRAITS_SPECIALIZATION</span><span class="special">(</span><span class="identifier">myspace</span><span class="special">::</span><span class="identifier">MyClass</span><span class="special">)</span>
<span class="comment">// transformations on myspace::MyClass now work:
</span><span class="identifier">BOOST_STATIC_ASSERT</span><span class="special">((</span><span class="identifier">is_same</span><span class="special">&lt;</span><span class="identifier">myspace</span><span class="special">::</span><span class="identifier">MyClass</span><span class="special">,</span> <span class="identifier">remove_reference</span><span class="special">&lt;</span><span class="identifier">myspace</span><span class="special">::</span><span class="identifier">MyClass</span><span class="special">&amp;&gt;::</span><span class="identifier">type</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">));</span>
<span class="identifier">BOOST_STATIC_ASSERT</span><span class="special">((</span><span class="identifier">is_same</span><span class="special">&lt;</span><span class="identifier">myspace</span><span class="special">::</span><span class="identifier">MyClass</span><span class="special">,</span> <span class="identifier">remove_const</span><span class="special">&lt;</span><span class="identifier">myspace</span><span class="special">::</span><span class="identifier">MyClass</span> <span class="keyword">const</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">));</span>
<span class="comment">// etc.
</span></pre>
<p>
        Note that the macro BOOST_BROKEN_COMPILER_TYPE_TRAITS_SPECIALIZATION evaluates
        to nothing on those compilers that <span class="bold"><strong>do</strong></span> support
        partial specialization.<br> &#27880;&#24847;&#65292;&#23439; BOOST_BROKEN_COMPILER_TYPE_TRAITS_SPECIALIZATION
        &#22312;&#37027;&#20123;&#25903;&#25345;&#20559;&#29305;&#21270;&#30340;&#32534;&#35793;&#22120;&#19978;&#20160;&#20040;&#37117;&#19981;&#20250;&#27714;&#20986;&#12290;
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2000, 2006 Adobe Systems Inc, David Abrahams,
      Steve Cleary, Beman Dawes, Aleksey Gurtovoy, Howard Hinnant, Jesse Jones, Mat
      Marcus, Itay Maman, John Maddock, Alexander Nasonov, Thorsten Ottosen, Robert
      Ramey and Jeremy Siek<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="value_traits/relate.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../category.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="alignment.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
