<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<!-- Copyright Aleksey Gurtovoy 2006. Distributed under the Boost --><!-- Software License, Version 1.0. (See accompanying --><!-- file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt) -->

  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />


  
  <meta name="generator" content="Docutils 0.3.6: http://docutils.sourceforge.net/" />



  
  
  <title>THE BOOST MPL LIBRARY: Exercises</title>
  <link rel="stylesheet" href="../style.css" type="text/css" />
</head>


<body class="docframe">


<table class="header">

  <tbody>

    <tr class="header">

      <td class="header-group navigation-bar"><span class="navigation-group"><a href="./details.html" class="navigation-link">Prev</a>&nbsp;<a href="./reference-manual.html" class="navigation-link">Next</a></span><span class="navigation-group-separator">&nbsp;|&nbsp;</span><span class="navigation-group"><a href="./details.html" class="navigation-link">Back</a>&nbsp;Along</span><span class="navigation-group-separator">&nbsp;|&nbsp;</span><span class="navigation-group"><a href="./tutorial-metafunctions.html" class="navigation-link">Up</a>&nbsp;<a href="../index.html" class="navigation-link">Home</a></span><span class="navigation-group-separator">&nbsp;|&nbsp;</span><span class="navigation-group"><a href="./tutorial_toc.html" class="navigation-link">Full TOC</a></span></td>


      <td class="header-group page-location"><a href="../index.html" class="navigation-link">标题页</a> / <a href="tutorial-metafunctions.html" class="navigation-link">教程：元函数和高阶元编程</a> / <a href="./exercises.html" class="navigation-link">练习</a></td>


    </tr>

  
  </tbody>
</table>

<div class="header-separator"></div>


<div class="section" id="exercises">
<h1><a class="toc-backref" href="./tutorial-metafunctions.html#id60" name="exercises">练习</a></h1>


<dl>


  <dt>1-0.</dt>


  <dd>使用 <tt class="literal"><span class="pre">BOOST_STATIC_ASSERT</span></tt> 为第 1.4.1 节中的 <tt class="literal"><span class="pre">binary</span></tt>
模板增加错误检查的功能，使得当 <tt class="literal"><span class="pre">N</span></tt> 包含 <tt class="literal"><span class="pre">0</span></tt> 或 <tt class="literal"><span class="pre">1</span></tt> 以外的数字时， <tt class="literal"><span class="pre">binary&lt;N&gt;::value</span></tt> 会产生一个编译错误。</dd>


  <dt>1-1.</dt>


  <dd>使用 <tt class="literal"><span class="pre">transform</span></tt> 将 <tt class="literal"><span class="pre">vector_c&lt;int,1,2,3&gt;</span></tt> 转化为存有元素
(2,3,4) 的类型序列。</dd>


  <dt>1-2.</dt>


  <dd>使用 <tt class="literal"><span class="pre">transform</span></tt> 将 <tt class="literal"><span class="pre">vector_c&lt;int,1,2,3&gt;</span></tt> 转化为存有元素
(1,4,9) 的类型序列。</dd>


  <dt>1-3.</dt>


  <dd>用两次 将 <tt class="literal"><span class="pre">T</span></tt> 转为 <tt class="literal"><span class="pre">T****</span></tt>.</dd>


  <dt>1-4.</dt>


  <dd>将<tt class="literal"><span class="pre"></span></tt> <tt class="literal"><span class="pre">twice</span></tt> 应用于自己本身，将 <tt class="literal"><span class="pre">T</span></tt> 转为 <tt class="literal"><span class="pre">T****</span></tt>.</dd>


  <dt>1-5.</dt>


  <dd>
    
    <p class="first">第 1.1 节中的量纲分析代码中还有一个问题。提示：如果你写：</p>


    
    <pre class="literal-block">f = f + m * a;<br /></pre>


    
    <p>会发生什么？请使用本章介绍的技术修正这个例子。</p>


<!-- @ example.wrap('''void will_fail%s
{ quantity<float,force> f(m*a);
''' % ma_function_args, '}')
stack[:0] = dimensional_analysis # stick support code in
compile('all', expect_error = True) -->
  </dd>


  <dt>1-6.</dt>


  <dd>构建一个功能与
    <tt class="literal"><span class="pre">twice</span></tt> 相同的 lambda 表达式。提示：<tt class="literal"><span class="pre">mpl::apply</span></tt> 是一个元函数！</dd>


  <dt>1-7*.</dt>


  <dd>
    
    <p class="first">你认为以下结构的语义是什么：</p>


    
    <pre class="literal-block">typedef mpl::lambda&lt;mpl::lambda&lt;_1&gt; &gt;::type t1;<br />typedef mpl::apply&lt;_1,mpl::plus&lt;_1,_2&gt; &gt;::type t2;<br />typedef mpl::apply&lt;_1,std::vector&lt;int&gt; &gt;::type t3;<br />typedef mpl::apply&lt;_1,std::vector&lt;_1&gt; &gt;::type t4;<br />typedef mpl::apply&lt;mpl::lambda&lt;_1&gt;,std::vector&lt;int&gt; &gt;::type t5;<br />typedef mpl::apply&lt;mpl::lambda&lt;_1&gt;,std::vector&lt;_1&gt; &gt;::type t6;<br />typedef mpl::apply&lt;mpl::lambda&lt;_1&gt;,mpl::plus&lt;_1,_2&gt; &gt;::type t7;<br />typedef mpl::apply&lt;_1,mpl::lambda&lt; mpl::plus&lt;_1,_2&gt; &gt; &gt;::type t8;<br /></pre>


<!-- @example.prepend('#include <vector>')
compile() -->
    
    <p class="last">列出你得到答案的各个步骤，并编写测试代码以验证你的设想。本库的行为与你的推理相符？如果不符，请分析原因并找出正确的表达式语义。解释为什么与你的设想不一样？你认为哪种行为更清晰？以及为什么？</p>


  </dd>


  <dt>1-8*.</dt>


  <dd>我们的量纲分析框架是处理量纲的，但是它完全忽略了<span style="font-style: italic;">单位</span>的问题。长度可以被表示为英寸、英尺或米。力可以被表示为牛顿或千克米/秒<sup>2</sup>。请增加指定单位的能力，并测试你的代码。尽可能让你的接口对于使用者是语法友好的。</dd>


</dl>


<!-- Along with Alan Turing, Church was one of the founders of computer
science. -->
<!-- yes, this is easier to read, but the real beauty of ``apply`` is that
it not only works on metafunction classes, but on metafunctions passed
with placeholder arguments.   -->
<!-- Naturally, MPL defines a series of these numbered placeholder
types, so that we can handle metafunctions with more arguments. -->
<!-- : in order to pass a template in  the ``BinaryOperation`` position,
``transform`` would have to be declared::

 template <
     class Sequence1, class Sequence2
   , template <class,class> class BinaryOperation
 >
 struct transform;  // returning a sequence -->
<!-- "Programming with types" -->
<!-- Once again, a nested ``value`` member is optional for
metafunctions, and required for integral type wrappers. -->
</div>



<div class="footer-separator"></div>


<table class="footer">

  <tbody>

    <tr class="footer">

      <td class="header-group navigation-bar"><span class="navigation-group"><a href="./details.html" class="navigation-link">Prev</a>&nbsp;<a href="./reference-manual.html" class="navigation-link">Next</a></span><span class="navigation-group-separator">&nbsp;|&nbsp;</span><span class="navigation-group"><a href="./details.html" class="navigation-link">Back</a>&nbsp;Along</span><span class="navigation-group-separator">&nbsp;|&nbsp;</span><span class="navigation-group"><a href="./tutorial-metafunctions.html" class="navigation-link">Up</a>&nbsp;<a href="../index.html" class="navigation-link">Home</a></span><span class="navigation-group-separator">&nbsp;|&nbsp;</span><span class="navigation-group"><a href="./tutorial_toc.html" class="navigation-link">Full TOC</a></span></td>


    </tr>

  
  </tbody>
</table>

</body>
</html>
