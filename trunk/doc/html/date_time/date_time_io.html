<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <title>Date Time Input/Output</title>
  <link rel="stylesheet" href="../boostbook.css" type="text/css">















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <meta name="generator" content="DocBook XSL Stylesheets V1.68.1">















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link rel="start" href="../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link rel="up" href="../date_time.html" title="Chapter&nbsp;4.&nbsp;Boost.Date_Time">















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link rel="prev" href="local_time.html" title="Local Time">















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link rel="next" href="serialization.html" title="Serialization">
</head>


<body alink="#0000ff" bgcolor="white" link="#0000ff" text="black" vlink="#840084">















<table cellpadding="2" width="100%">















  <tbody>














    <tr>














      <td valign="top"><img alt="Boost C++ Libraries" src="../../../boost.png" height="86" width="277"></td>















      <td align="center"><a href="../../../index.htm">Home</a></td>















      <td align="center"><a href="../../../libs/libraries.htm">Libraries</a></td>















      <td align="center"><a href="../../../people/people.htm">People</a></td>















      <td align="center"><a href="../../../more/faq.htm">FAQ</a></td>















      <td align="center"><a href="../../../more/index.htm">More</a></td>















    </tr>














  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>















<hr>
<div class="spirit-nav">
<a accesskey="p" href="local_time.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../date_time.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="serialization.html"><img src="../images/next.png" alt="Next"></a>
</div>















<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both;">
<a name="date_time.date_time_io"></a>日期时间的输入/输出</h2>














</div>














</div>














</div>















<div class="toc">
<dl>















  <dt><span class="section"><a href="date_time_io.html#date_time.format_flags">格式化标志</a></span></dt>















  <dt><span class="section"><a href="date_time_io.html#date_time.date_facet">日期 Facet</a></span></dt>















  <dt><span class="section"><a href="date_time_io.html#date_time.date_input_facet">日期输入 Facet</a></span></dt>















  <dt><span class="section"><a href="date_time_io.html#date_time.time_facet">时间 Facet</a></span></dt>















  <dt><span class="section"><a href="date_time_io.html#date_time.time_input_facet">时间输入 Facet</a></span></dt>















  <dt><span class="section"><a href="date_time_io.html#date_time.io_objects">日期时间格式化器/分析器对象</a></span></dt>















  <dt><span class="section"><a href="date_time_io.html#date_time.io_tutorial">日期时间 IO 指南</a></span></dt>















</dl>














</div>















<h2>
<a name="id997601"></a>日期时间 IO 系统</h2>















<p>
    <a href="date_time_io.html#streaming_exceptions">流的异常处理</a>
  </p>















<p>和版本1.33一样，本 date_time
库使用了一个新的流IO系统。这个新系统可以让用户控制如何表示日期和时间。定制化的选项可分为两组：格式化标志和字符串元素。格式化标志提供了日期各元
素顺序和类型的灵活性。而对字符串元素进行客户化可以在IO时替换内建的月份名、星期名和其它字符串。</p>















<p>输出系统基于一个 date_facet (派生自
std::facet)，而输入系统则基于一个 date_input_facet
(也是派生自 std::facet)。而时间和 local_time 的 facets 则派生自这两个类型。输出系统使用了三个格式化器对象，而输入系统则使用四个分析器对象。这些格式化器和分析器对象都是可定制化的。</p>















<p>有一点很重要，后面所提供的所有例子均使用了窄字符流，而系统同样提供了宽字符流的 facets (完整的列表请见 <a href="date_time_io.html#io_objects_table">IO 对象</a>)。</p>















<p>还要注意的是，不是所有编译器都能够使用这个IO系统。对于那些编译器，以前的 <code class="computeroutput">date_time</code> 版本所使用的IO系统依然可用。对于这些编译器，系统将自动选择"旧的IO系统"，不过也可以通过定义 <code class="computeroutput">USE_DATE_TIME_PRE_1_33_FACET_IO</code> 来人工选择使用旧IO系统。更多信息请见 <a href="details.html#date_time.buildinfo" title="Build-Compiler Information">构建及编译器信息</a>。</p>















<a name="streaming_exceptions"></a>
<h5>
<a name="id997689"></a>流的异常处理</h5>















<p>在进行流输入时，如果发生了错误，那么流中的 <code class="computeroutput">std::ios_base::failbit</code> 将(总是)被置位。也可以在发生错误时抛出异常。要"开启"这些异常的抛出，请以 <code class="computeroutput">std::ios_base::failbit</code> 作为参数调用流的 <code class="computeroutput">exceptions</code> 函数。</p>















<pre class="screen">// "开启"异常<br>date d(not_a_date_time);<br>std::stringstream ss;<br>ss.exceptions(std::ios_base::failbit);<br>ss.str("204-Jan-01");<br>ss &gt;&gt; d; // 抛出 bad_year 异常并设置流的 failbit</pre>















<h5>
<a name="id997732"></a>新系统的一个简单例子：</h5>















<pre class="screen">//例子：定制输出为 "LongWeekday LongMonthname day, year"<br>//                                  "%A %b %d, %Y"<br>date d(2005,Jun,25);<br>date_facet* facet(new date_facet("%A %B %d, %Y"));<br>std::cout.imbue(std::locale(std::cout.getloc(), facet));<br>std::cout &lt;&lt; d &lt;&lt; std::endl;<br>// "Saturday June 25, 2005"</pre>















<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.format_flags"></a>格式化标志</h3>














</div>














</div>














</div>















<p>这个新的IO系统用于输出的格式化标志中，多数都是由 <code class="computeroutput">strftime(...)</code> 使用的，但不是全部。增加了一些新的标志，还覆盖了一些。输入系统只支持一些特定的标志，因此，不是所有用于输出的标志都可用于输入(我们正在为改善这一情况而努力)。</p>















<p>下面两个表列出了
date_time IO 和 strftime 可用的所有标志。标有星号(*)的格式化标志只用于 date_time. 标有感叹号(!)的标志不可用于输入(目前)。第一个表是用于日期的IO，第二个表则用于时间的IO。 </p>















<p>
    <a name="date_time_io.date_format_flags"></a> 日期 Facet 格式化标志
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">格式化符</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%a</pre>














      </td>















      <td>缩写的星期名</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"Mon" =&gt; Monday</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%A</pre>














      </td>















      <td>长星期名</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"Monday"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%b</pre>














      </td>















      <td>缩写的月份名</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"Feb" =&gt; February</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%B</pre>














      </td>















      <td>长月份名</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"February"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%c !</pre>














      </td>















      <td>当前 locale 的首选日期时间表示法。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%C !</pre>














      </td>















      <td>世纪数(year/100)为2位数字的整数。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%d</pre>














      </td>















      <td>月份中的天数为十进制的 01 到 31</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%D !</pre>














      </td>















      <td>等价于 %m/%d/%y</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%e</pre>














      </td>















      <td>类似于 %d, 月份中的天数为十进制数，但前导的0换为空格。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%G !</pre>














      </td>















      <td>与 %y 具有相同的格式和值，除了当ISO星期数属于前一个或后一个年份时，替换相应年份。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%g !</pre>














      </td>















      <td>类似于 %G, 但不带世纪数。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%h !</pre>














      </td>















      <td>等价于 %b</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%j</pre>














      </td>















      <td>在年份中的天数为十进制数，闰年时为 001 到 366，非闰年时为 001 - 365。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"060" =&gt; Feb-29</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%m</pre>














      </td>















      <td>月份名为十进制数，从 01 到 12</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"01" =&gt; January</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%u !</pre>














      </td>















      <td>在星期中的天数为十进制数，范围为 1 到 7，星期一为1。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%U</pre>














      </td>















      <td>在当前年份中的周数，以十进制表示，范围从 00 到 53，第一个星期天作为第01周的第一天。如2005年1月1日为星期六，则这一天属于2005年的第00周(第00周为 2004-Dec-26 到 2005-Jan-01. 同时这也是2004年的第53周)。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date d(2005, Jan, 1); // 星期六<br>  // 格式化为 %U<br>  ss &lt;&lt; d; // "00"<br>  d += day(1); // 星期天<br>  ss &lt;&lt; d; // "01" 第1周的开始</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%V !</pre>














      </td>















      <td>在当前年份中的 ISO 8601:1988 周数，以十进制表示，范围从 01 到 53，其中第1周为至少有4天在本年内的第一周，以星期一作为一周的第一天。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%w</pre>














      </td>















      <td>在一周中的天数，为十进制的 0 到 6</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"0" =&gt; 星期天</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%W</pre>














      </td>















      <td>周数，从 00 到 53，其中星期一为一周的第一天。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date d(2005, Jan, 2); // 星期天<br>  // 格式化为 %W<br>  ss &lt;&lt; d; // "00"<br>  d += day(1); // 星期一<br>  ss &lt;&lt; d; // "01" 第1周的开始</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%x</pre>














      </td>















      <td>由实现的 locale 所定义的数据格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date d(2005,Oct,31);<br>  date_facet* f = new date_facet("%x");<br>   <br>  locale loc = locale(locale("en_US"), f);<br>  cout.imbue(loc);<br>  cout &lt;&lt; d; // "10/31/2005"<br>    <br>  loc = locale(locale("de_DE"), f);<br>  cout.imbue(loc);<br>  cout &lt;&lt; d; // "31.10.2005"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%y</pre>














      </td>















      <td>两位数的年份</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"05" =&gt; 2005</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Y</pre>














      </td>















      <td>四位数的年份</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"2005"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Y-%b-%d</pre>














      </td>















      <td>缺省日期格式</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"2005-Apr-01"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Y%m%d</pre>














      </td>















      <td>ISO 格式</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"20050401"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Y-%m-%d</pre>














      </td>















      <td>ISO 扩展格式</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"2005-04-01"</pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>


    <a name="date_time_io.time_format_flags"></a> 时间 Facet&nbsp;格式化标志
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">格式化符</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%- *!</pre>














      </td>















      <td>占位符，表示时间长度的符号。只在时间长度为负时显示。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"-13:15:16"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%+ *!</pre>














      </td>















      <td>占位符，表示时间长度的符号。不论正负都会显示。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"+13:15:16"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%f</pre>














      </td>















      <td>总是显示秒数的小数部分，即使小数部分为零。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"13:15:16.000000"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%F *</pre>














      </td>















      <td>仅在小数部分不为零时显示秒数的小数部分。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"13:15:16"<br>  "05:04:03.001234"<br>            </pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%I !</pre>














      </td>















      <td>小时数为十进制数，使用12小时的时钟。</td>















    </tr>















    <tr>














      <td>&nbsp;</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%k !</pre>














      </td>















      <td>小时数(24小时时钟)以十进制数表示(从0到23)；单位数字前加空格。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%l !</pre>














      </td>















      <td>小时数(12小时时钟)以十进制数表示(从1到12)；单位数字前加空格。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%p !</pre>














      </td>















      <td>根据给定的时间值显示 `AM' 或 `PM'，或当前 locale 的相应字符串。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%P !</pre>














      </td>















      <td>类似于 %p，但输出小写的 `am' 或 `pm' 或当前 locale 的相应字符串。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%r !</pre>














      </td>















      <td>时间带 a.m. 或 p.m. 符号。在 POSIX locale 中相当于 `%I:%M:%S %p'</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%R !</pre>














      </td>















      <td>时间为24-小时格式(%H:%M)</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%s *</pre>














      </td>















      <td>秒数带小数部分。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"59.000000"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%S</pre>














      </td>















      <td>只输出小数</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"59"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%T !</pre>














      </td>















      <td>时间为24-小时格式(%H:%M:%S)</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%q</pre>














      </td>















      <td>ISO 时区(仅用于输出)。在对 ptime 使用 time_facet 时忽略该标志。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"-0700" // Mountain Standard Time</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Q</pre>














      </td>















      <td>ISO 扩展时区(仅用于输出)。在对 ptime 使用 time_facet 时忽略该标志。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"-05:00" // Eastern Standard Time</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%z *!</pre>














      </td>















      <td>时区缩写(仅用于输出)。在对 ptime 使用 time_facet 时忽略该标志。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"MST" // Mountain Standard Time</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Z *!</pre>














      </td>















      <td>时区全名(仅用于输出)。在对 ptime 使用 time_facet 时忽略该标志。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"EDT" // Eastern Daylight Time</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%ZP *</pre>














      </td>















      <td>Posix 时区字符串(可用于输入和输出)。在对 ptime 使用 time_facet 时忽略该标志。有关 posix 时区字符串的完整细节，请见 <a href="local_time.html#date_time.local_time.posix_time_zone" title="Posix Time Zone">posix_time_zone 类</a>。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"EST-05EDT+01,M4.1.0/02:00,M10.5.0/02:00"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%x %X</pre>














      </td>















      <td>取自于 locale 的实现定义的日期/时间格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date d(2005,Oct,31);<br>  ptime pt(d, hours(20));<br>  time_facet* f = new time_facet("%x %X");<br>   <br>  locale loc = locale(locale("en_US"), f);<br>  cout.imbue(loc);<br>  cout &lt;&lt; pt; // "10/31/2005 08:00:00 PM"<br>    <br>  loc = locale(locale("de_DE"), f);<br>  cout.imbue(loc);<br>  cout &lt;&lt; pt; // "31.10.2005 20:00:00"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Y%m%dT%H%M%S%F%q</pre>














      </td>















      <td>ISO 格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"20051015T131211-0700"<br>  // Oct 15, 2005 13:12:11 MST<br>            </pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Y-%m-%d %H:%M:%S%F%Q</pre>














      </td>















      <td>扩展 ISO 格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"2005-10-15 13:12:11-07:00"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Y-%b-%d %H:%M:%S%F %z</pre>














      </td>















      <td>输出 ptime 和 local_date_time 时使用的缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"2005-Oct-15 13:12:11 MST"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%Y-%b-%d %H:%M:%S%F %ZP</pre>














      </td>















      <td>输入 ptime 和 local_date_time 时使用的缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"2005-Oct-15 13:12:11 MST-07"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%-%H:%M:%S%F !</pre>














      </td>















      <td>用于输出的缺省 time_duration 格式。仅当时间长度为负时显示符号。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"-13:14:15.003400"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">%H:%M:%S%F</pre>














      </td>















      <td>用于输入的缺省 time_duration 格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"13:14:15.003400"</pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>* 表示该标志只用于 <code class="computeroutput">date_time</code>.</p>















<p>! 表示该标志不可用于输入。</p>















</div>















<p>下表列出了可用的 facets.</p>















<a name="io_objects_table"></a>
<h3>
<a name="id999111"></a>IO 对象</h3>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th>输出</th>















    <th>输入</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td><code class="computeroutput"><a href="../boost/date_time/date_facet.html" title="Class template date_facet">date_facet</a></code></td>















      <td><code class="computeroutput"><a href="../boost/date_time/date_input_facet.html" title="Class template date_input_facet">date_input_facet</a></code></td>















    </tr>















    <tr>















      <td><code class="computeroutput"><a href="../boost/date_time/date_facet.html" title="Class template date_facet">wdate_facet</a></code></td>















      <td><code class="computeroutput"><a href="../boost/date_time/date_input_facet.html" title="Class template date_input_facet">wdate_input_facet</a></code></td>















    </tr>















    <tr>















      <td><code class="computeroutput"><a href="../boost/date_time/time_facet.html" title="Class template time_facet">time_facet</a></code></td>















      <td><code class="computeroutput"><a href="../boost/date_time/time_input_facet.html" title="Class template time_input_facet">time_input_facet</a></code></td>















    </tr>















    <tr>















      <td><code class="computeroutput"><a href="../boost/date_time/time_facet.html" title="Class template time_facet">wtime_facet</a></code></td>















      <td><code class="computeroutput"><a href="../boost/date_time/time_input_facet.html" title="Class template time_input_facet">wtime_input_facet</a></code></td>















    </tr>















    <tr>















      <td>
      <code class="computeroutput"><a href="../boost/date_time/time_facet.html" title="Class template time_facet">local_time_facet</a></code>*</td>















      <td>
      <code class="computeroutput"><a href="../boost/date_time/time_input_facet.html" title="Class template time_input_facet">local_time_input_facet</a></code>*</td>















    </tr>















    <tr>















      <td>
      <code class="computeroutput"><a href="../boost/date_time/time_facet.html" title="Class template time_facet">wlocal_time_facet</a></code>*</td>















      <td>
      <code class="computeroutput"><a href="../boost/date_time/time_input_facet.html" title="Class template time_input_facet">wlocal_time_input_facet</a></code>*</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
    * 这些链接引向 <code class="computeroutput">time_facet</code> 和 <code class="computeroutput">time_input_facet</code> 参考一节。它们不是真正的类而是 typedefs.
  </p>















<h3>
<a name="id999536"></a>格式化器/分析器对象</h3>















<p>为了实现新的 new i/o facets，date-time 库使用了多个新分析器和格式化器。这些类可以让用户实现特定的输入/输出程序。</p>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th>输出</th>















    <th>输入</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td><code class="computeroutput"><a href="../boost/date_time/period_formatter.html" title="Class template period_formatter">period_formatter</a></code></td>















      <td><code class="computeroutput"><a href="../boost/date_time/period_parser.html" title="Class template period_parser">period_parser</a></code></td>















    </tr>















    <tr>















      <td><code class="computeroutput"><a href="../boost/date_time/date_generator_formatter.html" title="Class template date_generator_formatter">date_generator_formatter</a></code></td>















      <td><code class="computeroutput"><a href="../boost/date_time/date_generator_parser.html" title="Class template date_generator_parser">date_generator_parser</a></code></td>















    </tr>















    <tr>















      <td><code class="computeroutput"><a href="../boost/date_time/special_values_formatter.html" title="Class template special_values_formatter">special_values_formatter</a></code></td>















      <td><code class="computeroutput"><a href="../boost/date_time/special_values_parser.html" title="Class template special_values_parser">special_values_parser</a></code></td>















    </tr>















    <tr>















      <td>&nbsp;</td>















      <td><code class="computeroutput"><a href="../boost/date_time/format_date_parser.html" title="Class template format_date_parser">format_date_parser</a></code></td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.date_facet"></a>日期 Facet</h3>














</div>














</div>














</div>















<a href="date_time_io.html#date_facet_intro">简介</a> -
  <a href="date_time_io.html#date_facet_constr">构造</a> -
  <a href="date_time_io.html#date_facet_accessors">访问器</a><a name="date_facet_intro"></a>
<h3>
<a name="id999727"></a>简介</h3>















<p><code class="computeroutput">boost::date_time::date_facet</code> 让用户可以对日期(以及其它格里历对象)的流输出进行控制。date_facet 被 typedef 为
<code class="computeroutput">gregorian</code> 名字空间中的 <code class="computeroutput">date_facet</code> 和 <code class="computeroutput">wdate_facet</code>. 
  </p>















<a name="date_facet_constr"></a>
<h3>
<a name="id999768"></a>构造</h3>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th>语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_facet()</pre>














      </td>















      <td>缺省构造函数。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_facet(...)<br>  Parameters:<br>    char_type* format<br>    input_collection_type</pre>














      </td>















      <td>format 指定了用于日期输出的格式。其它格式将使用它们的缺省值。Collection 是用于月份的一组缩写名。其它的名字使用其缺省值。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_facet(...)<br>  Parameters:<br>    char_type* format<br>    period_formatter_type<br>    special_values_formatter_type<br>    date_gen_formatter_type</pre>














      </td>















      <td>format 指定了用于日期输出的格式。其余参数为格式化器对象。有关这些对象的更多详情请看 <a href="date_time_io.html#date_time.io_objects" title="Date Time Formatter/Parser Objects">这里</a>。这个构造函数为 format 以外的所有参数提供了缺省值。因此，可以使用 <code class="computeroutput">date_facet("%m %d %Y")</code>.</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<a name="date_facet_accessors"></a>
<h3>
<a name="id999880"></a>访问器</h3>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void format(char_type*)</pre>














      </td>















      <td>设置日期的格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_facet* f = new date_facet();<br>f-&gt;format("%m %d %Y");</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void set_iso_format()</pre>














      </td>















      <td>设置 ISO 格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;set_iso_format();<br>// "%Y%m%d"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void set_iso_extended_format()</pre>














      </td>















      <td>设置 ISO 扩展的日期格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;set_iso_extended_format();<br>// "%Y-%m-%d"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void month_format(char_type*)</pre>














      </td>















      <td>设置单独输出月份的格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;month_format("%B"); <br>ss &lt;&lt; greg_month(12); // "December"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void weekday_format(char_type*)</pre>














      </td>















      <td>设置单独输出周日的格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;weekday_format("%a");<br>ss &lt;&lt; greg_weekday(2); // "Tue"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void period_formatter(...)<br>  Parameter:<br>    period_formatter_type</pre>














      </td>















      <td>以用户创建的对象替换时间段格式化器对象。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void special_values_formatter(...)<br>  Parameter:<br>    special_values_formatter_type</pre>














      </td>















      <td>以用户创建的对象替换 special_values 格式化器对象。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void date_gen_phrase_strings(...)<br>  Parameters:<br>    input_collection_type<br>    date_gen_formatter_type::<br>      phrase_elements</pre>














      </td>















      <td>在 date_gen_formatter 中设置新的日期生成器短语串。其中 input collection 是一个字符串 vector(有关这些字符串的具体说明请见 <a href="date_time_io.html#io_objects.date_generators">日期生成器格式化器/分析器的文档</a>)。参数 phrase_elements 为枚举类型，在
date_generator_formatter 对象中定义，其缺省值为 'first'.
它用于表示在
collection 第一个字符串的位置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void short_weekday_names(...)<br>  Parameter:<br>    input_collection_type</pre>














      </td>















      <td>替换输出短周日名时使用的字符串。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void long_weekday_names(...)<br>  Parameter:<br>    input_collection_type</pre>














      </td>















      <td>替换输出长周日名时使用的字符串。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void short_month_names(...)<br>  Parameter:<br>    input_collection_type</pre>














      </td>















      <td>替换输出短月份名时使用的字符串。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void long_month_names(...)<br>  Parameter:<br>    input_collection_type</pre>














      </td>















      <td>替换输出长月份名时使用的字符串。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(...)<br>  Common parameters for all <br>  'put' functions:<br>    OutItrT <br>    ios_base<br>    char_type<br>  Unique parameter for 'put' funcs:<br>    gregorian object</pre>














      </td>















      <td>在 date_facet 中有12个 put 函数。它们的共同参数是：一个指向流中下一项的迭代器，一个
ios_base 对象，以及填充字符。每个格里历对象都有它自己的 put 函数。每个 put 函数的描述如下。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., date)</pre>














      </td>















      <td>使用由 <code class="computeroutput">format(...)</code> 设置的格式或缺省格式将一个日期放入输出到流中。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., days)</pre>














      </td>















      <td>将一个 days 对象作为一个数字放入流中。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., month)</pre>














      </td>















      <td>将一个 month 对象放入流中，使用由 <code class="computeroutput">month_format(...)</code> 设置的格式或者缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., day)</pre>














      </td>















      <td>将一个 day of month 对象作为一个两位数放入流中。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"01" // 1月1日</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., day_of_week)</pre>














      </td>















      <td>将一个 day of week 对象放入流中，使用由 <code class="computeroutput">weekday_format(...)</code> 设置的格式或缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., date_period)</pre>














      </td>















      <td>将一个 date_period 放入流中。日期的格式使用 <code class="computeroutput">format(..)</code>
设置的格式或缺省格式。period 的类型(开或闭区间)以及所使用的分隔符就是 period_formatter 所使用的。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., partial_date)</pre>














      </td>















      <td>将一个 partial_date date_generator 对象放入流中。所使用的月份格式为由 <code class="computeroutput">month_format(..)</code> 所设置的格式或缺省格式。day of month 用两位数表示。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"01 Jan" // 缺省格式<br>"01 January" // 长月份名格式</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., date_generator)<br>  Date Generator Type:<br>    nth_day_of_the_week_in_month</pre>














      </td>















      <td>将一个 nth_day_of_the_week_in_month 对象放入流中。月份的格式由 <code class="computeroutput">month_format(...)</code> 设置或采用缺省格式。weekday 的格式由 <code class="computeroutput">weekday_format(...)</code> 设置或采用缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_formatter</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"third Fri in May" // 缺省</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., date_generator)<br>  Date Generator Type:<br>    first_day_of_the_week_in_month</pre>














      </td>















      <td>将一个 first_day_of_the_week_in_month 对象放入流中。月份的格式由 <code class="computeroutput">month_format(...)</code> 设置或采用缺省格式。weekday 的格式由 <code class="computeroutput">weekday_format(...)</code> 设置或采用缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_formatter</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"first Wed of Jun" // 缺省</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., date_generator)<br>  Date Generator Type:<br>    last_day_of_the_week_in_month</pre>














      </td>















      <td>将一个 last_day_of_the_week_in_month 对象放入流中。月份的格式由 <code class="computeroutput">month_format(...)</code> 设置或采用缺省格式。weekday 的格式由 <code class="computeroutput">weekday_format(...)</code> 设置或采用缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_formatter</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"last Tue of Mar" // 缺省</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., date_generator)<br>  Date Generator Type:<br>    first_day_of_the_week_after</pre>














      </td>















      <td>将一个 first_day_of_the_week_after 对象放入流中。weekday 的格式由 <code class="computeroutput">weekday_format(...)</code> 设置或采用缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_formatter</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"first Sat after" // 缺省</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., date_generator)<br>  Date Generator Type:<br>    first_day_of_the_week_before</pre>














      </td>















      <td>将一个 first_day_of_the_week_before 对象放入流中。weekday 的格式由 <code class="computeroutput">weekday_format(...)</code> 设置或采用缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_formatter</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"first Mon before" // 缺省</pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















</div>















<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.date_input_facet"></a>日期输入 Facet</h3>














</div>














</div>














</div>















<a href="date_time_io.html#date_input_facet_intro">简介</a> -
  <a href="date_time_io.html#date_input_facet_constr">构造</a> -
  <a href="date_time_io.html#date_input_facet_accessors">访问器</a><a name="date_input_facet_intro"></a>
<h3>
<a name="id1000854"></a>简介</h3>















<p><code class="computeroutput">boost::date_time::date_input_facet</code>
让用户可以控制如果从流中输入 dates (以及其它格里历对象)。date_input_facet 被 typedef
为 <code class="computeroutput">gregorian</code> 名字空间中的 <code class="computeroutput">date_input_facet</code> 和 <code class="computeroutput">wdate_input_facet</code>. 
  </p>















<a name="date_input_facet_constr"></a>
<h3>
<a name="id1000896"></a>构造</h3>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th>语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_input_facet()</pre>














      </td>















      <td>缺省构造函数。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_input_facet(string_type format)</pre>














      </td>















      <td>给定的 Format 将被用于 date 的输入。所有其它格式使用缺省值。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_input_facet(...)<br>  Parameters:<br>    string_type format<br>    format_date_parser_type<br>    special_values_parser_type<br>    period_parser_type<br>    date_gen_parser_type</pre>














      </td>















      <td>给定的 Format 将被用于 date 的输入。其它参数为分析器对象。有关这些对象的更多细节请见 <a href="date_time_io.html#date_time.io_objects" title="Date Time Formatter/Parser Objects">这里</a>。</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<a name="date_input_facet_accessors"></a>
<h3>
<a name="id1000997"></a>访问器</h3>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void format(char_type*)</pre>














      </td>















      <td>设置日期的格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_input_facet* f = <br>    new date_input_facet();<br>f-&gt;format("%m %d %Y");</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void set_iso_format()</pre>














      </td>















      <td>设置日期格式为 ISO</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;set_iso_format();<br>// "%Y%m%d"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void set_iso_extended_format()</pre>














      </td>















      <td>设置日期格式为 ISO 扩展</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;set_iso_extended_format();<br>// "%Y-%m-%d"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void month_format(char_type*)</pre>














      </td>















      <td>单独设置月份的输入格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;month_format("%B");<br>ss.str("March");<br>ss &gt;&gt; m; // 三月</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void weekday_format(char_type*)</pre>














      </td>















      <td>单独设置周日的输入格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;weekday_format("%a");<br>ss.str("Sun");<br>ss &gt;&gt; wd; // 星期天</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void year_format(char_type*)</pre>














      </td>















      <td>单独设置年份的格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;weekday_format("%y");<br>ss.str("04");<br>ss &gt;&gt; year; // 2004</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void period_parser(...)<br>  Parameter:<br>    period_parser_type</pre>














      </td>















      <td>将 period 分析器对象替换为用户创建的对象。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void special_values_parser(...)<br>  Parameter:<br>    special_values_parser_type</pre>














      </td>















      <td>将 special_values 分析器替换为用户创建的对象。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void date_gen_phrase_strings(...)<br>  Parameters:<br>    input_collection_type</pre>














      </td>















      <td>设置 date_gen_parser 中的新日期生成器对象。其中 input collection 为字符串 vector(有关这些字符串的细节请见 <a href="date_time_io.html#io_objects.date_generators">日期生成器格式器/分析器的文档</a>)。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void short_weekday_names(...)<br>  Parameter:<br>    input_collection_type</pre>














      </td>















      <td>替换用于输入短周日名的字符串。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void long_weekday_names(...)<br>  Parameter:<br>    input_collection_type</pre>














      </td>















      <td>替换用于输入长周日名的字符串。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void short_month_names(...)<br>  Parameter:<br>    input_collection_type</pre>














      </td>















      <td>替换用于输入短月份名的字符串。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void long_month_names(...)<br>  Parameter:<br>    input_collection_type</pre>














      </td>















      <td>替换用于输入长月份名的字符串。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(...)<br>  Common parameters for all <br>  'get' functions:<br>    InItrT from<br>    InItrT to<br>    ios_base<br>  Unique parameter for 'get' funcs:<br>    gregorian object</pre>














      </td>















      <td>在 date_input_facet 中有13个 get 函数。它们的共同参数是：一个指向流的开始位置的迭代器，一个指向流的结束位置的迭代器，以及一个 ios_base
对象。每个格里历对象都有自己的 get 函数。每个 get 函数描述如下。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., date)</pre>














      </td>















      <td>从流中取出一个 date 对象，使用由 <code class="computeroutput">format(...)</code> 设置的格式或缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">ss.str("2005-Jan-01");<br>ss &gt;&gt; d; // 缺省格式</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., month)</pre>














      </td>















      <td>从流中取出一个 month 对象，使用由 <code class="computeroutput">month_format(...)</code> 设置的格式或缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">ss.str("Feb");<br>ss &gt;&gt; m; // 缺省格式</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., day_of_week)</pre>














      </td>















      <td>从流中取出一个 day of week 对象，使用由 <code class="computeroutput">weekday_format(...)</code> 设置的格式或缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">ss.str("Sun");<br>ss &gt;&gt; dow; // 缺省格式</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., day)</pre>














      </td>















      <td>从流中取出两位数字作为 day of month 对象。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"01" // 1月1日</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., year)</pre>














      </td>















      <td>从流中取出一个数字作为 year 对象。该数字的位数取决于年份格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">ss/str("2005");<br>ss &gt;&gt; y; // 缺省格式</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., days)</pre>














      </td>















      <td>从流中取出一个数字作为 days 对象。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">ss.str("356");<br>ss &gt;&gt; dys; // 一整年</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., date_period)</pre>














      </td>















      <td>从流中取出一个 date_period. dates 的格式使用由 <code class="computeroutput">format(..)</code>
设置的格式或缺省的日期格式。period 的类型(开或闭区间)以及使用的分隔符为 period_parser 所使用的设置。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., partial_date)</pre>














      </td>















      <td>从流中取出一个 partial_date date_generator 对象。月份格式使用由 <code class="computeroutput">month_format(..)</code> 设置的格式或缺省格式。day of month 以两位数字表示。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"01 Jan" // 缺省格式<br>"01 January" // 长月份名格式</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., date_generator)<br>  Date Generator Type:<br>    nth_day_of_the_week_in_month</pre>














      </td>















      <td>从流中取出一个&nbsp; nth_day_of_the_week_in_month 对象。月份格式使用由 <code class="computeroutput">month_format(..)</code> 设置的格式或缺省格式。weekday 格式为由 <code class="computeroutput">weekday_format(...)</code> 设置的格式或缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_parser</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"third Fri in May" // 缺省</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., date_generator)<br>  Date Generator Type:<br>    first_day_of_the_week_in_month</pre>














      </td>















      <td>从流中取出一个 first_day_of_the_week_in_month 对象。月份格式使用由 <code class="computeroutput">month_format(..)</code> 设置的格式或缺省格式。weekday 格式为由 <code class="computeroutput">weekday_format(...)</code> 设置的格式或缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_parser</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"first Wed of Jun" // 缺省</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., date_generator)<br>  Date Generator Type:<br>    last_day_of_the_week_in_month</pre>














      </td>















      <td>从流中取出一个 last_day_of_the_week_in_month 对象。月份格式使用由 <code class="computeroutput">month_format(..)</code> 设置的格式或缺省格式。weekday 格式为由 <code class="computeroutput">weekday_format(...)</code> 设置的格式或缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_parser</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"last Tue of Mar" // 缺省</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., date_generator)<br>  Date Generator Type:<br>    first_day_of_the_week_after</pre>














      </td>















      <td>从流中取出一个 first_day_of_the_week_after 对象。weekday 格式为由 <code class="computeroutput">weekday_format(...)</code> 设置的格式或缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_parser</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"first Sat after" // 缺省</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., date_generator)<br>  Date Generator Type:<br>    first_day_of_the_week_before</pre>














      </td>















      <td>从流中取出一个 first_day_of_the_week_before 对象。weekday 格式为由 <code class="computeroutput">weekday_format(...)</code> 设置的格式或缺省格式。其它短语元素在 <a href="date_time_io.html#io_objects.date_generators">date_generator_parser</a> 中设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">"first Mon before" // 缺省</pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















</div>















<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.time_facet"></a>时间 Facet</h3>














</div>














</div>














</div>















<a href="date_time_io.html#time_facet_intro">简介</a> -
  <a href="date_time_io.html#time_facet_constr">构造</a> -
  <a href="date_time_io.html#time_facet_accessors">访问器</a><a name="time_facet_intro"></a>
<h3>
<a name="id1002045"></a>简介</h3>















<p><code class="computeroutput">boost::date_time::time_facet</code> 是 <code class="computeroutput">boost::date_time::date_facet</code> 的一个扩展。time_facet 在 <code class="computeroutput">posix_time</code> 名字空间中被 typedef 为 <code class="computeroutput">time_facet</code> 和 <code class="computeroutput">wtime_facet</code>. 在 <code class="computeroutput">local_time</code> 名字空间中被 typedef 为 <code class="computeroutput">local_time_facet</code> 和 <code class="computeroutput">wlocal_time_facet</code>.
  </p>















<a name="time_facet_constr"></a>
<h3>
<a name="id1002109"></a>构造</h3>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th>语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">time_facet()</pre>














      </td>















      <td>缺省构造函数。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">time_facet(...)<br>  Parameters:<br>    char_type* format<br>    period_formatter_type<br>    special_values_formatter_type<br>    date_gen_formatter_type</pre>














      </td>















      <td>给定的 Format 被用于时间的输出。其它参数为格式化器对象。有关这些对象的更多细节请见 <a href="date_time_io.html#date_time.io_objects" title="Date Time Formatter/Parser Objects">这里</a>。这个构造函数为 format 以外的所有参数提供了缺省值。所以，可以使用 <code class="computeroutput">time_facet("%H:%M:S %m %d %Y")</code> .</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<a name="time_facet_accessors"></a>
<h3>
<a name="id1002201"></a>访问器</h3>















<p>time_facet 继承了 date_facet 的所有公有方法。因此，下面不再列出 date_facet 的方法。你可以从 <a href="date_time_io.html#date_time.date_facet" title="Date Facet">这个链接</a> 找到它们。
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void time_duration_format(...)<br>  Parameter:<br>    char_type*</pre>














      </td>















      <td>设置 time_duration 的格式。time_duration 的格式可以显示 duration 的符号。标志 <code class="computeroutput">'%+'</code> 表示总是显示符号。而标志 <code class="computeroutput">'%-'</code> 则表示仅在负数时显示符号。当前使用 '-' 和 '+' 字符来表示符号。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;time_duration_format("%+%H:%M");<br>// 只显示小时和分钟，总是显示符号<br>time_duration td1(3, 15, 56);<br>time_duration td2(-12, 25, 32);<br>ss &lt;&lt; td1; // "+03:15:56"<br>ss &lt;&lt; td2; // "-12:25:56"<br>            </pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void set_iso_format()</pre>














      </td>















      <td>将日期和时间的格式设为 ISO.</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;set_iso_format();<br>// "%Y%m%dT%H%M%S%F%q"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void set_iso_extended_format()</pre>














      </td>















      <td>将日期和时间的格式设为 ISO 扩展。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;set_iso_extended_format();<br>// "%Y-%m-%d %H:%M:%S%F%Q"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(...)<br>  Common parameters for all <br>  'put' functions:<br>    OutItrT <br>    ios_base<br>    char_type<br>  Unique parameter for 'put' funcs:<br>    posix_time object</pre>














      </td>















      <td>在 time_facet 中有3个 put 函数。它们的共同参数是：一个指向流中下一项的迭代器，一个
ios_base 对象，以及填充字符。每个 posix_time 对象具有自己的 put 函数。每个 put 函数描述如下。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., ptime)</pre>














      </td>















      <td>将一个 ptime 对象放入流中，使用由 <code class="computeroutput">format(...)</code> 设置的格式或缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., time_duration)</pre>














      </td>















      <td>将一个 time_duration 对象放入流中，使用由 <code class="computeroutput">time_duration_format(...)</code> 设置的格式或缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put(..., time_period)</pre>














      </td>















      <td>将一个 time_period 放入流中。日期和时间的格式使用由 <code class="computeroutput">format(..)</code>
设置的格式或缺省的日期/时间格式。period 的类型(开或闭区间)以及所用的分隔符使用 period_formatter 中的设置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















</div>















<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.time_input_facet"></a>时间输入 Facet</h3>














</div>














</div>














</div>















<a href="date_time_io.html#time_input_facet_intro">简介</a> -
  <a href="date_time_io.html#time_input_facet_constr">构造</a> -
  <a href="date_time_io.html#time_input_facet_accessors">访问器</a><a name="time_input_facet_intro"></a>
<h3>
<a name="id1002541"></a>简介</h3>















<p><code class="computeroutput">boost::date_time::time_input_facet</code> 是 <code class="computeroutput">date_input_facet</code> 的扩展。它在 <code class="computeroutput">boost::posix_time</code> 名字空间中被 typedef 为 <code class="computeroutput">time_input_facet</code> 和 <code class="computeroutput">wtime_input_facet</code>. 在 <code class="computeroutput">boost::local_time</code> 名字空间中被 typedef 为 <code class="computeroutput">local_time_input_facet</code> 和 <code class="computeroutput">wlocal_time_input_facet</code>.
  </p>















<a name="time_input_facet_constr"></a>
<h3>
<a name="id1002606"></a>构造</h3>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th>语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">time_input_facet()</pre>














      </td>















      <td>缺省构造函数。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">time_input_facet(string_type)</pre>














      </td>















      <td>给定的 Format 用于日期/时间的输入。所有其它格式使用它们的缺省值。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">time_input_facet(...)<br>  Parameters:<br>    string_type format<br>    format_date_parser_type<br>    special_values_parser_type<br>    period_parser_type<br>    date_gen_parser_type</pre>














      </td>















      <td>给定的 Format 用于日期/时间的输入。其它参数为分析器对象。有关这些对象的更多细节请见 <a href="date_time_io.html#date_time.io_objects" title="Date Time Formatter/Parser Objects">这里</a>。</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<a name="time_input_facet_accessors"></a>
<h3>
<a name="id1002706"></a>访问器</h3>















<p>time_input_facet 继承了 date_input_facet
的所有公有方法。因此，下面不列出 date_input_facet 的访问。你可以在 <a href="date_time_io.html#date_time.date_input_facet" title="Date Input Facet">这个链接</a> 中找到它们。
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void set_iso_format()</pre>














      </td>















      <td>设置时间格式为 ISO</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;set_iso_format();<br>// "%Y%m%dT%H%M%S%F%q"<br>"20051225T132536.789-0700"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void set_iso_extended_format()</pre>














      </td>















      <td>设置时间格式为 ISO 扩展。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;set_iso_extended_format();<br>// "%Y-%m-%d %H:%M:%S%F %Q"<br>"2005-12-25 13:25:36.789 -07:00"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void time_duration_format(...)<br>  Parameter:<br>    char_type*</pre>














      </td>















      <td>设置 time_duration 格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">f-&gt;time_duration_format("%H:%M");<br>// 只有小时和分钟</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(...)<br>  Common parameters for all <br>  'get' functions:<br>    InItrT from<br>    InItrT to<br>    ios_base<br>  Unique parameter for 'get' funcs:<br>    gregorian object</pre>














      </td>















      <td>在 time_input_facet 中有3个 get 函数。它们的共同参数是：一个指向流的开始位置的迭代器，一个指向流的结束位置的迭代器，以及一个 ios_base 对象。每个格里历对象都有自己的 get 函数。每个 get
函数的描述如下。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., ptime)</pre>














      </td>















      <td>从流中取出一个 ptime 对象，使用由 <code class="computeroutput">format(...)</code> 设置的格式或缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">ss.str("2005-Jan-01 13:12:01");<br>ss &gt;&gt; pt; // 缺省格式</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., time_duration)</pre>














      </td>















      <td>从流中取出一个 time_duration 对象，使用由 <code class="computeroutput">time_duration_format(...)</code> 设置的格式或缺省格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">ss.str("01:25:15.000123000");<br>ss &gt;&gt; td; // 缺省格式</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">InItrT get(..., time_period)</pre>














      </td>















      <td>从流中取出一个 time_period 对象。日期/时间的格式使用由 <code class="computeroutput">format(..)</code>
设置的格式或缺省的日期时间格式。 period 的类型(开或闭区间)以及所用的分隔符使用 period_parser 的设置。</td>















    </tr>















    <tr>














      <td>完整的例子请见 <a href="date_time_io.html#date_time.io_tutorial" title="Date Time IO Tutorial">指南</a>。</td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















</div>















<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.io_objects"></a>日期时间格式化器/分析器对象</h3>














</div>














</div>














</div>















<h2>
<a name="id1003011"></a></h2>















<a href="date_time_io.html#io_objects.periods">时间段</a> |
  <a href="date_time_io.html#io_objects.date_generators">日期生成器</a> |
  <a href="date_time_io.html#io_objects.special_values">特殊值</a> |
  <a href="date_time_io.html#io_objects.format_date_parser">格式化日期分析器</a><a name="io_objects.periods"></a>
<h3>
<a name="id1003056"></a>时间段</h3>















<p>period_formatter 和 period_parser 为 date_periods, time_periods,
以及未来版本中的 local_date_time_periods
的输入和输出提供了统一的接口。用户可以控制所用的定界符、日期/时间组件的格式，以及时间段的表示形式。日期/时间组件的格式通过
date_time 的输入输出 facets 来控制。</p>















<h4>
<a name="id1003071"></a>时间段的表示形式</h4>















<p>时间段是以开区间参数来构造的。first 值为开始的时间点，并且包含在时间段中。end 值则不包含在时间段中，它紧随在 last 值之后：[begin/end). 不过，时间段既可以作为开区间也可以作为闭区间的方式来进行流操作。</p>















<pre class="screen">[2003-Jan-01/2003-Dec-31] &lt;-- 包含365天的时间段<br>[2003-Jan-01/2004-Jan-01) &lt;-- 包含365天的时间段</pre>















<h4>
<a name="id1003094"></a>定界符</h4>















<p>共有四个定界符。它们的缺省值是：</p>















<table class="simplelist" summary="Simple list" border="0">















  <tbody>














    <tr>














      <td>"\" - 分隔符</td>














    </tr>















    <tr>














      <td>"[" - 开始定界符</td>














    </tr>















    <tr>














      <td>")" - 开区间的结束定界符</td>














    </tr>















    <tr>














      <td>"]" - 闭区间的结束定界符</td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>















<p>用户可以提供定制的定界符。用户定制的定界符可以包含空格。</p>















<h4>
<a name="id1003127"></a>定制</h4>















<p>时间段的形式和定界符可以通过构造参数或访问器函数来设置。而定制的时间段分析器/格式化器则可以作为构造参数来构造新的 facet, 或者通过访问器函数设置到已有的 facet 中。</p>















<h4>
<a name="id1003140"></a>时间段格式化器/分析器的参考</h4>



完整的类参考请见：<code class="computeroutput"><a href="../boost/date_time/period_formatter.html" title="Class template period_formatter">Period Formatter Doxygen Reference</a></code> 和 <code class="computeroutput"><a href="../boost/date_time/period_parser.html" title="Class template period_parser">Period Parser Doxygen Reference</a></code>
<p>
    </p>















<h4>
<a name="id1003172"></a>时间段格式化器构造</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th valign="top">语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>














    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">period_formatter(...)<br>  Parameters:<br>    range_display_options<br>    char_type*<br>    char_type*<br>    char_type*<br>    char_type*</pre>














      </td>















      <td>注：所有五个构造函数都具有缺省值，所以这个构造函数也可用为缺省构造函数。<code class="computeroutput">range_display_options</code> 是 <code class="computeroutput">period_formatter</code> 类的一个公有枚举类型。可能的选择为 AS_OPEN_RANGE 或 AS_CLOSED_RANGE. 缺省值是闭区间。时间段有三个主要的时间点：begining, last, 和 end. 闭区间时间段格式为
[begin,end), 而开区间时间格式为 [begin,last].
四个 char_type* 参数分别是：时间段分隔符，开始定界符，开区间结束定界符，和闭区间结束定界符。</td>















    </tr>














  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
    </p>















<h4>
<a name="id1003245"></a>时间段格式化器访问器</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">range_display_options range_option()</pre>














      </td>















      <td>返回区间显示的当前设置(AS_OPEN_RANGE 或 AS_CLOSED_RANGE).</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void range_option(...)<br>  Parameter:<br>    range_display_options</pre>














      </td>















      <td>设置区间显示选项(AS_OPEN_RANGE 或 AS_CLOSED_RANGE).</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void delimiter_strings(...)<br>  Parameters:<br>    string_type<br>    string_type<br>    string_type<br>    string_type</pre>














      </td>















      <td>设置格式化器中的定界符字符串。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">string beg("-&gt;| ");<br>string sep(" || ");<br>string opn(" -&gt;|");<br>string clo(" |&lt;-");<br>pf.delimiter_strings(beg, sep, <br>                     opn, clo);</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">put_period_start_delimeter(...)<br>  Return Type:<br>    OutItrT<br>  Parameter:<br>    OutItrT</pre>














      </td>















      <td>将开始定界符放入到流中由 OutItrT 参数所指的位置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">put_period_sepatator(...)<br>  Return Type:<br>    OutItrT<br>  Parameter:<br>    OutItrT</pre>














      </td>















      <td>将分隔符放入到流中由 OutItrT 参数所指的位置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">put_period_end_delimeter(...)<br>  Return Type:<br>    OutItrT<br>  Parameter:<br>    OutItrT</pre>














      </td>















      <td>将结束定界符放入到流中由 OutItrT 参数所指的位置。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put_period(...)<br>  Parameters:<br>    OutItrT<br>    ios_base<br>    char_type<br>    period_type<br>    facet_type</pre>














      </td>















      <td>将一个时间段放入流中，使用设置的定界符，分隔符和区间表示法。参数 facet 用于输出时间段中的日期(或时间)。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>
    </p>















<h4>
<a name="id1003498"></a>时间段分析器构造</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th valign="top">语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">period_parser(...)<br>  Parameters:<br>    period_range_option<br>    char_type*<br>    char_type*<br>    char_type*<br>    char_type*</pre>














      </td>















      <td>注：所有五个构造函数都具有缺省值，所以这个构造函数也可用为缺省构造函数。<code class="computeroutput">period_range_option</code><code class="computeroutput"></code> 是&nbsp;<code class="computeroutput">period_parser</code> 类的一个公有枚举类型。可能的选择为 AS_OPEN_RANGE 或 AS_CLOSED_RANGE. 缺省值是闭区间。时间段有三个主要的时间点：begining, last, 和 end. 闭区间时间段格式为
[begin,end), 而开区间时间格式为 [begin,last].
四个 char_type* 参数分别是：时间段分隔符，开始定界符，开区间结束定界符，和闭区间结束定界符。<br>



      </td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">period_parser(period_parser)</pre>














      </td>















      <td>复制构造函数</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
    </p>















<h4>
<a name="id1003586"></a>时间段分析器访问器</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">period_range_option range_option()</pre>














      </td>















      <td>返回时间段区间表示的当前设置(AS_OPEN_RANGE 或 AS_CLOSED_RANGE).</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void range_option(...)<br>  Parameter:<br>    period_range_option </pre>














      </td>















      <td>设置时间段区间的表示选项(AS_OPEN_RANGE 或 AS_CLOSED_RANGE).</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void delimiter_strings(...)<br>  Parameters:<br>    string_type<br>    string_type<br>    string_type<br>    string_type</pre>














      </td>















      <td>为分析器设置新的定界符字符串。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">string beg("-&gt;| ");<br>string sep(" || ");<br>string opn(" -&gt;|");<br>string clo(" |&lt;-");<br>pp.delimiter_strings(beg, sep, <br>                     opn, clo);</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">collection_type delimiter_strings()</pre>














      </td>















      <td>返回分析器中当前的定界符字符串。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">period_type get_period(...)<br>  Parameters:<br>    stream_itr_type<br>    stream_itr_type<br>    ios_base<br>    period_type<br>    duration_type<br>    facet_type</pre>














      </td>















      <td>从流中分析出一个时间段。两个迭代器参数分别指向流的开始位置和结束位置。duration_type 与 period 的类型相关，例如：<code class="computeroutput">date_period</code>&nbsp;以 <code class="computeroutput">days</code> 作为 duration_type.&nbsp;根据 facet 参数中的格式和字符串来分析得取时间段。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>_____________________________________________________</p>















<a name="io_objects.date_generators"></a>
<h3>
<a name="id1003800"></a>日期生成器</h3>















<p>date_generator 格式化器和分析器提供了灵活性，允许用户使用定制的"短语元素"。这些短语元素是 date_generators 中的"分隔"单
词。例如，在 date_generator "Second Monday of March" 中，"Second" 和
"of" 都是短语元素，而 "Monday" 和 "March" 就是日期元素。日期元素的定制由 facet
负责。日期元素和短语元素的顺序是不能改变的。在进行分析时，date_generator 的所有元素必须都能正确分析，否则将抛出一个
ios_base::failure 异常。</p>















<h4>
<a name="id1003809"></a>定制</h4>















<p>缺省的 "phrase_strings" 为：
    </p>















<table class="simplelist" summary="Simple list" border="0">














  <tbody>














    <tr>















      <td>"first"</td>















      <td>"second"</td>















      <td>"third"</td>















      <td>"fourth"</td>















      <td>"fifth"</td>















      <td>"last"</td>















      <td>"before"</td>















      <td>"after"</td>















      <td>"of"</td>















    </tr>














  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>















<p>一组定制的 phrase_strings 必须保持以下顺序(如："1st", "2nd", "3rd", "4th", "5th", "last", "prior",
"past", "in")。</p>















<p>例如，使用缺省的 phrase_strings 以及缺省 facet 格式的 weekday &amp; month: </p>















<pre class="screen">"first Tue of Mar"</pre>















<p>而使用定制的 phrase_strings: </p>















<pre class="screen">"1st Tue in Mar"</pre>















<p>
  </p>















<p>短语元素的定制可以在构造参数中设置，也可以通过访问器函数来设置。一个定制的 date_generator
分析器/格式化器可以用作一个新的 facet 的构造参数，或者通过访问器函数设置到已有的 facet 中。</p>















<p>重要说明：在版本1.33以前，partial_date 的输出形如 "1 Jan"，其中日期是用一位或两位数字来表示的。而新的版本中则总是以两位数字表示日期 - "01 Jan"。</p>















<h4>
<a name="id1003893"></a>日期生成器参考</h4>


完整的类参考请见：<code class="computeroutput"><a href="../boost/date_time/date_generator_formatter.html" title="Class template date_generator_formatter">Date Generator Formatter Doxygen Reference</a></code> 和 <code class="computeroutput"><a href="../boost/date_time/date_generator_parser.html" title="Class template date_generator_parser">Date Generator Parser Doxygen Reference</a></code>
<p>
    </p>















<h4>
<a name="id1003924"></a>日期生成器的格式化器构造</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th valign="top">语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_generator_formatter()</pre>














      </td>















      <td>使用缺省的日期生成器元素。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_generator_formatter(...)<br>  Parameters:<br>    string_type first_element<br>    string_type second_element<br>    string_type third_element<br>    string_type fourth_element<br>    string_type fifth_element<br>    string_type last_element<br>    string_type before_element<br>    string_type after_element<br>    string_type of_element</pre>














      </td>















      <td>使用给定的元素字符串构造一个 date_generator_formatter.</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
    </p>















<h4>
<a name="id1003996"></a>日期生成器的格式化器访问器</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void elements(...)<br>  Parameters:<br>    collection_type<br>    phrase_elements</pre>














      </td>















      <td>替换当前的短语元素。参数 <code class="computeroutput">phrase_elements</code> 为枚举值，表示新的短语集中的第一个元素(缺省为 first)。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">// col 中存有 "final", "prior", "following", 和 "in"<br>typedef date_generator_formatter dgf;                                  <br>dgf formatter();<br>formatter.elements(col, dgf::last);<br>// 现在 dgf 的完整元素为：<br>// "first", "second", "third", "fourth", "fifth", <br>// "final", "prior", "following", 和 "in"</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">put_partial_date(...)<br>  Return Type:<br>    facet_type::OutItrT<br>  Parameters:<br>    OutItrT next<br>    ios_base<br>    char_type fill<br>    partial_date<br>    facet_type</pre>














      </td>















      <td>用于 partial_date 的&nbsp;put 函数。这是一个以 facet_type 为参数的模板函数。</td>















    </tr>















    <tr>














      <td>输出一个 partial_date =&gt; "dd Month".</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">put_nth_kday(...)<br>  Return Type:<br>    facet_type::OutItrT<br>  Parameters:<br>    OutItrT next<br>    ios_base<br>    char_type fill<br>    nth_kday_type<br>    facet_type</pre>














      </td>















      <td>用于 nth_kday_type&nbsp;的&nbsp;put 函数。这是一个以 facet_type 为参数的模板函数。</td>















    </tr>















    <tr>














      <td>输出一个&nbsp;nth_day_of_the_week_in_month =&gt; "nth weekday of month".</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">put_first_kday(...)<br>  Return Type:<br>    facet_type::OutItrT<br>  Parameters:<br>    OutItrT next<br>    ios_base<br>    char_type fill<br>    first_kday_type<br>    facet_type</pre>














      </td>















      <td>用于 first_kday_type 的&nbsp;put 函数。这是一个以 facet_type 为参数的模板函数。</td>















    </tr>















    <tr>














      <td>输出一个 first_day_of_the_week_in_month =&gt; "first weekday of month".</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">put_last_kday(...)<br>  Return Type:<br>    facet_type::OutItrT<br>  Parameters:<br>    OutItrT next<br>    ios_base<br>    char_type fill<br>    last_kday_type<br>    facet_type</pre>














      </td>















      <td>用于 last_kday_type 的&nbsp;put 函数。这是一个以 facet_type 为参数的模板函数。</td>















    </tr>















    <tr>














      <td>输出一个 last_day_of_the_week_in_month =&gt; "last weekday of month".</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">put_kday_before(...)<br>  Return Type:<br>    facet_type::OutItrT<br>  Parameters:<br>    OutItrT next<br>    ios_base<br>    char_type fill<br>    kday_before_type<br>    facet_type</pre>














      </td>















      <td>用于 kday_before_type 的&nbsp;put 函数。这是一个以 facet_type 为参数的模板函数。</td>















    </tr>















    <tr>














      <td>输出一个&nbsp;first_day_of_the_week_before =&gt; "weekday before"</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">put_kday_after(...)<br>  Return Type:<br>    facet_type::OutItrT<br>  Parameters:<br>    OutItrT next<br>    ios_base<br>    char_type fill<br>    kday_after_type<br>    facet_type</pre>














      </td>















      <td>用于 kday_after_type 的&nbsp;put 函数。这是一个以 facet_type 为参数的模板函数。</td>















    </tr>















    <tr>














      <td>输出一个 first_day_of_the_week_after =&gt; "weekday after".</td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>
    </p>















<h4>
<a name="id1004257"></a>日期生成器的分析器构造</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th valign="top">语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_generator_parser()</pre>














      </td>















      <td>使用缺省的日期生成器元素。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_generator_parser(...)<br>  Parameter:<br>    date_generator_parser</pre>














      </td>















      <td>复制构造函数。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_generator_parser(...)<br>  Parameters:<br>    string_type first_element<br>    string_type second_element<br>    string_type third_element<br>    string_type fourth_element<br>    string_type fifth_element<br>    string_type last_element<br>    string_type before_element<br>    string_type after_element<br>    string_type of_element</pre>














      </td>















      <td>使用给定的元素字符串构造一个 date_generator_parser.</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
    </p>















<h4>
<a name="id1004345"></a>日期生成器的分析器访问器</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void element_strings(...)<br>  Parameter:<br>    collection_type</pre>














      </td>















      <td>为日期生成器替换一组新的元素字符串。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void element_strings(...)<br>  Parameters:<br>    string_type first<br>    string_type second<br>    string_type third<br>    string_type fourth<br>    string_type fifth<br>    string_type last<br>    string_type before<br>    string_type after<br>    string_type of</pre>














      </td>















      <td>为日期生成器元素替换一组新值。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">get_partial_date_type(...)<br>  Return Type:<br>    facet_type::partial_date_type<br>  Parameters:<br>    stream_itr_type next<br>    stream_itr_type str_end<br>    ios_base<br>    facet_type</pre>














      </td>















      <td>模板函数，从流中分析出一个 date_generator.</td>















    </tr>















    <tr>














      <td>分析一个 partial_date =&gt; "dd Month".</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">get_nth_kday_type(...)<br>  Return Type:<br>    facet_type::nth_kday_type<br>  Parameters:<br>    stream_itr_type next<br>    stream_itr_type str_end<br>    ios_base<br>    facet_type</pre>














      </td>















      <td>模板函数，从流中分析出一个 date_generator.</td>















    </tr>















    <tr>














      <td>分析一个 nth_day_of_the_week_in_month =&gt; "nth weekday of month".</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">get_first_kday_type(...)<br>  Return Type:<br>    facet_type::firat_kday_type<br>  Parameters:<br>    stream_itr_type next<br>    stream_itr_type str_end<br>    ios_base<br>    facet_type</pre>














      </td>















      <td>模板函数，从流中分析出一个 date_generator.</td>















    </tr>















    <tr>














      <td>分析一个 first_day_of_the_week_in_month =&gt; "first weekday of month".</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">get_last_kday_type(...)<br>  Return Type:<br>    facet_type::last_kday_type<br>  Parameters:<br>    stream_itr_type next<br>    stream_itr_type str_end<br>    ios_base<br>    facet_type</pre>














      </td>















      <td>模板函数，从流中分析出一个&nbsp;date_generator.</td>















    </tr>















    <tr>














      <td>分析一个 last_day_of_the_week_in_month =&gt; "last weekday of month".</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">get_kday_before_type(...)<br>  Return Type:<br>    facet_type::kday_before_type<br>  Parameters:<br>    stream_itr_type next<br>    stream_itr_type str_end<br>    ios_base<br>    facet_type</pre>














      </td>















      <td>模板函数，从流中分析出一个&nbsp;date_generator.</td>















    </tr>















    <tr>














      <td>分析一个 first_day_of_the_week_before =&gt; "weekday before"</td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">get_kday_after_type(...)<br>  Return Type:<br>    facet_type::kday_after_type<br>  Parameters:<br>    stream_itr_type next<br>    stream_itr_type str_end<br>    ios_base<br>    facet_type</pre>














      </td>















      <td>模板函数，从流中分析出一个&nbsp;date_generator.</td>















    </tr>















    <tr>














      <td>分析一个 first_day_of_the_week_after =&gt; "weekday after".</td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>_____________________________________________________</p>















<a name="io_objects.special_values"></a>
<h3>
<a name="id1004629"></a>特殊值</h3>















<p>date_time 库中使用了五个 special_values. 它们是：
    </p>















<table class="simplelist" summary="Simple list" border="0">














  <tbody>














    <tr>















      <td>not_a_date_time</td>















      <td>neg_infin</td>















      <td>pos_infin</td>















      <td>min_date_time</td>















      <td>max_date_time</td>















    </tr>














  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>















<p>
  </p>















<p>用于表示这些类型的缺省字符串是："not-a-date-time", "-infinity", "+infinity", "minimum-date-time",
"maximum-date-time". 在输出时，min_date-time 和 max_date_time以普通的日期/时间表示来显示，分别为："1400-Jan-01" 和
"9999-Dec-31".</p>















<h4>
<a name="id1004672"></a>定制</h4>















<p>特殊值分析器/格式化器允许用户为这些特殊值设置定制的字符串。这些字符串可以用为构造参数设置给一个新的 facet, 或者可以通过访问器函数设置给一个已有的
facet.</p>















<h4>
<a name="id1004684"></a>特殊值的分析器/格式化器参考</h4>

完整的类参考请见：<code class="computeroutput"><a href="../boost/date_time/special_values_formatter.html" title="Class template special_values_formatter">Special Values Formatter Doxygen Reference</a></code> 以及 <code class="computeroutput"><a href="../boost/date_time/special_values_parser.html" title="Class template special_values_parser">Special Values Parser Doxygen Reference</a></code>
<p>
    </p>















<h4>
<a name="id1004716"></a>特殊值的格式化器构造函数</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th valign="top">语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">special_values_formatter()</pre>














      </td>















      <td>使用缺省的特殊值字符串的构造函数。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">special_values_formatter(...)<br>  Parameters:<br>    collection_type::iterator<br>    collection_type::iterator</pre>














      </td>















      <td>使用 collection 中的值进行构造。注：只使用 collection 中的前三个字符串。minimum_date_time 和 maximum_date_time 的字符串被忽略，因为这两个特殊值以普通的日期/时间来输出。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">special_values_formatter(...)<br>  Parameters:<br>    char_type*<br>    char_type*</pre>














      </td>















      <td>从一个字符串数组构造特殊值格式化器。</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>
    </p>















<h4>
<a name="id1004808"></a>特殊值格式化器的访问器</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">OutItrT put_special(...)<br>  Parameters:<br>    OutItrT next<br>    special_values value</pre>














      </td>















      <td>将给定的特殊值放入到流中。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date d1(not_a_date_time);<br>date d2(minimum_date_time);<br>special_values_formatter formatter;<br>formatter.put_special(itr, d1); <br>// 放入: "not-a-date-time"<br>formatter.put_special(itr, d2); <br>// 放入: "1400-Jan-01"</pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>
    </p>















<h4>
<a name="id1004886"></a>特殊值分析器的构造函数</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th valign="top">语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">special_values_parser()</pre>














      </td>















      <td>&nbsp;</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">special_values_parser(...)<br>  Parameters:<br>    collection_type::iterator<br>    collection_type::iterator</pre>














      </td>















      <td>使用 collection 中的字符串构造一个特殊值分析器。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">special_values_parser(...)<br>  Parameter:<br>    scpecial_values_parser</pre>














      </td>















      <td>复制构造函数。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">special_values_parser(...)<br>  Parameters:<br>    string_type nadt_str<br>    string_type neg_inf_str<br>    string_type pos_inf_str<br>    string_type min_dt_str<br>    string_type max_dt_str</pre>














      </td>















      <td>使用给定的字符串构造一个特殊值分析器。</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>
    </p>















<h4>
<a name="id1004992"></a>特殊值分析器的访问器</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void sv_strings(...)<br>  Parameters:<br>    string_type nadt_str<br>    string_type neg_inf_str<br>    string_type pos_inf_str<br>    string_type min_dt_str<br>    string_type max_dt_str</pre>














      </td>















      <td>以给定的字符串替换特殊值字符串。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">bool match(...)<br>  Parameters:<br>    stream_itr_type beg<br>    stream_itr_type end<br>    match_results</pre>














      </td>















      <td>返回 true 如果分析成功。对于一次成功的分析，<code class="computeroutput">mr.current_match</code> 被设置为一个 int 值，对应于等价的 special_value.</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">// 流中有 "maximum_date_time"<br>typedef special_values_parser svp;<br>svp parser;<br>svp::match_results mr;<br>if(parser.match(itr, str_end, mr)) {<br>  d = date(static_cast&lt;special_values&gt;(<br>           mr.match_results))<br>} else {<br>  // 错误，分析失败<br>}<br>// d == "9999-Dec-31"</pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>_____________________________________________________</p>















<a name="io_objects.format_date_parser"></a>
<h3>
<a name="id1005095"></a>格式化日期分析器</h3>















<p>格式化日期分析器是一个保存有月份名和周日的全名及其缩写名的字符串的对象。可以在构造时对字符串进行定制，或者通过访问器函数替换已有 format_date_parser 中的字符串。构造函数以及访问器函数均以一个字符串 vector 作为其参数。</p>















<h4>
<a name="id1005131"></a>格式化日期分析器的参考</h4>

完整的类参考请见：<code class="computeroutput"><a href="../boost/date_time/format_date_parser.html" title="Class template format_date_parser">Doxygen Reference</a></code>
<p>
    </p>















<h4>
<a name="id1005152"></a>格式化日期分析器的构造函数</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead><tr>















    <th valign="top">语法</th>















    <th>说明</th>















  </tr>














  </thead>
  <tbody>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">format_date_parser(...)<br>                Parameters:<br>                string_type format<br>                std::locale</pre>














      </td>















      <td>创建一个分析器，以给定的格式来分析日期(在那些函数中没有格式化参数)。所使用的名字及缩写从给定的 locale 中取出。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">format_date_parser(...)<br>  Parameters:<br>    string_type format<br>    input_collection_type<br>    input_collection_type<br>    input_collection_type<br>    input_collection_type</pre>














      </td>















      <td>创建一个分析器，使用给定的组件。参数
input_collection_type 为：短月份名，长月份名，短周日名，长周日名(按顺序)。这些 collections 必须包含每个月份和每个周日(从一月和星期天开始)的值。</td>















    </tr>















    <tr>















      <td valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">format_date_parser(...)<br>  Parameters:<br>    format_date_parser</pre>














      </td>















      <td>复制构造函数。</td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















<p>
    </p>















<h4>
<a name="id1005248"></a>格式化日期分析器的访问器</h4>















<p>
    </p>















<div class="informaltable">
<table class="table">















  <colgroup><col><col></colgroup>
  <thead>
  <tr>















    <th rowspan="2" valign="top">语法</th>















    <th>说明</th>















  </tr>















  <tr>














    <th>例子</th>














  </tr>















  </thead>
  <tbody>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">string_type format()</pre>














      </td>















      <td>返回在那些不带格式化参数的函数中进行日期分析时所使用的格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void format(string_type)</pre>














      </td>















      <td>设置在那些不带格式化参数的函数中进行日期分析时所使用的格式。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void short_month_names(...)<br>  Parameter:<br>    input_collection_type names</pre>














      </td>















      <td>替换分析器所用的短月份名。collection 必须包含每个月份的值，从一月开始。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void long_month_names(...)<br>  Parameter:<br>    input_collection_type names</pre>














      </td>















      <td>替换分析器所用的长月份名。collection 必须包含每个月份的值，从一月开始。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void short_weekday_names(...)<br>  Parameter:<br>    input_collection_type names</pre>














      </td>















      <td>替换分析器所用的短周日名。collection 必须包含每个周日的值，从星期天开始。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">void long_weekday_names(...)<br>  Parameter:<br>    input_collection_type names</pre>














      </td>















      <td>替换分析器所用的长周日名。collection 必须包含每个周日的值，从星期天开始。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_type parse_date(...)<br>  Parameters:<br>    string_type input<br>    string_type format <br>    special_values_parser</pre>














      </td>















      <td>以给定格式从给定的输入中分析日期。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">string inp("2005-Apr-15");<br>string format("%Y-%b-%d");<br>date d;<br>d = parser.parse_date(inp, <br>                      format,<br>                      svp);<br>// d == 2005-Apr-15</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_type parse_date(...)<br>  Parameters:<br>    istreambuf_iterator input<br>    istreambuf_iterator str_end<br>    special_values_parser</pre>














      </td>















      <td>使用分析器的格式从流中分析日期。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen"></pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">date_type parse_date(...)<br>  Parameters:<br>    istreambuf_iterator input<br>    istreambuf_iterator str_end<br>    string_type format<br>    special_values_parser</pre>














      </td>















      <td>使用给定格式从流中分析日期。</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">// 流中有 "2005-04-15"<br>string format("%Y-%m-%d");<br>date d;<br>d = parser.parse_date(itr, <br>                      str_end, <br>                      format,<br>                      svp);<br>// d == 2005-Apr-15</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">month_type parse_month(...)<br>  Parameters:<br>    istreambuf_iterator input<br>    istreambuf_iterator str_end<br>    string_type format</pre>














      </td>















      <td>使用给定的格式从流中分析月份。如果无法分析则抛出 bad_month.</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">// 流中有 "March"<br>string format("%B");<br>greg_month m;<br>m = parser.parse_month(itr, <br>                       str_end, <br>                       format);<br>// m == March</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">day_type parse_day_of_month(...)<br>  Parameters:<br>    istreambuf_iterator input<br>    istreambuf_iterator str_end</pre>














      </td>















      <td>从流中分析一个 day_of_month. 日期必须以两位数字出现(01-31)，否则抛出 bad_day_of_month.</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">// 流中有 "01"<br>greg_day d;<br>d = parser.parse_day_of_month(itr, <br>                       str_end);<br>// d == 1st</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">day_type parse_var_day_of_month(...)<br>  Parameters:<br>    istreambuf_iterator input<br>    istreambuf_iterator str_end</pre>














      </td>















      <td>从流中分析一个 day_of_month. 日期必须以一位或两位数字出现(1-31)，否则抛出 bad_day_of_month.</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">// 流中有 "1"<br>greg_day d;<br>d = parser.parse_var_day_of_month(itr, <br>                       str_end);<br>// d == 1st</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">day_of_week_type parse_weekday(...)<br>  Parameters:<br>    istreambuf_iterator input<br>    istreambuf_iterator str_end<br>    string_type format</pre>














      </td>















      <td>以给定格式从流中分析一个周日。如果无法分析则抛出 bad_weekday.</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">// 流中有 "Tue"<br>string format("%a");<br>greg_weekday wd;<br>wd = parser.parse_weekday(itr, <br>                          str_end, <br>                          format);<br>// wd == Tuesday</pre>














      </td>














    </tr>















    <tr>















      <td rowspan="2" valign="top">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">year_type parse_year(...)<br>  Parameters:<br>    istreambuf_iterator input<br>    istreambuf_iterator str_end<br>    string_type format</pre>














      </td>















      <td>以给定格式从流中分析一个年份。如果无法分析则抛出 bad year.</td>















    </tr>















    <tr>














      <td>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <pre class="screen">// 流中有 "98"<br>string format("%y");<br>greg_year y;<br>y = parser.parse_year(itr, <br>                      str_end, <br>                      format);<br>// y == 1998</pre>














      </td>














    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>














</div>















<p>
  </p>















</div>















<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.io_tutorial"></a>日期时间 IO 指南</h3>














</div>














</div>














</div>















<h2>
<a name="id1005729"></a></h2>















<a href="date_time_io.html#basic_use">基本用法</a> |
  <a href="date_time_io.html#format_strings">格式化串</a> |
  <a href="date_time_io.html#content_strings">内容字符串</a> |
  <a href="date_time_io.html#tut_sv">特殊值</a> |
  <a href="date_time_io.html#tut_dper">日期/时间段</a> |
  <a href="date_time_io.html#tut_dgen">日期生成器</a><a name="basic_use"></a>
<h4>
<a name="id1005788"></a>基本用法</h4>















<p>在调用 '&gt;&gt;' 和 '&lt;&lt;' 时，会自动使用 Facets. 可以进行流输入输出的 date_time 对象列举如下：</p>















<h5>
<a name="id1005804"></a>格里历</h5>















<p>
    <code class="computeroutput">date</code>, 
    <code class="computeroutput">days</code>, 
    <code class="computeroutput">date_period</code>, 
    <code class="computeroutput">greg_month</code>, 
    <code class="computeroutput">greg_weekday</code>, 
    <code class="computeroutput">greg_year</code>, 
    <code class="computeroutput">partial_date</code>, 
    <code class="computeroutput">nth_day_of_the_week_in_month</code>, 
    <code class="computeroutput">first_day_of_the_week_in_month</code>, 
    <code class="computeroutput">last_day_of_the_week_in_month</code>, 
    <code class="computeroutput">first_day_of_the_week_after</code>, 
    <code class="computeroutput">first_day_of_the_week_before</code>
  </p>















<h5>
<a name="id1005885"></a>Posix_time</h5>















<p>
    <code class="computeroutput">ptime</code>, 
    <code class="computeroutput">time_period</code>, 
    <code class="computeroutput">time_duration</code>
  </p>















<h5>
<a name="id1005911"></a>本地时间</h5>















<p>
    <code class="computeroutput">local_date_time</code>
  </p>















<p>以下是使用新的 IO 代码的简单例子，全部使用缺省值。(这个例子可以在 <code class="computeroutput">libs/date_time/examples/tutorial</code> 目录下找到)
  </p>















<pre class="programlisting">    <br>  date d(2004, Feb, 29);<br>  time_duration td(12,34,56,789);<br>  stringstream ss;<br>  ss &lt;&lt; d &lt;&lt; ' ' &lt;&lt; td;<br>  ptime pt(not_a_date_time);<br>  cout &lt;&lt; pt &lt;&lt; endl; // "not-a-date-time"<br>  ss &gt;&gt; pt;<br>  cout &lt;&lt; pt &lt;&lt; endl; // "2004-Feb-29 12:34:56.000789"<br>  ss.str("");<br>  ss &lt;&lt; pt &lt;&lt; " EDT-05EDT,M4.1.0,M10.5.0";<br>  local_date_time ldt(not_a_date_time);<br>  ss &gt;&gt; ldt;<br>  cout &lt;&lt; ldt &lt;&lt; endl; // "2004-Feb-29 12:34:56.000789 EDT"<br>    <br>  </pre>















<p>这个例子使用了输入和输出 facets 的缺省值。缺省的格式正如上例所示。注意：local_date_time 的流输入只能用一个 <a href="local_time.html#date_time.local_time.posix_time_zone" title="Posix Time Zone">posix 时区字符串</a> 来完成。缺省的输出格式将使用时区缩写。这个格式可以被改变，以使得输入和输出相匹配(在本指南稍后将会看到)。</p>















<a name="format_strings"></a>
<h4>
<a name="id1005971"></a>格式化串</h4>















<p>格式化串控制着所用的日期/时间元素的顺序、类型和风格。facets 提供了一些预定义的格式(iso_format_specifier, iso_format_extended_specifier, 和
default_date_format)，不过用户也可以很容易地创建自己的格式。</p>















  (继续前一个例子)
  
<pre class="programlisting">    <br>  local_time_facet* output_facet = new local_time_facet();<br>  local_time_input_facet* input_facet = new local_time_input_facet();<br>  ss.imbue(locale(locale::classic(), output_facet));<br>  ss.imbue(locale(ss.getloc(), input_facet));<br>  <br>  output_facet-&gt;format("%a %b %d, %H:%M %z");<br>  ss.str("");<br>  ss &lt;&lt; ldt;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "Sun Feb 29, 12:34 EDT"<br><br>  output_facet-&gt;format(local_time_facet::iso_time_format_specifier);<br>  ss.str("");<br>  ss &lt;&lt; ldt;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "20040229T123456.000789-0500"<br> <br>  output_facet-&gt;format(local_time_facet::iso_time_format_extended_specifier);<br>  ss.str("");<br>  ss &lt;&lt; ldt;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "2004-02-29 12:34:56.000789-05:00"<br>    <br>  </pre>















<p>格式化串前不仅限于日期/时间元素。可以往格式化串中放入其它内容。注意：如果在输入格式化串中存在其它内容，那么输入的数据中也必须包含这些内容。</p>















  (继续前一个例子)
  
<pre class="programlisting">    <br>  // 格式中的额外单词<br>  string my_format("The extended ordinal time %Y-%jT%H:%M can also be \<br>  represented as %A %B %d, %Y");<br>  output_facet-&gt;format(my_format.c_str());<br>  input_facet-&gt;format(my_format.c_str());<br>  ss.str("");<br>  ss &lt;&lt; ldt;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl;<br><br>  // 在输入中必须要有相匹配的单词<br>  ss.str("The extended ordinal time 2005-128T12:15 can also be \<br>  represented as Sunday May 08, 2005");<br>  ss &gt;&gt; ldt;<br>  cout &lt;&lt; ldt &lt;&lt; endl;<br>    <br>  </pre>















<a name="content_strings"></a>
<h4>
<a name="id1006003"></a>内容字符串</h4>















<p>前面我们示范了如何通过格式化以极少量的工作量来达到大量的定制化。更进一步的定制化可以通过用户自定义元素(即字符串)来完成。可以被定制的元素包括：特殊值的名字、月份名、月份缩写、周日名、周日缩写、日期/时间段的定界符，以及
date_generators 的短语元素。</p>















<p>以上元素的缺省值如下：</p>















<h5>
<a name="id1006029"></a>特殊值</h5>















<p>
    <code class="computeroutput">not-a-date-time</code>, 
    <code class="computeroutput">-infinity</code>, 
    <code class="computeroutput">+infinity</code>, 
    <code class="computeroutput">minimum-date-time</code>, 
    <code class="computeroutput">maximum-date-time</code>
  </p>















<h5>
<a name="id1006067"></a>月份</h5>















<p>
    <code class="computeroutput">英语名字及三字母的缩写</code>
  </p>















<h5>
<a name="id1006082"></a>周日</h5>















<p>
    <code class="computeroutput">英语名字及三字母缩写</code>
  </p>















<h5>
<a name="id1006097"></a>日期生成器的短语元素</h5>















<p>
    <code class="computeroutput">first</code>, 
    <code class="computeroutput">second</code>, 
    <code class="computeroutput">third</code>, 
    <code class="computeroutput">fourth</code>, 
    <code class="computeroutput">fifth</code>, 
    <code class="computeroutput">last</code>, 
    <code class="computeroutput">before</code>, 
    <code class="computeroutput">after</code>, 
    <code class="computeroutput">of</code>
  </p>















<p>注意：我们在前面曾经示范过日期/时间表示中的组件可以通过格式化串来重新排序。但是对于 date_generators 来说则不可以。其中的元素可以定制但顺序不可改变。</p>















<h4>
<a name="id1006165"></a>内容字符串</h4>















<p>为了示范定制化的可能性，我们将为月份和周日使用定制的字符串(我们在这个例子中只使用长名字，且全为小写)。</p>















  (继续前一个例子)
  
<pre class="programlisting">    <br>  // 设置定制字符串的 collections.<br>  // 为简短起见，只修改全名<br>  string month_names[12] = { "january", "february", "march", <br>                             "april", "may", "june", <br>                             "july", "august", "september", <br>                             "october", "november", "december" };<br>  vector&lt;string&gt; long_months(&amp;month_names[0], &amp;month_names[12]);<br>  string day_names[7] = { "sunday", "monday", "tuesday", "wednesday", <br>                          "thursday", "friday", "saturday" };<br>  vector&lt;string&gt; long_days(&amp;day_names[0], &amp;day_names[7]);<br>  <br>  //  使用缺省值创建 date_facet 和 date_input_facet<br>  date_facet* date_output = new date_facet();<br>  date_input_facet* date_input = new date_input_facet();<br>  ss.imbue(locale(ss.getloc(), date_output)); <br>  ss.imbue(locale(ss.getloc(), date_input));<br><br>  // 替换输出 facet 中的名字<br>  date_output-&gt;long_month_names(long_months);<br>  date_output-&gt;long_weekday_names(long_days);<br>  <br>  // 替换输入 facet 中的名字<br>  date_input-&gt;long_month_names(long_months);<br>  date_input-&gt;long_weekday_names(long_days);<br>  <br>  // 定制月份、周日和日期的格式<br>  date_output-&gt;format("%Y-%B-%d");<br>  date_input-&gt;format("%Y-%B-%d");<br>  date_output-&gt;month_format("%B"); // 全名<br>  date_input-&gt;month_format("%B"); // 全名<br>  date_output-&gt;weekday_format("%A"); // 全名<br>  date_input-&gt;weekday_format("%A"); // 全名<br><br>  ss.str("");<br>  ss &lt;&lt; greg_month(3);<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "march"<br>  ss.str("");<br>  ss &lt;&lt; greg_weekday(3);<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "tuesday"<br>  ss.str("");<br>  ss &lt;&lt; date(2005,Jul,4);<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "2005-july-04"<br>    <br>  </pre>















<a name="tut_sv"></a>
<h4>
<a name="id1006189"></a>特殊值</h4>















<p>定制输入和输出用的特殊值，最好的方法是创建一个新的 special_values_parser 和 special_values_formatter. 新的字符串在构造的时候进行设置(如下例所示)。</p>















  (继续前一个例子)
  
<pre class="programlisting">    <br>  // 将格式重置为缺省<br>  output_facet-&gt;format(local_time_facet::default_time_format);<br>  input_facet-&gt;format(local_time_input_facet::default_time_input_format);<br><br>  // 创建定制的 special_values 分析器和格式化器对象<br>  // 并将它们加入到 facets<br>  string sv[5] = {"nadt","neg_inf", "pos_inf", "min_dt", "max_dt" };<br>  vector&lt;string&gt; sv_names(&amp;sv[0], &amp;sv[5]);<br>  special_values_parser sv_parser(sv_names.begin(), sv_names.end());<br>  special_values_formatter sv_formatter(sv_names.begin(), sv_names.end());<br>  output_facet-&gt;special_values_formatter(sv_formatter);<br>  input_facet-&gt;special_values_parser(sv_parser);<br><br>  ss.str("");<br>  ldt = local_date_time(not_a_date_time);<br>  ss &lt;&lt; ldt;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "nadt"<br>  <br>  ss.str("min_dt");<br>  ss &gt;&gt; ldt;<br>  ss.str("");<br>  ss &lt;&lt; ldt;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "1400-Jan-01 00:00:00 UTC"<br>    <br>  </pre>















<p>注意：虽然我们将 min 和 max 的字符串也传递给了格式化器，但是它们会被忽略，因为这两个特殊值是以真实的日期来构造的(如上所示)。</p>















<a name="tut_dper"></a>
<h4>
<a name="id1006208"></a>日期/时间段</h4>















<p>定制时间段的输入输出，最好的方法是创建一个新的 period_parser 和 period_formatter. 新的字符串在构造的时候进行设置(如下例所示)。</p>















  (继续前一个例子)
  
<pre class="programlisting">    <br>  // 将所有格式设置回缺省值(为简短起见，不再列出)<br><br>  // 创建我们的 date_period<br>  date_period dp(date(2005,Mar,1), days(31)); // 整个三月份<br><br>  // 定制时间段格式化器和分析器<br>  period_formatter per_formatter(period_formatter::AS_OPEN_RANGE, <br>                                 " to ", "from ", " exclusive", " inclusive" );<br>  period_parser per_parser(period_parser::AS_OPEN_RANGE, <br>                           " to ", "from ", " exclusive" , "inclusive" );<br>  <br>  // 缺省输出<br>  ss.str("");<br>  ss &lt;&lt; dp;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "[2005-Mar-01/2005-Mar-31]"<br> <br>  // 将我们的定制分析器和格式化器加入到 facets<br>  date_output-&gt;period_formatter(per_formatter);<br>  date_input-&gt;period_parser(per_parser);<br>  <br>  // 定制化输出<br>  ss.str("");<br>  ss &lt;&lt; dp;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "from 2005-Feb-01 to 2005-Apr-01 exclusive"<br>    <br>  </pre>















<a name="tut_dgen"></a>
<h4>
<a name="id1006242"></a>日期生成器</h4>






























<p>定制 date_generators 的输入输出可以通过将(在 facet 中的)已有字符串替换为新字符串来完成。</p>
<p>注意：前面我们曾经示范过日期/时间表示中的组件可以通过格式化串变更顺序。但是对于 date_generators 则不可以。其中的元素可以定制，但顺序不可改变。</p>















  (继续前一个例子)
  
<pre class="programlisting">    <br>  // 定制 date_generator 短语<br>  string dg_phrases[9] = { "1st", "2nd", "3rd", "4th", "5th", <br>                           "final", "prior to", "following", "in" };<br>  vector&lt;string&gt; phrases(&amp;dg_phrases[0], &amp;dg_phrases[9]);<br><br>  // 创建我们的 date_generator<br>  first_day_of_the_week_before d_gen(Monday);<br><br>  // 缺省输出<br>  ss.str("");<br>  ss &lt;&lt; d_gen;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "Mon before"<br> <br>  // 将我们的定制字符串加入到日期 facets<br>  date_output-&gt;date_gen_phrase_strings(phrases);<br>  date_input-&gt;date_gen_element_strings(phrases);<br>  <br>  // 定制化的输出<br>  ss.str("");<br>  ss &lt;&lt; d_gen;<br>  cout &lt;&lt; ss.str() &lt;&lt; endl; // "Mon prior to"<br>    <br>  </pre>















</div>















</div>















<table width="100%">














  <tbody>














    <tr>















      <td align="left"></td>















      <td align="right"><small>Copyright &copy; 2001-2005 CrystalClear Software, Inc</small></td>















    </tr>














  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>















<hr>
<div class="spirit-nav">
<a accesskey="p" href="local_time.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../date_time.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="serialization.html"><img src="../images/next.png" alt="Next"></a>
</div>















</body>
</html>
