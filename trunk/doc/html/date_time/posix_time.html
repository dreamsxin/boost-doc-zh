<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>






  
  
  
  
  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">







  
  
  
  
  
  
  
  
  
  
  <title>Posix Time</title>
  <link rel="stylesheet" href="../boostbook.css" type="text/css">






  
  
  
  
  
  <meta name="generator" content="DocBook XSL Stylesheets V1.68.1">






  
  
  
  
  
  <link rel="start" href="../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">






  
  
  
  
  
  <link rel="up" href="../date_time.html" title="Chapter&nbsp;4.&nbsp;Boost.Date_Time">






  
  
  
  
  
  <link rel="prev" href="gregorian.html" title="Gregorian">






  
  
  
  
  
  <link rel="next" href="local_time.html" title="Local Time">
</head>


<body alink="#0000ff" bgcolor="white" link="#0000ff" text="black" vlink="#840084">






<table cellpadding="2" width="100%">






  <tbody>





    <tr>





      <td valign="top"><img alt="Boost C++ Libraries" src="../../../boost.png" height="86" width="277"></td>






      <td align="center"><a href="../../../index.htm">Home</a></td>






      <td align="center"><a href="../../../libs/libraries.htm">Libraries</a></td>






      <td align="center"><a href="../../../people/people.htm">People</a></td>






      <td align="center"><a href="../../../more/faq.htm">FAQ</a></td>






      <td align="center"><a href="../../../more/index.htm">More</a></td>






    </tr>





  
  
  
  
  
  </tbody>
</table>






<hr>
<div class="spirit-nav">
<a accesskey="p" href="gregorian.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../date_time.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="local_time.html"><img src="../images/next.png" alt="Next"></a>
</div>






<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both;">
<a name="date_time.posix_time"></a>Posix 时间</h2>





</div>





</div>





</div>






<div class="toc">
<dl>






  <dt><span class="section"><a href="posix_time.html#date_time.posix_time.ptime_class">Ptime</a></span></dt>






  <dt><span class="section"><a href="posix_time.html#date_time.posix_time.time_duration">时间长度</a></span></dt>






  <dt><span class="section"><a href="posix_time.html#date_time.posix_time.time_period">时间段</a></span></dt>






  <dt><span class="section"><a href="posix_time.html#date_time.posix_time.time_iterators">时间迭代器</a></span></dt>






</dl>





</div>






<h2>
<a name="id969477"></a>Posix 时间系统</h2>






<p>
    <a href="posix_time.html#posix_intro">简介</a> -- 
    <a href="posix_time.html#posix_ex">用例</a>
  </p>






<a name="posix_intro"></a>
<h3>
<a name="id969506"></a>简介</h3>






<p>定义一个无调整的、分辨率为纳秒/微秒级的、具有稳定的计算特性的时间系统。如果是纳秒级精度的，则每个 ptime 使用96位的底层存储，而微秒级精度则每个 ptime 使用64位存储(详情请见 <a href="details.html#date_time.buildinfo" title="Build-Compiler Information">构建选项</a>)。该时间系统使用格里历来实现时间表示中的日期部分。 
  </p>






<a name="posix_ex"></a>
<h3>
<a name="id969536"></a>用例</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead><tr>






    <th>例子</th>






    <th>说明</th>






  </tr>





  </thead>
  <tbody>






    <tr>






      <td><a href="examples.html#date_time.examples.time_math" title="Time Math">时间算术</a></td>






      <td>几个很简单的使用 ptime 和 time_durations 的计算。</td>






    </tr>






    <tr>






      <td><a href="examples.html#date_time.examples.print_hours" title="Print Hours">打印小时</a></td>






      <td>从时钟取出时间，使用 time_iterator.</td>






    </tr>






    <tr>






      <td><a href="examples.html#date_time.examples.local_utc_conversion" title="Local to UTC Conversion">本地时间到 UTC 的转换</a></td>






      <td>示范多种不同方法来将本地时间转换为 UTC 时间，包括夏令时规则。</td>






    </tr>






    <tr>






      <td><a href="examples.html#date_time.examples.time_periods" title="Time Periods">时间段</a></td>






      <td>一些简单的计算时间段的交集并打印的例子。</td>






    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.posix_time.ptime_class"></a>Ptime</h3>





</div>





</div>





</div>






<a href="posix_time.html#ptime_intro">简介</a> -- <a href="posix_time.html#ptime_header">头文件</a> --
  <a href="posix_time.html#ptime_constr">构造</a> --
  <a href="posix_time.html#ptime_from_string">从字符串构造</a> --
  <a href="posix_time.html#ptime_from_clock">从时钟构造</a> --
  <a href="posix_time.html#ptime_from_funcs">使用转换函数进行构造</a> --
  <a href="posix_time.html#ptime_accessors">访问器</a> --
  <a href="posix_time.html#ptime_to_string">转换为字符串</a> --
  <a href="posix_time.html#ptime_operators">操作符</a> --
  <a href="posix_time.html#ptime_struct_tm">Struct tm, time_t, 和 FILETIME 函数</a><a name="ptime_intro"></a>
<h3>
<a name="id969737"></a>简介</h3>






<p>类&nbsp;boost::posix_time::ptime 是处理时间点的主要接口。通常，ptime 类在构造后就不再改变，不过它也允许进行赋值。 </p>






<p>类 ptime 依赖于 <a href="gregorian.html#date_time.gregorian.date_class" title="Date">gregorian::date</a>，作为时间点的日期部分的接口。 
  </p>






<p>其它创建时间的方法还包括有 <a href="posix_time.html#date_time.posix_time.time_iterators" title="Time Iterators">时间迭代器</a>。 
  </p>






<a name="ptime_header"></a>
<h3>
<a name="id969779"></a>头文件</h3>






<p>
    </p>






<pre class="programlisting">#include "boost/date_time/posix_time/posix_time.hpp" //包含所有类型和 i/o<br>或<br>#include "boost/date_time/posix_time/posix_time_types.hpp" //只有类型没有 i/o</pre>






<p>
  </p>






<a name="ptime_constr"></a>
<h3>
<a name="id969801"></a>构造</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime(date,time_duration)</pre>





      </td>






      <td>从一个日期和时间偏移进行构造。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime t1(date(2002,Jan,10), <br>         time_duration(1,2,3));<br>ptime t2(date(2002,Jan,10), <br>         hours(1)+nanosec(5));</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime(ptime)</pre>





      </td>






      <td>复制构造函数。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime t3(t1)</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime(special_values sv)</pre>





      </td>






      <td>无限时间、无效时间、最大时间和最小时间的构造函数。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime d1(neg_infin);<br>ptime d2(pos_infin);<br>ptime d3(not_a_date_time);<br>ptime d4(max_date_time);<br>ptime d5(min_date_time);</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime;</pre>





      </td>






      <td>缺省构造函数。创建一个 ptime 对象，初始化为
not_a_date_time. 注：该构造函数可以通过下定义
DATE_TIME_NO_DEFAULT_CONSTRUCTOR 来禁止(请见 compiler_config.hpp)</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime p; // p =&gt; not_a_date_time</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="ptime_from_string"></a>
<h3>
<a name="id969973"></a>从字符串构造</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime time_from_string(std::string)</pre>





      </td>






      <td>从带分隔的字符串进行构造。注：秒的小数部分中超出精度的部分将被截掉。如："1:02:03.123456999" =&gt; 1:02:03.123456.
该行为受编译本库时的精度所影响(请见 <a href="details.html#date_time.buildinfo" title="Build-Compiler Information">构建及编译器信息</a>)</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">std::string ts("2002-01-20 23:59:59.000");<br>ptime t(time_from_string(ts))</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime from_iso_string(std::string)</pre>





      </td>






      <td>从不带分隔的字符串构造。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">std::string ts("20020131T235959");<br>ptime t(from_iso_string(ts))</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="ptime_from_clock"></a>
<h3>
<a name="id970092"></a>从时钟构造</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime second_clock::local_time()</pre>





      </td>






      <td>取得本地时间，秒级精度，基于计算机的时区设置。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime t(second_clock::local_time());</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime second_clock::universal_time()</pre>





      </td>






      <td>取得 UTC 时间。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime t(second_clock::universal_time())</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime microsec_clock::local_time()</pre>





      </td>






      <td>使用次秒级精度的时钟取得本地时间。在
Unix 系统上，以 GetTimeOfDay 来实现。在大多数 Win32
平台上则以 ftime 实现。Win32 系统通常不能通过此 API 达到微秒级精度。如果你的应用程序需要更高的精度，请测试你的平台，以确定可达到的精度。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime t(microsec_clock::local_time());</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime microsec_clock::universal_time()</pre>





      </td>






      <td>使用次秒级精度的时钟取得 UTC 时间。在
Unix 系统上，以 GetTimeOfDay 来实现。在大多数 Win32
平台上则以 ftime 实现。Win32 系统通常不能通过此 API 达到微秒级精度。如果你的应用程序需要更高的精度，请测试你的平台，以确定可达到的精度。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime t(microsec_clock::universal_time());</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="ptime_from_funcs"></a>
<h3>
<a name="id970269"></a>使用转换函数进行构造</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime from_time_t(time_t t);</pre>





      </td>






      <td>将&nbsp;time_t 转换为 ptime.</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime t = from_time_t(tt);</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime from_ftime&lt;ptime&gt;(FILETIME ft);</pre>





      </td>






      <td>从 FILETIME 结构创建 ptime 对象。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime t = from_ftime&lt;ptime&gt;(ft);</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="ptime_accessors"></a>
<h3>
<a name="id970378"></a>访问器</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">date date()</pre>





      </td>






      <td>取出时间的日期部分。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,10);<br>ptime t(d, hour(1));<br>t.date() --&gt; 2002-Jan-10;</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration time_of_day()</pre>





      </td>






      <td>取出在一天中的时间偏移。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,10);<br>ptime t(d, hour(1));<br>t.time_of_day() --&gt; 01:00:00;</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_infinity() const</pre>





      </td>






      <td>返回 true 如果 ptime 是正的或负的无限。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime pt(pos_infin); <br>pt.is_infinity(); // --&gt; true</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_neg_infinity() const</pre>





      </td>






      <td>返回 true 如果 ptime 为负无限。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime pt(neg_infin);<br>pt.is_neg_infinity(); // --&gt; true</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_pos_infinity() const</pre>





      </td>






      <td>返回 true 如果 ptime 为正无限。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime pt(neg_infin); <br>pt.is_pos_infinity(); // --&gt; true</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_not_a_date_time() const</pre>





      </td>






      <td>返回 true 如果其值不是一个 ptime</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime pt(not_a_date_time);<br>pt.is_not_a_date_time(); // --&gt; true</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_special() const</pre>





      </td>






      <td>返回 true 如果 ptime 为某个 <code class="computeroutput">special_value</code>
      </td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime pt(pos_infin); <br>ptime pt2(not_a_date_time); <br>ptime pt3(date(2005,Mar,1), hours(10));<br>pt.is_special(); // --&gt; true<br>pt2.is_special(); // --&gt; true<br>pt3.is_special(); // --&gt; false</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="ptime_to_string"></a>
<h3>
<a name="id970628"></a>转换为字符串</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">std::string to_simple_string(ptime)</pre>





      </td>






      <td>转换为 <code class="computeroutput">YYYY-mmm-DD HH:MM:SS.fffffffff</code> 字符串，其中 <code class="computeroutput">mmm</code> 为3字符月份名。秒的小数部分仅在非零时包含。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">2002-Jan-01 10:00:01.123456789</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">std::string to_iso_string(ptime)</pre>





      </td>






      <td>转换为 <code class="computeroutput">YYYYMMDDTHHMMSS,fffffffff</code> 其中 <code class="computeroutput">T</code> 为日期-时间分隔符。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">20020131T100001,123456789</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">std::string to_iso_extended_string(ptime)</pre>





      </td>






      <td>转换为 <code class="computeroutput">YYYY-MM-DDTHH:MM:SS,fffffffff</code> 其中 <code class="computeroutput">T</code> 为日期-时间分隔符。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">2002-01-31T10:00:01,123456789</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="ptime_operators"></a>
<h3>
<a name="id970814"></a>操作符</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator&lt;&lt;, operator&gt;&gt;</pre>





      </td>






      <td>流操作符。<span class="strong"><strong>注：</strong></span>和版本1.33一样，流操作符得到了改进。详情请见 <a href="date_time_io.html" title="Date Time Input/Output">日期时间 IO 系统</a> (包括异常和错误条件)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime pt(not_a_date_time);<br>stringstream ss("2002-Jan-01 14:23:11");<br>ss &gt;&gt; pt; <br>std::cout &lt;&lt; pt; // "2002-Jan-01 14:23:11"<br>  </pre>






            </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator==, operator!=,<br>operator&gt;, operator&lt;,<br>operator&gt;=, operator&lt;=</pre>






	    </td>






      <td>完整的比较操作符。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">t1 == t2, etc</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime operator+(days)</pre>





      </td>






      <td>返回加上日子偏移后的 ptime</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,1);<br>ptime t(d,minutes(5));<br>days dd(1);<br>ptime t2 = t + dd;</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime operator-(days)</pre>





      </td>






      <td>返回减去日子偏移后的 ptime</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,1);<br>ptime t(d,minutes(5));<br>days dd(1);<br>ptime t2 = t - dd;</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime operator+(time_duration)</pre>





      </td>






      <td>返回加上时间长度后的 ptime</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,1);<br>ptime t(d,minutes(5));<br>ptime t2 = t + hours(1) + minutes(2);</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime operator-(time_duration)</pre>





      </td>






      <td>返回减去时间长度后的 ptime</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,1);<br>ptime t(d,minutes(5));<br>ptime t2 = t - minutes(2);</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration operator-(ptime)</pre>





      </td>






      <td>获得两个时间之间的差距。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,1);<br>ptime t1(d,minutes(5));<br>ptime t2(d,seconds(5));<br>time_duration t3 = t2 - t1;//结果为负</pre>






	    </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="ptime_struct_tm"></a>
<h3>
<a name="id971093"></a>Struct tm, time_t, 和 FILETIME 函数</h3>






<p>库中提供了 posix_time 对象与 <code class="computeroutput">tm</code> 结构之间进行相互转换的函数，还有从 <code class="computeroutput">time_t</code> 和 <code class="computeroutput">FILETIME</code> 进行转换的函数。</p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">tm to_tm(ptime)</pre>





      </td>






      <td>该函数将 <code class="computeroutput">ptime</code> 对象转换为 <code class="computeroutput">tm</code> 结构。其中 <code class="computeroutput">tm_isdst</code> 字段设为 -1.</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime pt(date(2005,Jan,1), time_duration(1,2,3));<br>tm pt_tm = to_tm(pt);<br>/* tm_year =&gt; 105<br>   tm_mon  =&gt; 0<br>   tm_mday =&gt; 1<br>   tm_wday =&gt; 6 (星期六)<br>   tm_yday =&gt; 0<br>   tm_hour =&gt; 1<br>   tm_min  =&gt; 2<br>   tm_sec  =&gt; 3<br>   tm_isddst =&gt; -1 */</pre>






	  </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">date date_from_tm(tm datetm)</pre>





      </td>






      <td>该函数将 <code class="computeroutput">tm</code> 结构转换为 <code class="computeroutput">date</code> 对象。字段 <code class="computeroutput">tm_wday </code>, <code class="computeroutput">tm_yday </code>, 和 <code class="computeroutput">tm_isdst</code> 均被忽略。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">tm pt_tm;<br>pt_tm.tm_year = 105;<br>pt_tm.tm_mon  = 0;<br>pt_tm.tm_mday = 1;<br>pt_tm.tm_hour = 1;<br>pt_tm.tm_min  = 2;<br>pt_tm.tm_sec  = 3;<br>ptime pt = ptime_from_tm(pt_tm);<br>// pt =&gt; 2005-Jan-01 01:02:03</pre>






          </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">tm to_tm(time_duration)</pre>





      </td>






      <td>该函数将 <code class="computeroutput">time_duration</code> 对象转换为 <code class="computeroutput">tm</code> 结构。字段 <code class="computeroutput">tm_year</code>, <code class="computeroutput">tm_mon</code>, <code class="computeroutput">tm_mday</code>, <code class="computeroutput">tm_wday</code>, <code class="computeroutput">tm_yday</code> 均设为零。字段 <code class="computeroutput">tm_isdst</code> 被设为 -1.</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3);<br>tm td_tm = to_tm(td);<br>/* tm_year =&gt; 0<br>   tm_mon  =&gt; 0<br>   tm_mday =&gt; 0<br>   tm_wday =&gt; 0<br>   tm_yday =&gt; 0<br>   tm_hour =&gt; 1<br>   tm_min  =&gt; 2<br>   tm_sec  =&gt; 3<br>   tm_isddst =&gt; -1 */</pre>






	  </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime from_time_t(std::time_t)</pre>





      </td>






      <td>从 time_t 参数创建一个 <code class="computeroutput">ptime</code>. 在 time_t 中的秒值被加到时间点 1970-Jan-01 上。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime pt(not_a_date_time);<br>std::time_t t;<br>t = 1118158776;<br>pt = from_time_t(t);<br>// pt =&gt; 2005-Jun-07 15:39:36</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime from_ftime&lt;ptime&gt;(FILETIME)</pre>





      </td>






      <td>该模板函数从<code class="computeroutput"></code> FILETIME 结构构造 <code class="computeroutput">ptime</code>.</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">FILETIME ft;<br>ft.dwHighDateTime = 29715317;<br>ft.dwLowDateTime = 3865122988UL;<br>ptime pt = from_ftime&lt;ptime&gt;(ft);<br>// pt =&gt; 2005-Jun-07 15:30:57.039582000</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






</div>






<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.posix_time.time_duration"></a>时间长度</h3>





</div>





</div>





</div>






<a href="posix_time.html#time_duration_intro">简介</a> --
  <a href="posix_time.html#time_duration_header">头文件</a> --
  <a href="posix_time.html#time_duration_constr">构造</a> --
  <a href="posix_time.html#time_duration_count_constr">基于计数值的构造</a> --
  <a href="posix_time.html#time_duration_from_string">从字符串构造</a> --
  <a href="posix_time.html#time_duration_accessors">访问器</a> --
  <a href="posix_time.html#time_duration_to_string">转换为字符串</a> --
  <a href="posix_time.html#time_duration_operators">操作符</a> --
  <a href="posix_time.html#time_duration_struct_tm">Struct tm 的函数</a><a name="time_duration_intro"></a>
<h3>
<a name="id971522"></a>简介</h3>






<p>类&nbsp;boost::posix_time::time_duration 是负责表示时间长度的基本类型。时间长度可正可负。通常
time_duration 类提供一个带有小时、分、秒的计数的构造函数，就象在后面的代码片段所示。time_duration
的分辨率可以在编译期配置。更多信息请见 <a href="details.html#date_time.buildinfo" title="Build-Compiler Information">构建与编译器信息</a>。 
  </p>






<p>
    </p>






<pre class="programlisting">using namespace boost::posix_time;<br>time_duration td(1,2,3,4); //01:02:03.000000004 如果分辨率为纳秒<br>time_duration td(1,2,3,4); //01:02:03.000004 如果分辨率为微秒</pre>






<p>
  </p>






<p>如下所示，从基类 time_duration 派生了几个类用于按不同的分辨率进行调整。这些类可以使得代码更短且意图更清晰。 </p>






<img src="../../../libs/date_time/doc/time_duration_inherit.png">
<p>举例如下： 
    </p>






<pre class="programlisting">using namespace boost::posix_time;<br>      <br>time_duration td = hours(1) + seconds(10); //01:00:10<br>td = hours(1) + nanoseconds(5); //01:00:00.000000005</pre>






<p>注意，是否存在更高分辨率的类(如：纳秒)取决于库的安装。更多信息请见 <a href="details.html#date_time.buildinfo" title="Build-Compiler Information">构建及编译器信息</a>。 
  </p>






<p>处理此事的另一个方法是利用 time_duration 的 ticks_per_second() 方法来编写可移植的代码，这样可以不管库是如何编译的。以下是计算分辨率无关的计数值的常用公式。

    </p>






<pre class="programlisting">count*(time_duration_ticks_per_second / count_ticks_per_second)<br>    </pre>






<p>例如，假设我们想用表示十分之一秒的计数值来构造时间。即每一 tick 为0.1秒。 
    </p>






<pre class="programlisting">int number_of_tenths = 5;<br>//创建一个分辨率无关的计数值 -- 除以10，因为一秒分为10份<br>int count = number_of_tenths*(time_duration::ticks_per_second()/10);<br>time_duration td(1,2,3,count); //01:02:03.5 //与分辨率设置无关<br>    </pre>






<p>
  </p>






<a name="time_duration_header"></a>
<h3>
<a name="id971624"></a>头文件</h3>






<p>
    </p>






<pre class="programlisting">#include "boost/date_time/posix_time/posix_time.hpp" //包含所有类型和 i/o<br>或<br>#include "boost/date_time/posix_time/posix_time_types.hpp" //只有类型没有 i/o</pre>






<p>
  </p>






<a name="time_duration_constr"></a>
<h3>
<a name="id971647"></a>构造</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration(hours,<br>              minutes,<br>              seconds,<br>              fractional_seconds)</pre>





      </td>






      <td>从计数值构造一个时间长度。参数 fractional_seconds
为一个单元值，它受应用编译时所设置的分辨率影响(请见 <a href="details.html#compile_options">构建与编译器信息</a>)。如果参数 fractional_seconds 超出编译时精度的限制，则超出值将被"进位"至 seconds
字段。要创建与分辨率无关的计数请参见前文。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3,9);<br>//1 小时 2 分 3 秒 9 纳秒<br>time_duration td2(1,2,3,123456789);<br>time_duration td3(1,2,3,1000);<br>// 对于微秒分辨率(6位)<br>// td2 =&gt; "01:04:06.456789"<br>// td3 =&gt; "01:02:03.001000"<br>// 对于纳秒分辨率(9位)<br>// td2 =&gt; "01:02:03.123456789"<br>// td3 =&gt; "01:02:03.000001000"</pre>





      </td>





    </tr>






    <tr>






      <td valign="top">
      
      
      
      
      
      <pre class="screen">time_duration(special_value sv)</pre>





      </td>






      <td>特殊值的构建函数。<span class="strong"><strong>重要提示：</strong></span>如果 time_duration 是由构造函数或其它方式所设置的特殊值，则以下访问器函数将给出不可预知的结果：
      
      
      
      
      
      <pre class="screen">hours(), minutes(), seconds(), ticks(), <br>fractional_seconds(), total_nanoseconds(),<br>total_microseconds(), total_milliseconds(),<br>total_seconds()</pre>


其它访问器函数则没有不同。</td>






    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_duration_count_constr"></a>
<h3>
<a name="id971730"></a>基于计数值的构造</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">hours(long)</pre>





      </td>






      <td>小时数</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td = hours(3);</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">minutes(long)</pre>





      </td>






      <td>分钟数</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td = minutes(3);</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">seconds(long)</pre>





      </td>






      <td> 秒数</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td = seconds(3);</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">milliseconds(long)</pre>





      </td>






      <td>毫秒数</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td = milliseconds(3);</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">microseconds(long)</pre>





      </td>






      <td>微秒数</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td = microseconds(3);</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">nanoseconds(long)</pre>





      </td>






      <td>纳秒数</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td = nanoseconds(3);</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_duration_from_string"></a>
<h3>
<a name="id971999"></a>从字符串构造</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration duration_from_string(std::string)</pre>





      </td>






      <td>从带有分隔符的字符串构造。注：秒数中超界的小数部分将被截断。如："1:02:03.123456999" =&gt; 1:02:03.123456.
该行为受本库编译时的精度影响(请见 <a href="details.html#date_time.buildinfo" title="Build-Compiler Information">构建及编译器信息</a>)</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">std::string ts("23:59:59.000");<br>time_duration td(duration_from_string(ts));</pre>






	    </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_duration_accessors"></a>
<h3>
<a name="id972092"></a>访问器</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">long hours()</pre>





      </td>






      <td>取出规格化的小时数(如果调用的 <code class="computeroutput">time_duration</code> 为 <code class="computeroutput">special_value</code> 则给出不可预知的结果)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3); <br>time_duration neg_td(-1,2,3);<br>td.hours(); // --&gt; 1<br>neg_td.hours(); // --&gt; -1</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">long minutes()</pre>





      </td>






      <td>取出规格化的分钟数 +/-(0..59) (如果调用的 <code class="computeroutput">time_duration</code> 为 <code class="computeroutput">special_value</code> 则给出不可预知的结果)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3);<br>time_duration neg_td(-1,2,3);<br>td.minutes(); // --&gt; 2<br>neg_td.minutes(); // --&gt; -2</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">long seconds()</pre>





      </td>






      <td>取出规格化的秒数 +/-(0..59) (如果调用的 <code class="computeroutput">time_duration</code> 为 <code class="computeroutput">special_value</code> 则给出不可预知的结果)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3); <br>time_duration neg_td(-1,2,3);<br>td.seconds(); // --&gt; 3<br>neg_td.seconds(); // --&gt; -3</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">long total_seconds()</pre>





      </td>






      <td>取出截断分数后的总秒数(如果调用的 <code class="computeroutput">time_duration</code> 为 <code class="computeroutput">special_value</code> 则给出不可预知的结果)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3,10);<br>td.total_seconds(); <br>// --&gt; (1*3600) + (2*60) + 3 == 3723</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">long total_milliseconds()</pre>





      </td>






      <td>取出截掉剩余的数字后的总毫秒数(如果调用的 <code class="computeroutput">time_duration</code> 为 <code class="computeroutput">special_value</code> 则给出不可预知的结果)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3,123456789);<br>td.total_milliseconds(); <br>// HMS --&gt; (1*3600) + (2*60) + 3 == 3723 秒<br>// 毫秒是3位数字<br>// (3723 * 1000) + 123 == 3723123</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">long total_microseconds()</pre>





      </td>






      <td>取出截掉剩余的数字后的总微秒数(如果调用的 <code class="computeroutput">time_duration</code> 为 <code class="computeroutput">special_value</code> 则给出不可预知的结果)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3,123456789);<br>td.total_microseconds(); <br>// HMS --&gt; (1*3600) + (2*60) + 3 == 3723 秒<br>// 微秒是6位数字<br>// (3723 * 1000000) + 123456 == 3723123456</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">long total_nanoseconds()</pre>





      </td>






      <td>取出截掉剩余的数字后的总纳秒数(如果调用的 <code class="computeroutput">time_duration</code> 为 <code class="computeroutput">special_value</code> 则给出不可预知的结果)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3,123456789);<br>td.total_nanoseconds(); <br>// HMS --&gt; (1*3600) + (2*60) + 3 == 3723 秒<br>// 纳秒是9位数字<br>// (3723 * 1000000000) + 123456789<br>//                              == 3723123456789</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">long fractional_seconds()</pre>





      </td>






      <td>取出秒的分数部分(如果调用的 <code class="computeroutput">time_duration</code> 为 <code class="computeroutput">special_value</code> 则给出不可预知的结果)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3, 1000);<br>td.fractional_seconds(); // --&gt; 1000</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_negative()</pre>





      </td>






      <td>返回 True 如果时间长度为负。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(-1,0,0); <br>td.is_negative(); // --&gt; true</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration invert_sign()</pre>





      </td>






      <td>生成一个新的时间长度，将符号取反</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(-1,0,0); <br>td.invert_sign(); // --&gt; 01:00:00</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">date_time::time_resolutions resolution()</pre>





      </td>






      <td>表示 time_duration 类的精度。time_resolutions 是一个可能的精度的枚举类型，从秒到纳秒。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration::resolution() --&gt; nano</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration::num_fractional_digits()</pre>





      </td>






      <td>返回一个 unsigned short，表示时间精度的分数位数。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">unsigned short secs;<br>secs = time_duration::num_fractional_digits();<br>// 纳秒为9，微秒为6，等等</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration::ticks_per_second()</pre>





      </td>






      <td>返回一秒的 ticks 数。例如，如果时间长度支持纳秒，则返回结果为
1,000,000,000 (1e+9).</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">std::cout &lt;&lt; time_duration::ticks_per_second();</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">boost::int64_t ticks()</pre>





      </td>






      <td>返回时间长度类型的祼计数值(如果调用的 <code class="computeroutput">time_duration</code> 为 <code class="computeroutput">special_value</code> 则给出不可预知的结果)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(0,0,0, 1000);<br>td.ticks() // --&gt; 1000</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration unit()</pre>





      </td>






      <td>返回时间长度类型的最小可能单元(1纳秒)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration::unit() --&gt; time_duration(0,0,0,1)</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_neg_infinity() const</pre>





      </td>






      <td>返回 true 如果 time_duration 为负无限。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(neg_infin);<br>td.is_neg_infinity(); // --&gt; true</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_pos_infinity() const</pre>





      </td>






      <td>返回 true 如果 time_duration 为正无限。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(neg_infin); <br>td.is_pos_infinity(); // --&gt; true</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_not_a_date_time() const</pre>





      </td>






      <td>返回 true 如果时间长度值无效。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(not_a_date_time);<br>td.is_not_a_date_time(); // --&gt; true</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_special() const</pre>





      </td>






      <td>返回 true 如果 time_duration 为任意 <code class="computeroutput">special_value</code>
      </td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(pos_infin); <br>time_duration td2(not_a_date_time); <br>time_duration td3(2,5,10);<br>td.is_special(); // --&gt; true<br>td2.is_special(); // --&gt; true<br>td3.is_special(); // --&gt; false</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_duration_to_string"></a>
<h3>
<a name="id972812"></a>转换为字符串</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">std::string to_simple_string(time_duration)</pre>





      </td>






      <td>转换为 <code class="computeroutput">HH:MM:SS.fffffffff</code> 其中 <code class="computeroutput">fff</code> 为秒的分数部分，仅当非零时包含。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">10:00:01.123456789</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">std::string to_iso_string(time_duration)</pre>





      </td>






      <td>转换为 <code class="computeroutput">HHMMSS,fffffffff</code>.</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">100001,123456789</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_duration_operators"></a>
<h3>
<a name="id972952"></a>操作符</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator&lt;&lt;, operator&gt;&gt;</pre>





      </td>






      <td>流操作符。<span class="strong"><strong>注：</strong></span>和版本1.33一样，流操作符得到很大改进。相关详情请见 <a href="date_time_io.html" title="Date Time Input/Output">日期时间 IO 系统</a>(包括异常和错误条件)。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(0,0,0);<br>stringstream ss("14:23:11.345678");<br>ss &gt;&gt; td; <br>std::cout &lt;&lt; td; // "14:23:11.345678"<br>  </pre>






            </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator==, operator!=,<br>operator&gt;, operator&lt;,<br>operator&gt;=, operator&lt;=</pre>






	    </td>






      <td>完整的比较操作符。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">dd1 == dd2, etc</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration operator+(time_duration)</pre>





      </td>






      <td>加上时间长度。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td1(hours(1)+minutes(2));<br>time_duration td2(seconds(10));<br>time_duration td3 = td1 + td2;</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration operator-(time_duration)</pre>





      </td>






      <td>减去时间长度。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td1(hours(1)+nanoseconds(2));<br>time_duration td2 = td1 - minutes(1);</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration operator/(int)</pre>





      </td>






      <td>用整数值去除以时间长度。忽略余数。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">hours(3)/2 == time_duration(1,30,0);<br>nanosecond(3)/2 == nanosecond(1);</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration operator*(int)</pre>





      </td>






      <td>用整数值乘以时间长度。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">hours(3)*2 == hours(6);</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_duration_struct_tm"></a>
<h3>
<a name="id973200"></a>Struct tm, time_t, 和 FILETIME 函数</h3>






<p>系统提供了将 time_duration 转换为 <code class="computeroutput">tm</code> 结构的函数。</p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">tm to_tm(time_duration)</pre>





      </td>






      <td>将 <code class="computeroutput">time_duration</code> 对象转换为 <code class="computeroutput">tm</code> 结构的函数。字段 <code class="computeroutput">tm_year</code>, <code class="computeroutput">tm_mon</code>, <code class="computeroutput">tm_mday</code>, <code class="computeroutput">tm_wday</code>, <code class="computeroutput">tm_yday</code> 均设为零。字段 <code class="computeroutput">tm_isdst</code> 设为 -1.</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3);<br>tm td_tm = to_tm(td);<br>/* tm_year =&gt; 0<br>   tm_mon  =&gt; 0<br>   tm_mday =&gt; 0<br>   tm_wday =&gt; 0<br>   tm_yday =&gt; 0<br>   tm_hour =&gt; 1<br>   tm_min  =&gt; 2<br>   tm_sec  =&gt; 3<br>   tm_isddst =&gt; -1 */</pre>






	  </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






</div>






<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.posix_time.time_period"></a>时间段</h3>





</div>





</div>





</div>






<a href="posix_time.html#time_period_intro">简介</a> -- <a href="posix_time.html#time_period_header">头文件</a> --
  <a href="posix_time.html#time_period_constr">构造</a> --
  <a href="posix_time.html#time_period_mutators">修改器</a> --
  <a href="posix_time.html#time_period_accessors">访问器</a> --
  <a href="posix_time.html#time_period_to_string">转换为字符串</a> --
  <a href="posix_time.html#time_period_operators">操作符</a><a name="time_period_intro"></a>
<h3>
<a name="id973409"></a>简介</h3>






<p>类&nbsp;boost::posix_time::time_period 提供了对两个时间点间的范围的表示法。时间段可以通过简化程序的条件判断逻辑来简化一些计算类型。 </p>






<p>由相同的开始时间点和结束时间点所创建的时间段，称为零长度时间段。零长度时间段被认为是无效的(构造一个无效的时间段是完全合法的)。对于这些时间段，<code class="computeroutput">last</code> 点总是比 <code class="computeroutput">begin</code> 
小一个单元。
  </p>






<p><a href="examples.html#date_time.examples.time_periods" title="Time Periods">时间段例子</a> 提供了对使用时间段的例子。 
  </p>






<a name="time_period_header"></a>
<h3>
<a name="id973459"></a>头文件</h3>






<p>
    </p>






<pre class="programlisting">#include "boost/date_time/posix_time/posix_time.hpp" //包含所有类型和 i/o<br>或<br>#include "boost/date_time/posix_time/posix_time_types.hpp" //只有类型没有 i/o</pre>






<p>
  </p>






<a name="time_period_constr"></a>
<h3>
<a name="id973482"></a>构造</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_period(ptime,<br>            ptime)</pre>





      </td>






      <td>创建一个 [begin, end) 时间段。如果 end &lt;= begin 则时间段定义为无效。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,01);<br>ptime t(d, seconds(10)); //午夜后10秒<br>time_period tp(t, hours(3));</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_period(ptime, <br>            time_duration)</pre>





      </td>






      <td>创建一个 [begin, begin+len) 时间段，其中 end 为
begin+len. 如果 len &lt;= zero 则时间段定义为无效。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,01);<br>ptime t1(d, seconds(10)); //午夜后10秒<br>ptime t2(d, hours(10)); //午夜后10小时<br>time_period tp(t1, t2);</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_period(time_period rhs)</pre>





      </td>






      <td>复制构造函数</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_period tp1(tp);</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_period_mutators"></a>
<h3>
<a name="id973629"></a>修改器</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_period shift(time_duration)</pre>





      </td>






      <td>同时为 begin 和 end 加上一个长度。</td>






    </tr>






    <tr>





      <td>
              
      
      
      
      
      
      <pre class="screen">time_period tp(ptime(date(2005,Jan,1),hours(1)), hours(2));<br>tp.shift(minutes(5)); <br>// tp == 2005-Jan-01 01:05:00 to 2005-Jan-01 03:05:00<br>             </pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_period expand(days)</pre>





      </td>






      <td>从 begin 减去一个长度同时为 end 加上一个长度。</td>






    </tr>






    <tr>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_period_accessors"></a>
<h3>
<a name="id973743"></a>访问器</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime begin()</pre>





      </td>






      <td>返回时间段的第一个时间点。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,01);<br>ptime t1(d, seconds(10)); //午夜后10秒<br>ptime t2(d, hours(10)); //午夜后10小时<br>time_period tp(t1, t2);<br>tp.begin(); // --&gt; 2002-Jan-01 00:00:10</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime last()</pre>





      </td>






      <td>返回时间段的最后一个时间点。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,01);<br>ptime t1(d, seconds(10)); //午夜后10秒<br>ptime t2(d, hours(10)); //午夜后10小时<br>time_period tp(t1, t2);<br>tp.last();// --&gt; 2002-Jan-01 09:59:59.999999999</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">ptime end()</pre>





      </td>






      <td>返回时间段的 last 后的时间点</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,01);<br>ptime t1(d, seconds(10)); //午夜后10秒<br>ptime t2(d, hours(10)); //午夜后10小时<br>time_period tp(t1, t2);<br>tp.last(); // --&gt; 2002-Jan-01 10:00:00</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_duration length()</pre>





      </td>






      <td>返回时间段的长度。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,01);<br>ptime t1(d); //午夜<br>time_period tp(t1, hours(1));<br>tp.length() --&gt; 1 hour</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool is_null()</pre>





      </td>






      <td>返回 True 如果时间段无效。例如：end 小于等于 begin.</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,01);<br>ptime t1(d, hours(12)); // 1月1日中午<br>ptime t2(d, hours(9)); // 1月1日上午9点<br>time_period tp(t1, t2);<br>tp.is_null(); // true</pre>






            </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool contains(ptime)</pre>





      </td>






      <td>返回 True 如果 ptime 在时间段中。零长度时间段不包含任意时间点。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,01);<br>ptime t1(d, seconds(10)); //午夜后10秒<br>ptime t2(d, hours(10)); //午夜后10小时<br>ptime t3(d, hours(2)); //午夜后2小时<br>time_period tp(t1, t2); <br>tp.contains(t3); // true<br>time_period tp2(t1, t1);<br>tp2.contains(t1); // false</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool contains(time_period)</pre>





      </td>






      <td>返回 True 如果 period 在时间段中。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_period tp1(ptime(d,hours(1)), <br>                ptime(d,hours(12)));<br>time_period tp2(ptime(d,hours(2)), <br>                ptime(d,hours(4)));<br>tp1.contains(tp2); // --&gt; true<br>tp2.contains(tp1); // --&gt; false</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">bool intersects(time_period)</pre>





      </td>






      <td>返回 True 如果时间段交迭。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_period tp1(ptime(d,hours(1)),<br>                ptime(d,hours(12)));<br>time_period tp2(ptime(d,hours(2)), <br>                ptime(d,hours(4)));<br>tp2.intersects(tp1); // --&gt; true</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_period intersection(time_period)</pre>





      </td>






      <td>计算两个时间段的交集。如果两个时间段则返回 Null.</td>






    </tr>






    <tr>





      <td>&nbsp;</td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_period merge(time_period)</pre>





      </td>






      <td>返回两个时间段的并集。如果两个时间段则返回 Null.</td>






    </tr>






    <tr>





      <td>&nbsp;</td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_period span(time_period)</pre>





      </td>






      <td>合并两个时间段及它们之间的间隔，相当于 begin = min(p1.begin, p2.begin) 且 end = max(p1.end , p2.end).</td>






    </tr>






    <tr>





      <td>&nbsp;</td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_period_to_string"></a>
<h3>
<a name="id974008"></a>转换为字符串</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">std::string <br>  to_simple_string(time_period dp)</pre>





      </td>






      <td>转换为 <code class="computeroutput">[YYYY-mmm-DD hh:mm:ss.fffffffff/YYYY-mmm-DD hh:mm:ss.fffffffff]</code> 字符串，其中 <code class="computeroutput">mmm</code> 为3字符的月份名。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">[2002-Jan-01 01:25:10.000000001/<br>                2002-Jan-31 01:25:10.123456789]<br>// 占用一行的字符串</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_period_operators"></a>
<h3>
<a name="id974227"></a>操作符</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator&lt;&lt;</pre>





      </td>






      <td>时间段的流输出操作符。使用 facet 来输出 [date time_of_day/date time_of_day]. 缺省格式为 <code class="computeroutput">[YYYY-mmm-DD hh:mm:ss.fffffffff/YYYY-mmm-DD hh:mm:ss.fffffffff]</code> 字符串，其中 <code class="computeroutput">mmm</code> 为3字符月份名且分数部分为零时不出现。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">[2002-Jan-01 01:25:10.000000001/ \<br>    2002-Jan-31 01:25:10.123456789]</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator&gt;&gt;</pre>





      </td>






      <td>时间段的流输入操作符。使用 facet 来读入 [date time_of_day/date time_of_day]. 缺省格式为 <code class="computeroutput">[YYYY-mmm-DD hh:mm:ss.fffffffff/YYYY-mmm-DD hh:mm:ss.fffffffff]</code> 字符串，其中 <code class="computeroutput">mmm</code> 为3字符月份名且分数部分为零时不出现。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">[2002-Jan-01 01:25:10.000000001/ \<br>    2002-Jan-31 01:25:10.123456789]</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator==, operator!=</pre>





      </td>






      <td>相等性比较操作符。时间段相等如果 p1.begin == p2.begin &amp;&amp; p1.last == p2.last</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">if (tp1 == tp2) {...</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator&lt;</pre>





      </td>






      <td>无交叉的排序。返回 True 如果 tp1.end() 小于 tp2.begin()</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">if (tp1 &lt; tp2) {...</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator&gt;</pre>





      </td>






      <td>无交叉的排序。返回 True 如果 tp1.begin() 大于 tp2.end()</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">if (tp1 &gt; tp2) {... etc</pre>





      </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator&lt;=, operator&gt;=</pre>





      </td>






      <td>根据其它操作符来定义。</td>






    </tr>






    <tr>





      <td>&nbsp;</td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






</div>






<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="date_time.posix_time.time_iterators"></a>时间迭代器</h3>





</div>





</div>





</div>






<a href="posix_time.html#time_iter_intro">简介</a> --
  <a href="posix_time.html#time_iter_header">头文件</a> --
  <a href="posix_time.html#time_iter_overview">概要</a> --
  <a href="posix_time.html#time_iter_operators">操作符</a><a name="time_iter_intro"></a>
<h3>
<a name="id974520"></a>简介</h3>






<p>时间迭代器提供了对时间进行迭代的一种机制。时间迭代器类似于 <a href="http://www.sgi.com/tech/stl/BidirectionalIterator.html" target="_top">双向迭代器</a>。不过，time_iterators 与标准迭代器的区别在于，它不存在底层的序列，只有计算用的函数。此外，time_iterators 可以与 <a href="posix_time.html#date_time.posix_time.ptime_class" title="Ptime">类 ptime</a> 的实例直接比较。因此不需要一个表示迭代结束点的迭代器，可以直接使用时间点。例如，以下代码使用了一个每次15分钟的迭代器。例子 <a href="examples.html#date_time.examples.print_hours" title="Print Hours">打印小时</a> 也示范了如何使用 time_iterator. 
  </p>






<p>
    </p>






<pre class="programlisting">      <br>	#include "boost/date_time/posix_time/posix_time.hpp"<br>	#include &lt;iostream&gt;<br><br><br>	int<br>	main()<br>	{<br>	  using namespace boost::gregorian;<br>	  using namespace boost::posix_time;<br>	  date d(2000,Jan,20);<br>	  ptime start(d);<br>	  ptime end = start + hours(1);<br>	  time_iterator titr(start,minutes(15)); //每次递增15分钟<br>	  //生成 00:00:00, 00:15:00, 00:30:00, 00:45:00<br>	  while (titr &lt; end) {<br>	    std::cout &lt;&lt; to_simple_string(*titr) &lt;&lt; std::endl;<br>	    ++titr;<br>	  }<br>	  std::cout &lt;&lt; "Now backward" &lt;&lt; std::endl;<br>	  //produces 01:00:00, 00:45:00, 00:30:00, 00:15:00<br>	  while (titr &gt; start) {<br>	    std::cout &lt;&lt; to_simple_string(*titr) &lt;&lt; std::endl;<br>	    --titr;<br>	  }<br>	}<br>      <br>    </pre>






<p>
  </p>






<a name="time_iter_header"></a>
<h3>
<a name="id974570"></a>头文件</h3>






<p>
    </p>






<pre class="programlisting">#include "boost/date_time/posix_time/posix_time.hpp" //包含所有类型和 i/o<br>或<br>#include "boost/date_time/posix_time/posix_time_types.hpp" //只有类型没有 i/o</pre>






<p>
  </p>






<a name="time_iter_overview"></a>
<h3>
<a name="id974599"></a>概要</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">类</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>构造参数</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">time_iterator</pre>





      </td>






      <td>以指定的递增长度迭代。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">ptime start_time, time_duration increment</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






<a name="time_iter_operators"></a>
<h3>
<a name="id974679"></a>操作符</h3>






<p>
    </p>






<div class="informaltable">
<table class="table">






  <colgroup><col><col></colgroup>
  <thead>
  <tr>






    <th rowspan="2" valign="top">语法</th>






    <th>说明</th>






  </tr>






  <tr>





    <th>例子</th>





  </tr>






  </thead>
  <tbody>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">operator==(const ptime&amp; rhs),<br>operator!=(const ptime&amp; rhs),<br>operator&gt;, operator&lt;,<br>operator&gt;=, operator&lt;=</pre>






	    </td>






      <td>完整的比较操作符。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">date d(2002,Jan,1);<br>ptime start_time(d, hours(1));<br>//递增10分钟<br>time_iterator titr(start_time, minutes(10));<br>ptime end_time = start_time + hours(2);<br>if (titr == end_time) // false<br>if (titr != end_time) // true<br>if (titr &gt;= end_time) // false<br>if (titr &lt;= end_time) // true</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">prefix increment</pre>





      </td>






      <td>以指定时间长度对迭代器进行递增。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">//increment by 10 milli seconds<br>time_iterator titr(start_time, milliseconds(10));<br>++titr; // == start_time + 10 milliseconds</pre>






	    </td>





    </tr>






    <tr>






      <td rowspan="2" valign="top">
      
      
      
      
      
      <pre class="screen">prefix decrement</pre>





      </td>






      <td>以指定时间长度对迭代器进行递减。</td>






    </tr>






    <tr>





      <td>
      
      
      
      
      
      <pre class="screen">time_duration td(1,2,3);<br>time_iterator titr(start_time, td);<br>--titr; // == start_time - 01:02:03</pre>





      </td>





    </tr>






  
  
  
  
  
  </tbody>
</table>





</div>






<p>
  </p>






</div>






</div>






<table width="100%">





  <tbody>





    <tr>






      <td align="left"></td>






      <td align="right"><small>Copyright &copy; 2001-2005 CrystalClear Software, Inc</small></td>






    </tr>





  
  
  
  
  
  </tbody>
</table>






<hr>
<div class="spirit-nav">
<a accesskey="p" href="gregorian.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../date_time.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="local_time.html"><img src="../images/next.png" alt="Next"></a>
</div>






</body>
</html>
