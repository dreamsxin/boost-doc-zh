<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Controlling collection types</title>

<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../../index.html" title="Chapter&nbsp;1.&nbsp;Boost.Bimap">
<link rel="up" href="../the_tutorial.html" title="The tutorial">
<link rel="prev" href="discovering_the_bimap_framework.html" title="Discovering the bimap framework">
<link rel="next" href="the_collection_of_relations_type.html" title="The collection of relations type">
</head>
<body style="color: black; background-color: white;" alink="#0000ff" link="#0000ff" vlink="#840084">
<table cellpadding="2" width="100%">
<tbody>
<tr>
<td valign="top"><img alt="Boost C++ Libraries" src="../../../../../../boost.png" height="86" width="277"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/people/people.htm">People</a></td>
<td align="center"><a href="http://www.boost.org/more/faq.htm">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr>
</tbody>
</table>
<hr>
<div class="spirit-nav"><a accesskey="p" href="discovering_the_bimap_framework.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../the_tutorial.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="the_collection_of_relations_type.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a></div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_bimap.the_tutorial.controlling_collection_types"></a><a class="link" href="controlling_collection_types.html" title="Controlling collection types">Controlling collection
types 控制组合的类型</a>
</h3>
</div>
</div>
</div>
<div class="toc">
<dl>
<dt><span class="section"><a href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.freedom_of_choice">Freedom
of choice 选择的自由</a></span></dt>
<dt><span class="section"><a href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.configuration_parameters">Configuration
parameters 配置参数</a></span></dt>
<dt><span class="section"><a href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.examples">Examples
示例</a></span></dt>
</dl>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="boost_bimap.the_tutorial.controlling_collection_types.freedom_of_choice"></a><a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.freedom_of_choice" title="Freedom of choice">Freedom of choice 选择的自由</a>
</h4>
</div>
</div>
</div>
<p> As has already been said, in STL maps, you can only control
the constraints from one of the collections, namely the one that you
are viewing. In Boost.Bimap, you can control both and it is as easy as
using the STL.</p>
<p>如前所说，在STL map 中，你只能从一方数据组控制约束性，即你察看的那一方。在 Boost.Bimap
中，你可以同时从两方控制，而且和STL一样容易使用。 </p>
<p> <span class="inlinemediaobject"><img src="../../images/bimap/extended.mapping.framework.png" alt="extended.mapping.framework"></span> </p>
<p> The idea is to use the same constraint names that are used in
the standard. If you don't specify the collection type, Boost.Bimap
assumes that the collection is a set. The instantiation of a bimap with
custom collection types looks like this:</p>
<p>思路是，使用与标准一样的约束名字。如果你不指定数据组合的类型，Boost.Bimap 就假定数据组合为一个
set。带定制组合类型的 bimap 实例如下： </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span> <span class="bold"><strong>CollectionType</strong></span><span class="identifier">_of</span><span class="special">&lt;</span><span class="identifier">A</span><span class="special">&gt;,</span> <span class="bold"><strong>CollectionType</strong></span><span class="identifier">_of</span><span class="special">&lt;</span><span class="identifier">B</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">bm_type</span><span class="special">;</span>
</pre>
<p> The following is the list of all supported collection types.</p>
<p>以下列出了所有被支持的组合类型。 </p>
<div class="table">
<a name="id2642497"></a>
<p class="title"><b>Table&nbsp;1.2.&nbsp;Collection
of Key Types</b></p>
<p class="title"><b>表 1.2. 键类型的组合</b></p>
<div class="table-contents">
<table class="table" summary="Collection of Key Types">
<colgroup><col><col><col></colgroup>
<thead><tr>
<th>
<p> name 名字 </p>
</th>
<th>
<p> Features 特性 </p>
</th>
<th>
<p> map view type 映射视图类型 </p>
</th>
</tr>
</thead><tbody>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">set_of</span></code> </p>
</td>
<td>
<p> <span class="emphasis"><em>ordered,
unique</em></span></p>
<p><span class="emphasis"><em>有序，唯一</em></span>
</p>
</td>
<td>
<p> <code class="computeroutput"><span class="identifier">map</span></code> </p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">multiset_of</span></code> </p>
</td>
<td>
<p> <span class="emphasis"><em>ordered</em></span></p>
<p><span class="emphasis"><em>有序 </em></span>
</p>
</td>
<td>
<p> <code class="computeroutput"><span class="identifier">multimap</span></code> </p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">unordered_set_of</span></code>
</p>
</td>
<td>
<p> <span class="emphasis"><em>hashed,
unique</em></span></p>
<p><span class="emphasis"><em>散列，唯一 </em></span>
</p>
</td>
<td>
<p> <code class="computeroutput"><span class="identifier">unordered_map</span></code> </p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">unordered_multiset_of</span></code>
</p>
</td>
<td>
<p> <span class="emphasis"><em>hashed</em></span></p>
<p><span class="emphasis"><em>散列 </em></span>
</p>
</td>
<td>
<p> <code class="computeroutput"><span class="identifier">unordered_multimap</span></code>
</p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">list_of</span></code> </p>
</td>
<td>
<p> <span class="emphasis"><em>sequenced</em></span></p>
<p><span class="emphasis"><em>序列 </em></span>
</p>
</td>
<td>
<p> <code class="computeroutput"><span class="identifier">list_map</span></code> </p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">vector_of</span></code> </p>
</td>
<td>
<p> <span class="emphasis"><em>random
access</em></span></p>
<p><span class="emphasis"><em>随机访问 </em></span>
</p>
</td>
<td>
<p> <code class="computeroutput"><span class="identifier">vector_map</span></code> </p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">unconstrained_set_of</span></code>
</p>
</td>
<td>
<p> <span class="emphasis"><em>unconstrained</em></span></p>
<p><span class="emphasis"><em>无约束 </em></span>
</p>
</td>
<td>
<p> <span class="emphasis"><em>can not
be viewed 不可察看</em></span> </p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="table-break">
<p> <code class="computeroutput"><span class="identifier">list_of</span></code> and <code class="computeroutput"><span class="identifier">vector_of</span></code>
map views are not associated with any existing STL associative
containers. They are two examples of unsorted associative containers. <code class="computeroutput"><span class="identifier">unconstrained_set_of</span></code>
allow the user to ignore a view. This will be explained later.</p>
<p><code class="computeroutput"><span class="identifier">list_of</span></code> 和 <code class="computeroutput"><span class="identifier">vector_of</span></code>
映射视图不与任何已有STL关联式容器相关联。它们是两种无序关联式容器。<code class="computeroutput"><span class="identifier">unconstrained_set_of</span></code>
则允许用户忽略视图。稍后将会有解释。 </p>
<p> <span class="inlinemediaobject"><img src="../../images/bimap/bimap.structures.png" alt="bimap.structures"></span> </p>
<p> The selection of the collection type affects the possible
operations that you can perform with each side of the bimap and the
time it takes to do each. If we have:</p>
<p>对数据组合类型的选择会影响你可以对 bimap 各方数据执行的操作，以及各种操作的时间。如果我们有： </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span> <span class="bold"><strong>CollectionType</strong></span><span class="identifier">_of</span><span class="special">&lt;</span><span class="identifier">A</span><span class="special">&gt;,</span> <span class="bold"><strong>CollectionType</strong></span><span class="identifier">_of</span><span class="special">&lt;</span><span class="identifier">B</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">bm_type</span><span class="special">;</span><br><span class="identifier">bm_type</span> <span class="identifier">bm</span><span class="special">;</span>
</pre>
<p> The following now describes the resulting map views of the
bidirectional map.</p>
<p>以下描述了该双向映射的结果映射视图。 </p>
<div class="itemizedlist">
<ul type="disc">
<li>
<code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span></code> is
signature-compatible with <span class="bold"><strong>LeftMapType</strong></span><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">A</span><span class="special">,</span><span class="identifier">B</span><span class="special">&gt;</span><br>
<span class="identifier">bm</span><span class="special">.</span><span class="identifier">left</span></code>
签名兼容于 <span class="bold"><strong>LeftMapType</strong></span><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">A</span><span class="special">,</span><span class="identifier">B</span><span class="special">&gt;</span></code></li>
<li><code class="computeroutput"><span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span></code> is
signature-compatible with <span class="bold"><strong>RightMapType</strong></span><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">B</span><span class="special">,</span><span class="identifier">A</span><span class="special">&gt;</span><br>
<span class="identifier">bm</span><span class="special">.</span><span class="identifier">right</span></code>
签名兼容于 <span class="bold"><strong>RightMapType</strong></span><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">B</span><span class="special">,</span><span class="identifier">A</span><span class="special">&gt;</span></code>
</li>
</ul>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="boost_bimap.the_tutorial.controlling_collection_types.configuration_parameters"></a><a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.configuration_parameters" title="Configuration parameters">Configuration parameters
配置参数</a>
</h4>
</div>
</div>
</div>
<p> Each collection type template has different parameters to
control its behaviour. For example, in <code class="computeroutput"><span class="identifier">set_of</span></code>
specification, you can pass a Functor type that compares two types. All
of these parameters are exactly the same as those of the standard
library container, except for the allocator type. You will learn later
how to change the allocator for a bimap.</p>
<p>每个组合类型模板都有不同的参数来控制其行为。例如，对于 <code class="computeroutput"><span class="identifier">set_of</span></code>，你可以传入一个函数
对象类型来比较两个类型。所有这些参数都与标准库容器中的完全相同，除了分配器类型。稍后你将学到如何改变一个 bimap 的分配器。 </p>
<p> The following table lists the meanings of each collection
type's parameters.</p>
<p>下表列出了每个组合类型的参数含义。 </p>
<div class="informaltable">
<table class="table">
<colgroup><col><col></colgroup>
<thead><tr>
<th>
<p> name 名字 </p>
</th>
<th>
<p> Additional Parameters 额外参数 </p>
</th>
</tr>
</thead><tbody>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">set_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">KeyComp</span><span class="special">&gt;</span></code> </p>
<p> <code class="computeroutput"><span class="identifier">multiset_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">KeyComp</span><span class="special">&gt;</span></code> </p>
</td>
<td>
<p> <span class="bold"><strong>KeyComp </strong></span>
is a Functor that compares two types using a less-than operator. By
default, this is <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">less</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.<span class="bold"><strong></strong></span></p>
<p><span class="bold"><strong>KeyComp </strong></span>
是一个函数对象，使用小于操作符比较两个类型。它缺省为 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">less</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
</p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">unordered_set_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">HashFunctor</span><span class="special">,</span><span class="identifier">EqualKey</span><span class="special">&gt;</span></code> </p>
<p> <code class="computeroutput"><span class="identifier">unordered_multiset_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">HashFunctor</span><span class="special">,</span><span class="identifier">EqualKey</span><span class="special">&gt;</span></code> </p>
</td>
<td>
<p> <span class="bold"><strong>HashFunctor
</strong></span> converts a <code class="computeroutput"><span class="identifier">T</span></code>
object into an <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code> value.
By default it is <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">hash</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
<span class="bold"><strong></strong></span></p>
<p><span class="bold"><strong>HashFunctor
</strong></span> 将一个 <code class="computeroutput"><span class="identifier">T</span></code>
对象转换为一个 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code> 值。它缺省为 <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">hash</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
</p>
<p> <span class="bold"><strong>EqualKey
</strong></span> is a Functor that tests two types
for equality. By default, the equality operator is <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">equal_to</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.<br>
<span class="bold"><strong>EqualKey
</strong></span> 是一个函数对象，检测两个类型的等价性。缺省的等价操作符是 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">equal_to</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
</p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">list_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>
</p>
</td>
<td>
<p> No additional parameters.<br>
无额外参数。</p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">vector_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>
</p>
</td>
<td>
<p> No additional parameters.<br>
无额外参数。</p>
</td>
</tr>
<tr>
<td>
<p> <code class="computeroutput"><span class="identifier">unconstrained_set_of</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>
</p>
</td>
<td>
<p> No additional parameters.<br>
无额外参数。 </p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="boost_bimap.the_tutorial.controlling_collection_types.examples"></a><a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.examples" title="Examples">Examples 示例</a>
</h4>
</div>
</div>
</div>
<a name="boost_bimap.the_tutorial.controlling_collection_types.examples.countries_populations"></a>
<h6><a name="id2643609"></a> <a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.examples.countries_populations">Countries
Populations 各国人口</a> </h6>
<p> We want to store countries populations. The requeriments are:</p>
<p>我们想保存各国人口数据。需求如下：
</p>
<div class="orderedlist">
<ol type="1">
<li> Get a list of countries in decresing order of their
populations.<br>获取各国的列表，以人口数量递减排序。 </li>
<li> Given a countrie, get their population.<br>给定一个国家，获取其人口数。 </li>
</ol>
</div>
<p> Lets create the appropiate bimap.</p><p>我们来创建一个适当的 bimap。 </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span><br><span class="identifier">unordered_set_of</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;,</span><br><span class="identifier">multiset_of</span><span class="special">&lt;</span> <span class="keyword">long</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">greater</span><span class="special">&lt;</span><span class="keyword">long</span><span class="special">&gt;</span> <span class="special">&gt;</span><br><span class="special">&gt;</span> <span class="identifier">populations_bimap</span><span class="special">;</span>
</pre>
<p> First of all countries names are unique identifiers, while
two countries may have the same population. This is why we choose <span class="bold"><strong>multi</strong></span><code class="computeroutput"><span class="identifier">set_of</span></code>
for populations.</p><p>首先，所有国家的名字是唯一的标识符，而两个国家有可能具有相同数量的人口。这正是我们对人口数选用 <span class="bold"><strong>multi</strong></span><code class="computeroutput"><span class="identifier">set_of</span></code> 的原因。 </p>
<p> Using a <code class="computeroutput"><span class="identifier">multiset_of</span></code> for
population allow us to iterate over the data. Since listing countries
ordered by their names is not a requisite, we can use an <code class="computeroutput"><span class="identifier">unordered_set_of</span></code>
that allows constant order look up. </p>
<p>对人口数使用 <code class="computeroutput"><span class="identifier">multiset_of</span></code>，使得我们可以遍历该数据。由于并不要求按名字顺序列出各个国家，所以我们可以使用 <code class="computeroutput"><span class="identifier">unordered_set_of</span></code>，按固定的顺序来查找。 </p>
<p> And now lets use it in a complete example</p><p>现在我们用它来举一个完整的例子。 </p>


<p> <a href="../../../../example/population_bimap.cpp" target="_top">Go to source code 察看源代码</a></p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><span class="special">&lt;</span><br><span class="identifier">unordered_set_of</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;,</span><br><span class="identifier">multiset_of</span><span class="special">&lt;</span> <span class="keyword">long</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">greater</span><span class="special">&lt;</span><span class="keyword">long</span><span class="special">&gt;</span> <span class="special">&gt;</span><br><span class="special">&gt;</span> <span class="identifier">population_bimap</span><span class="special">;</span><br><span class="keyword">typedef</span> <span class="identifier">population_bimap</span><span class="special">::</span><span class="identifier">value_type</span> <span class="identifier">population</span><span class="special">;</span><br><span class="identifier">population_bimap</span> <span class="identifier">pop</span><span class="special">;</span><br><span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"China"</span><span class="special">,</span> <span class="number">1321000000</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"India"</span><span class="special">,</span> <span class="number">1129000000</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"United States"</span><span class="special">,</span> <span class="number">301950000</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"Indonesia"</span><span class="special">,</span> <span class="number">234950000</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"Brazil"</span><span class="special">,</span> <span class="number">186500000</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">pop</span><span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> <span class="identifier">population</span><span class="special">(</span><span class="string">"Pakistan"</span><span class="special">,</span> <span class="number">163630000</span><span class="special">)</span> <span class="special">);</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Countries by their population:"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="comment">// First requirement 第一个需求<br></span><span class="line_callout_bug"><a class="co" name="boost_bimap4co" href="controlling_collection_types.html#boost_bimap4"><img src="../../images/callouts/1.png" alt="1" border="0"></a></span><span class="keyword">for</span><span class="special">(</span> <span class="identifier">population_bimap</span><span class="special">::</span><span class="identifier">right_const_iterator</span><br><span class="identifier">i</span> <span class="special">=</span> <span class="identifier">pop</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">iend</span> <span class="special">=</span> <span class="identifier">pop</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span><br><span class="identifier">i</span> <span class="special">!=</span> <span class="identifier">iend</span> <span class="special">;</span> <span class="special">++</span><span class="identifier">i</span> <span class="special">)</span><br><span class="special">{</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">&lt;&lt;</span> <span class="string">" with "</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">first</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span><br><span class="special">}</span><br><span class="comment">// Second requirement 第二个需求<br></span><span class="line_callout_bug"><a class="co" name="boost_bimap5co" href="controlling_collection_types.html#boost_bimap5"><img src="../../images/callouts/2.png" alt="2" border="0"></a></span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"Population of China: "</span> <span class="special">&lt;&lt;</span> <span class="identifier">pop</span><span class="special">.</span><span class="identifier">left</span><span class="special">.</span><span class="identifier">at</span><span class="special">(</span><span class="string">"China"</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
</pre>

<p> </p>

<div class="calloutlist">
<table summary="Callout list" border="0">
<tbody>
<tr>
<td align="left" valign="top" width="5%">
<p><a name="boost_bimap4"></a><a href="#boost_bimap4co"><img src="../../images/callouts/1.png" alt="1" border="0"></a></p>
</td>
<td align="left" valign="top">
<p> The right map view works like a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">multimap</span><span class="special">&lt;</span> <span class="keyword">long</span><span class="special">,</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">greater</span><span class="special">&lt;</span><span class="keyword">long</span><span class="special">&gt;</span> <span class="special">&gt;</span></code>, We can
iterate over it to print the results in the required order.</p><p>右映射视图就象一个 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">multimap</span><span class="special">&lt;</span> <span class="keyword">long</span><span class="special">,</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">greater</span><span class="special">&lt;</span><span class="keyword">long</span><span class="special">&gt;</span> <span class="special">&gt;</span></code>, 我们可以对它进行遍历，按所要求的顺序打印结果。 </p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a name="boost_bimap5"></a><a href="#boost_bimap5co"><img src="../../images/callouts/2.png" alt="2" border="0"></a></p>
</td>
<td align="left" valign="top">
<p> The left map view works like a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">unordered_map</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="keyword">long</span>
<span class="special">&gt;</span></code>,
given the name of the country we can use it to search for the
population in constant time</p><p>左映射视图就象一个 <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">unordered_map</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="keyword">long</span>
<span class="special">&gt;</span></code>,
给定一个国家的名字，我们可以用它在常量时间内查找相应的人口数。 </p>
</td>
</tr>
</tbody>
</table>
</div>

<p> </p>
<a name="boost_bimap.the_tutorial.controlling_collection_types.examples.repetitions_counter"></a>
<h6><a name="id2644821"></a> <a class="link" href="controlling_collection_types.html#boost_bimap.the_tutorial.controlling_collection_types.examples.repetitions_counter">Repetitions
counter 重复次数计数</a> </h6>
<p> We want to count the repetitions for each word in a text and
print them in order of appearance.</p><p>我们要计算一篇文本中各个单词的重复次数，并按它们出现的顺序打印。 </p>


<p> <a href="../../../../example/repetitions_counter.cpp" target="_top">Go to source code 察看源代码</a></p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bimap</span><br><span class="special">&lt;</span><br><span class="identifier">unordered_set_of</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&gt;,</span><br><span class="identifier">list_of</span><span class="special">&lt;</span> <span class="identifier">counter</span> <span class="special">&gt;</span> <span class="callout_bug"><a class="co" name="boost_bimap6co" href="controlling_collection_types.html#boost_bimap6"><img src="../../images/callouts/1.png" alt="1" border="0"></a></span><br><span class="special">&gt;</span> <span class="identifier">word_counter</span><span class="special">;</span><br><span class="keyword">typedef</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">tokenizer</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">char_separator</span><span class="special">&lt;</span><span class="keyword">char</span><span class="special">&gt;</span> <span class="special">&gt;</span> <span class="identifier">text_tokenizer</span><span class="special">;</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">text</span><span class="special">=</span><br><span class="string">"Relations between data in the STL are represented with maps."</span><br><span class="string">"A map is a directed relation, by using it you are representing "</span><br><span class="string">"a mapping. In this directed relation, the first type is related to "</span><br><span class="string">"the second type but it is not true that the inverse relationship "</span><br><span class="string">"holds. This is useful in a lot of situations, but there are some "</span><br><span class="string">"relationships that are bidirectional by nature."</span><span class="special">;</span><br><span class="comment">// feed the text into the container 将文本导入容器中<br></span><span class="identifier">word_counter</span> <span class="identifier">wc</span><span class="special">;</span><br><span class="identifier">text_tokenizer</span> <span class="identifier">tok</span><span class="special">(</span><span class="identifier">text</span><span class="special">,</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">char_separator</span><span class="special">&lt;</span><span class="keyword">char</span><span class="special">&gt;(</span><span class="string">" \t\n.,;:!?'\"-"</span><span class="special">));</span><br><span class="keyword">for</span><span class="special">(</span> <span class="identifier">text_tokenizer</span><span class="special">::</span><span class="identifier">const_iterator</span> <span class="identifier">it</span> <span class="special">=</span> <span class="identifier">tok</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">it_end</span> <span class="special">=</span> <span class="identifier">tok</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span><br><span class="identifier">it</span> <span class="special">!=</span> <span class="identifier">it_end</span> <span class="special">;</span> <span class="special">++</span><span class="identifier">it</span> <span class="special">)</span><br><span class="special">{</span>
<span class="line_callout_bug"><a class="co" name="boost_bimap7co" href="controlling_collection_types.html#boost_bimap7"><img src="../../images/callouts/2.png" alt="2" border="0"></a></span><span class="special">++</span> <span class="identifier">wc</span><span class="special">.</span><span class="identifier">left</span><span class="special">[*</span><span class="identifier">it</span><span class="special">];</span><br><span class="special">}</span><br><span class="comment">// list words with counters by order of appearance 按出现的顺序列出单词及重复次数<br></span><span class="line_callout_bug"><a class="co" name="boost_bimap8co" href="controlling_collection_types.html#boost_bimap8"><img src="../../images/callouts/3.png" alt="3" border="0"></a></span><span class="keyword">for</span><span class="special">(</span> <span class="identifier">word_counter</span><span class="special">::</span><span class="identifier">right_const_iterator</span><br><span class="identifier">wit</span> <span class="special">=</span> <span class="identifier">wc</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">wit_end</span> <span class="special">=</span> <span class="identifier">wc</span><span class="special">.</span><span class="identifier">right</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span><br><span class="identifier">wit</span> <span class="special">!=</span> <span class="identifier">wit_end</span><span class="special">;</span> <span class="special">++</span><span class="identifier">wit</span> <span class="special">)</span><br><span class="special">{</span><br><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">wit</span><span class="special">-&gt;</span><span class="identifier">second</span> <span class="special">&lt;&lt;</span> <span class="string">": "</span> <span class="special">&lt;&lt;</span> <span class="identifier">wit</span><span class="special">-&gt;</span><span class="identifier">first</span><span class="special">;</span><br><span class="special">}</span>
</pre>
<div class="calloutlist">
<table summary="Callout list" border="0">
<tbody>
<tr>
<td align="left" valign="top" width="5%">
<p><a name="boost_bimap6"></a><a href="#boost_bimap6co"><img src="../../images/callouts/1.png" alt="1" border="0"></a></p>
</td>
<td align="left" valign="top">
<p> <code class="computeroutput"><span class="identifier">counter</span></code> is an
integer that is initialized in zero in the constructor</p><p><code class="computeroutput"><span class="identifier">counter</span></code> 是一个在构造函数中被初始化为零的整数 </p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a name="boost_bimap7"></a><a href="#boost_bimap7co"><img src="../../images/callouts/2.png" alt="2" border="0"></a></p>
</td>
<td align="left" valign="top">
<p> Because the right collection type is <code class="computeroutput"><span class="identifier">list_of</span></code>,
the right data is not used a key and can be modified in the same way as
with standard maps.</p><p>因为右组类型为 <code class="computeroutput"><span class="identifier">list_of</span></code>,
所以右数据不会被用作键值，且可以象标准 map 那样修改。 </p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a name="boost_bimap8"></a><a href="#boost_bimap8co"><img src="../../images/callouts/3.png" alt="3" border="0"></a></p>
</td>
<td align="left" valign="top">
<p> When we insert the elements using the left map view,
the element is inserted at the end of the list.</p><p>当我们使用左映射视图插入元素时，元素将被插入到列表的末端。 </p>
</td>
</tr>
</tbody>
</table>
</div>
<p> </p>
<p> </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%">
<tbody>
<tr>
<td align="left"></td>
<td align="right">
<div class="copyright-footer">Copyright © 2006 -2007
Matias Capeletto
<p> Distributed under the Boost Software License, Version
1.0. (See accompanying file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
</p>
</div>
</td>
</tr>
</tbody>
</table>
<hr>
<div class="spirit-nav"><a accesskey="p" href="discovering_the_bimap_framework.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../the_tutorial.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="the_collection_of_relations_type.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a></div>
</body></html>