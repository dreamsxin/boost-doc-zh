<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Root Finding Without Derivatives</title>
<link rel="stylesheet" href="../../../../../../../../doc/html/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot_2006-12-17_0120">
<link rel="start" href="../../../index.html" title="Math Toolkit">
<link rel="up" href="../internals1.html" title="Reused Utilities">
<link rel="prev" href="roots.html" title="Root Finding With Derivatives">
<link rel="next" href="minima.html" title="Locating Function Minima">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="roots.html"><img src="../../../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../internals1.html"><img src="../../../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="minima.html"><img src="../../../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div>
  <h4 class="title">
<a name="math_toolkit.toolkit.internals1.roots2"></a><a href="roots2.html" title="Root Finding Without Derivatives"> 不使用导数查找根(Root Finding
        Without Derivatives)</a>
</h4>
</div></div></div>
<a name="math_toolkit.toolkit.internals1.roots2.synopsis"></a>
<h5>
<a name="id785787"></a>
          <a href="roots2.html#math_toolkit.toolkit.internals1.roots2.synopsis">概要</a>
  </h5>
<p>
          
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">math</span><span class="special">/</span><span class="identifier">tools</span><span class="special">/</span><span class="identifier">roots</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
  </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">math</span><span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">tools</span><span class="special">{</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bisect</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">min</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">max</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bisect</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">min</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">max</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">,</span> <span class="keyword">class</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bisect</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">min</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">max</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">,</span>
      <span class="keyword">const</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&amp;);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bracket_and_solve_root</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">guess</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">factor</span><span class="special">,</span> 
      <span class="keyword">bool</span> <span class="identifier">rising</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">,</span> <span class="keyword">class</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bracket_and_solve_root</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">guess</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">factor</span><span class="special">,</span> 
      <span class="keyword">bool</span> <span class="identifier">rising</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">,</span>
      <span class="keyword">const</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&amp;);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">toms748_solve</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">,</span> <span class="keyword">class</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">toms748_solve</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">,</span>
      <span class="keyword">const</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&amp;);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">toms748_solve</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">fa</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">fb</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">,</span> <span class="keyword">class</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">toms748_solve</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">fa</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">fb</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">,</span>
      <span class="keyword">const</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&amp;);</span>

<span class="comment">// 结束条件:
</span><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">eps_tolerance</span><span class="special">;</span>

<span class="keyword">struct</span> <span class="identifier">equal_floor</span><span class="special">;</span>
<span class="keyword">struct</span> <span class="identifier">equal_ceil</span><span class="special">;</span>
<span class="keyword">struct</span> <span class="identifier">equal_nearest_integer</span><span class="special">;</span>

<span class="special">}}}</span> <span class="comment">// namespaces
</span></pre>
<a name="math_toolkit.toolkit.internals1.roots2.description"></a>
<h5>
<a name="id788429"></a>
          <a href="roots2.html#math_toolkit.toolkit.internals1.roots2.description">描述</a>
  </h5>
<p>
  这些函数求解某些函数 <span class="emphasis"><em>f(x)</em></span> 的根而不需要计算函数 <span class="emphasis"><em>f(x)</em></span> 的导数。这些函数在这里使用TOMS 算法 748，这个算法是已知的最有效的渐近算法，并且对于一些光滑的函数(smooth functions)进行了优化。</p>
<p>
          另一方面，在一些情况下，有一个平分函数是很有用的，在调用一个更高级的算法之前，用于将包含根的范围进行缩小。</p>
<p>
          在这一部分中的所有算法使用同样的渐近效率(asymptotic efficiency)来减小包含根的区间的直径。这与基于导数的算法是相反的，使用导数的算法可能<span class="emphasis"><em>永远</em></span>
          都不会明显地减小包含根的区间的大小，即使算法快速地趋近于根。这与其它的无导数算法(derivative-free methods)(例如<a href="http://en.wikipedia.org/wiki/Brent%27s_method" target="_top">Brent
          或 Dekker</a> 算法)只在计算的最后一步减小包含根的区间的大小也是相反的。因此，这些算法返回一个包含找到的区间的std::pair ，并接收一个函数对象作为结束条件。对于已生成(ready-made)的结束条件已提供了3个函数对象：<span class="emphasis"><em>eps_tolerance</em></span> 会在相对误差小于一个特定值的时候结束计算过程，而<span class="emphasis"><em>equal_floor</em></span> 和 <span class="emphasis"><em>equal_ceil</em></span>
          对于一些计算结果已知是整数的统计分布是很有用的。其它用户自定义的结束条件也类似地使用，这种情况很少，但是在一些特定的情况下可能很有用。</p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bisect</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">min</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">max</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bisect</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">min</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">max</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">,</span> <span class="keyword">class</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bisect</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">min</span><span class="special">,</span> 
      <span class="identifier">T</span> <span class="identifier">max</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">,</span>
      <span class="keyword">const</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&amp;);</span>
</pre>
<p>
  这些函数使用二分法来定位函数的根，函数参数为：</p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">f</span></dt>
<dd>
  <p>
            一个一元的函数对象，为这个函数查找根。</p>
</dd>
<dt><span class="term">min</span></dt>
<dd>
  <p>
            包含这个根的左边界值。</p>
</dd>
<dt><span class="term">max</span></dt>
<dd>
  <p>
              包含这个根的右边界值。前提条件为<span class="emphasis"><em>min &lt; max</em></span> 且 <span class="emphasis"><em>f(min)*f(max)
            &lt;= 0</em></span>，如果违反了前提条件，那么这个函数会产生一个计算错误。这种行为由计算错误处理策略来控制。返回一个最佳的猜测值，可能明显是错误的。</p>
</dd>
<dt><span class="term">tol</span></dt>
<dd>
  <p>
              一个用于指定结束条件的二元函数对象：当<span class="emphasis"><em>tol(min,max)</em></span>
              变为真的时候，这个函数返回包含根的区间。</p>
</dd>
<dt><span class="term">max_iter</span></dt>
<dd>
  <p>
            当查找根的时候调用函数<span class="emphasis"><em>f(x)</em></span> 的最大次数。</p>
</dd>
</dl>
</div>
<p>
  </p>
<p>
  最后一个<a href="../../policy.html" title="Policies">策略</a> 参数是可选的，并可以用来控制函数的行为：如何处理错误，使用哪种层次的精度等等，参考<a href="../../policy.html" title="Policies">策略文档</a>了解详细信息。</p>
<p>
  </p>
<p>
          返回包含根的数对<span class="emphasis"><em>r</em></span>使得：</p>
<pre class="programlisting"><span class="identifier">f</span><span class="special">(</span><span class="identifier">r</span><span class="special">.</span><span class="identifier">first</span><span class="special">)</span> <span class="special">*</span> <span class="identifier">f</span><span class="special">(</span><span class="identifier">r</span><span class="special">.</span><span class="identifier">second</span><span class="special">)</span> <span class="special">&lt;=</span> <span class="number">0</span>
</pre>
<p>
          或者</p>
<pre class="programlisting"><span class="identifier">tol</span><span class="special">(</span><span class="identifier">r</span><span class="special">.</span><span class="identifier">first</span><span class="special">,</span> <span class="identifier">r</span><span class="special">.</span><span class="identifier">second</span><span class="special">)</span> <span class="special">==</span> <span class="keyword">true</span>
</pre>
<p>
          或</p>
<pre class="programlisting"><span class="identifier">max_iter</span> <span class="special">&gt;=</span> <span class="identifier">m</span>
</pre>
<p>
          其中 <span class="emphasis"><em>m</em></span> 是传递给函数的参数 <span class="emphasis"><em>max_iter</em></span>
          的初始值。</p>
<p>
          换句话说，由调用者来确保是否由超过<span class="emphasis"><em>max_iter</em></span> 
          次函数调用而导致计算结束(通过在函数返回时检查<span class="emphasis"><em>max_iter</em></span> 的值)，而不是因为结束条件<span class="emphasis"><em>tol</em></span>
          得到满足。</p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bracket_and_solve_root</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">guess</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">factor</span><span class="special">,</span> 
      <span class="keyword">bool</span> <span class="identifier">rising</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">,</span> <span class="keyword">class</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">bracket_and_solve_root</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">guess</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">factor</span><span class="special">,</span> 
      <span class="keyword">bool</span> <span class="identifier">rising</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">,</span>
      <span class="keyword">const</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&amp;);</span>
</pre>
<p>
          这是一个方便易用的函数，在库的内部称之为<span class="emphasis"><em>toms748_solve</em></span>
  ，用于查找函数<span class="emphasis"><em>f(x)</em></span>的根。仅当函数<span class="emphasis"><em>f(x)</em></span>是一个单调函数，并且根的位置是近似知道的时候才可以使用函数<span class="emphasis"><em>toms748_solve</em></span>， 尤其是知道根为正数还是为负数。参数为：</p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">f</span></dt>
<dd>
  <p>
            一个一元的函数对象，为这个函数查找根。 f(x)必须在<span class="emphasis"><em>x</em></span>上一致递增或一致递减。</p>
</dd>
<dt><span class="term">guess</span></dt>
<dd>
  <p>
            根的初始逼近值。</p>
</dd>
<dt><span class="term">factor</span></dt>
<dd>
  <p>
              一个用于包含根的尺度因子：<span class="emphasis"><em>guess</em></span>
              的值乘以 (或者如果恰当则除以)<span class="emphasis"><em>factor</em></span>直到找到包括(bracket)根的两个值。类似于2的值通常是因子<span class="emphasis"><em>factor</em></span>的一个选择。</p>
</dd>
<dt><span class="term">rising</span></dt>
<dd>
  <p>              <span class="emphasis">如果函数</span><span class="emphasis"><em>f(x)</em></span> 关于<span class="emphasis"><em>x</em></span>递增则设置为<span class="emphasis"><em>true</em></span>，如果函数<span class="emphasis"><em>f(x)</em></span>关于<span class="emphasis"><em>x</em></span>递减则设置为<span class="emphasis"></span><span class="emphasis"><em>false</em></span>。这个值与<span class="emphasis"><em>f(guess)</em></span> 的值一起使用来判断<span class="emphasis"><em>guess</em></span>
              是大于还是小于根。</p>
</dd>
<dt><span class="term">tol</span></dt>
<dd>
  <p>
            一个用于判定结束条件的二元的函数对象：<span class="emphasis"><em>tol</em></span> 在每一步都传递给当前的区间，直到返回真的时候就将当前的区间作为返回值。</p>
</dd>
<dt><span class="term">max_iter</span></dt>
<dd>
  <p>
            在查找根的过程中所使用的最大的函数调用次数。</p>
</dd>
</dl>
</div>
<p>
  </p>
<p>
            最后一个<a href="../../policy.html" title="Policies">策略</a> 参数是可选的，并可以用来控制函数的行为：如何处理错误，使用哪种层次的精度等等，参考<a href="../../policy.html" title="Policies">策略文档</a>了解详细信息。</p>
<p>返回包含根的数对<span class="emphasis"><em>r</em></span>使得：</p>
<pre class="programlisting"><span class="identifier">f</span><span class="special">(</span><span class="identifier">r</span><span class="special">.</span><span class="identifier">first</span><span class="special">)</span> <span class="special">*</span> <span class="identifier">f</span><span class="special">(</span><span class="identifier">r</span><span class="special">.</span><span class="identifier">second</span><span class="special">)</span> <span class="special">&lt;=</span> <span class="number">0</span>
</pre>
<p>
          或者</p>
<pre class="programlisting"><span class="identifier">tol</span><span class="special">(</span><span class="identifier">r</span><span class="special">.</span><span class="identifier">first</span><span class="special">,</span> <span class="identifier">r</span><span class="special">.</span><span class="identifier">second</span><span class="special">)</span> <span class="special">==</span> <span class="keyword">true</span>
</pre>
<p>
          或</p>
<pre class="programlisting"><span class="identifier">max_iter</span> <span class="special">&gt;=</span> <span class="identifier">m</span>
</pre>
<p>
          其中 <span class="emphasis"><em>m</em></span> 是传递给函数的参数 <span class="emphasis"><em>max_iter</em></span> 的初始值。</p>
<p>
  换句话说，由调用者来确保是否由超过<span class="emphasis"><em>max_iter</em></span> 次函数调用而导致计算结束(通过在函数返回时检查<span class="emphasis"><em>max_iter</em></span> 的值)，而不是因为结束条件<span class="emphasis"><em>tol</em></span> 得到满足。</p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">toms748_solve</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">,</span> <span class="keyword">class</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">toms748_solve</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">,</span>
      <span class="keyword">const</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&amp;);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">toms748_solve</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">fa</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">fb</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">);</span>
      
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Tol</span><span class="special">,</span> <span class="keyword">class</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;</span> 
   <span class="identifier">toms748_solve</span><span class="special">(</span>
      <span class="identifier">F</span> <span class="identifier">f</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">fa</span><span class="special">,</span> 
      <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">fb</span><span class="special">,</span> 
      <span class="identifier">Tol</span> <span class="identifier">tol</span><span class="special">,</span> 
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">uintmax_t</span><span class="special">&amp;</span> <span class="identifier">max_iter</span><span class="special">,</span>
      <span class="keyword">const</span> <a href="../../policy.html" title="Policies">Policy</a><span class="special">&amp;);</span>
</pre>
<p>
          这两个函数实现 TOMS Algorithm 748：它是三次方程，二次方程以及线性插值(
  cubic, quadratic and linear  interpolation)的混合使用，用于定位函数<span class="emphasis"><em>f(x)</em></span>的根。这两个函数的区别在于<span class="emphasis"><em>f(a)</em></span> 和 <span class="emphasis"><em>f(b)</em></span> 的值是否是已经可用的：</p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">f</span></dt>
<dd>
  <p>
              一个被查找根的二元函数。 f(x)
              不需要在<span class="emphasis"><em>x</em></span>
            上一致递增或一致递减，并且可以有多个根。</p>
</dd>
<dt><span class="term">a</span></dt>
<dd>
  <p>
            初始的包含根的区间的下边界值。</p>
</dd>
<dt><span class="term">b</span></dt>
<dd>
  <p>
              初始的包含根的区间的上边界值。前提条件为<span class="emphasis"><em>a &lt; b</em></span> 且 <span class="emphasis"><em>a</em></span>
              和<span class="emphasis"><em>b</em></span> 包括(bracket)要查找的根，使得<span class="emphasis"><em>f(a)*f(b)
              &lt; 0</em></span>。</p>
</dd>
<dt><span class="term">fa</span></dt>
<dd>
  <p>
              可选的： <span class="emphasis"><em>f(a)</em></span>的值。</p>
</dd>
<dt><span class="term">fb</span></dt>
<dd>
  <p>
              可选的： <span class="emphasis"><em>f(b)</em></span>的值。</p>
</dd>
<dt><span class="term">tol</span></dt>
<dd><p>
              一个用于判定结束条件的二元的函数对象：<span class="emphasis"><em>tol</em></span> 在每一步都传递给当前的区间，直到返回真的时候就将当前的区间作为返回值。</p></dd>
<dt><span class="term">max_iter</span></dt>
<dd>
  <p>
            在查找根的过程中所使用的最大的函数调用次数。在退出的时候<span class="emphasis"><em>max_iter</em></span> 的值设置为实际调用的函数的次数。</p>
</dd>
</dl>
</div>
<p>
  </p>
<p>
            最后一个<a href="../../policy.html" title="Policies">策略</a> 参数是可选的，并可以用来控制函数的行为：如何处理错误，使用哪种层次的精度等等，参考<a href="../../policy.html" title="Policies">策略文档</a>了解详细信息。</p>
<p>
  </p>
<p>
          返回包含根的数对<span class="emphasis"><em>r</em></span>使得：</p>
<pre class="programlisting"><span class="identifier">f</span><span class="special">(</span><span class="identifier">r</span><span class="special">.</span><span class="identifier">first</span><span class="special">)</span> <span class="special">*</span> <span class="identifier">f</span><span class="special">(</span><span class="identifier">r</span><span class="special">.</span><span class="identifier">second</span><span class="special">)</span> <span class="special">&lt;=</span> <span class="number">0</span>
</pre>
<p>
          或者</p>
<pre class="programlisting"><span class="identifier">tol</span><span class="special">(</span><span class="identifier">r</span><span class="special">.</span><span class="identifier">first</span><span class="special">,</span> <span class="identifier">r</span><span class="special">.</span><span class="identifier">second</span><span class="special">)</span> <span class="special">==</span> <span class="keyword">true</span>
</pre>
<p>
          或</p>
<pre class="programlisting"><span class="identifier">max_iter</span> <span class="special">&gt;=</span> <span class="identifier">m</span>
</pre>
<p>
          其中 <span class="emphasis"><em>m</em></span> 是传递给函数的参数 <span class="emphasis"><em>max_iter</em></span> 的初始值。</p>
<p>
          换句话说，由调用者来确保是否由超过<span class="emphasis"><em>max_iter</em></span> 次函数调用而导致计算结束(通过在函数返回时检查<span class="emphasis"><em>max_iter</em></span> 的值)，而不是因为结束条件<span class="emphasis"><em>tol</em></span> 得到满足。</p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">eps_tolerance</span>
<span class="special">{</span>
   <span class="identifier">eps_tolerance</span><span class="special">(</span><span class="keyword">int</span> <span class="identifier">bits</span><span class="special">);</span>
   <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">()(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span><span class="keyword">const</span><span class="special">;</span>
<span class="special">};</span>
</pre>
<p>
          这是这些根查找算法通常所使用的结束条件： 当<span class="emphasis"><em>a</em></span>
          和<span class="emphasis"><em>b</em></span> 之间的相对距离小于两倍的T类型的机器最小精度值( machine epsilon for T)，或者 2<sup>1-bits</sup>， 无论这两个值中哪一个更大。换句话说，你将<span class="emphasis"><em>bits</em></span>
          设置为结果中你所想要的bit数目。 大小为T类型的最小机器精度的2倍的最小容许度( minimal
  tolerance)确保我们得到一个括起来的区间(bracketing interval)：因为这个区间至少为1个机器精度大小。</p>
<pre class="programlisting"><span class="keyword">struct</span> <span class="identifier">equal_floor</span>
<span class="special">{</span>
   <span class="identifier">equal_floor</span><span class="special">();</span>
   <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span> <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">()(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span><span class="keyword">const</span><span class="special">;</span>
<span class="special">};</span>
</pre>
<p>
  当你想要查找一个真实根向下舍入的整数值的结果时，你使用这个结束条件。当区间的两个边界值向下舍入值相同时这个函数就立即返回。</p>
<pre class="programlisting"><span class="keyword">struct</span> <span class="identifier">equal_ceil</span>
<span class="special">{</span>
   <span class="identifier">equal_ceil</span><span class="special">();</span>
   <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span> <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">()(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span><span class="keyword">const</span><span class="special">;</span>
<span class="special">};</span>
</pre>
<p>
          当你想要查找一个真实根向上舍入的整数值的结果时，你使用这个结束条件。当区间的两个边界值向上舍入值相同时这个函数就立即返回。</p>
<pre class="programlisting"><span class="keyword">struct</span> <span class="identifier">equal_nearest_integer</span>
<span class="special">{</span>
   <span class="identifier">equal_nearest_integer</span><span class="special">();</span>
   <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span> <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">()(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span><span class="keyword">const</span><span class="special">;</span>
<span class="special">};</span>
</pre>
<p>
          当你想要查找一个真实根舍入到最接近的整数值的结果时，你使用这个结束条件。当区间的两个边界值舍入到最接近的整数值相同时这个函数就立即返回。</p>
<a name="math_toolkit.toolkit.internals1.roots2.implementation"></a>
<h5>
<a name="id792874"></a>
          <a href="roots2.html#math_toolkit.toolkit.internals1.roots2.implementation">实现</a>
  </h5>
<p>
          二分算法的实现相当直接并且没有在这里详细说明。TOMS algorithm 748 在下面的文献中进行了详细的描述： </p>
<p>
          <span class="emphasis"><em>Algorithm 748: Enclosing Zeros of Continuous Functions, G. E.
          Alefeld, F. A. Potra and Yixun Shi, ACM Transactions on Mathematica1 Software,
          Vol. 21. No. 3. September 1995. Pages 327-344.</em></span>
  </p>
<p>
  这里的实现是将这篇论文的算法如实地用C++实现。</p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright ?2006 , 2007, 2008 John Maddock, Paul A. Bristow, Hubert
      Holin, Xiaogang Zhang and Bruno Lalande<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="roots.html"><img src="../../../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../internals1.html"><img src="../../../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="minima.html"><img src="../../../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
