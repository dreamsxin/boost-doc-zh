<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">

    
    
  
  <title>Stream Offsets</title><link rel="stylesheet" href="../../../../boost.css">

    
  <link rel="stylesheet" href="../theme/iostreams.css"></head>

<body>


<!-- Begin Banner -->

    
<h1 class="title">流的偏移量</h1>

    
<hr class="banner">

<!-- End Banner -->

<dl class="page-index">

  <dt><a href="#overview">简介</a></dt>

  <dt><a href="#acknowledgments">感谢</a>
  </dt>
  <dt><a href="#headers">头文件</a></dt>

  <dt><a href="#reference">参考</a></dt>

</dl>


<hr>

<a name="overview"></a>
<h2>简介</h2>


<p>头文件 <a class="header" href="../../../../boost/iostreams/positioning.hpp"><code>&lt;boost/iostreams/positioning.hpp&gt;</code></a> 提供了整型类型 <code>boost::iostreams::stream_offset</code> 的定义，该类型可用于保存多数平台上的任意流的偏移量，头文件还定义了两个函数，<code>offset_to_position</code> 和 <code>position_to_offset</code>, 用于在 <code>stream_offset</code> 和 <code>std::streampos</code> 之间的转换。
</p>


<p>类型 <code>std::streampos</code> 要求可以保存任意流的位置，但它不是一个整型类型。虽然 <code>std::streampos</code> 可以与整型类型 <code>std::streamoff</code> 相互转换，但是从 <code>std::streampos</code> 到 <code>std::streamoff</code> 的转换对于大数值 (64-位) 是不可靠的。整型类型 <code>boost::iostreams::stream_offset</code> 的目的是替代 <code>std::streamoff</code>,&nbsp;与 <code>std::streampos</code> 间的隐式转换被替换为显式的转换函数。
</p>


<p><code>offset_to_position</code>&nbsp;和 <code>position_to_offset</code> 的实现依靠实现定义的行为，并且只对将 <code>std::streamoff</code> 定义为64位类型的标准库或者显式配置的 Boost Iostreams 库，才确保可以正确使用大数值。
</p>


<a name="acknowledgments"></a>
<h2>感谢</h2>


<p>Gareth Sylvester-Bradley 建议了对 Boost Iostreams 库的大偏移量的讨论，并实现了用于 Dinkumware 标准库的 <code>offset_to_position</code> 和 <code>position_to_offset</code>&nbsp;.</p>


<a name="headers"></a>
<h2>头文件</h2>


<dl class="page-index">

  <dt><a class="header" href="../../../../boost/iostreams/positioning.hpp"><code>&lt;boost/iostreams/positioning.hpp&gt;</code></a></dt>

</dl>


<a name="reference"></a>
<h2>参考</h2>


<a name="synopsis"></a>
<h4>摘要</h4>


<pre class="broken_ie"><span class="keyword">namespace</span> boost { <span class="keyword">namespace</span> iostreams {<br><br><span class="keyword">typedef</span> <a class="documented" href="../../../integer/doc/html/boost_integer/cstdint.html" target="_top">boost::intmax_t</a> stream_offset;<br>std::streampos <a class="documented" href="#offset_to_position">offset_to_position</a>(stream_offset n);<br>stream_offset <a class="documented" href="#position_to_offset">position_to_offset</a>(std::streampos pos);<br><br>} } <span class="comment">// End namespace boost::io</span></pre>


<a name="offset_to_position"></a>
<h4>函数模板 <code>offset_to_position</code></h4>


<pre class="broken_ie">std::streampos offset_to_position(stream_offset n);</pre>


<p>返回一个 <code>std::streampos</code> 表示流中的第 <code>n</code><i>th</i> 个位置。</p>


<a name="position_to_offset"></a>
<h4>函数模板 <code>position_to_offset</code></h4>


<pre class="broken_ie">stream_offset position_to_offset(std::streampos pos);</pre>


<p>返回一个 <code>stream_offset</code> 表示与 <code>pos</code> 同一个字符位置，忽略任何代码转换状态。</p>


<!-- Begin Footer -->

<hr>
<p class="copyright">Revised
<!--webbot bot="Timestamp" S-Type="EDITED" S-Format="%d %B, %Y" startspan -->
20 May, 2004
<!--webbot bot="Timestamp" endspan i-checksum="38504" -->
</p>


<p class="copyright">© Copyright <a href="http://www.kangaroologic.com" target="_top">Jonathan Turkanis</a>, 2004</p>

<p class="copyright"> 
    Distributed under the Boost Software License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt">http://www.boost.org/LICENSE_1_0.txt</a>)
</p>


<!-- End Footer -->

</body></html>