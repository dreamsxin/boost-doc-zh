<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>


		
		
  
  
  <title>Boost: checked_delete.hpp documentation</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>


<body style="margin-left: 5%; margin-right: 5%;" bgcolor="white">


		
<table border="0" width="100%">


			<tbody>

    <tr>


				<td width="277"><a href="../../index.htm"> <img src="../../boost.png" alt="boost.png (6897 bytes)" border="0" height="86" width="277"></a>
				</td>


				<td align="center">
					
      
      <h1>checked_delete.hpp</h1>


				</td>


			</tr>


			<tr>


				<td colspan="2" height="64">&nbsp;</td>


			</tr>


		
  
  </tbody>
</table>


		
<p>头文件 <strong>&lt;boost/checked_delete.hpp&gt;</strong> 定义了两个函数模板，<strong>checked_delete</strong> 和 <strong>checked_array_delete</strong>, 
			以及两个类模板，<strong>checked_deleter</strong>&nbsp;和 <strong>checked_array_deleter</strong>.
		</p>


		
<p>C++标准的 5.3.5/5 节中允许通过一个 <span style="font-style: italic;">delete</span> 表达式删除指向不完全类的指针。如果该类有一个非平凡的析构函数，或者有一个类相关的 delete 操作符，那么其行为就是无定义的。有些编译器会在删除不完全类型时给出警告，但不幸的是，不是所有编译器都这样，而且程序员有时也会忽略或禁止警告。</p>


		
<p>一个尤其麻烦的情况是以一个不完全类型实例化一人智能指针的析构函数，如 <strong>
				boost::scoped_ptr&lt;T&gt;::~scoped_ptr</strong>。这通常会引起难以跟踪的错误。</p>


		
<p>本库提供的函数和类模板可用于防止这些问题，它们要求一个完全的类型，否则引发一个编译错误。</p>


		
<h3><a name="Synopsis">概要</a></h3>


		
<pre>namespace boost<br>{<br><br>template&lt;class T&gt; void checked_delete(T * p);<br>template&lt;class T&gt; void checked_array_delete(T * p);<br>template&lt;class T&gt; struct checked_deleter;<br>template&lt;class T&gt; struct checked_array_deleter;<br><br>}<br></pre>


		
<h3>checked_delete</h3>


		
<h4><a name="checked_delete">template&lt;class T&gt; void checked_delete(T * p);</a></h4>


		
<blockquote>
			
  
  <p>
				<b>要求：</b><b>T</b> 必须是完全的类型。表达式 <tt>delete p</tt>
				必须是合法的。
			</p>


			
  
  <p>
				<b>作用：</b><tt>delete p;</tt>
			</p>


		</blockquote>


		
<h3>checked_array_delete</h3>


		
<h4><a name="checked_array_delete">template&lt;class T&gt; void checked_array_delete(T 
				* p);</a></h4>


		
<blockquote>
			
  
  <p>
				<b>要求：</b><b>T</b> 必须是完全的类型。表达式 <tt>delete [] p</tt>
				必须是合法的。
			</p>


			
  
  <p>
				<b>作用：</b><tt>delete [] p;</tt>
			</p>


		</blockquote>


		
<h3>checked_deleter</h3>


		
<pre>template&lt;class T&gt; struct checked_deleter<br>{<br>    typedef void result_type;<br>    typedef T * argument_type;<br>    void operator()(T * p) const;<br>};<br></pre>


		
<h4>void checked_deleter&lt;T&gt;::operator()(T * p) const;</h4>


		
<blockquote>
			
  
  <p>
				<b>要求：</b><b>T</b> 必须是完全的类型。表达式 <tt>delete p</tt>
				必须是合法的。
			</p>


			
  
  <p>
				<b>作用：</b><tt>delete p;</tt>
			</p>


		</blockquote>


		
<h3>checked_array_deleter</h3>


		
<pre>template&lt;class T&gt; struct checked_array_deleter<br>{<br>    typedef void result_type;<br>    typedef T * argument_type;<br>    void operator()(T * p) const;<br>};<br></pre>


		
<h4>void checked_array_deleter&lt;T&gt;::operator()(T * p) const;</h4>


		
<blockquote>
			
  
  <p>
				<b>要求：</b><b>T</b> 必须是完全的类型。表达式 <tt>delete [] p</tt>
				必须是合法的。
			</p>


			
  
  <p>
				<b>作用：</b><tt>delete [] p;</tt>
			</p>


		</blockquote>


		
<h3><a name="Acknowledgements">鸣谢</a></h3>


		
<p>
			The function templates <strong>checked_delete</strong> and <strong>checked_array_delete</strong>
			were originally part of <strong>&lt;boost/utility.hpp&gt;</strong>, and the 
			documentation acknowledged Beman Dawes, Dave Abrahams, Vladimir Prus, Rainer 
			Deyke, John Maddock, and others as contributors.
		</p>


		
<p>
			<br>


			<small>Copyright &copy; 2002 by Peter Dimov. Distributed under the Boost Software License, Version 
				1.0. See accompanying file <a href="../../LICENSE_1_0.txt">LICENSE_1_0.txt</a> or 
				copy at <a href="http://www.boost.org/LICENSE_1_0.txt">http://www.boost.org/LICENSE_1_0.txt</a>.</small></p>


	
</body>
</html>
