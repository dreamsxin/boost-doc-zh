<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><!--
(C) Copyright 2002-10 Robert Ramey - http://www.rrsd.com .
Use, modification and distribution is subject to the Boost Software
License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
http://www.boost.org/LICENSE_1_0.txt)
-->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../boost.css">
<link rel="stylesheet" type="text/css" href="style.css">
<title>Serialization - Derivation from an Existing Archive</title></head>


<body link="#0000ff" vlink="#800080">
<table summary="header" border="0" cellpadding="7" cellspacing="0" width="100%">
  <tbody><tr> 
    <td valign="top" width="300"> 
      <h3><a href="../../../index.htm"><img alt="C++ Boost" src="../../../boost.png" border="0" height="86" width="277"></a></h3>
    </td>
    <td valign="top"> 
      <h1 align="center">Serialization</h1>
      <h2 align="center">一个简单的日志存档类</h2>
    </td>
  </tr>
</tbody></table>
<hr>这个例子的目的是帮助理解
<a href="archives.html"><strong>Archive 概念</strong></a> 
的用法，以便你可以实现自己的存档类。<a href="../example/simple_log_archive.hpp" target="simple_archive_hpp"><code>simple_log_archive.hpp</code></a> 实现了一个简单但有用的存档类。这个类可用于以可读的格式发送任意可序列化类型至一个输出文本流。这个工具的使用非常容易：

<pre><code>
#include "simple_log_archive.hpp"
...
// display the complete schedule
simple_log_archive log(std::cout);
log &lt;&lt; schedule;
</code></pre>它产生如下输出

<pre><code>
schedule 
 count 6
 item 
  first 
   driver bob
   hour 6
   minute 24
  second -&gt; 
   stops 
    count 3
    item -&gt; 
     latitude 
      degrees 34
      minutes 135
      seconds 52.56
     longitude 
      degrees 134
      minutes 22
      seconds 78.3
...
</code></pre>完整的例子见 <a href="../example/demo_simple_log.cpp" target="demo_simple_log_cpp">
<code>demo_simple_log.cpp</code></a>。查阅 
<a href="archive_reference.html#trivial">平凡的存档</a> 可以更好地理解它是如何工作的。另外，留意以下几点：
<ul>
  <li>只有160行代码。
  </li><li>只有头文件 - 不需要与序列化库相链接。
  </li><li>显示所有 <a href="serialization.html"><strong>可序列化</strong></a> 类型。
  </li><li>一些不足的地方
  <ul>
    <li>它不能显示以多态基类指针给定的派生类的数据。即只能显示基类的信息。要增加此功能请见下一个例子。
    </li><li>不显示以序列化为二进制数据的信息。
  </li></ul>
</li></ul>

<hr>
<p><i>© Copyright <a href="http://www.rrsd.com">Robert Ramey</a> 2002-2010. 
Distributed under the Boost Software License, Version 1.0. (See
accompanying file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
</i></p>
</body></html>