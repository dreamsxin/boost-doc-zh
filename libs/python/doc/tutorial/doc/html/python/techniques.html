<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>General Techniques &#36890;&#29992;&#25216;&#26415;</title>
<link rel="stylesheet" href="../../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="../index.html" title="Chapter&#160;1.&#160;python 2.0">
<link rel="up" href="../index.html" title="Chapter&#160;1.&#160;python 2.0">
<link rel="prev" href="exception.html" title="Exception Translation &#24322;&#24120;&#32763;&#35793;">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="exception.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="python.techniques"></a> General Techniques &#36890;&#29992;&#25216;&#26415;</h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="techniques.html#python.creating_packages"> Creating Packages &#21019;&#24314;&#21253;</a></span></dt>
<dt><span class="section"><a href="techniques.html#python.extending_wrapped_objects_in_python"> Extending Wrapped Objects in Python &#22312;Python&#20013;&#25193;&#23637;&#23553;&#35013;&#30340;&#23545;&#35937;</a></span></dt>
<dt><span class="section"><a href="techniques.html#python.reducing_compiling_time"> Reducing Compiling Time &#20943;&#23569;&#32534;&#35793;&#26102;&#38388;</a></span></dt>
</dl></div>
<p>
      Here are presented some useful techniques that you can use while wrapping code
      with Boost.Python.<br> &#36825;&#37324;&#20171;&#32461;&#20102;&#19968;&#20123;&#26377;&#29992;&#30340;&#25216;&#24039;&#65292;&#21487;&#20197;&#22312;&#29992;Boost.Python&#23553;&#35013;&#20195;&#30721;&#26102;&#20351;&#29992;&#12290;
    </p>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="python.creating_packages"></a> Creating Packages &#21019;&#24314;&#21253;</h3></div></div></div>
<p>
        A Python package is a collection of modules that provide to the user a certain
        functionality. If you're not familiar on how to create packages, a good introduction
        to them is provided in the <a href="http://www.python.org/doc/current/tut/node8.html" target="_top">Python
        Tutorial</a>.<br> Python&#21253;&#26159;&#19968;&#20010;&#27169;&#22359;&#38598;&#21512;&#65292;&#25552;&#20379;&#32473;&#29992;&#25143;&#19968;&#23450;&#30340;&#21151;&#33021;&#12290;
        &#22914;&#26524;&#24744;&#19981;&#29087;&#24713;&#22914;&#20309;&#21019;&#24314;&#36719;&#20214;&#21253;&#65292;&#22312; <a href="http://www.python.org/doc/current/tut/node8.html" target="_top">Python&#25945;&#31243;</a>
        &#20013;&#26377;&#19968;&#20010;&#24456;&#22909;&#30340;&#20171;&#32461;&#12290;
      </p>
<p>
        But we are wrapping C++ code, using Boost.Python. How can we provide a nice
        package interface to our users? To better explain some concepts, let's work
        with an example.<br> &#20294;&#26159;&#65292;&#25105;&#20204;&#26159;&#22312;&#29992;Boost.Python&#23553;&#35013;C++&#20195;&#30721;&#12290;
        &#25105;&#20204;&#24590;&#26679;&#25165;&#33021;&#21521;&#25105;&#20204;&#30340;&#29992;&#25143;&#25552;&#20379;&#19968;&#20010;&#28418;&#20142;&#30340;&#36719;&#20214;&#21253;&#25509;&#21475;&#65311;
        &#20026;&#20102;&#26356;&#22909;&#22320;&#35299;&#37322;&#19968;&#20123;&#27010;&#24565;&#65292;&#35753;&#25105;&#20204;&#20030;&#20010;&#20363;&#23376;&#12290;
      </p>
<p>
        We have a C++ library that works with sounds: reading and writing various
        formats, applying filters to the sound data, etc. It is named (conveniently)
        <code class="literal">sounds</code>. Our library already has a neat C++ namespace hierarchy,
        like so:<br> &#25105;&#20204;&#26377;&#19968;&#20010;C++&#22768;&#38899;&#24211;&#65306;&#35835;&#20889;&#21508;&#31181;&#26684;&#24335;&#12289;&#23545;&#22768;&#38899;&#25968;&#25454;&#24212;&#29992;&#36807;&#28388;&#22120;&#65292;&#31561;&#31561;&#12290;
        &#23427;&#65288;&#26041;&#20415;&#22320;&#65289;&#21629;&#21517;&#20026; <code class="literal">sounds</code>&#12290; &#25105;&#20204;&#24211;&#24050;&#32463;&#26377;&#19968;&#20010;&#25972;&#27905;&#30340;C++&#21517;&#23383;&#31354;&#38388;&#23618;&#27425;&#65292;&#20687;&#36825;&#26679;&#65306;
      </p>
<pre class="programlisting"><span class="identifier">sounds</span><span class="special">::</span><span class="identifier">core</span>
<span class="identifier">sounds</span><span class="special">::</span><span class="identifier">io</span>
<span class="identifier">sounds</span><span class="special">::</span><span class="identifier">filters</span>
</pre>
<p>
        We would like to present this same hierarchy to the Python user, allowing
        him to write code like this:<br> &#25105;&#20204;&#24819;&#21521;Python&#29992;&#25143;&#21576;&#29616;&#36825;&#19968;&#30456;&#21516;&#30340;&#23618;&#27425;&#32467;&#26500;&#65292;&#35753;&#20182;&#21487;&#20197;&#36825;&#26679;&#20889;&#20195;&#30721;&#65306;
      </p>
<pre class="programlisting"><span class="keyword">import</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">filters</span>
<span class="identifier">sounds</span><span class="special">.</span><span class="identifier">filters</span><span class="special">.</span><span class="identifier">echo</span><span class="special">(...)</span> <span class="comment"># echo is a C++ function
</span></pre>
<p>
        The first step is to write the wrapping code. We have to export each module
        separately with Boost.Python, like this:<br> &#31532;&#19968;&#27493;&#26159;&#32534;&#20889;&#23553;&#35013;&#20195;&#30721;&#12290;
        &#25105;&#20204;&#24517;&#39035;&#29992;Boost.Python&#20998;&#21035;&#23548;&#20986;&#27599;&#20010;&#27169;&#22359;&#65292;&#20687;&#36825;&#26679;&#65306;
      </p>
<pre class="programlisting"><span class="special">/*</span> <span class="identifier">file</span> <span class="identifier">core</span><span class="special">.</span><span class="identifier">cpp</span> <span class="special">*/</span>
<span class="identifier">BOOST_PYTHON_MODULE</span><span class="special">(</span><span class="identifier">core</span><span class="special">)</span>
<span class="special">{</span>
    <span class="special">/*</span> <span class="identifier">export</span> <span class="identifier">everything</span> <span class="keyword">in</span> <span class="identifier">the</span> <span class="identifier">sounds</span><span class="special">::</span><span class="identifier">core</span> <span class="identifier">namespace</span> <span class="special">*/</span>
    <span class="special">...</span>
<span class="special">}</span>

<span class="special">/*</span> <span class="identifier">file</span> <span class="identifier">io</span><span class="special">.</span><span class="identifier">cpp</span> <span class="special">*/</span>
<span class="identifier">BOOST_PYTHON_MODULE</span><span class="special">(</span><span class="identifier">io</span><span class="special">)</span>
<span class="special">{</span>
    <span class="special">/*</span> <span class="identifier">export</span> <span class="identifier">everything</span> <span class="keyword">in</span> <span class="identifier">the</span> <span class="identifier">sounds</span><span class="special">::</span><span class="identifier">io</span> <span class="identifier">namespace</span> <span class="special">*/</span>
    <span class="special">...</span>
<span class="special">}</span>

<span class="special">/*</span> <span class="identifier">file</span> <span class="identifier">filters</span><span class="special">.</span><span class="identifier">cpp</span> <span class="special">*/</span>
<span class="identifier">BOOST_PYTHON_MODULE</span><span class="special">(</span><span class="identifier">filters</span><span class="special">)</span>
<span class="special">{</span>
    <span class="special">/*</span> <span class="identifier">export</span> <span class="identifier">everything</span> <span class="keyword">in</span> <span class="identifier">the</span> <span class="identifier">sounds</span><span class="special">::</span><span class="identifier">filters</span> <span class="identifier">namespace</span> <span class="special">*/</span>
    <span class="special">...</span>
<span class="special">}</span>
</pre>
<p>
        Compiling these files will generate the following Python extensions: <code class="literal">core.pyd</code>,
        <code class="literal">io.pyd</code> and <code class="literal">filters.pyd</code>.<br> &#32534;&#35793;&#36825;&#20123;&#25991;&#20214;&#20250;&#29983;&#25104;&#20197;&#19979;Python&#25193;&#23637;&#65306;<code class="literal">core.pyd</code>,
        <code class="literal">io.pyd</code> &#21644; <code class="literal">filters.pyd</code>&#12290;
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          The extension <code class="literal">.pyd</code> is used for python extension modules,
          which are just shared libraries. Using the default for your system, like
          <code class="literal">.so</code> for Unix and <code class="literal">.dll</code> for Windows,
          works just as well.<br> Python&#25193;&#23637;&#27169;&#22359;&#29992;&#20102;&#25193;&#23637;&#21517; <code class="literal">.pyd</code>&#65292;
          &#20294;&#23427;&#21482;&#19981;&#36807;&#26159;&#20849;&#20139;&#24211;&#12290; &#20063;&#21487;&#20197;&#20351;&#29992;&#20320;&#31995;&#32479;&#40664;&#35748;&#30340;&#25193;&#23637;&#21517;&#65292;
          &#22914;Unix&#19978;&#26159; <code class="literal">.so</code>&#65292; Windows&#19978;&#26159; <code class="literal">.dll</code>&#12290;
        </p></td></tr>
</table></div>
<p>
        Now, we create this directory structure for our Python package:<br> &#29616;&#22312;&#65292;&#25105;&#20204;&#20026;&#25105;&#20204;&#30340;Python&#21253;&#24314;&#31435;&#20102;&#36825;&#20010;&#30446;&#24405;&#32467;&#26500;&#65306;
      </p>
<pre class="programlisting">sounds/
    __init__.py
    core.pyd
    filters.pyd
    io.pyd
</pre>
<p>
        The file <code class="literal">__init__.py</code> is what tells Python that the directory
        <code class="literal">sounds/</code> is actually a Python package. It can be a empty
        file, but can also perform some magic, that will be shown later.<br> &#25991;&#20214;
        <code class="literal">__init__.py</code> &#23558;&#21578;&#35785;Python&#65292;<code class="literal">sounds/</code>
        &#20854;&#23454;&#26159;&#19968;&#20010;Python&#21253;&#12290; &#23427;&#21487;&#20197;&#26159;&#19968;&#20010;&#31354;&#25991;&#20214;&#65292;&#20294;&#20063;&#21487;&#20197;&#25191;&#34892;&#19968;&#20123;&#39764;&#26415;&#65292;&#23558;&#22312;&#31245;&#21518;&#23637;&#31034;&#12290;
      </p>
<p>
        Now our package is ready. All the user has to do is put <code class="literal">sounds</code>
        into his <a href="http://www.python.org/doc/current/tut/node8.html#SECTION008110000000000000000" target="_top">PYTHONPATH</a>
        and fire up the interpreter:<br> &#29616;&#22312;&#25105;&#20204;&#30340;&#36719;&#20214;&#21253;&#24050;&#32463;&#20934;&#22791;&#23601;&#32490;&#12290;
        &#29992;&#25143;&#21482;&#38656;&#23558; <code class="literal">sounds</code> &#25918;&#20837;&#20182;&#30340; <a href="http://www.python.org/doc/current/tut/node8.html#SECTION008110000000000000000" target="_top">PYTHONPATH</a>&#65292;
        &#28982;&#21518;&#25171;&#24320;&#35299;&#37322;&#22120;&#65306;
      </p>
<pre class="programlisting"><span class="special">&gt;&gt;&gt;</span> <span class="keyword">import</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">io</span>
<span class="special">&gt;&gt;&gt;</span> <span class="keyword">import</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">filters</span>
<span class="special">&gt;&gt;&gt;</span> <span class="identifier">sound</span> <span class="special">=</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">io</span><span class="special">.</span><span class="identifier">open</span><span class="special">(</span><span class="string">'file.mp3'</span><span class="special">)</span>
<span class="special">&gt;&gt;&gt;</span> <span class="identifier">new_sound</span> <span class="special">=</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">filters</span><span class="special">.</span><span class="identifier">echo</span><span class="special">(</span><span class="identifier">sound</span><span class="special">,</span> <span class="number">1.0</span><span class="special">)</span>
</pre>
<p>
        Nice heh?<br> &#28418;&#20142;&#21543;&#65311;
      </p>
<p>
        This is the simplest way to create hierarchies of packages, but it is not
        very flexible. What if we want to add a <span class="emphasis"><em>pure</em></span> Python
        function to the filters package, for instance, one that applies 3 filters
        in a sound object at once? Sure, you can do this in C++ and export it, but
        why not do so in Python? You don't have to recompile the extension modules,
        plus it will be easier to write it.<br> &#36825;&#26159;&#21019;&#24314;&#36719;&#20214;&#21253;&#23618;&#27425;&#32467;&#26500;&#26368;&#31616;&#21333;&#30340;&#26041;&#27861;&#65292;&#20294;&#23427;&#19981;&#26159;&#24456;&#28789;&#27963;&#12290;
        &#22914;&#26524;&#25105;&#20204;&#24819;&#35201;&#22312;filters&#21253;&#20013;&#21152;&#20837;&#19968;&#20010; <span class="emphasis"><em>&#32431;</em></span> Python&#30340;&#20989;&#25968;&#65292;
        &#27604;&#22914;&#65292;&#22312;sound&#23545;&#35937;&#20013;&#65292;&#19968;&#27425;&#24212;&#29992;3&#20010;&#36807;&#28388;&#22120;&#65292; &#35813;&#24590;&#20040;&#20570;&#21602;&#65311;
        &#24403;&#28982;&#65292;&#20320;&#21487;&#20197;&#29992;C++&#20570;&#24182;&#23548;&#20986;&#23427;&#65292; &#20294;&#20026;&#20160;&#20040;&#19981;&#22312;Python&#20013;&#20570;&#21602;&#65311;
        &#36825;&#26679;&#65292;&#20320;&#19981;&#24517;&#37325;&#26032;&#32534;&#35793;&#25193;&#23637;&#27169;&#22359;&#65292;&#20877;&#21152;&#19978;&#20250;&#27604;&#36739;&#23481;&#26131;&#20889;&#12290;
      </p>
<p>
        If we want this flexibility, we will have to complicate our package hierarchy
        a little. First, we will have to change the name of the extension modules:<br>
        &#22914;&#26524;&#25105;&#20204;&#24819;&#35201;&#36825;&#31181;&#28789;&#27963;&#24615;&#65292; &#25105;&#20204;&#23558;&#19981;&#24471;&#19981;&#35753;&#25105;&#20204;&#30340;&#21253;&#32467;&#26500;&#22797;&#26434;&#19968;&#28857;&#12290;
        &#39318;&#20808;&#65292;&#25105;&#20204;&#24517;&#39035;&#25913;&#21464;&#25193;&#23637;&#27169;&#22359;&#30340;&#21517;&#31216;&#65306;
      </p>
<pre class="programlisting"><span class="comment">/* file core.cpp */</span>
<span class="identifier">BOOST_PYTHON_MODULE</span><span class="special">(</span><span class="identifier">_core</span><span class="special">)</span>
<span class="special">{</span>
    <span class="special">...</span>
    <span class="comment">/* export everything in the sounds::core namespace */</span>
<span class="special">}</span>
</pre>
<p>
        Note that we added an underscore to the module name. The filename will have
        to be changed to <code class="literal">_core.pyd</code> as well, and we do the same
        to the other extension modules. Now, we change our package hierarchy like
        so:<br> &#27880;&#24847;&#65292;&#25105;&#20204;&#32473;&#27169;&#22359;&#21517;&#28155;&#21152;&#20102;&#19979;&#21010;&#32447;&#12290; &#21516;&#26102;&#25991;&#20214;&#21517;&#23558;&#19981;&#24471;&#19981;&#25913;&#20026;
        <code class="literal">_core.pyd</code>&#65292; &#32780;&#19988;&#65292;&#20854;&#20182;&#25193;&#23637;&#27169;&#22359;&#20063;&#21516;&#26679;&#22788;&#29702;&#12290;
        &#29616;&#22312;&#65292;&#25105;&#20204;&#36719;&#20214;&#21253;&#30340;&#23618;&#27425;&#32467;&#26500;&#25913;&#20026;&#35937;&#36825;&#26679;&#65306;
      </p>
<pre class="programlisting">sounds/
    __init__.py
    core/
        __init__.py
        <span class="underline">core.pyd
    filters/
        \</span>_init__.py
        <span class="underline">filters.pyd
    io/
        \</span>_init__.py
        _io.pyd
</pre>
<p>
        Note that we created a directory for each extension module, and added a __init__.py
        to each one. But if we leave it that way, the user will have to access the
        functions in the core module with this syntax:<br> &#27880;&#24847;&#65292;&#25105;&#20204;&#20026;&#27599;&#20010;&#25193;&#23637;&#27169;&#22359;&#21019;&#24314;&#19968;&#20010;&#30446;&#24405;&#65292;
        &#24182;&#19988;&#20026;&#27599;&#20010;&#30446;&#24405;&#28155;&#21152;&#19968;&#20010; __init__.py&#12290; &#20294;&#26159;&#65292;&#22914;&#26524;&#25105;&#20204;&#38543;&#23427;&#36825;&#26679;&#65292;
        &#29992;&#25143;&#23558;&#19981;&#24471;&#19981;&#29992;&#36825;&#31181;&#35821;&#27861;&#35775;&#38382;&#26680;&#24515;&#27169;&#22359;&#20013;&#30340;&#21151;&#33021;&#65306;
      </p>
<pre class="programlisting"><span class="special">&gt;&gt;&gt;</span> <span class="keyword">import</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">core</span><span class="special">.</span><span class="identifier">_core</span>
<span class="special">&gt;&gt;&gt;</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">core</span><span class="special">.</span><span class="identifier">_core</span><span class="special">.</span><span class="identifier">foo</span><span class="special">(...)</span>
</pre>
<p>
        which is not what we want. But here enters the <code class="literal">__init__.py</code>
        magic: everything that is brought to the <code class="literal">__init__.py</code> namespace
        can be accessed directly by the user. So, all we have to do is bring the
        entire namespace from <code class="literal">_core.pyd</code> to <code class="literal">core/__init__.py</code>.
        So add this line of code to <code class="literal">sounds<span class="emphasis"><em>core</em></span>__init__.py</code>:<br>
        &#36825;&#19981;&#26159;&#25105;&#20204;&#24819;&#35201;&#30340;&#12290; &#20294; <code class="literal">__init__.py</code> &#39764;&#26415;&#24320;&#22987;&#20102;&#65306;
        &#36827;&#20837; <code class="literal">__init__.py</code> &#21517;&#23383;&#31354;&#38388;&#30340;&#25152;&#26377;&#19996;&#35199;&#65292; &#29992;&#25143;&#37117;&#21487;&#33021;&#30452;&#25509;&#35775;&#38382;&#12290;
        &#22240;&#27492;&#65292;&#25105;&#20204;&#35201;&#20570;&#30340;&#23601;&#26159;&#65292;&#23558;&#25972;&#20010;&#21517;&#23383;&#31354;&#38388;&#20174; <code class="literal">_core.pyd</code>
        &#24341;&#21040; <code class="literal">core/__init__.py</code>&#12290; &#25152;&#20197;&#22312; <code class="literal">sounds<span class="emphasis"><em>core</em></span>__init__.py</code>
        &#20013;&#21152;&#20837;&#36825;&#34892;&#20195;&#30721;&#65306;
      </p>
<pre class="programlisting"><span class="keyword">from</span> <span class="identifier">_core</span> <span class="keyword">import</span> <span class="special">*</span>
</pre>
<p>
        We do the same for the other packages. Now the user accesses the functions
        and classes in the extension modules like before:<br> &#20854;&#20182;&#21253;&#21516;&#26679;&#22788;&#29702;&#12290;
        &#29616;&#22312;&#65292;&#29992;&#25143;&#21487;&#20197;&#21644;&#20197;&#21069;&#19968;&#26679;&#35775;&#38382;&#25193;&#23637;&#27169;&#22359;&#20013;&#30340;&#20989;&#25968;&#21644;&#31867;&#20102;&#65306;
      </p>
<pre class="programlisting"><span class="special">&gt;&gt;&gt;</span> <span class="keyword">import</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">filters</span>
<span class="special">&gt;&gt;&gt;</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">filters</span><span class="special">.</span><span class="identifier">echo</span><span class="special">(...)</span>
</pre>
<p>
        with the additional benefit that we can easily add pure Python functions
        to any module, in a way that the user can't tell the difference between a
        C++ function and a Python function. Let's add a <span class="emphasis"><em>pure</em></span>
        Python function, <code class="literal">echo_noise</code>, to the <code class="literal">filters</code>
        package. This function applies both the <code class="literal">echo</code> and <code class="literal">noise</code>
        filters in sequence in the given <code class="literal">sound</code> object. We create
        a file named <code class="literal">sounds/filters/echo_noise.py</code> and code our
        function:<br> &#39069;&#22806;&#30340;&#22909;&#22788;&#26159;&#65292;&#25105;&#20204;&#29616;&#22312;&#21487;&#20197;&#36731;&#26131;&#22320;&#22312;&#20219;&#20309;&#27169;&#22359;&#20013;&#21152;&#20837;&#32431;Python&#20989;&#25968;&#65292;
        &#35753;&#29992;&#25143;&#19981;&#24517;&#21306;&#20998;C++&#20989;&#25968;&#21644;Python&#20989;&#25968;&#12290; &#35753;&#25105;&#20204;&#21521; <code class="literal">filters</code>
        &#21253; &#28155;&#21152;&#19968;&#20010;<span class="emphasis"><em>&#32431;</em></span>&#30340;&#20989;&#25968;&#65292;<code class="literal">echo_noise</code>&#12290;
        &#35813;&#20989;&#25968;&#23545;&#36755;&#20837;&#30340; <code class="literal">sound</code> &#23545;&#35937; &#20381;&#27425;&#24212;&#29992; <code class="literal">echo</code>
        &#21644; <code class="literal">noise</code> &#36807;&#28388;&#22120;&#12290; &#25105;&#20204;&#21019;&#24314;&#19968;&#20010; <code class="literal">sounds/filters/echo_noise.py</code>
        &#25991;&#20214;&#65292;&#24182;&#22914;&#19979;&#32534;&#20889;&#25105;&#20204;&#30340;&#20989;&#25968;&#65306;
      </p>
<pre class="programlisting"><span class="keyword">import</span> <span class="identifier">_filters</span>
<span class="keyword">def</span> <span class="identifier">echo_noise</span><span class="special">(</span><span class="identifier">sound</span><span class="special">):</span>
    <span class="identifier">s</span> <span class="special">=</span> <span class="identifier">_filters</span><span class="special">.</span><span class="identifier">echo</span><span class="special">(</span><span class="identifier">sound</span><span class="special">)</span>
    <span class="identifier">s</span> <span class="special">=</span> <span class="identifier">_filters</span><span class="special">.</span><span class="identifier">noise</span><span class="special">(</span><span class="identifier">sound</span><span class="special">)</span>
    <span class="keyword">return</span> <span class="identifier">s</span>
</pre>
<p>
        Next, we add this line to <code class="literal">sounds<span class="emphasis"><em>filters</em></span>__init__.py</code>:<br>
        &#25509;&#30528;&#65292;&#25105;&#20204;&#25226;&#36825;&#19968;&#34892;&#21152;&#20837; <code class="literal">sounds<span class="emphasis"><em>filters</em></span>__init__.py</code>&#65306;
      </p>
<pre class="programlisting"><span class="keyword">from</span> <span class="identifier">echo_noise</span> <span class="keyword">import</span> <span class="identifier">echo_noise</span>
</pre>
<p>
        And that's it. The user now accesses this function like any other function
        from the <code class="literal">filters</code> package:<br> &#23601;&#26159;&#36825;&#26679;&#12290;&#29992;&#25143;&#29616;&#22312;&#21487;&#20197;&#20687;
        <code class="literal">filters</code> &#21253;&#20013;&#30340;&#20219;&#20309;&#20854;&#20182;&#20989;&#25968;&#19968;&#26679;&#35775;&#38382;&#36825;&#20010;&#20989;&#25968;&#20102;&#65306;
      </p>
<pre class="programlisting"><span class="special">&gt;&gt;&gt;</span> <span class="keyword">import</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">filters</span>
<span class="special">&gt;&gt;&gt;</span> <span class="identifier">sounds</span><span class="special">.</span><span class="identifier">filters</span><span class="special">.</span><span class="identifier">echo_noise</span><span class="special">(...)</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="python.extending_wrapped_objects_in_python"></a> Extending Wrapped Objects in Python &#22312;Python&#20013;&#25193;&#23637;&#23553;&#35013;&#30340;&#23545;&#35937;</h3></div></div></div>
<p>
        Thanks to Python's flexibility, you can easily add new methods to a class,
        even after it was already created:<br> &#24863;&#35874;Python&#30340;&#28789;&#27963;&#24615;&#65292;&#20320;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#22312;&#31867;&#20013;&#28155;&#21152;&#26032;&#30340;&#26041;&#27861;&#65292;
        &#21363;&#20351;&#26159;&#22312;&#31867;&#21019;&#24314;&#20043;&#21518;&#65306;
      </p>
<pre class="programlisting"><span class="special">&gt;&gt;&gt;</span> <span class="keyword">class</span> <span class="identifier">C</span><span class="special">(</span><span class="identifier">object</span><span class="special">):</span> <span class="keyword">pass</span>
<span class="special">&gt;&gt;&gt;</span>
<span class="special">&gt;&gt;&gt;</span> <span class="comment"># a regular function
</span><span class="special">&gt;&gt;&gt;</span> <span class="keyword">def</span> <span class="identifier">C_str</span><span class="special">(</span><span class="identifier">self</span><span class="special">):</span> <span class="keyword">return</span> <span class="string">'A C instance!'</span>
<span class="special">&gt;&gt;&gt;</span>
<span class="special">&gt;&gt;&gt;</span> <span class="comment"># now we turn it in a member function
</span><span class="special">&gt;&gt;&gt;</span> <span class="identifier">C</span><span class="special">.</span><span class="identifier">__str__</span> <span class="special">=</span> <span class="identifier">C_str</span>
<span class="special">&gt;&gt;&gt;</span>
<span class="special">&gt;&gt;&gt;</span> <span class="identifier">c</span> <span class="special">=</span> <span class="identifier">C</span><span class="special">()</span>
<span class="special">&gt;&gt;&gt;</span> <span class="keyword">print</span> <span class="identifier">c</span>
<span class="identifier">A</span> <span class="identifier">C</span> <span class="identifier">instance</span><span class="special">!</span>
<span class="special">&gt;&gt;&gt;</span> <span class="identifier">C_str</span><span class="special">(</span><span class="identifier">c</span><span class="special">)</span>
<span class="identifier">A</span> <span class="identifier">C</span> <span class="identifier">instance</span><span class="special">!</span>
</pre>
<p>
        Yes, Python rox. <span class="inlinemediaobject"><img src="../images/smiley.png" alt="smiley"></span><br> &#32822;&#65292;Python &#30495;&#26834;&#12290;<span class="inlinemediaobject"><img src="../images/smiley.png" alt="smiley"></span>
      </p>
<p>
        We can do the same with classes that were wrapped with Boost.Python. Suppose
        we have a class <code class="literal">point</code> in C++:<br> &#25105;&#20204;&#21487;&#20197;&#23545;&#29992;Boost.Python&#23553;&#35013;&#30340;&#31867;&#20570;&#21516;&#26679;&#20107;&#12290;
        &#20551;&#35774;&#25105;&#20204;&#26377;&#19968;&#20010; <code class="literal">point</code> C++&#31867;&#65306;
      </p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">point</span> <span class="special">{...};</span>

<span class="identifier">BOOST_PYTHON_MODULE</span><span class="special">(</span><span class="identifier">_geom</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">class_</span><span class="special">&lt;</span><span class="identifier">point</span><span class="special">&gt;(</span><span class="string">"point"</span><span class="special">)...;</span>
<span class="special">}</span>
</pre>
<p>
        If we are using the technique from the previous session, <a class="link" href="techniques.html#python.creating_packages" title="Creating Packages &#21019;&#24314;&#21253;">Creating
        Packages</a>, we can code directly into <code class="literal">geom/__init__.py</code>:<br>
        &#22914;&#26524;&#25105;&#20204;&#20351;&#29992;&#19978;&#19968;&#33410;&#65292;<a class="link" href="techniques.html#python.creating_packages" title="Creating Packages &#21019;&#24314;&#21253;">&#21019;&#24314;&#21253;</a>
        &#20013;&#30340;&#25216;&#26415;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312; <code class="literal">geom/__init__.py</code> &#20013;&#30452;&#25509;&#32534;&#30721;&#65306;
      </p>
<pre class="programlisting"><span class="keyword">from</span> <span class="identifier">_geom</span> <span class="keyword">import</span> <span class="special">*</span>

<span class="comment"># a regular function
</span><span class="keyword">def</span> <span class="identifier">point_str</span><span class="special">(</span><span class="identifier">self</span><span class="special">):</span>
    <span class="keyword">return</span> <span class="identifier">str</span><span class="special">((</span><span class="identifier">self</span><span class="special">.</span><span class="identifier">x</span><span class="special">,</span> <span class="identifier">self</span><span class="special">.</span><span class="identifier">y</span><span class="special">))</span>

<span class="comment"># now we turn it into a member function
</span><span class="identifier">point</span><span class="special">.</span><span class="identifier">__str__</span> <span class="special">=</span> <span class="identifier">point_str</span>
</pre>
<p>
        <span class="bold"><strong>All</strong></span> point instances created from C++ will
        also have this member function! This technique has several advantages:<br>
        <span class="bold"><strong>&#25152;&#26377;</strong></span> &#20174;C++&#21019;&#24314;&#30340;point&#23454;&#20363;&#37117;&#20250;&#25317;&#26377;&#36825;&#20010;&#25104;&#21592;&#20989;&#25968;&#65281;
        &#36825;&#31181;&#25216;&#26415;&#20855;&#26377;&#20960;&#20010;&#20248;&#21183;&#65306;
      </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
            Cut down compile times to zero for these additional functions<br> &#36825;&#20123;&#38468;&#21152;&#20989;&#25968;&#30340;&#32534;&#35793;&#26102;&#38388;&#20026;&#38646;
          </li>
<li class="listitem">
            Reduce the memory footprint to virtually zero<br> &#20869;&#23384;&#21344;&#29992;&#20960;&#20046;&#20026;&#38646;
          </li>
<li class="listitem">
            Minimize the need to recompile<br> &#23613;&#37327;&#20943;&#23569;&#20102;&#37325;&#32534;&#35793;&#30340;&#38656;&#35201;
          </li>
<li class="listitem">
            Rapid prototyping (you can move the code to C++ if required without changing
            the interface)<br> &#24555;&#36895;&#21407;&#22411;&#65288;&#22914;&#26377;&#38656;&#35201;&#65292;&#20320;&#21487;&#20197;&#25226;&#20195;&#30721;&#31227;&#21040;C++&#65292;&#32780;&#19981;&#24517;&#26356;&#25913;&#25509;&#21475;&#65289;
          </li>
</ul></div>
<p>
        You can even add a little syntactic sugar with the use of metaclasses. Let's
        create a special metaclass that "injects" methods in other classes.<br>
        &#20320;&#29978;&#33267;&#21487;&#20197;&#20351;&#29992;&#20803;&#31867;&#26469;&#28155;&#21152;&#23569;&#35768;&#35821;&#27861;&#31958;&#12290; &#35753;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#29305;&#21035;&#30340;&#20803;&#31867;&#65292;&#29992;&#26469;&#21521;&#20854;&#20182;&#31867;&#8220;&#27880;&#20837;&#8221;&#26041;&#27861;&#12290;
      </p>
<pre class="programlisting"><span class="comment"># The one Boost.Python uses for all wrapped classes.
</span><span class="comment"># You can use here any class exported by Boost instead of "point"
</span><span class="identifier">BoostPythonMetaclass</span> <span class="special">=</span> <span class="identifier">point</span><span class="special">.</span><span class="identifier">__class__</span>

<span class="keyword">class</span> <span class="identifier">injector</span><span class="special">(</span><span class="identifier">object</span><span class="special">):</span>
    <span class="keyword">class</span> <span class="identifier">__metaclass__</span><span class="special">(</span><span class="identifier">BoostPythonMetaclass</span><span class="special">):</span>
        <span class="keyword">def</span> <span class="identifier">__init__</span><span class="special">(</span><span class="identifier">self</span><span class="special">,</span> <span class="identifier">name</span><span class="special">,</span> <span class="identifier">bases</span><span class="special">,</span> <span class="identifier">dict</span><span class="special">):</span>
            <span class="keyword">for</span> <span class="identifier">b</span> <span class="keyword">in</span> <span class="identifier">bases</span><span class="special">:</span>
                <span class="keyword">if</span> <span class="identifier">type</span><span class="special">(</span><span class="identifier">b</span><span class="special">)</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="special">(</span><span class="identifier">self</span><span class="special">,</span> <span class="identifier">type</span><span class="special">):</span>
                    <span class="keyword">for</span> <span class="identifier">k</span><span class="special">,</span><span class="identifier">v</span> <span class="keyword">in</span> <span class="identifier">dict</span><span class="special">.</span><span class="identifier">items</span><span class="special">():</span>
                        <span class="identifier">setattr</span><span class="special">(</span><span class="identifier">b</span><span class="special">,</span><span class="identifier">k</span><span class="special">,</span><span class="identifier">v</span><span class="special">)</span>
            <span class="keyword">return</span> <span class="identifier">type</span><span class="special">.</span><span class="identifier">__init__</span><span class="special">(</span><span class="identifier">self</span><span class="special">,</span> <span class="identifier">name</span><span class="special">,</span> <span class="identifier">bases</span><span class="special">,</span> <span class="identifier">dict</span><span class="special">)</span>

<span class="comment"># inject some methods in the point foo
</span><span class="keyword">class</span> <span class="identifier">more_point</span><span class="special">(</span><span class="identifier">injector</span><span class="special">,</span> <span class="identifier">point</span><span class="special">):</span>
    <span class="keyword">def</span> <span class="identifier">__repr__</span><span class="special">(</span><span class="identifier">self</span><span class="special">):</span>
        <span class="keyword">return</span> <span class="string">'Point(x=%s, y=%s)'</span> <span class="special">%</span> <span class="special">(</span><span class="identifier">self</span><span class="special">.</span><span class="identifier">x</span><span class="special">,</span> <span class="identifier">self</span><span class="special">.</span><span class="identifier">y</span><span class="special">)</span>
    <span class="keyword">def</span> <span class="identifier">foo</span><span class="special">(</span><span class="identifier">self</span><span class="special">):</span>
        <span class="keyword">print</span> <span class="string">'foo!'</span>
</pre>
<p>
        Now let's see how it got:<br> &#29616;&#22312;&#35753;&#25105;&#20204;&#26469;&#30475;&#30475;&#32467;&#26524;&#65306;
      </p>
<pre class="programlisting"><span class="special">&gt;&gt;&gt;</span> <span class="keyword">print</span> <span class="identifier">point</span><span class="special">()</span>
<span class="identifier">Point</span><span class="special">(</span><span class="identifier">x</span><span class="special">=</span><span class="number">10</span><span class="special">,</span> <span class="identifier">y</span><span class="special">=</span><span class="number">10</span><span class="special">)</span>
<span class="special">&gt;&gt;&gt;</span> <span class="identifier">point</span><span class="special">().</span><span class="identifier">foo</span><span class="special">()</span>
<span class="identifier">foo</span><span class="special">!</span>
</pre>
<p>
        Another useful idea is to replace constructors with factory functions:<br>
        &#21478;&#19968;&#31181;&#26377;&#29992;&#30340;&#24819;&#27861;&#26159;&#65292;&#29992;&#24037;&#21378;&#20989;&#25968;&#21462;&#20195;&#26500;&#36896;&#20989;&#25968;&#65306;
      </p>
<pre class="programlisting"><span class="identifier">_point</span> <span class="special">=</span> <span class="identifier">point</span>

<span class="keyword">def</span> <span class="identifier">point</span><span class="special">(</span><span class="identifier">x</span><span class="special">=</span><span class="number">0</span><span class="special">,</span> <span class="identifier">y</span><span class="special">=</span><span class="number">0</span><span class="special">):</span>
    <span class="keyword">return</span> <span class="identifier">_point</span><span class="special">(</span><span class="identifier">x</span><span class="special">,</span> <span class="identifier">y</span><span class="special">)</span>
</pre>
<p>
        In this simple case there is not much gained, but for constructurs with many
        overloads and/or arguments this is often a great simplification, again with
        virtually zero memory footprint and zero compile-time overhead for the keyword
        support.<br> &#22312;&#36825;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#20013;&#65292;&#23427;&#24182;&#27809;&#26377;&#20160;&#20040;&#29992;&#65292; &#20294;&#22914;&#26524;&#26500;&#36896;&#20989;&#25968;&#20855;&#26377;&#35768;&#22810;&#37325;&#36733;&#65292;&#25110;&#32773;&#20855;&#26377;&#35768;&#22810;&#21442;&#25968;&#65292;
        &#36825;&#24448;&#24448;&#26159;&#19968;&#20010;&#24040;&#22823;&#30340;&#31616;&#21270;&#65292; &#32780;&#24320;&#38144;&#20173;&#28982;&#26159;&#65306;&#20960;&#20046;&#38646;&#20869;&#23384;&#21344;&#29992;&#21644;&#38646;&#32534;&#35793;&#26102;&#38388;&#12290;
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="python.reducing_compiling_time"></a> Reducing Compiling Time &#20943;&#23569;&#32534;&#35793;&#26102;&#38388;</h3></div></div></div>
<p>
        If you have ever exported a lot of classes, you know that it takes quite
        a good time to compile the Boost.Python wrappers. Plus the memory consumption
        can easily become too high. If this is causing you problems, you can split
        the class_ definitions in multiple files:<br> &#22914;&#26524;&#20320;&#26366;&#32463;&#23548;&#20986;&#20102;&#24456;&#22810;&#31867;&#65292;
        &#20320;&#20250;&#30693;&#36947;&#65292; &#32534;&#35793;Boost.Python&#23553;&#35013;&#38656;&#35201;&#22909;&#38271;&#26102;&#38388;&#12290; &#36824;&#26377;&#20869;&#23384;&#28040;&#32791;&#20250;&#36731;&#26131;&#22320;&#21319;&#33267;&#24456;&#39640;&#12290;
        &#22914;&#26524;&#36825;&#20250;&#36896;&#25104;&#38382;&#39064;&#65292; &#20320;&#21487;&#20197;&#23558;class_&#23450;&#20041;&#20998;&#21106;&#21040;&#22810;&#20010;&#25991;&#20214;&#65306;
      </p>
<pre class="programlisting"><span class="comment">/* file point.cpp */</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">point</span><span class="special">.</span><span class="identifier">h</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">python</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">void</span> <span class="identifier">export_point</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">class_</span><span class="special">&lt;</span><span class="identifier">point</span><span class="special">&gt;(</span><span class="string">"point"</span><span class="special">)...;</span>
<span class="special">}</span>

<span class="comment">/* file triangle.cpp */</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">triangle</span><span class="special">.</span><span class="identifier">h</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">python</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">void</span> <span class="identifier">export_triangle</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">class_</span><span class="special">&lt;</span><span class="identifier">triangle</span><span class="special">&gt;(</span><span class="string">"triangle"</span><span class="special">)...;</span>
<span class="special">}</span>
</pre>
<p>
        Now you create a file <code class="literal">main.cpp</code>, which contains the <code class="literal">BOOST_PYTHON_MODULE</code>
        macro, and call the various export functions inside it.<br> &#29616;&#22312;&#20320;&#21019;&#24314;&#19968;&#20010;
        <code class="literal">main.cpp</code> &#25991;&#20214;&#65292; &#35753;&#23427;&#21253;&#21547; <code class="literal">BOOST_PYTHON_MODULE</code>
        &#23439;&#65292; &#24182;&#22312;&#37324;&#38754;&#35843;&#29992;&#21508;&#23548;&#20986;&#20989;&#25968;&#12290;
      </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">export_point</span><span class="special">();</span>
<span class="keyword">void</span> <span class="identifier">export_triangle</span><span class="special">();</span>

<span class="identifier">BOOST_PYTHON_MODULE</span><span class="special">(</span><span class="identifier">_geom</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">export_point</span><span class="special">();</span>
    <span class="identifier">export_triangle</span><span class="special">();</span>
<span class="special">}</span>
</pre>
<p>
        Compiling and linking together all this files produces the same result as
        the usual approach:<br> &#32534;&#35793;&#21644;&#38142;&#25509;&#25152;&#26377;&#36825;&#20123;&#25991;&#20214;&#65292;&#19982;&#20197;&#19979;&#36890;&#24120;&#30340;&#26041;&#27861;&#30456;&#27604;&#65292;&#32467;&#26524;&#26159;&#19968;&#26679;&#30340;&#65306;
      </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">python</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">point</span><span class="special">.</span><span class="identifier">h</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">triangle</span><span class="special">.</span><span class="identifier">h</span><span class="special">&gt;</span>

<span class="identifier">BOOST_PYTHON_MODULE</span><span class="special">(</span><span class="identifier">_geom</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">class_</span><span class="special">&lt;</span><span class="identifier">point</span><span class="special">&gt;(</span><span class="string">"point"</span><span class="special">)...;</span>
    <span class="identifier">class_</span><span class="special">&lt;</span><span class="identifier">triangle</span><span class="special">&gt;(</span><span class="string">"triangle"</span><span class="special">)...;</span>
<span class="special">}</span>
</pre>
<p>
        but the memory is kept under control.<br> &#20294;&#20869;&#23384;&#21344;&#29992;&#20250;&#21463;&#21040;&#25511;&#21046;&#12290;
      </p>
<p>
        This method is recommended too if you are developing the C++ library and
        exporting it to Python at the same time: changes in a class will only demand
        the compilation of a single cpp, instead of the entire wrapper code.<br>
        &#22914;&#26524;&#20320;&#27491;&#22312;&#24320;&#21457;C++&#24211;&#65292; &#24182;&#21516;&#26102;&#23558;&#23427;&#23548;&#20986;&#21040;Python&#65292; &#25512;&#33616;&#20320;&#20063;&#20351;&#29992;&#35813;&#26041;&#27861;&#65306;
        &#19968;&#20010;&#31867;&#20013;&#30340;&#26356;&#25913;&#65292; &#21482;&#38656;&#32534;&#35793;&#19968;&#20010;cpp&#65292; &#32780;&#19981;&#26159;&#25972;&#20010;&#23553;&#35013;&#20195;&#30721;&#12290;
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          If you're exporting your classes with <a href="../../../../../pyste/index.html" target="_top">Pyste</a>,
          take a look at the <code class="literal">--multiple</code> option, that generates
          the wrappers in various files as demonstrated here.<br> &#22914;&#26524;&#20320;&#26159;&#29992;
          <a href="../../../../../pyste/index.html" target="_top">Pyste</a> &#23548;&#20986;&#31867;&#65292;&#35831;&#30475;&#30475;
          <code class="literal">--multiple</code> &#36873;&#39033;&#65292; &#23427;&#20250;&#29983;&#25104;&#22810;&#20010;&#23553;&#35013;&#25991;&#20214;&#65292;
          &#23601;&#20687;&#36825;&#37324;&#25152;&#23637;&#31034;&#30340;&#37027;&#26679;&#12290;
        </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          This method is useful too if you are getting the error message <span class="emphasis"><em>"fatal
          error C1204:Compiler limit:internal structure overflow"</em></span>
          when compiling a large source file, as explained in the <a href="../../../../v2/faq.html#c1204" target="_top">FAQ</a>.<br>
          &#24403;&#20320;&#32534;&#35793;&#19968;&#20010;&#22823;&#25991;&#20214;&#26102;&#65292; &#22914;&#26524;&#36935;&#21040;&#38169;&#35823;&#20449;&#24687; <span class="emphasis"><em>"fatal
          error C1204:Compiler limit:internal structure overflow"</em></span>
          &#65288;&#8220;&#33268;&#21629;&#38169;&#35823;C1204&#65306;&#32534;&#35793;&#22120;&#38480;&#21046;&#65306;&#20869;&#37096;&#32467;&#26500;&#28322;&#20986;&#8221;&#65289;&#65292;
          &#35813;&#26041;&#27861;&#20063;&#26159;&#26377;&#29992;&#30340;&#65292; &#35299;&#37322;&#35265; <a href="../../../../v2/faq.html#c1204" target="_top">FAQ</a>&#12290;
        </p></td></tr>
</table></div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2002-2005 Joel
      de Guzman, David Abrahams<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at &lt;ulink url="http://www.boost.org/LICENSE_1_0.txt"&gt;
        http://www.boost.org/LICENSE_1_0.txt &lt;/ulink&gt;)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="exception.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a>
</div>
</body>
</html>
