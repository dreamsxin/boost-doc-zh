<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  


  <title>Boost.Config</title><link rel="stylesheet" href="../../../../doc/html/boostbook.css" type="text/css">

  <meta name="generator" content="DocBook XSL Stylesheets V1.73.2">

  <link rel="start" href="index.html" title="Boost.Config">

  <link rel="next" href="boost_config/boost_macro_reference.html" title="Boost Macro Reference"></head>

<body style="color: black; background-color: white;" alink="#0000ff" link="#0000ff" vlink="#840084">

<table cellpadding="2" width="100%">

  <tbody>

    <tr>

      <td valign="top"><img alt="Boost C++ Libraries" src="../../../../boost.png" height="86" width="277"></td>

      <td align="center"><a href="../../../../index.html">Home</a></td>

      <td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>

      <td align="center"><a href="http://www.boost.org/people/people.htm">People</a></td>

      <td align="center"><a href="http://www.boost.org/more/faq.htm">FAQ</a></td>

      <td align="center"><a href="../../../../more/index.htm">More</a></td>

    </tr>

  </tbody>
</table>

<hr>
<div class="spirit-nav"><a accesskey="n" href="boost_config/boost_macro_reference.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a></div>

<div class="article" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title"><a name="config"></a>Boost.Config</h2>

</div>

<div>
<div class="authorgroup">
<div class="author">
<h3 class="author"><span class="firstname">Vesa
Karvonen, John Maddock</span> <span class="surname">Beman
Dawes</span>
</h3>

</div>

</div>

</div>

<div>
<p class="copyright">Copyright © 2001 -2007 Beman
Dawes, Vesa Karvonen, John Maddock</p>

</div>

<div>
<div class="legalnotice"><a name="id2625913"></a>
<p> Distributed under the Boost Software License, Version 1.0.
(See accompanying file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
</p>

</div>

</div>

</div>

<hr>
</div>

<div class="toc">
<p><b>目录</b></p>

<dl>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform">为
你的平台配置 Boost</a></span></dt>

  <dd>
    <dl>

      <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.using_the_default_boost_configuration">使
用缺省的 boost 配置</a></span></dt>

      <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.the__boost_config_hpp__header">头
文件 &lt;boost/config.hpp&gt;</a></span></dt>

      <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.using_the_configure_script">使
用配置脚本</a></span></dt>

      <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.user_settable_options">用
户可设置的选项</a></span></dt>

      <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.advanced_configuration_usage">高
级配置用法</a></span></dt>

      <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.testing_the_boost_configuration">测
试 boost 配置</a></span></dt>

    </dl>

  </dd>

  <dt><span class="section"><a href="boost_config/boost_macro_reference.html">Boost Macro 参考</a></span></dt>

  <dd>
    <dl>

      <dt><span class="section"><a href="boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.macros_that_describe_defects">描
述缺陷的宏</a></span></dt>

      <dt><span class="section"><a href="boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.macros_that_describe_optional_features">描
述可选特性的宏</a></span></dt></dl><dl><dt><span class="section"><a href="boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.macros_that_describe_possible_c__0x_features">描述可能的 C++0x 特性的宏</a></span></dt></dl><dl><dt><span class="section"><a href="boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.macros_that_describe_c__0x_features_not_supported">描述不被支持的 C++0x 特性的宏</a></span></dt></dl><dl><dt><span class="section"><a href="boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.boost_helper_macros">Boost
辅助宏</a></span></dt>

      <dt><span class="section"><a href="boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.boost_informational_macros">Boost
信息宏</a></span></dt>

      <dt><span class="section"><a href="boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.macros_for_libraries_with_separate_source_code">用
于分隔源代码的宏</a></span></dt>

    </dl>

  </dd>

  <dt><span class="section"><a href="boost_config/guidelines_for_boost_authors.html">给
Boost 作者的指引</a></span></dt>

  <dd>
    <dl>

      </dl><dl><dt><span class="section"><a href="boost_config/guidelines_for_boost_authors.html#boost_config.guidelines_for_boost_authors.warnings">禁止编译器警告</a></span> </dt></dl><dl><dt><span class="section"><a href="boost_config/guidelines_for_boost_authors.html#boost_config.guidelines_for_boost_authors.adding_new_defect_macros">增
加新的缺陷宏</a></span></dt>

      <dt><span class="section"><a href="boost_config/guidelines_for_boost_authors.html#boost_config.guidelines_for_boost_authors.adding_new_feature_test_macros">增
加新的特性测试宏</a></span></dt>

      <dt><span class="section"><a href="boost_config/guidelines_for_boost_authors.html#boost_config.guidelines_for_boost_authors.modifying_the_boost_configuration_headers">修
改 Boost 配置头文件</a></span></dt>

    </dl>

  </dd>

  <dt><span class="section"><a href="boost_config/rationale.html">原理</a></span></dt>

  <dd>
    <dl>

      <dt><span class="section"><a href="boost_config/rationale.html#boost_config.rationale.the_problem">问
题</a></span></dt>

      <dt><span class="section"><a href="boost_config/rationale.html#boost_config.rationale.the_solution">解
决方法</a></span></dt>

    </dl>

  </dd>

  <dt><span class="section"><a href="boost_config/acknowledgements.html">鸣谢</a></span></dt>

</dl>

</div>

<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both;"><a name="boost_config.configuring_boost_for_your_platform"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform" title="Configuring Boost for Your Platform">为你的平台配置 Boost</a>
</h2>

</div>

</div>

</div>

<div class="toc">
<dl>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.using_the_default_boost_configuration">使
用缺省的 boost 配置</a></span></dt>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.the__boost_config_hpp__header">头
文件 &lt;boost/config.hpp&gt;</a></span></dt>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.using_the_configure_script">使
用配置脚本</a></span></dt>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.user_settable_options">用
户可设置的选项</a></span></dt>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.advanced_configuration_usage">高
级配置用法</a></span></dt>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.testing_the_boost_configuration">测
试 boost 配置</a></span></dt>

</dl>

</div>

<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_config.configuring_boost_for_your_platform.using_the_default_boost_configuration"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform.using_the_default_boost_configuration" title="Using the default boost configuration">使用缺省的 boost 配置</a>
</h3>

</div>

</div>

</div>

<p>Boost 在发布时已经针对最常用的编译器和平台进行了配置；你应该可以"直接"使用 boost.
由于编译器是独立于标准库进行配置的，所以即使你将编译器的标准库换为第三方的标准库(如 <a href="http://stlport.sourceforge.net/">STLport</a>)，也还可
以使用缺省的配置。 </p>

<p>我们建议你"直接"使用 boost
而无需进行重配置。当然，只要你愿意，你也可以运行配置脚本，而且我们也已经提供了回归测试以便你在特定的编译器设置下测试当前的 boost 配置。</p>

<p>Boost 库的用户可以通过访问我们的 <a href="http://sourceforge.net/tracker/?group_id=7586">Tracker</a>
和提交一份支持请求来要求增加对其它编译器或平台的支持。</p>

<br>

</div>

<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_config.configuring_boost_for_your_platform.the__boost_config_hpp__header"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform.the__boost_config_hpp__header" title="The &lt;boost/config.hpp&gt; header">头文件
&lt;boost/config.hpp&gt;</a>
</h3>

</div>

</div>

</div>

<p> Boost 库的实现通过以下方法来访问与配置相关的宏 </p>

<pre class="programlisting"><span class="preprocessor">#include</span> <a href="../../../../boost/config.hpp" target="_top">&lt;boost/config.hpp&gt;</a>
</pre>

<p>虽然 Boost
库的用户不需要直接包含这个文件，也不需要使用这些配置宏，但是如果要用的话也是可以的。我们也提供了关于各个配置宏的用途、用法、限制的说明，以使得它
们可以被 Boost 库代码及用户代码所使用。 </p>

<p>Boost 的 <a href="boost_config/boost_macro_reference.html#config_info_macros">信
息类</a> 或 <a href="boost_config/boost_macro_reference.html#config_helpers">辅
助类</a> 宏被设计为可供 Boost 用户和我们本身内部使用。但是，<a href="boost_config/boost_macro_reference.html#config_features">特
性测试类</a> 和 <a href="boost_config/boost_macro_reference.html#config_defects">缺
陷测试类</a> 宏则被设计为只供 Boost
库内使用，而不是给用户代码使用的，所以它们可能随时被修改(不过不会被无故修改)。由修改配置宏所引起的 Boost 库的问题可以通过 Boost
回归测试来发现，所以 Boost 库会为这些修改更新说明。作为对比，Boost
库用户的代码也可能被这些宏的修改所影响，但却没有警告。在用户代码中保持跟上这些宏的修改的最好方法就是，随时查阅在 Boost
开发者列表中的讨论。<br>

</p>

</div>

<a name="config_config_script"></a>
<p> </p>

<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_config.configuring_boost_for_your_platform.using_the_configure_script"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform.using_the_configure_script" title="Using the configure script">使用配置脚本</a>
</h3>

</div>

</div>

</div>

<div class="important">
<table summary="Important" border="0">

  <tbody>

    <tr>

      <td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../../../../doc/html/images/important.png"></td>

      <th align="left">重要</th>

    </tr>

    <tr>

      <td align="left" valign="top">
      <p> 本配置脚本只设置用于某个特定编译器的 Boost 头文件。它不影响 Boost.Build,
也不影响库的构建。 </p>

      </td>

    </tr>

  </tbody>
</table>

</div>

<p>如果你知道 boost 对于你的特定设置是错误配置的，而且你是在一个类UNIX的平台上，那么你可能想试一下通过运行
boost 配置脚本来改善一下情况。你需要从在 shell 提示符下 cd 到
&lt;boost-root&gt;/libs/config/ 目录中，并键入：<br>

</p>

<div class="blockquote">
<blockquote class="blockquote">
  <p> </p>

  <p> <code class="computeroutput"><span class="identifier">sh</span> <span class="special">./</span><span class="identifier">configure</span></code> </p>

  <p> </p>

</blockquote>

</div>

<p>你会看到一串检查项，脚本正在进行回归测试。注意，配置脚本只能在你的编译器名为 g++, c++ 或 CC
的情况下进行自动检测。如果你使用的是其它编译器，你需要设置以下一个或多个环境变量：<br>

</p>

<div class="informaltable">
<table class="table">

  <colgroup><col><col></colgroup>
  <thead><tr>

    <th>
    <p> 变量 </p>

    </th>

    <th>
    <p>说明 </p>

    </th>

  </tr>

  </thead><tbody>

    <tr>

      <td>
      <p> CXX </p>

      </td>

      <td>
      <p>编译器的名字，如&nbsp; <code class="computeroutput"><span class="identifier">c</span><span class="special">++</span></code>.
      </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> CXXFLAGS </p>

      </td>

      <td>
      <p>使用的编译器开关，如&nbsp;<code class="computeroutput"><span class="special">-</span><span class="identifier">O2</span></code>.
      </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> LDFLAGS </p>

      </td>

      <td>
      <p>使用的链接器开关，如 <code class="computeroutput"><span class="special">-</span><span class="identifier">L</span><span class="special">/</span><span class="identifier">mypath</span></code>.
      </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> LIBS </p>

      </td>

      <td>
      <p>要链接的库，如 <code class="computeroutput"><span class="special">-</span><span class="identifier">lpthread</span></code>.
      </p>

      </td>

    </tr>

  </tbody>
</table>

</div>

<p>例如，在 HP aCC 下运行该脚本，你应该使用：<br>

</p>

<pre class="programlisting"><span class="keyword">export</span> <span class="identifier">CXX</span><span class="special">=</span><span class="string">"aCC"</span><br><span class="keyword">export</span> <span class="identifier">CXXFLAGS</span><span class="special">=</span><span class="string">"-Aa -DAportable -D__HPACC_THREAD_SAFE_RB_TREE \<br> -DRWSTD_MULTI_THREAD -DRW_MULTI_THREAD -D_REENTRANT -D_THREAD_SAFE"</span><br><span class="keyword">export</span> <span class="identifier">LDFLAGS</span><span class="special">=</span><span class="string">"-DAportable"</span><br><span class="keyword">export</span> <span class="identifier">LIBS</span><span class="special">=</span><span class="string">"-lpthread"</span> <br><span class="identifier">sh</span> <span class="special">./</span><span class="identifier">configure</span>
</pre>

<p>无论你用什么方法运行这个配置脚本，当它结束时，你会发现一个新的头文件 -<code class="computeroutput"><span class="identifier">user</span><span class="special">.</span><span class="identifier">hpp</span></code>-
出现在 <span class="emphasis"><em>&lt;boost-root&gt;</em></span><code class="computeroutput"><span class="special">/</span><span class="identifier">libs</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span></code> 目录中。<b>注意，配
置脚本缺省不会将这个头文件安装在你的 boost 包含路径中。</b>这个头文件包含了由配置脚本生成的所有选项，再加一个头文件节，其
中包含有来自于缺省版本的 <a href="../../../../boost/config/user.hpp" target="_top">&lt;boost/config/user.hpp&gt;</a>&amp;
nbsp;(位于 <span class="emphasis"><em>&lt;boost-root&gt;</em></span><code class="computeroutput"><span class="special">/</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span></code>
目录)的用户可设置选项。你有两种方法来使用这个头文件：<br>

</p>

<div class="itemizedlist">
<ul type="disc">

  <li>
    <span class="bold"><strong></strong></span><span style="font-weight: bold;">方法 1: </span>将这个头文件复制到 <span class="emphasis"><em>&lt;boost-root&gt;</em></span><code class="computeroutput"><span class="special">/</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span></code> 以替换由 boost 提供的缺省
user.hpp. 这种方法只允许一个由配置脚本生成的设置；boost 开发者要避免使用这一方法，因为它有可能不小心将这个由配置生成的 <a href="../../../../boost/config/user.hpp" target="_top">&lt;boost/config/user.hpp&gt;</a>
提交到 cvs 仓库中(不会有人感谢你的！)。 </li>

  <li>
    <span class="bold"><strong></strong></span><span style="font-weight: bold;">方法 2: </span>给这个头文件一个更易记的名
字，并将它放在更方便的地方，然后定义宏 BOOST_USER_CONFIG 指向它。例如创建一个新的子目录 <span class="emphasis"><em>&lt;boost-root&gt;</em></span><code class="computeroutput"><span class="special">/</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span></code><code class="computeroutput"><span class="identifier">user</span><span class="special">/</span></code>, 并将头文件复制到那儿；例如取名为
    <code class="computeroutput"><span class="identifier">multithread</span><span class="special">-</span><span class="identifier">gcc</span><span class="special">-</span><span class="identifier">config</span><span class="special">.</span><span class="identifier">hpp</span></code>.
然后在编译时加上命令行选项： <code class="computeroutput"><span class="special">-</span><span class="identifier">DBOOST_USER_CONFIG</span><span class="special">=</span><span class="string">"&lt;boost/config/user/multithread-gcc-config.hpp&gt;"</span></code>，
这样 boost 就会使用新配置的头文件。这种方法允许你生成一个以上的配置头文件，并把它们与 boost 源程序分开 -
因此源程序的更新不会干扰你的配置。 </li>

</ul>

</div>

</div>

<a name="config_user_settable"></a>
<p> </p>

<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_config.configuring_boost_for_your_platform.user_settable_options"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform.user_settable_options" title="User settable options">用户可设置的选项</a>
</h3>

</div>

</div>

</div>

<p>有些配置选项代表了用户的选择，而不是编译器的缺陷或平台的特定选项。它们被列于 <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">user</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code>
以及一个配置脚本生成的 <code class="computeroutput"><span class="identifier">user</span><span class="special">.</span><span class="identifier">hpp</span></code>
头文件的开始。你可以在命令行中定义它们，或者编辑 <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">user</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code>,
它们被列出在下表中： </p>

<div class="informaltable">
<table class="table">

  <colgroup><col><col></colgroup>
  <thead><tr>

    <th>
    <p>宏 </p>

    </th>

    <th>
    <p>说明 </p>

    </th>

  </tr>

  </thead><tbody>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_USER_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>如果被定义，它应在包含任意 boost
配置文件之前被定义为用户配置文件的名字。如果未被定义，缺省为&nbsp; <a href="../../../../boost/config/user.hpp" target="_top"><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">user</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code></a>.
      </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_COMPILER_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>如果被定义，应为所用编译器的配置文件名字。定义这个宏将中止编译器选择逻辑，并消除对包含该逻辑的头文件的依赖。例如，
如果你使用 gcc, 则你可以定义 BOOST_COMPILER_CONFIG 为 <a href="../../../../boost/config/compiler/gcc.hpp" target="_top"><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">compiler</span><span class="special">/</span><span class="identifier">gcc</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code></a>.
      </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_STDLIB_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>如果被定义，应为所用标准库的配置文件名字。定义这个宏将中止标准库选择逻辑，并消除对包含该逻辑的头文件的依赖。例如，
如果你使用 STLport, 则你可以定义 <code class="computeroutput"><span class="identifier">BOOST_STDLIB_CONFIG</span></code>
为 <a href="../../../../boost/config/stdlib/stlport.hpp" target="_top"><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">stdlib</span><span class="special">/</span><span class="identifier">stlport</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code></a>.
      </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_PLATFORM_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>如果被定义，应为所用平台的配置文件名字。定义这个宏将中止平台选择逻辑，并消除对包含该逻辑的头文件的依赖。例如，如果
你在 linux 上编译，则你可以定义 <code class="computeroutput"><span class="identifier">BOOST_PLATFORM_CONFIG</span></code>
为 <a href="../../../../boost/config/platform/linux.hpp" target="_top"><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">platform</span><span class="special">/</span><span class="identifier">linux</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code></a>.
      </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_NO_COMPILER_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>如果被定义，则没有任何编译器配置文件被选择或包含，当所用编译器完全符合标准时定义该宏，或者已经在用户头文件(请见
      <code class="computeroutput"><span class="identifier">BOOST_USER_CONFIG</span></code>)中
加入所需选项，例如通过一个 autoconf 生成的配置脚本。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_NO_STDLIB_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>如果被定义，则没有任何标准库配置文件被选择或包含，当所用标准库完全符合标准时定义该宏，或者已经在用户头文件(请见
      <code class="computeroutput"><span class="identifier">BOOST_USER_CONFIG</span></code>)
中加入所需选项，例如通过一个 autoconf 生成的配置脚本。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_NO_PLATFORM_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>
如果被定义，则没有任何平台配置文件被选择或包含，当所用平台完全符合标准(且没有其它可用特性)时定义该宏，或者已经在用户头文件(请见 <code class="computeroutput"><span class="identifier">BOOST_USER_CONFIG</span></code>)
中加入所需选项，例如通过一个 autoconf 生成的配置脚本。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_NO_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>等同于定义了&nbsp;<code class="computeroutput"><span class="identifier">BOOST_NO_COMPILER_CONFIG</span></code>,
      <code class="computeroutput"><span class="identifier">BOOST_NO_STDLIB_CONFIG</span></code>
和 <code class="computeroutput"><span class="identifier">BOOST_NO_PLATFORM_CONFIG</span></code>.
      </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_STRICT_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>在遇到比所知的最后版本更新的编译器版本时，通常的做法是假设新版本与所知的最后版本具有相同的缺陷。如果定义了这个宏，
则假设比所知最后版本更新的编译器版本是完全符合标准的。这样做对于 boost 开发者和测试者，以及那些想用 boost
来测试编译器内部版本的人来说可能最适用。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_ASSERT_CONFIG</span></code>
      </p>

      </td>

      <td>
      <p>如果设置了这个标志，则当配置发生未知事情时会以一个 #error 停止，不再继续。Boost
回归测试员应该定义这一标志，那些想快速检测出 boost 是否在他们的平台上得以支持的人也应该使用。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_DISABLE_THREADS</span></code>
      </p>

      </td>

      <td>
      <p>如果被定义，则关闭线程支持，即使当前所用编译器支持多线程。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_DISABLE_WIN32</span></code>
      </p>

      </td>

      <td>
      <p>如果被定义，则关闭对 Win32 特定 API 的使用，即使它们可用。同时还具有与设置了&nbsp;<code class="computeroutput"><span class="identifier">BOOST_</span></code><code class="computeroutput"><span class="identifier">DISABLE</span></code><code class="computeroutput"><span class="identifier">_PTHREADS</span></code>
的相同效果，除非设置了&nbsp;<code class="computeroutput"><span class="identifier">BOOST_HAS_PTHREADS</span></code>.
该选项可以由配置系统自动设置，如果系统检测到编译器处于"strict模式"。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_DISABLE_ABI_HEADERS</span></code>
      </p>

      </td>

      <td>
      <p>让 boost 不再包含任何前缀/后缀头文件，对结构的压缩和对齐进行通常的控制。
      </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_ABI_PREFIX</span></code>
      </p>

      </td>

      <td>
      <p>包含一个前缀头文件，替代 boost.config 的普通选择，对结构的压缩和对齐按需要进行设置。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_ABI_SUFFIX</span></code>
      </p>

      </td>

      <td>
      <p>包含一个后缀头文件，替代 boost.config 的普通选择，以恢复前缀头文件的影响。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_ALL_DYN_LINK</span></code>
      </p>

      </td>

      <td>
      <p>强迫所有具有独立源文件的库在 Microsoft Windows 上链接为 dll
而不是静态库(该宏用于打开&nbsp;<code class="computeroutput"><span class="identifier">__declspec</span><span class="special">(</span><span class="identifier">dllimport</span><span class="special">)</span></code> 修改器，以便编译器获知要从一个
dll 中查找符号而不是从静态库查找)。
注意，可能有些库只能静态链接(如 Boost.Test)，而另一些则只能动态链接(如 Boost.Threads)，这些该宏无效。</p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_</span></code><span class="emphasis"><em>WHATEVER</em></span><code class="computeroutput"><span class="identifier">_DYN_LINK</span></code>
      </p>

      </td>

      <td>

      <p>迫使库在 Microsoft Windows 上"无论如何"都作为 dll 而不是静态库链接：要将宏名中的&nbsp;<span class="emphasis"><em>WHATEVER</em></span> 
部分替换为要动态链接的库名，例如，使用&nbsp;<code class="computeroutput"><span class="identifier">BOOST_DATE_TIME_DYN_LINK</span></code> 或 <code class="computeroutput"><span class="identifier">BOOST_REGEX_DYN_LINK</span></code> 等(该宏用于打开&nbsp;<code class="computeroutput"><span class="identifier">__declspec</span><span class="special">(</span><span class="identifier">dllimport</span><span class="special">)</span></code> 修改器，以便编译器获知要从一个 dll 中查找符号而不是从静态库查找)。&nbsp;<br>
注意，可能有些库只能静态链接(如 Boost.Test)，而另一些则只能动态链接(如 Boost.Threads)，这些该宏不被支持。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_ALL_NO_LIB</span></code>
      </p>

      </td>

      <td>

      <p>通知配置系统不要自动选择某些库来链接。&nbsp;<br>
通常，如果一个编译器支持 #pragma lib, 
则正确的库构建变量可以被自动选择并链接，只要依据在库的头文件中包含的指令就可以了。该宏关闭这一特性。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_</span></code><span class="emphasis"><em>WHATEVER</em></span><code class="computeroutput"><span class="identifier">_NO_LIB</span></code>
      </p>

      </td>

      <td>

      <p>通知配置系统不要自动为"whatever"库选择要链接的库，请将宏名中的&nbsp;<span class="emphasis"><em>WHATEVER</em></span>"替换为库名；例如 <code class="computeroutput"><span class="identifier">BOOST_DATE_TIME_NO_LIB</span></code> 或 <code class="computeroutput"><span class="identifier">BOOST_REGEX_NO_LIB</span></code><br>
通常，如果一个编译器支持 #pragma lib, 
则正确的库构建变量可以被自动选择并链接，只要依据在库的头文件中包含的指令就可以了。该宏关闭这一特性。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_LIB_DIAGNOSTIC</span></code>
      </p>

      </td>

      <td>
      <p>让自动链接代码输出诊断信息，以指示被选中进行链接的库名。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">BOOST_LIB_TOOLSET</span></code>
      </p>

      </td>

      <td>
      <p>覆盖库名中的 toolset 部分的名字；注意，如果定义了该宏，则必须定义为带引号的字符串，如 "abc". </p>

      </td>

    </tr>

  </tbody>
</table>

</div>

</div>

<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_config.configuring_boost_for_your_platform.advanced_configuration_usage"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform.advanced_configuration_usage" title="Advanced configuration usage">高级配置用法</a>
</h3>

</div>

</div>

</div>

<div class="toc">
<dl>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.advanced_configuration_usage.example_1__creating_our_own_frozen_configuration">例子
1, 创建我们自己的冻结配置</a></span></dt>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.advanced_configuration_usage.example_2__skipping_files_that_you_don_t_need">例子
2: 跳过你不需要的文件</a></span></dt>

  <dt><span class="section"><a href="index.html#boost_config.configuring_boost_for_your_platform.advanced_configuration_usage.example_3__using_configure_script_to_freeze_the_boost_configuration">例子
3: 使用配置脚本来冻结 boost 配置</a></span></dt>

</dl>

</div>

<p>通过在编译器命令行设置不同的宏或者编辑 <a href="../../../../boost/config/user.hpp" target="_top">&lt;boost/config/user.hpp&gt;</a>, 可以以不同的方法对 
boost 配置进行设置。 </p>

<p>Boost 的配置是结构化的，首先包含用户配置文件(缺省为 <a href="../../../../boost/config/user.hpp" target="_top">&lt;boost/config/user.hpp&gt;</a> 如果没有定义&nbsp;<code class="computeroutput"><span class="identifier">BOOST_USER_CONFIG</span></code>)。它设置了用户定义的策略，给机会用户配置来影响后面所发生的事情。 </p>

<p>接着应包含编译器、标准库和平台的配置文件。它们是通过宏来包含的(<code class="computeroutput"><span class="identifier">BOOST_COMPILER_CONFIG</span></code> 等等，<a href="#user_settable">请见"用户可设置宏"</a>)，如果对应的宏未被定义，则包含一个独立的头文件以检测所用的是哪个编译器/标准库/平台，并设置它们。这个配置可以被告知完全忽略这些头文件，如果设置了对应的&nbsp;<code class="computeroutput"><span class="identifier">BOOST_NO_XXX</span></code> 宏(例如，<code class="computeroutput"><span class="identifier">BOOST_NO_COMPILER_CONFIG</span></code> 阻止包含任何编译器配置文件 - <a href="config.htm#user_settable">请见"用户可设置宏"</a>)。 </p>

<p>最后 boost 配置头文件包含 <a href="../../../../boost/config/user.hpp" target="_top">&lt;boost/config/suffix.hpp&gt;</a>; 
该头文件包括一些防护的配置代码 - 例如某个 boost 宏被设置了，就意味着另一个宏也必须被设置。</p>

<p>以下用例仅仅表示了少量的可能性：<br>
</p>
<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="boost_config.configuring_boost_for_your_platform.advanced_configuration_usage.example_1__creating_our_own_frozen_configuration"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform.advanced_configuration_usage.example_1__creating_our_own_frozen_configuration" title="Example 1, creating our own frozen configuration">例子
1, 创建我们自己的冻结配置</a>
</h4>

</div>

</div>

</div>

<p>假定我们用 Visual C++ 6 以及 STLport 4.0 来构建 boost. 我们也不打算再升级我们的编译器和标准库。为了避免在更新 boost 
时破坏依赖关系，我们也许希望"冻结"我们的配置头文件，那么，我们就只需要在 boost 代码本身有变化时重新构建我们的项目，而不需要因为 boost 对 
Visual C++ 或 STLport 的最新版本所进行的配置修改而重新构建。我们先来弄明白要用的配置文件如下：编译器配置文件 <a href="../../../../boost/config/compiler/visualc.hpp" target="_top"><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">compiler</span><span class="special">/</span><span class="identifier">visualc</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code></a>, 
标准库配置文件 <a href="../../../../boost/config/stdlib/stlport.hpp" target="_top"><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">stdlib</span><span class="special">/</span><span class="identifier">stlport</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code></a>, 
以及平台配置文件 <a href="../../../../boost/config/platform/win32.hpp" target="_top"><code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">platform</span><span class="special">/</span><span class="identifier">win32</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code></a>. 
接着我们创建自己的私有配置目录： <code class="computeroutput"><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span><span class="identifier">mysetup</span><span class="special">/</span></code>, 并将以上配置文件复制到该目录下。最后，打开 <a href="../../../../boost/config/user.hpp" target="_top">&lt;boost/config/user.hpp&gt;</a> 并编辑以下定义： </p>

<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">BOOST_COMPILER_CONFIG</span> <span class="string">"boost/config/mysetup/visualc.hpp"</span><br><span class="preprocessor">#define</span> <span class="identifier">BOOST_STDLIB_CONFIG</span> <span class="string">"boost/config/mysetup/stlport.hpp"</span><br><span class="preprocessor">#define</span> <span class="identifier">BOOST_USER_CONFIG</span> <span class="string">"boost/config/mysetup/win32.hpp"</span>
</pre>

<p>现在当你使用 boost, 它的配置头文件将直接指向我们的"冻结"版本，而忽略缺省版本，现在你已经与升级 boost 
所带来的配置变化相隔离。如果你想修改某些 boost 配置文件，也可以使用这种方法；例如，你正工作在一个尚不被 boost 支持的编译器测试版本上。<br>
</p>
</div>

<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="boost_config.configuring_boost_for_your_platform.advanced_configuration_usage.example_2__skipping_files_that_you_don_t_need"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform.advanced_configuration_usage.example_2__skipping_files_that_you_don_t_need" title="Example 2: skipping files that you don't need">例子
2: 跳过你不需要的文件</a>
</h4>

</div>

</div>

</div>

<p>假定你正在一个完全符合标准的编译器上使用 boost; 
你不关心你的编译器的旧版本是否存在缺陷，因为你知道当前所用的版本不需要任何配置宏的设置。在这种情况下，你可以在命令行或 <a href="../../../../boost/config/user.hpp" target="_top">&lt;boost/config/user.hpp&gt;</a> 中定义&nbsp;<code class="computeroutput"><span class="identifier">BOOST_NO_COMPILER_CONFIG</span></code>, 
完全跳过编译器配置文件(实际上你跳过了两个头文件，一个是检测编译器类型的，另一个是用于配置 boost 
的)。这有两个结果：一是可以编译更少的代码，二是消除了对两个 boost 头文件的依赖性。<br>
</p>
</div>

<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="boost_config.configuring_boost_for_your_platform.advanced_configuration_usage.example_3__using_configure_script_to_freeze_the_boost_configuration"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform.advanced_configuration_usage.example_3__using_configure_script_to_freeze_the_boost_configuration" title="Example 3: using configure script to freeze the boost configuration">例子
3: 使用配置脚本来冻结 boost 配置</a>
</h4>

</div>

</div>

</div>

<p>如果你工作在一个类unix的平台，那么你可以使用配置脚本来根据你当前的编译器设置生成一个"冻结"的配置 - 详情 <a href="index.html#config_config_script">请见"使用配置脚本"</a>。 </p>

</div>

</div>

<div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="boost_config.configuring_boost_for_your_platform.testing_the_boost_configuration"></a><a class="link" href="index.html#boost_config.configuring_boost_for_your_platform.testing_the_boost_configuration" title="Testing the boost configuration">测试 boost 配置</a>
</h3>

</div>

</div>

</div>

<p>boost 配置库提供了一整套回归测试程序，它们位于 <span class="emphasis"><em>&lt;boost-root&gt;</em></span><code class="computeroutput"><span class="special">/</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">config</span><span class="special">/</span></code> <code class="computeroutput"><span class="identifier">test</span><span class="special">/</span></code> 子目录下： </p>

<div class="informaltable">
<table class="table">

  <colgroup><col><col></colgroup>
  <thead><tr>

    <th>
    <p>文件 </p>

    </th>

    <th>
    <p>说明 </p>

    </th>

  </tr>

  </thead><tbody>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">config_info</span><span class="special">.</span><span class="identifier">cpp</span></code>
      </p>

      </td>

      <td>
      <p>打印出你的编译器/标准库/平台设备的详细描述，以及你当前的 boost 配置。该程序提供的信息在设置 boost 配置文件时非常有用。如果你想报告 boost 
在你的编译器/标准库/平台上配置不正确，就请在报告所需变化时包含该程序的输出。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">config_test</span><span class="special">.</span><span class="identifier">cpp</span></code>
      </p>

      </td>

      <td>
      <p>一个包括了大多数单独测试案例的集成测试程序。提供了快速的方法来检查 boost 是否已针对你的编译器/标准库/平台正确配置。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">limits_test</span><span class="special">.</span><span class="identifier">cpp</span></code>
      </p>

      </td>

      <td>
      <p>测试你的标准库的&nbsp;<code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">numeric_limits</span></code> 实现(或它的 boost 替代物，如果定义了&nbsp;<code class="computeroutput"><span class="identifier">BOOST_NO_LIMITS</span></code>)。该测试程序对于多数版本的 numeric_limits 都会失败，主要由于这些编译器处理 NAN's 和无限大的方法。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">no_</span><span class="special">*</span><span class="identifier">pass</span><span class="special">.</span><span class="identifier">cpp</span></code> </p>

      </td>

      <td>
      <p>单独的编译器缺陷测试文件。它们中的每一个都应该可以编译，如果有一个不可以，则说明需要定义相应的&nbsp;<code class="computeroutput"><span class="identifier">BOOST_NO_XXX</span></code> 宏 - 详情请见各个测试文件。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">no_</span><span class="special">*</span><span class="identifier">fail</span><span class="special">.</span><span class="identifier">cpp</span></code> </p>

      </td>

      <td>
      <p>单独的编译器缺陷测试文件。它们中的每一个都应该不能通过编译，如果有一个通过了，则说明相应的&nbsp;<code class="computeroutput"><span class="identifier">BOOST_NO_XXX</span></code> 在不需要定义时被定义了 - 
详情请见各个测试文件。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">has_</span><span class="special">*</span><span class="identifier">pass</span><span class="special">.</span><span class="identifier">cpp</span></code> </p>

      </td>

      <td>
      <p>单独的特性测试文件。如果其中某一个不能通过编译，则说明相应的&nbsp;<code class="computeroutput"><span class="identifier">BOOST_HAS_XXX</span></code> 宏在不应该定义时被定义了 - 详情请见各个测试文件。 </p>

      </td>

    </tr>

    <tr>

      <td>
      <p> <code class="computeroutput"><span class="identifier">has_</span><span class="special">*</span><span class="identifier">fail</span><span class="special">.</span><span class="identifier">cpp</span></code> </p>

      </td>

      <td>
      <p>单独的特性测试文件。如果其中某一个通过了编译，则说明相应的&nbsp;<code class="computeroutput"><span class="identifier">BOOST_HAS_XXX</span></code> 宏可以安全地被定义 - 详情请见各个测试文件。 </p>

      </td>

    </tr>

  </tbody>
</table>

</div>

<p>虽然你可以单独运行配置回归测试的各个测试文件，但是文件数量太多了，所以有些方便的方法可以帮助你：</p>

<p>如果你已经构建了 <a href="../../../../tools/regression/doc/index.html">boost 
回归测试驱动程序</a>，那么你可以用它来生成一个漂亮的 html 格式的报告，其中包含所提供的测试文件的运行结果。</p>

<p>另一个方法是，你可以运行配置脚本，象这样：<br>
</p>
<div class="blockquote">
<blockquote class="blockquote">
  <p> </p>

  <p> <code class="computeroutput"><span class="special">./</span><span class="identifier">configure</span>
  <span class="special">--</span><span class="identifier">enable</span><span class="special">-</span><span class="identifier">test</span></code>
  </p>

  <p> </p>

</blockquote>

</div>

<p>这样，该脚本将测试当前的配置而不是创建一个新的配置。</p>

<p>如果你要报告在某个新的平台/标准库/编译器上的测试结果，请包含完整的编译器输出日志，以及&nbsp;<code class="computeroutput"><span class="identifier">config_info</span><span class="special">.</span><span class="identifier">cpp</span></code>
的输出，还有测试的成功/失败结果。<br>
</p>
</div>

</div>

<a name="config_rationale"></a>
<p> </p>

</div>

<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%">

  <tbody>

    <tr>

      <td align="left"><p><small>Last revised: June 20, 2008 at 00:19:08 GMT</small></p>

      </td>

      <td align="right">
      <div class="copyright-footer"></div>

      </td>

    </tr>

  </tbody>
</table>

<hr>
<div class="spirit-nav"><a accesskey="n" href="boost_config/boost_macro_reference.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a></div>

</body></html>