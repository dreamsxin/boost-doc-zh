<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>

<title>Style Guide</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="theme/style.css" type="text/css"></head>
<body>
<table background="theme/bkd2.gif" border="0" cellspacing="2" width="100%">
  <tbody><tr> 
    <td width="10"> 
    </td>
    <td width="85%"> <font face="Verdana, Arial, Helvetica, sans-serif" size="6"><b>Style 
      Guide 风格指南 </b></font></td>
    <td width="112"><a href="http://spirit.sf.net"><img src="theme/spirit.gif" align="right" border="0" height="48" width="112"></a></td>
  </tr>
</tbody></table>
<br>
<table border="0">
  <tbody><tr>
    <td width="10"></td>
    <td width="30"><a href="../index.html"><img src="theme/u_arr.gif" border="0"></a></td>
    <td width="30"><a href="portability.html"><img src="theme/l_arr.gif" border="0"></a></td>
    <td width="30"><a href="techniques.html"><img src="theme/r_arr.gif" border="0"></a></td>
  </tr>
</tbody></table>
<p> At some point, especially when there are lots of semantic actions attached 
  to various points, the grammar tends to be quite difficult to follow. In order 
  to keep an easy-to-read, consistent en aesthetically pleasing look to the Spirit 
  code, the following coding styleguide is advised.<br>有些时候，尤其是当有大量语义动作附着于各个地方时，语法会变得非常难以理解。为了保持易读性，风格一致的Spirit代码会更美观，以下是我们建议的代码风格。 </p>
<p>This coding style is adapted and extended from the ANTLR/PCCTS style (Terrence 
  Parr) and <a href="http://groups.yahoo.com/group/boost/files/coding_guidelines.html">Boost 
  coding guidelines</a> (David Abrahams and Nathan Myers) and is the combined 
  work of Joel de Guzman, Chris Uzdavinis and Hartmut Kaiser.<br>这些代码风格是从 ANTLR/PCCTS 风格(Terrence 
  Parr)和 <a href="http://groups.yahoo.com/group/boost/files/coding_guidelines.html">Boost 
  编码指导方针</a>(David Abrahams 和 Nathan Myers)修改和扩展而来的，并结合了 Joel de Guzman, Chris Uzdavinis 和 Hartmut Kaiser 的工作。</p>
<ul>
  <li> Rule names use std C++ (Boost) convention. The rule name may be very long.<br>规则名使用 std C++ (Boost) 命名约定。规则名可能非常长。</li>
  <li>The '=' is neatly indented 4 spaces below. Like Boost, use spaces instead 
    of tabs.<br>'=' 如下缩入4个空格。和Boost一样，用空格符替代制表符。 </li>
  <li>Breaking the operands into separate lines puts the semantic actions neatly 
    to the right.<br>将操作数分开到不同的行，将相应的语义动作放在右边。 </li>
  <li>Semicolon at the last line terminates the rule.<br>最后一行用分号结束该规则。 </li>
  <li>The adjacent parts of a sequence should be indented accordingly to have 
    all, what belongs to one level, at one indentation level.<br>一个序列的相邻部分应根据层级缩入，属于同一级的采用相同的缩入。</li>
</ul>
<pre><span class="identifier">    program<br>        </span><span class="special">=   </span><span class="identifier">program_heading </span><span class="special">[</span><span class="identifier">heading_action</span><span class="special">]<br>    </span><span class="identifier">    </span><span class="special">    &gt;&gt; </span><span class="identifier">block </span><span class="special">[</span><span class="identifier">block_action</span><span class="special">]<br>    </span><span class="identifier">    </span><span class="special">    &gt;&gt; </span><span class="literal">'.'<br>    </span><span class="identifier">    </span><span class="special">|   </span><span class="identifier">another_sequence<br>            </span><span class="special">&gt;&gt; </span><span class="identifier">etc<br>    </span><span class="identifier">    </span><span class="special">;</span></pre>
<ul>
  <li>Prefer literals in the grammar instead of identifiers. e.g. <tt>"program"</tt> 
    instead of <tt>PROGRAM</tt>, <tt>'&gt;='</tt> instead of <tt>GTE</tt> and 
    <tt>'.' </tt>instead of <tt>DOT</tt>. This makes it much easier to read. If 
    this isn't possible (for instance where the used tokens must be identified 
    through integers) capitalized identifiers should be used instead.<br>在语法中优先使用字面量而不是标识符，如，用 <tt>"program"</tt> 替代 <tt>PROGRAM</tt>, 用 <tt>'&gt;='</tt> 替代 <tt>GTE</tt> 以及用 
    <tt>'.' </tt>替代 <tt>DOT</tt>。这样可以令语法更易读。如果不可能这么做(如被用的记号必须通过整数来标识)，则将标识符大写。 </li>
  <li> Breaking the operands may not be needed for short expressions. e.g. <tt>*(',' 
    &gt;&gt; file_identifier)</tt> as long as the line does not exceed 80 characters.<br>对于较短的表达式，如 <tt>*(',' 
    &gt;&gt; file_identifier)</tt>，只要该行不超出80个字符，就不需要将操作数分拆。 
  </li>
  <li> If a sequence fits on one line, put spaces inside the parentheses to clearly 
    separate them from the rules.<br>如果一个序列可放入一行，则将空格放在括号中将它们与规则明确分隔开。 </li>
</ul>
<pre>    <span class="identifier">program_heading<br>        </span><span class="special">=   </span><span class="identifier">as_lower_d</span><span class="special">[</span><span class="string">"program"</span><span class="special">]<br>            &gt;&gt; </span><span class="identifier">identifier<br>            </span><span class="special">&gt;&gt; </span><span class="literal">'('<br>            </span><span class="special">&gt;&gt; </span><span class="identifier">file_identifier<br>            </span><span class="special">&gt;&gt; *( </span><span class="literal">',' </span><span class="special">&gt;&gt; </span><span class="identifier">file_identifier </span><span class="special">)<br>            &gt;&gt; </span><span class="literal">')'<br>            </span><span class="special">&gt;&gt; </span><span class="literal">';'<br>        </span><span class="special">;</span></pre>
<ul>
  <li> Nesting directives: If a rule does not fit on one line (80 characters) 
    it should be continued on the next line intended by one level.<br>嵌套指示符：如果一个规则不适合放在一行中(80个字符)，则应在下一行缩入一级继续。 </li>
  <li>The brackets of directives, semantic expressions (using Phoenix or LL lambda 
    expressions) or parsers should be placed as follows.<br>指示符、语义表达式(使用 Phoenix 或 LL lambda 表达式)或分析器的括号应如下放置。 </li>
</ul>
<pre>    <span class="identifier">identifier<br>        </span><span class="special">=   </span><span class="identifier">nocase<br>            </span><span class="special">[<br>                </span><span class="identifier">lexeme<br>                </span><span class="special">[<br>                    </span><span class="identifier">alpha </span><span class="special">&gt;&gt; *(</span><span class="identifier">alnum </span><span class="special">| </span><span class="literal">'_'</span><span class="special">) [</span><span class="identifier">id_action</span><span class="special">]<br>                ]<br>            ]<br>        ;</span></pre>
<ul>
  <li> Nesting unary operators (e.g.Kleene star)<br>嵌套的单参操作符(如克林星) </li>
  <li>Unary rule operators (Kleene star, <tt>'!'</tt>, <tt>'+'</tt> etc.) should 
    be moved out one space before the corresponding indentation level, if this 
    rule has a body or a sequence after it, which does not fit on on line. This 
    makes the formatting more consistent and moves the rule 'body' at the same 
    indentation level as the rule itself, highlighting the unary operator.<br>单参规则操作符(克林星, <tt>'!'</tt>, <tt>'+'</tt> 等等)应比相应的缩入级前移一格，如果该规则之后有一个规则体或序列且不能在一行中写完。这样格式更为统一且将规则体移至与规则本身相同的缩入级，突出了单参操作符。</li>
</ul>
<pre><span class="special">    </span><span class="identifier">block<br>        </span><span class="special">=  *(   </span><span class="identifier">label_declaration_part<br>            </span><span class="special">|   </span><span class="identifier">constant_definition_part<br>            </span><span class="special">|   </span><span class="identifier">type_definition_part<br>            </span><span class="special">|   </span><span class="identifier">variable_declaration_part<br>            </span><span class="special">|   </span><span class="identifier">procedure_and_function_declaration_part<br>            </span><span class="special">)<br>            &gt;&gt; </span><span class="identifier">statement_part<br>        </span><span class="special">;</span></pre>
<table border="0">
  <tbody><tr> 
    <td width="10"></td>
    <td width="30"><a href="../index.html"><img src="theme/u_arr.gif" border="0"></a></td>
    <td width="30"><a href="portability.html"><img src="theme/l_arr.gif" border="0"></a></td>
    <td width="30"><a href="techniques.html"><img src="theme/r_arr.gif" border="0"></a></td>
  </tr>
</tbody></table>
<br>
<hr size="1">
<p class="copyright">Copyright © 2001-2003 Joel de Guzman<br>
  Copyright © 2001-2002 Hartmut Kaiser<br>
  Copyright © 2001-2002 Chris Uzdavinis<br>
  <br>
  <font size="2">Use, modification and distribution is subject to the Boost Software
    License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
    http://www.boost.org/LICENSE_1_0.txt)</font></p>
<p class="copyright">&nbsp;</p>
</body></html>