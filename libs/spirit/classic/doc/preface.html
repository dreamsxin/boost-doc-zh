<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>



    
  
  
  <meta content="HTML Tidy for Windows (vers 1st February 2003), see www.w3.org" name="generator">



    
    
  
  
  
  
  
  <title>Preface</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">



    
  
  
  <link rel="stylesheet" href="theme/style.css" type="text/css"></head>

<body>



    
<table background="theme/bkd2.gif" border="0" cellspacing="2" width="100%">



      <tbody>


    <tr>



        <td width="10"></td>



        <td width="85%">
          <font face="Verdana, Arial, Helvetica, sans-serif" size="6"><b>前言</b></font>
        </td>



        <td width="112">
          <a href="http://spirit.sf.net"><img src="theme/spirit.gif" align="right" border="0" height="48" width="112"></a>
        </td>



      </tr>



    
  
  
  </tbody>
</table>


<br>



     
    
<table border="0">



      <tbody>


    <tr>



        <td width="10"></td>



        <td width="30">
          <a href="../index.html"><img src="theme/u_arr.gif" border="0"></a>
        </td>



        <td width="30">
          <img src="theme/l_arr_disabled.gif" height="19" width="20">
        </td>



        <td width="30">
          <a href="introduction.html"><img src="theme/r_arr.gif" border="0">
          </a>
        </td>



      </tr>



    
  
  
  </tbody>
</table>


<br>



     
    
<table align="center" border="0" width="80%">



      <tbody>


    <tr>



        <td>
          
      
      
      <p>
            <i>“作为设计的例子要符合多数的“好”标准（如：易读性，灵活
性，有效性）。递归下降解析器，作为传统的过程化代码，正是这样的一个好例子。
另外一个例子是STL，它是一个基于传统过程化代码与参数化多态性的通用的容器与算法的库。”</i>
          </p>



          
      
      
      <p>
            <b><font color="#003366">Bjarne Stroustrup</font></b>
          </p>



        </td>



      </tr>



    
  
  
  </tbody>
</table>



    
<p>
      <b>历史</b>
    </p>



    
<p>十五年前，我用Pascal写下了自己的第一个计算器。这是一段难忘的编程经历，我惊讶于一组互相递归的函数集如何相互协作并表达出一个特定文法模
型。 同时，我从这个学术经验中得到的技能是很有用的。 时不时地，我被分派到一些写解析器的任务。
例如：每当需要执行任何形式的输入/输出操作，即使是二进制形式，我完成任务的途径都是，先写好一个类Pascal的语法分析图，再写一个相应的递归下降
解析器。这样运作良好。 </p>



    
<p>因特网和网页的出现使解析器的重要性放大了上千倍。 一方面，在一个网页浏览器项目中，我必须写一个HTML解析器。
我得到一个递归下降的HTML解析器，基于W3C形式工作。 当然，我庆幸于HTML有一个正式的文法规范。
因为因特网的影响，我需要做更多的解析工作。 到处都有RFC规范。 SGML, HTML, XML,
甚至email地址和那些看上去简单的URL地址，都是正式地用EBNF形式文法指定的。 这使我希望写一个类似于YACC和 <a href="http://www.antlr.org/">ANTLR</a> &nbsp;的一流的解析器生成工具,&nbsp; 其中解析器自动由规范语法生成。 但是，我又想代码量十分地少；少到足够放入我的口袋，并且可伸缩。
    </p>



    
<p> 它必须能实用地解析简单的文法（例如email地址）到适度复杂的文法（例如XML和一些小的脚本语言）。
可伸缩性是一个主要的目标。当你用它解决小任务例如命令行解析时，并不会带来很重的运行开销，而当你用YACC或PCCTS时则不然。
到现在，它已经进化并成熟，已经成为一个由多个模块组成的库，正如最初的目的，Spirit仍然可以用在极小的解析任务中。
只有你需要的特性才会产生开销。Spirit的威力在于它的模块化和可扩充性。
不同于一把万能而笨重的锤子，它能使你很容易地订制一把有恰当分量的锤子。 例如，它没有 lexer
，但它提供了所有的原始材料，如果你想要，你就写一个。 </p>



    
<p>考虑以上种种，结果就是 Spirit。 我在日本做R&amp;D开发时构思出Spirit 这个个人项目。
受到GoF的合成和解释模式启发，我意识到可以把递归下降解析器模型化为一个由终端对象和合成对象构成的层次组合。
最初的版本是用运行时多态性来实现的。 通过提供描述合成规则的字符串（例<tt>"prod ::= {‘A’
      | ‘B’} ‘C’;"</tt>），解析器在运行时产生。 一个编译函数对其编译出解析器，动态创建对象的层次组合和对象间的语义连接。 早期的参考文档在&nbsp;<a href="http://spirit.sourceforge.net/dl_docs/pre-spirit.htm">这里</a> 找到。
    </p>



    
<p>我们现在这个版本，是对原版进行完全重写，利用了表达式模板和静态多态性。灵感来源于Todd Veldhuizen的工作 (" <a href="http://www.extreme.indiana.edu/%7Etveldhui/papers/Expression-Templates/exprtmpl.html">
      Expression Templates</a>", C++ Report, June 1995)。 起初，这个
      <i><b>static-Spirit</b></i> 版本只意味着仅仅替换 <i><b>dynamic-Spirit&nbsp;</b></i>的核心代码。 Dynamic-spirit 也需要一个实现它自己的解析器。 当时是用手写的递归下降解析器去解析文法规格字符串。
    </p>



    
<p>在它最初的开源发布（2001年5月）之后， static-Spirit 得到了胜利。 在大约&nbsp;2001年11月，Spirit的网站有98%的活动百分点，一跃成为 Source Forge
      当时排名第一的解析器。 对于这样一个小项目(一个解析器库)，已经是不错的了。&nbsp; 后来"static"这个词被省略， static-Spirit 简称为 Spirit。 整个框架很快地进化，拥有更多动态特性。
    </p>



    
<p>
      <b>如何使用本手册</b>
    </p>



    
<p>
      Spirit的框架以逻辑模块来组织，首先以内核开始。 这个文档提供一个用户指南和每个模块的使用参考。 一个简单和干净的代码例子顶得上一百行的文档介绍； 因此， 用户指南里有丰富的例子，带有注释和一步步的解析。 用户指南多数是基于例子的。
    </p>



    
<p>我们尽量避免前向引用（引用前面未涉及的内容）。 但是在很多情况下，高级的相关主题会散布在正常的论述过程中。为了减轻这个问题，第一次阅读时可以跳过标有 "高阶议题"的主题。
    </p>



    
<p>一些图标用来标记主题的关联。 一些描述字符会跟在图标后面：
    </p>



    
<table align="center" border="0" width="90%">



      <tbody>


    <tr>



        <td>
          
      
      
      <table border="0" width="100%">



            <tbody>


          <tr>



              <td colspan="3" class="table_title">图标
              </td>



            </tr>



            <tr>



              <td class="table_cells" width="19">
                <img src="theme/note.gif" height="16" width="16">
              </td>



              <td class="table_cells" width="58">
                <b>注意</b>
              </td>



              <td class="table_cells" width="627">
                提供的信息比较重要，应该得到读者注意。
              </td>



            </tr>



            <tr>



              <td class="table_cells" width="19">
                <img src="theme/alert.gif">
              </td>



              <td class="table_cells" width="58">
                <b>警告</b>
              </td>



              <td class="table_cells" width="627">
                提供的信息是至关重要的。
              </td>



            </tr>



            <tr>



              <td class="table_cells" width="19">
                <img src="theme/lens.gif" height="16" width="15">
              </td>



              <td class="table_cells" width="58">
                <b>细节</b>
              </td>



              <td class="table_cells" width="627">
                提供的信息是辅助作用的，但是能够使读者更深入地认洞察该主题。但也可跳过。
              </td>



            </tr>



            <tr>



              <td class="table_cells" width="19">
                <img src="theme/bulb.gif" height="18" width="13">
              </td>



              <td class="table_cells" width="58">
                <span style="font-weight: bold;">提示</span></td>



              <td class="table_cells" width="627">
                有潜在作用的一小块信息。
              </td>



            </tr>



          
        
        
        </tbody>
      
      
      </table>



        </td>



      </tr>



    
  
  
  </tbody>
</table>



    
<p>
      <b>技术支持</b>
    </p>



    
<p>
      请把所有问题发到 Spirit的邮件列表。 你可以在<a href="https://lists.sourceforge.net/lists/listinfo/spirit-general">这里</a>订阅邮件列表
     。 邮件列表是一个可搜索的文档。 在 <a href="http://spirit.sf.net">Spirit的主页</a>提供此文档的搜索链接。 你也可以在&nbsp;
         <a href="http://news.gmane.org/thread.php?group=gmane.comp.parsers.spirit.general">
      NNTP 新闻组</a> (鸣谢 <a href="http://www.gmane.org">www.gmane.org</a>)阅读和发表邮件列表的消息。 新闻组是邮件列表的镜像。 这里是两个文档的链接: 这 <a href="http://dir.gmane.org/gmane.comp.parsers.spirit.general">
      gmane</a> 和这 <a href="http://sourceforge.net/mailarchive/forum.php?forum_id=1595gmane.org">geocrawler</a> 。
    </p>



    
<table align="center" border="0" width="100%">



      <tbody>


    <tr>



        <td>
          
      
      
      <div align="center">
            <i><b><font size="5">To my dear daughter Phoenix</font></b></i>
          </div>



        </td>



      </tr>



    
  
  
  </tbody>
</table>



    
<table border="0" width="100%">



      <tbody>


    <tr>



        <td width="72%">
          &nbsp;
        </td>



        <td width="28%">
          
      
      
      <div align="right">
            
      
      
      <p>
              <b>Joel de Guzman<br>


      </b> September 2002
            </p>



          </div>



        </td>



      </tr>



    
  
  
  </tbody>
</table>



    
<table border="0">



      <tbody>


    <tr>



        <td width="10"></td>



        <td width="30">
          <a href="../index.html"><img src="theme/u_arr.gif" border="0"></a>
        </td>



        <td width="30">
          <img src="theme/l_arr_disabled.gif" height="19" width="20">
        </td>



        <td width="30">
          <a href="introduction.html"><img src="theme/r_arr.gif" border="0">
          </a>
        </td>



      </tr>



    
  
  
  </tbody>
</table>


<br>



     
    
<hr size="1">
    
<p class="copyright">
      Copyright © 1998-2003 Joel de Guzman<br>



      <br>



       <font size="2">Use, modification and distribution is subject to the
      Boost Software License, Version 1.0. (See accompanying file
      LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)</font>
    </p>



    
<p>
      &nbsp;
    </p>



  
</body></html>