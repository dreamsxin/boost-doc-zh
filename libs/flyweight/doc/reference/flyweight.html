<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0.1 Transitional//EN">
<html>
<head>






  
  
  
  
  
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">







  
  
  
  
  
  
  
  
  
  
  <title>Boost.Flyweight Documentation - flyweight reference</title>
  <link rel="stylesheet" href="../style.css" type="text/css">






  
  
  
  
  
  <link rel="start" href="../index.html">






  
  
  
  
  
  <link rel="prev" href="index.html">






  
  
  
  
  
  <link rel="up" href="index.html">






  
  
  
  
  
  <link rel="next" href="key_value.html">
</head>


<body>






<h1><img src="../../../../boost.png" alt="Boost logo" align="middle" height="86" width="277">Boost.Flyweight
<code>flyweight</code> reference</h1>







<div class="prev_link"><a href="index.html"><img src="../prev.gif" alt="Boost.Flyweight reference" border="0"><br>






Boost.Flyweight reference
</a></div>






<div class="up_link"><a href="index.html"><img src="../up.gif" alt="Boost.Flyweight reference" border="0"><br>






Boost.Flyweight reference
</a></div>






<div class="next_link"><a href="key_value.html"><img src="../next.gif" alt="key-value flyweights" border="0"><br>






Key-value flyweights
</a></div>





<br style="" clear="all">







<hr>

<h2>Contents &nbsp;&#30446;&#24405;</h2>







<ul>






  <li><a href="#flyweight_fwd_synopsis">Header
    <code>"boost/flyweight/flyweight_fwd.hpp"</code> synopsis &nbsp;&#22836;&#25991;&#20214;"boost/flyweight/flyweight_fwd.hpp"&#22823;&#24847;</a></li>






  <li><a href="#synopsis">Header
    <code>"boost/flyweight/flyweight.hpp"</code> synopsis &nbsp;&#22836;&#25991;&#20214;"boost/flyweight/flyweight.hpp"&#22823;&#24847;</a>
    
    
    
    
    
    
    <ul>






      <li><a href="#flyweight">Class template <code>flyweight &nbsp;flyweight&#31867;&#27169;&#26495;</code></a>
        
        
        
        
        
        
        <ul>






          <li><a href="#instantiation_types">Instantiation types &nbsp;&#23454;&#20363;&#31867;&#22411;&nbsp;</a></li>






          <li><a href="#static_init">Static data initialization &nbsp;&#38745;&#24577;&#25968;&#25454;&#21021;&#22987;&#21270;</a></li>






          <li><a href="#constructors">Constructors, copy and assignment &nbsp;&#26500;&#36896;&#65292;&#25335;&#36125;&#21644;&#36171;&#20540;</a></li>






          <li><a href="#convertibility">Convertibility to the underlying types &nbsp;&#36716;&#25442;&#21040;&#24213;&#23618;&#31867;&#22411;</a></li>






          <li><a href="#modifiers">Modifiers &nbsp;&#20462;&#25913;&#22120;</a></li>






          <li><a href="#comparison">Comparison operators &nbsp;&#27604;&#36739;&#25805;&#20316;&#31526;</a></li>






          <li><a href="#specialized">Specialized algorithms &nbsp;&#19987;&#38376;&#21270;&#30340;&#31639;&#27861;</a></li>






          <li><a href="#config_macros">Configuration macros &nbsp;&#37197;&#32622;&#23439;</a></li>






        
        
        
        
        
        
        </ul>






      </li>






    
    
    
    
    
    
    </ul>






  </li>






</ul>








<h2>
<a name="flyweight_fwd_synopsis">Header
</a><a href="../../../../boost/flyweight/flyweight_fwd.hpp"><code>"boost/flyweight/flyweight_fwd.hpp"</code></a>
synopsis &nbsp;</h2>




<h2>&#22836;&#25991;&#20214;<a href="../../../../boost/flyweight/flyweight_fwd.hpp"><code>"boost/flyweight/flyweight_fwd.hpp"</code></a> &#22823;&#24847;</h2>







<blockquote>
  
  
  
  
  
  <pre><span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">{</span>
  
<span class="keyword">namespace</span> <span class="identifier">flyweights</span><span class="special">{</span>

<span class="keyword">template</span><span class="special">&lt;</span>
  <span class="keyword">typename</span> <span class="identifier">T</span><span class="special">,</span>
  <span class="keyword">typename</span> <span class="identifier">Arg1</span><span class="special">=</span><b>implementation defined</b><span class="special">,</span>
  <span class="keyword">typename</span> <span class="identifier">Arg2</span><span class="special">=</span><b>implementation defined</b><span class="special">,</span>
  <span class="keyword">typename</span> <span class="identifier">Arg3</span><span class="special">=</span><b>implementation defined</b><span class="special">,</span>
  <span class="keyword">typename</span> <span class="identifier">Arg4</span><span class="special">=</span><b>implementation defined</b><span class="special">,</span>
  <span class="keyword">typename</span> <span class="identifier">Arg5</span><span class="special">=</span><b>implementation defined</b>
<span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">flyweight</span><span class="special">;</span>

<span class="comment">// comparison:<br><br>// <b>OP</b> is any of ==,&lt;,!=,&gt;,&gt;=,&lt;=</span>

<span class="keyword">template</span><span class="special">&lt;</span>
  <span class="keyword">typename</span> <span class="identifier">T1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg11</span><span class="special">,...,</span><span class="keyword">typename</span> <span class="identifier">Arg15</span><span class="special">,</span>
  <span class="keyword">typename</span> <span class="identifier">T2</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg21</span><span class="special">,...,</span><span class="keyword">typename</span> <span class="identifier">Arg25</span>
<span class="special">&gt;</span>
<span class="keyword">bool</span> <span class="keyword">operator</span> <span class="identifier"><b><i>OP</i></b></span><span class="special">(</span>
  <span class="keyword">const</span> <span class="identifier">flyweight</span><span class="special">&lt;</span><span class="identifier">T1</span><span class="special">,</span><span class="identifier">Arg11</span><span class="special">,...,</span><span class="identifier">Arg15</span><span class="special">&gt;&amp;</span> <span class="identifier">x</span><span class="special">,</span>
  <span class="keyword">const</span> <span class="identifier">flyweight</span><span class="special">&lt;</span><span class="identifier">T2</span><span class="special">,</span><span class="identifier">Arg21</span><span class="special">,...,</span><span class="identifier">Arg25</span><span class="special">&gt;&amp;</span> <span class="identifier">y</span><span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span>
  <span class="keyword">typename</span> <span class="identifier">T1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg11</span><span class="special">,...,</span><span class="keyword">typename</span> <span class="identifier">Arg15</span><span class="special">,</span>
  <span class="keyword">typename</span> <span class="identifier">T2</span>
<span class="special">&gt;</span>
<span class="keyword">bool</span> <span class="keyword">operator</span> <span class="identifier"><b><i>OP</i></b></span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">flyweight</span><span class="special">&lt;</span><span class="identifier">T1</span><span class="special">,</span><span class="identifier">Arg11</span><span class="special">,...,</span><span class="identifier">Arg15</span><span class="special">&gt;&amp;</span> <span class="identifier">x</span><span class="special">,</span><span class="keyword">const</span> <span class="identifier">T2</span><span class="special">&amp;</span> <span class="identifier">y</span><span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span>
  <span class="keyword">typename</span> <span class="identifier">T1</span><span class="special">,</span>
  <span class="keyword">typename</span> <span class="identifier">T2</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg21</span><span class="special">,...,</span><span class="keyword">typename</span> <span class="identifier">Arg25</span>
<span class="special">&gt;</span>
<span class="keyword">bool</span> <span class="keyword">operator</span> <span class="identifier"><b><i>OP</i></b></span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T1</span><span class="special">&amp;</span> <span class="identifier">x</span><span class="special">,</span><span class="keyword">const</span> <span class="identifier">flyweight</span><span class="special">&lt;</span><span class="identifier">T2</span><span class="special">,</span><span class="identifier">Arg21</span><span class="special">,...,</span><span class="identifier">Arg25</span><span class="special">&gt;&amp;</span> <span class="identifier">y</span><span class="special">);</span>

<span class="comment">// specialized algorithms:</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg1</span><span class="special">,...,</span><span class="keyword">typename</span> <span class="identifier">Arg5</span><span class="special">&gt;</span>
<span class="keyword">inline</span> <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span>
  <span class="identifier">flyweight</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">Arg1</span><span class="special">,...,</span><span class="identifier">Arg5</span><span class="special">&gt;&amp;</span> <span class="identifier">x</span><span class="special">,</span><span class="identifier">flyweight</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">Arg1</span><span class="special">,...,</span><span class="identifier">Arg5</span><span class="special">&gt;&amp;</span> <span class="identifier">y</span><span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span>
  <span class="keyword">typename</span> <span class="identifier">ElemType</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Traits</span><span class="special">,</span> <br>  <span class="keyword">typename</span> <span class="identifier">T</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg1</span><span class="special">,...,</span><span class="keyword">typename</span> <span class="identifier">Arg5</span>
<span class="special">&gt;</span>
<span class="keyword">inline</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_ostream</span><span class="special">&lt;</span><span class="identifier">ElemType</span><span class="special">,</span><span class="identifier">Traits</span><span class="special">&gt;&amp;</span> <span class="keyword">operator</span><span class="special">&lt;&lt;(</span>
  <span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_ostream</span><span class="special">&lt;</span><span class="identifier">ElemType</span><span class="special">,</span><span class="identifier">Traits</span><span class="special">&gt;&amp;</span> <span class="identifier">out</span><span class="special">,</span>
  <span class="keyword">const</span> <span class="identifier">flyweight</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">Arg1</span><span class="special">,...,</span><span class="identifier">Arg5</span><span class="special">&gt;&amp;</span> <span class="identifier">x</span><span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span>
  <span class="keyword">typename</span> <span class="identifier">ElemType</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Traits</span><span class="special">,</span> <br>  <span class="keyword">typename</span> <span class="identifier">T</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg1</span><span class="special">,...,</span><span class="keyword">typename</span> <span class="identifier">Arg5</span>
<span class="special">&gt;</span>
<span class="keyword">inline</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_ostream</span><span class="special">&lt;</span><span class="identifier">ElemType</span><span class="special">,</span><span class="identifier">Traits</span><span class="special">&gt;&amp;</span> <span class="keyword">operator</span><span class="special">&gt;&gt;(</span>
  <span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_istream</span><span class="special">&lt;</span><span class="identifier">ElemType</span><span class="special">,</span><span class="identifier">Traits</span><span class="special">&gt;&amp;</span> <span class="identifier">in</span><span class="special">,</span>
  <span class="identifier">flyweight</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span><span class="identifier">Arg1</span><span class="special">,...,</span><span class="identifier">Arg5</span><span class="special">&gt;&amp;</span> <span class="identifier">x</span><span class="special">);</span>

<span class="special">}</span> <span class="comment">// namespace boost::flyweights</span>

<span class="keyword">using</span> <span class="identifier">flyweights</span><span class="special">::</span><span class="identifier">flyweight</span><span class="special">;</span>

<span class="special">}</span> <span class="comment">// namespace boost</span>  </pre>





</blockquote>







<p>
<code>flyweight_fwd.hpp</code> forward declares the class template
<a href="#flyweight"><code>flyweight</code></a> and its associated global functions.</p>




<p><big><code>flyweight_fwd.hpp</code></big>&#21069;&#32622;&#22768;&#26126;&#20102;&#31867;&#27169;&#26495;<big><a href="flyweight.html#flyweight"><code>flyweight</code></a></big>&#21644;&#30456;&#20851;&#30340;&#20840;&#23616;&#20989;&#25968;&#12290;
</p>







<h2>
<a name="synopsis">Header
</a><a href="../../../../boost/flyweight/flyweight.hpp"><code>"boost/flyweight/flyweight.hpp"</code></a>
synopsis</h2>




<h2>&#22836;&#25991;&#20214;<a href="../../../../boost/flyweight/flyweight.hpp"><code>"boost/flyweight/flyweight.hpp"</code></a>&#22823;&#24847;
</h2>







<h3><a name="flyweight">
Class template <code>flyweight&nbsp;flyweight&#31867;&#27169;&#26495;</code>
</a></h3>







<p>
Objects of type <code>flyweight&lt;...&gt;</code> provide access to immutable
values of type <code>flyweight&lt;...&gt;::value_type</code>, with the following advantages over using
plain <code>value_type</code> objects:</p>




<p><big><code>flyweight&lt;...&gt;</code></big>&#31867;&#22411;&#30340;&#23545;&#35937;&#25552;&#20379;&#21040;<big><code>flyweight&lt;...&gt;::value_type</code></big>&#31867;&#22411;&#30340;&#24120;&#37327;&#35775;&#38382;&#65292;&#23545;&#27604;&#20351;&#29992;&#26222;&#36890;&#30340;<big><code>value_type</code></big>&#23545;&#35937;&#20855;&#26377;&#22914;&#19979;&#30340;&#20248;&#28857;&#65306;
</p>





<ul>






  <li>Flyweight objects with equivalent value share the same representation
    (the associated <code>value_type</code> object).</li>




  
</ul>



&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#20855;&#26377;&#30456;&#21516;&#20540;&#30340;flyweight&#23545;&#35937;&#20849;&#20139;&#21516;&#19968;&#20010;&#34920;&#31034;&#65288;&#20851;&#32852;&#30340;<big><code>value_type</code></big>&#23545;&#35937;&#65289;&#12290;
<ul>






  <li>The size of flyweights is typically that of a pointer, which is in general
    smaller than <code>sizeof(value_type)</code>.</li>




  


</ul>



&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flyweights&#30340;&#22823;&#23567;&#36890;&#24120;&#26159;&#19968;&#20010;&#25351;&#38024;&#30340;&#22823;&#23567;&#65292;&#36825;&#36890;&#24120;&#35201;&#23567;&#20110;<big><code>sizeof(value_type)</code></big>&#12290;<br>



<br>







So, if the level of redundancy (ratio of total objects to different values)
is high enough, substituting a suitable instantiation of <code>flyweight</code>
for <code>value_type</code> results in a reduction in memory usage.<br>



<br>




&#22240;&#27492;&#65292;&#22914;&#26524;&#20887;&#20313;&#24230;&#65288;&#20840;&#20307;&#23545;&#35937;&#21644;&#19981;&#21516;&#20540;&#30340;&#23545;&#35937;&#20043;&#27604;&#65289;&#36275;&#22815;&#39640;&#65292;&#20197;&#19968;&#20010;&#21512;&#36866;&#30340;<big><code>flyweight</code></big>&#23454;&#20363;&#26469;&#26367;&#25442;<big><code>value_type</code></big>&#21487;&#20197;&#20943;&#23569;&#20869;&#23384;&#29992;&#37327;&#12290;


<p>
<code>flyweight</code> is parameterized according to some aspects:</p>




<p><code>flyweight</code>&#26681;&#25454;&#19968;&#20123;&#30028;&#38754;&#26469;&#21442;&#25968;&#21270;
</p>





<ul>






  <li>Types <code>key_type</code> and <code>value_type</code>
    (possibly equal), where <code>key_type</code> serves as a
    key type to lookup and construct internal shared instances of
    objects of <code>value_type</code>.</li>




  
</ul>



&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <big><code>key_type</code></big>&#21644;<big><code>value_type</code></big>&#31867;&#22411;&#65288;&#21487;&#33021;&#30456;&#21516;&#65289;&#65292;&#36825;&#37324;<big><code>key_type</code></big>&#20316;&#20026;&#38190;&#31867;&#22411;&#29992;&#26469;&#26597;&#25214;&#21644;&#21019;&#24314;&#20869;&#37096;&#30340;&#20849;&#20139;&#30340;<big><code>value_type</code></big>&#23545;&#35937;&#30340;&#23454;&#20363;&#12290;
<ul>






  <li>An optional <a href="tags.html#tag">tag</a> type meant to syntactically
     differentiate between otherwise identical instantiations.</li>




  
</ul>



&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <code></code>&#19968;&#20010;&#21487;&#36873;&#30340;<a href="tags.html#tag">&#26631;&#35760;</a>&#31867;&#22411;&#29992;&#26469;&#20174;&#35821;&#27861;&#19978;&#23545;&#30456;&#21516;&#30340;&#23454;&#20363;&#36827;&#34892;&#21306;&#20998;&#12290;
<ul>






  <li>The <a href="factories.html#factory">factory class</a> used to store
    and retrieve the shared value objects.</li>




  
</ul>



&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#29992;&#26469;&#23384;&#21462;&#20849;&#20139;&#30340;&#20540;&#23545;&#35937;&#30340;<a href="factories.html#factory">&#24037;&#21378;&#31867;</a>&#12290;
<ul>






  <li>The type of <a href="holders.html#holder">holder</a> used to
    instantiate the flyweight factory and a mutex object, both of
    which are unique to each specialization of the <code>flyweight</code>
    class template.</li>




  
</ul>



&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="holders.html#holder">holder</a>&#31867;&#22411;&#29992;&#26469;&#23454;&#20363;&#21270;flyweight&#24037;&#21378;&#21644;&#19968;&#20010;&#20114;&#26021;&#23545;&#35937;&#65292;&#23545;&#27599;&#19968;&#20010;<big><code>flyweight</code></big>&#31867;&#27169;&#26495;&#30340;&#23454;&#20363;&#36825;&#20004;&#32773;&#37117;&#26159;&#21807;&#19968;&#30340;&#12290;
  
<ul>






  <li>A <a href="locking.html#locking">locking policy</a> determining
    the synchronization mechanisms for internal access to shared resources.</li>




  
</ul>



&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#19968;&#31181;<a href="locking.html#locking">&#38145;&#23450;&#31574;&#30053;</a>&#30830;&#23450;&#23545;&#20849;&#20139;&#36164;&#28304;&#20869;&#37096;&#35775;&#38382;&#30340;&#21516;&#27493;&#26426;&#21046;&#12290;
<ul>






  <li>A <a href="tracking.html#tracking">tracking policy</a> which controls
   how values are treated when all their associated flyweight objects are
   destroyed.</li>




  


</ul>



&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#19968;&#31181;<a href="tracking.html#tracking">&#36319;&#36394;&#31574;&#30053;</a>&#25511;&#21046;&#24403;&#20851;&#32852;&#21040;&#19968;&#20010;&#20540;&#30340;&#25152;&#26377;flyweight&#23545;&#35937;&#37117;&#38144;&#27585;&#20043;&#21518;&#23427;&#35813;&#24590;&#20040;&#34987;&#22788;&#29702;&#12290;<br>



<br>






These aspects impact the internal structure and behavior
of the <code>flyweight</code> instantiation in the following manner:<br>



<br>




&#36825;&#20123;&#30028;&#38754;&#20197;&#19979;&#38754;&#36825;&#20123;&#26041;&#24335;&#24433;&#21709;&#30528;<big><code>flyweight</code></big>&#23454;&#20363;&#30340;&#20869;&#37096;&#26500;&#36896;&#21644;&#34892;&#20026;&#65306;
<ul>






  <li>Each instantation of <code>flyweight</code> internally owns
    a unique factory object and a unique synchronization
    <a href="locking.html#preliminary">mutex</a> object, both of which
    are created through the use of an associated holder type.</li>




  
</ul>


<div style="margin-left: 40px;">&#27599;&#20010;<big><code>flyweight</code></big>&#23454;&#20363;&#30340;&#20869;&#37096;&#25317;&#26377;&#19968;&#20010;&#21807;&#19968;&#30340;&#24037;&#21378;&#23545;&#35937;&#21644;&#19968;&#20010;&#21807;&#19968;&#30340;&#21516;&#27493;<a href="locking.html#preliminary">&#20114;&#26021;</a>&#23545;&#35937;&#65292;&#36825;&#20004;&#32773;&#37117;&#26159;&#36890;&#36807;&#30456;&#20851;&#30340;holder&#31867;&#22411;&#21019;&#24314;&#30340;&#12290;
</div>


<ul>






  <li>The flyweight factory stores elements of an undisclosed type
    <code>Entry</code> that is implicitly convertible to
    <code>const key_type&amp;</code> and also stores a subobject of
    <code>value_type</code>. Every flyweight object is associated
    to a <code>value_type</code> subobject of some <code>Entry</code>
    stored in the factory.</li>




  
</ul>


<div style="margin-left: 40px;">flyweight&nbsp;&#24037;&#21378;&#23384;&#20648;&#19968;&#20010;&#26410;&#20844;&#24320;&#30340;<big><code>Entry</code></big>&#31867;&#22411;&#30340;&#20803;&#32032;&#65292;&#36825;&#20010;&#31867;&#22411;&#21487;&#20197;&#38544;&#24335;&#36716;&#25442;&#21040;<big><code>const key_type&amp;</code></big>&#24182;&#19988;&#21253;&#21547;&#19968;&#20010;<big><code>value_type</code></big>&#31867;&#22411;&#30340;&#23376;&#23545;&#35937;&#12290;&#27599;&#20010;flyweight&#23545;&#35937;&#37117;&#20851;&#32852;&#21040;&#23384;&#20648;&#22312;&#24037;&#21378;&#37324;&#30340;&#26576;&#20010;<big><code>Entry</code></big>&#30340;<big><code>value_type</code></big>&#23376;&#23545;&#35937;&#12290;</div>


<ul>






  <li>The associated mutex object is used to protect all invocations
    to the insertion and deletion functions of the internal flyweight
    factory.</li>




  
</ul>


<div style="margin-left: 40px;">&#30456;&#20851;&#30340;&#20114;&#26021;&#23545;&#35937;&#29992;&#26469;&#20445;&#25252;&#21040;&#20869;&#37096;flyweight&#24037;&#21378;&#30340;&#25152;&#26377;&#25554;&#20837;&#21644;&#21024;&#38500;&#21151;&#33021;&#30340;&#35843;&#29992;&#12290;</div>


<ul>






  <li>Each flyweight object internally stores a value of some
    undisclosed type <code>Handle</code>. <code>Handle</code> and
    the <code>Entry</code> type referred to above are obtained
    from invocations to the associated tracking policy, in the
    manner described for this concept.</li>




  



</ul>


<div style="margin-left: 40px;">&#27599;&#20010;flyweight&#23545;&#35937;&#20869;&#37096;&#23384;&#20648;&#19968;&#20010;&#26410;&#20844;&#24320;&#30340;<big><code>Handle</code></big>&#31867;&#22411;&#30340;&#20540;&#12290;<big><code>Handle</code></big>&#36824;&#26377;&#19978;&#25991;&#25552;&#21040;&#30340;<big><code>Entry</code></big>&#31867;&#22411;&#37117;&#26469;&#33258;&#20110;&#23545;&#30456;&#20851;&#30340;&#36319;&#36394;&#31574;&#30053;&#30340;&#35843;&#29992;&#65292;&#20197;&#23427;&#33258;&#24049;&#30340;&#26041;&#24335;&#12290;<br>


<br>


</div>






In what follows, we implicitly assume that <code>key_type</code> equivalence
refers to the equivalence relationship induced by the factory class used.
Also, two values of <code>value_type</code> are considered equivalent
if they are constructed from equivalent keys, or are copies of
objects constructed from equivalent keys.<br>


<br>


&#22312;&#25509;&#19979;&#26469;&#30340;&#37096;&#20998;&#65292;&#25105;&#20204;&#38544;&#21547;&#20551;&#35774;<big><code>key_type</code></big>&#30340;&#30456;&#31561;&#25351;&#30340;&#26159;&#25152;&#20351;&#29992;&#30340;&#24037;&#21378;&#31867;&#23548;&#20986;&#30340;&#30456;&#31561;&#20851;&#31995;&#12290;&#24182;&#19988;&#65292;&#22914;&#26524;&#20004;&#20010;<big><code>value_type</code></big>&#30340;&#20540;&#20174;&#30456;&#31561;&#30340;&#38190;&#26500;&#36896;&#32780;&#26469;&#65292;&#25110;&#32773;&#26159;&#30001;&#30456;&#31561;&#30340;&#38190;&#26500;&#36896;&#20986;&#26469;&#30340;&#23545;&#35937;&#30340;&#25335;&#36125;&#65292;&#23427;&#20204;&#23558;&#34987;&#30475;&#20316;&#26159;&#30456;&#31561;&#30340;&#12290;


<blockquote>
  
  
  
  
  
  <pre><span class="keyword">template</span><span class="special">&lt;</span>
  <span class="keyword">typename</span> <span class="identifier">T</span><span class="special">,</span>
  <span class="keyword">typename</span> <span class="identifier">Arg1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg2</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg3</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg4</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">Arg5</span>
<span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">flyweight</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="keyword">typedef</span> <span class="identifier"><b>dependent on T</b></span> <span class="identifier">key_type</span><span class="special">;</span>
  <span class="keyword">typedef</span> <span class="identifier"><b>dependent on T</b></span> <span class="identifier">value_type</span><span class="special">;</span>

  <span class="comment">// static data initialization:</span>

  <span class="keyword">static</span> <span class="keyword">bool</span> <span class="identifier">init</span><span class="special">();</span>
  <span class="keyword">class</span> <span class="identifier">initializer</span><span class="special">{</span><span class="keyword">public</span><span class="special">:</span><span class="identifier">initializer</span><span class="special">();</span><span class="special">};</span>
    
  <span class="comment">// construct/copy/destroy:</span>
  
  <span class="identifier">flyweight</span><span class="special">();</span>
  <span class="identifier">flyweight</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">flyweight</span><span class="special">&amp;</span> <span class="identifier">x</span><span class="special">);</span>
  <span class="identifier">flyweight</span><span class="special">(</span><span class="identifier">flyweight</span><span class="special">&amp;</span> <span class="identifier">x</span><span class="special">);</span>

  <span class="comment">// forwarding constructors:<br>  // n is implementation defined. All combinations of constant<br>  // and non constant reference arguments are provided.</span>

  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T0</span><span class="special">&gt;</span>
  <span class="keyword">explicit</span> <span class="identifier">flyweight</span><span class="special">([</span><span class="keyword">const</span><span class="special">]</span> <span class="identifier">T0</span><span class="special">&amp;</span> <span class="identifier">t0</span><span class="special">);</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T0</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">T1</span><span class="special">&gt;</span>
  <span class="identifier">flyweight</span><span class="special">([</span><span class="keyword">const</span><span class="special">]</span> <span class="identifier">T0</span><span class="special">&amp;</span> <span class="identifier">t0</span><span class="special">,[</span><span class="keyword">const</span><span class="special">]</span> <span class="identifier">T1</span><span class="special">&amp;</span> <span class="identifier">t1</span><span class="special">);</span>
  <span class="special">...</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T0</span><span class="special">,...,</span><span class="keyword">typename</span> <span class="identifier">Tn</span><span class="special">-</span><span class="number">1</span><span class="special">&gt;</span>
  <span class="identifier">flyweight</span><span class="special">([</span><span class="keyword">const</span><span class="special">]</span> <span class="identifier">T0</span><span class="special">&amp;</span> <span class="identifier">t0</span><span class="special">,...,[</span><span class="keyword">const</span><span class="special">]</span> <span class="identifier">Tn</span><span class="special">-</span><span class="number">1</span><span class="special">&amp;</span> <span class="identifier">tn</span><span class="special">-</span><span class="number">1</span><span class="special">);</span>

  <span class="identifier">flyweight</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">flyweight</span><span class="special">&amp;</span> <span class="identifier">x</span><span class="special">);</span>  <br>  <span class="identifier">flyweight</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">value_type</span><span class="special">&amp;</span> <span class="identifier">x</span><span class="special">);</span>

  <span class="comment">// convertibility to underlying type:</span>

  <span class="keyword">const</span> <span class="identifier">key_type</span><span class="special">&amp;</span>   <span class="identifier">get_key</span><span class="special">()</span><span class="keyword">const</span><span class="special">;</span>
  <span class="keyword">const</span> <span class="identifier">value_type</span><span class="special">&amp;</span> <span class="identifier">get</span><span class="special">()</span><span class="keyword">const</span><span class="special">;</span>
  <span class="keyword">operator</span> <span class="keyword">const</span>    <span class="identifier">value_type</span><span class="special">&amp;()</span><span class="keyword">const</span><span class="special">;</span>  <br><br>  <span class="comment">// modifiers:</span>

  <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">flyweight</span><span class="special">&amp;</span> <span class="identifier">x</span><span class="special">);</span>
<span class="special">};</span>  </pre>





</blockquote>







<h4><a name="instantiation_types">Instantiation types &nbsp;&#23454;&#20363;&#31867;&#22411;</a></h4>







<p>
<code>T</code> can be either: &nbsp;<big><code>T</code></big>&#21487;&#20197;&#26159;2&#32773;&#20043;&#19968;
</p>





<ul>






  <li>An arbitrary type, &nbsp;&#19968;&#20010;&#20219;&#24847;&#31867;&#22411;</li>






  <li>a type of the form 
    <a href="key_value.html#key_value_construct"><code>key_value&lt;Key,Value[,KeyFromValue]&gt;</code></a>. &#19968;&#20010;<a href="key_value.html#key_value_construct"><code>key_value&lt;Key,Value[,KeyFromValue]&gt;</code></a>&#36825;&#31181;&#26684;&#24335;&#30340;&#31867;&#22411;&nbsp;</li>






</ul>






In the first case, the nested types <code>key_type</code> and <code>value_type</code>
are both equal to <code>T</code>. In the second case, <code>key_type</code>=<code>Key</code>,
<code>value_type</code>=<code>Value</code>; we say then that the instantiation
of <code>flyweight</code> is a <i>key-value</i> flyweight.
<code>value_type</code> is the type of the values flyweight objects give access to,
while value lookup is based on associated <code>key_type</code> values.
<code>key_value</code> must be
<a href="http://www.sgi.com/tech/stl/Assignable.html"><code>Assignable</code></a>
and <code>value_type</code> must be constructible from <code>key_type</code>;
additionally, <code>key_value</code> must
conform to any extra requirements imposed by the type of factory used.
For key-value flyweights, it is guaranteed that the creation or assignment of a flyweight
object results in at most one construction (or copy construction in some
particular cases) of an object
of <code>value_type</code>, and this construction only occurs in the case that no
equivalent value existed previously in the flyweight factory.<br>


<br>




&#22312;&#31532;&#19968;&#31181;&#24773;&#20917;&#19979;&#65292;&#20869;&#23884;&#30340;&#31867;&#22411;<big><code>key_type</code></big>&#21644;<big><code>value_type</code></big>&#37117;&#31561;&#21516;&#20110;<code><big>T</big>&#12290;</code>&#31532;&#20108;&#31181;&#24773;&#20917;&#19979;&#65292;<big><code>key_type</code>=</big><code><big>Key</big></code>&#65292;<big><code>value_type</code>=</big><code><big>Value</big>&#65307;</code>&#27492;&#26102;&#25105;&#20204;&#31216;&#36825;&#20010;<big><code>flyweight</code></big>&#30340;&#23454;&#20363;&#20026;<span style="font-style: italic;">&#38190;-&#20540;</span> flyweight&#12290;<big><code>value_type</code></big>&#26159;flyweight&#23545;&#35937;&#35775;&#38382;&#30340;&#20540;&#30340;&#31867;&#22411;&#65292;&#20540;&#30340;&#26597;&#25214;&#26159;&#22522;&#20110;&#30456;&#20851;&#30340;<big><code>key_type</code></big>&#20540;&#12290;<big><code>key_value</code></big>&#20540;&#24517;&#39035;&#26159;<a href="http://www.sgi.com/tech/stl/Assignable.html">&#21487;&#36171;&#20540;&#30340;</a>&#24182;&#19988;<big><code>value_type</code></big>&#24517;&#39035;&#21487;&#20197;&#20174;<big><code>key_type</code></big>&#30340;&#26500;&#36896;&#32780;&#26469;&#65307;&#21478;&#22806;&#65292;<big><code>key_value</code></big>&#21478;&#36824;&#35201;&#28385;&#36275;&#25152;&#29992;&#24037;&#21378;&#26045;&#21152;&#30340;&#19968;&#20123;&#39069;&#22806;&#30340;&#35201;&#27714;&#12290;&#38190;-&#20540;flyweights&#20445;&#35777;&#65306;&#19968;&#20010;flyweight&#23545;&#35937;&#30340;&#21019;&#24314;&#25110;&#32773;&#22797;&#21046;&#23548;&#33268;<big><code>value_type</code></big>&#23545;&#35937;&#26368;&#22810;&#26500;&#36896;&#65288;&#22312;&#26576;&#20123;&#29305;&#23450;&#30340;&#24773;&#24418;&#19979;&#26159;&#25335;&#36125;&#26500;&#36896;&#65289;&#19968;&#27425;&#65292;&#24182;&#19988;&#36825;&#20010;&#26500;&#36896;&#21482;&#22312;flyweight&#24037;&#21378;&#37324;&#20043;&#21069;&#19981;&#23384;&#22312;&#30456;&#31561;&#30340;&#20540;&#26102;&#25165;&#20250;&#21457;&#29983;&#12290;


<p>
The types <code>Arg1</code>, ... , <code>Arg5</code>, if provided, must be any
of the following, in no particular order:</p>




<p>&#31867;&#22411;<big><code>Arg1</code>&#65292;&hellip;&#65292; </big><code><big>Arg5</big>&#65292;</code>&#22914;&#26524;&#25552;&#20379;&#30340;&#35805;&#65292;&#24517;&#39035;&#26159;&#20197;&#19979;&#20960;&#31181;&#31867;&#22411;&#20043;&#19968;&#65292;&#27809;&#26377;&#29305;&#23450;&#30340;&#39034;&#24207;&#35201;&#27714;&#65306;
</p>





<ul>






  <li>A <a href="tags.html#tag">tag</a>,</li>






  <li>a <a href="factories.html#factory">factory specifier</a>,</li>






  <li>a <a href="holders.html#holder">holder specifier</a>,</li>






  <li>a <a href="locking.html#locking">locking policy</a>,</li>






  <li>a <a href="tracking.html#tracking">tracking policy</a>.</li>






</ul>






No aspect can be specified twice. Each internal component of the
<code>flyweight</code> instantiation is obtained through use of the
corresponding specifier; for instance, the factory results from a
certain (MPL) invocation of the given factory specifier, the internal
mutex from the given locking policy, etc.
The default configuration arguments are:<br>


<br>




&#27599;&#20010;&#30028;&#38754;&#21482;&#21487;&#20197;&#25351;&#23450;&#19968;&#27425;&#12290;&#27599;&#20010;<big><code>flyweight</code></big>&#23454;&#20363;&#30340;&#20869;&#37096;&#32452;&#20214;&#26159;&#36890;&#36807;&#20351;&#29992;&#30456;&#24212;&#30340;&#25551;&#36848;&#31526;&#33719;&#24471;&#30340;&#65307;&#20363;&#22914;&#65292;&#32473;&#23450;&#30340;&#65288;MPL&#65289;&#24037;&#21378;&#25551;&#36848;&#31526;&#30340;&#25191;&#34892;&#29983;&#25104;&#19968;&#20010;&#24037;&#21378;&#65292;&#32473;&#23450;&#30340;&#38145;&#23450;&#31574;&#30053;&#20135;&#29983;&#20869;&#37096;&#20114;&#26021;&#23545;&#35937;&#65292;&#31561;&#31561;&#12290;&#40664;&#35748;&#30340;&#37197;&#32622;&#21442;&#25968;&#26159;&#65306;
<ul>






  <li>No tagging,</li>






  <li><a href="factories.html#hashed_factory"><code>hashed_factory&lt;&gt;</code></a>,</li>






  <li><a href="holders.html#static_holder"><code>static_holder</code></a>,</li>






  <li><a href="locking.html#simple_locking"><code>simple_locking</code></a>,</li>






  <li><a href="tracking.html#refcounted"><code>refcounted</code></a> tracking policy.</li>






</ul>








<h4><a name="static_init">Static data initialization &nbsp;&#38745;&#24577;&#25968;&#25454;&#21021;&#22987;&#21270;</a></h4>







<p>
The static data internal to a given <code>flyweight</code> instantiation
(factory instance, etc.) is constructed during the dynamic initialization
phase of the program and always before the first program-wide use of the
instantiated class. The following utilities can be
used when more control about the moment of construction is required.</p>




<p>&#19968;&#20010;&#32473;&#23450;<big><code>flyweight</code></big>&#23454;&#20363;&#30340;&#38745;&#24577;&#25968;&#25454;&#65288;&#24037;&#21378;&#23454;&#20363;&#65292;&#31561;&#31561;&#65289;&#26159;&#22312;&#31243;&#24207;&#30340;&#21160;&#24577;&#21021;&#22987;&#21270;&#38454;&#27573;&#21019;&#24314;&#30340;&#65292;&#24182;&#19988;&#26159;&#22312;&#31243;&#24207;&#33539;&#22260;&#20869;&#31532;&#19968;&#27425;&#20351;&#29992;&#35813;&#23454;&#20363;&#31867;&#20043;&#21069;&#12290;&#24403;&#23545;&#21021;&#22987;&#21270;&#30340;&#26102;&#38388;&#35201;&#27714;&#26356;&#22810;&#30340;&#25511;&#21046;&#26102;&#21487;&#20197;&#20351;&#29992;&#19979;&#38754;&#30340;&#24037;&#20855;&#12290;
</p>







<code>static bool init();</code>

<blockquote>
  <b>Effects:</b> After execution of this function the static data associated
to the instantiation of <code>flyweight</code> is guaranteed to be
constructed.<br>


  <span style="font-weight: bold;">

&#25928;&#26524;&#65306;</span>&#25191;&#34892;&#36825;&#20010;&#20989;&#25968;&#20043;&#21518;&#19982;<big><code>flyweight</code></big>&#23454;&#20363;&#30456;&#20851;&#30340;&#38745;&#24577;&#25968;&#25454;&#30830;&#20445;&#24050;&#32463;&#34987;&#26500;&#36896;&#20102;<br>






  <b>Note:</b> Concurrent execution of this function is not thread safe.<br>


  <span style="font-weight: bold;">

&#27880;&#24847;&#65306;</span>&#21516;&#27493;&#25191;&#34892;&#36825;&#20010;&#20989;&#25968;&#26159;&#32447;&#31243;&#19981;&#23433;&#20840;&#30340;
</blockquote>







<code>initializer::initializer();</code>

<blockquote>
  <b>Effects:</b> Executes <code>init()</code>.<br>


  <span style="font-weight: bold;">

&#25928;&#26524;&#65306;</span>&#25191;&#34892;<code>init()</code>
</blockquote>







<h4><a name="constructors">Constructors, copy and assignment &nbsp;&#26500;&#36896;&#65292;&#25335;&#36125;&#21644;&#36171;&#20540;</a></h4>







<code>flyweight();</code>

<blockquote>
  <b>Requires:</b> <code>key_type</code> is
  <a href="http://www.sgi.com/tech/stl/DefaultConstructible.html"><code>Default
Constructible</code></a>.<br>


  <span style="font-weight: bold;">

&#35201;&#27714;&#65306;</span><big><code>key_type</code></big>&#21487;&#20197;<a href="http://www.sgi.com/tech/stl/DefaultConstructible.html">&#40664;&#35748;&#26500;&#36896;</a>&#12290;<br>






  <b>Effects:</b> Constructs a <code>flyweight</code> object associated
with value <code>value_type(key_type())</code>.<br>


  <span style="font-weight: bold;">

&#25928;&#26524;&#65306;</span>&#21019;&#24314;&#19968;&#20010;<big><code>flyweight</code></big>&#23545;&#35937;&#20851;&#32852;&#21040;&#20540;<big><code>value_type(key_type())</code></big>
</blockquote>







<code>flyweight(const flyweight&amp; x);<br>






flyweight(flyweight&amp; x);</code>

<blockquote>
  <b>Effects:</b> Constructs a <code>flyweight</code> object with value
  <code>x.get()</code>.<br>


  <span style="font-weight: bold;">

&#25928;&#26524;&#65306;</span>&#21019;&#24314;&#19968;&#20010;&#25317;&#26377;&#20540;<big><code>x.get()</code></big>&#30340;<big><code>flyweight</code></big>&#23545;&#35937;&#12290;<br>






  <b>Exception safety:</b> <code>nothrow</code>.<br>


  <span style="font-weight: bold;">

&#24322;&#24120;&#23433;&#20840;&#24615;&#65306;</span>&#19981;&#25243;&#20986;&#12290;
</blockquote>







<a name="fwd_ctors">
<code>template&lt;typename T0&gt;<br>






explicit flyweight([const] T0&amp; t0);<br>






template&lt;typename T0,typename T1&gt;<br>






flyweight([const] T0&amp; t0,[const] T1&amp; t1);<br>






...<br>






template&lt;typename T0,...,typename Tn-1&gt;<br>






flyweight([const] T0&amp; t0,...,[const] Tn-1&amp; tn-1);</code></a>

<blockquote>
  <b>Effects:</b> Constructs a <code>flyweight</code> object with value
  <code>value_type(key_type(t0,...,ti))</code>, up to an implementation defined number
of arguments.<br>


  <span style="font-weight: bold;">&#25928;&#26524;&#65306;</span>&#26500;&#36896;&#19968;&#20010;&#25317;&#26377;<big><code>value_type(key_type(t0,...,ti))</code><code></code></big>&#20540;&#30340;<big><code></code><code>flyweight</code></big>&#23545;&#35937;&#65292;&#26368;&#22810;&#21040;&#23454;&#29616;&#23450;&#20041;&#30340;&#21442;&#25968;&#20010;&#25968;<br>






  <b>Note:</b> In this implementation, the maximum number of arguments
can be globally <a href="#limit_num_ctor_args">configured</a> by the user.<br>


  <span style="font-weight: bold;">&#27880;&#24847;&#65306;</span>&#22312;&#36825;&#20010;&#23454;&#29616;&#37324;&#65292;&#29992;&#25143;&#21487;&#20197;&#20840;&#23616;<a href="#limit_num_ctor_args">&#37197;&#32622;</a>&#26368;&#22823;&#30340;&#21442;&#25968;&#20010;&#25968;
</blockquote>







<code>flyweight&amp; operator=(const flyweight&amp; x);</code>

<blockquote>
  <b>Effects:</b> Associates the <code>flyweight</code> object with the same value
as <code>x</code>.<br>


  <span style="font-weight: bold;">

&#25928;&#26524;&#65306;</span>&#35753;<big><code>flyweight</code></big>&#23545;&#35937;&#25317;&#26377;&#21644;<big>x</big>&#30456;&#21516;&#30340;&#20540;&#12290;<br>






  <b>Returns:</b> <code>*this</code>.<br>


  <span style="font-weight: bold;">

&#36820;&#22238;&#65306;</span><code>*this</code>.<br>






  <b>Exception safety:</b> <code>nothrow</code>.<br>


  <span style="font-weight: bold;">

&#24322;&#24120;&#23433;&#20840;&#24615;&#65306;</span>&#19981;&#25243;&#20986;&#12290;
</blockquote>







<code>flyweight&amp; operator=(const value_type&amp; x);</code>

<blockquote>
  <b>Requires:</b> If <code>flyweight</code> is key-value,
  <code>value_type</code> is
  <a href="http://www.sgi.com/tech/stl/Assignable.html"><code>Assignable</code></a>
and the
  <a href="key_value.html#key_extractor"><code>Key Extractor</code></a>
  <code>KeyFromValue</code> must have been supplied as part of the
  <code>key_value&lt;&gt;</code> construct.<br>


  <span style="font-weight: bold;">

&#35201;&#27714;&#65306;</span>&#22914;&#26524;<big><code>flyweight</code></big>&#26159;&#38190;-&#20540;<code><big>flyweight</big></code>&#65292;<code>value_type</code>&#26159;<a href="http://www.sgi.com/tech/stl/Assignable.html">&#21487;&#36171;&#20540;&#30340;</a>&#24182;&#19988;<a href="key_value.html#key_extractor">&#38190;&#25552;&#21462;&#22120;</a><big><code>KeyFromValue</code></big>&#24517;&#39035;&#20316;&#20026;<big><code>key_value&lt;&gt;</code></big>&#26500;&#36896;&#30340;&#19968;&#37096;&#20998;&#25552;&#20379;<br>






  <b>Effects:</b> Associates the <code>flyweight</code> object with a
copy of <code>x</code> or with a <code>value_type</code> constructed
from a key equivalent to that associated to <code>x</code>. For non-key-value
flyweights, <code>x</code> is its own key; for key-value flyweights,
the key is extracted through use of an object of type <code>KeyFromValue</code>.<br>


  <span style="font-weight: bold;">

&#25928;&#26524;&#65306;</span>&#20851;&#32852;<big><code>flyweight</code></big>&#23545;&#35937;&#21040;<big>x</big>&#30340;&#25335;&#36125;&#25110;&#32773;&#21040;&#30001;<big>x</big>&#30340;&#38190;&#26500;&#36896;&#20986;&#26469;&#30340;<big><code>value_type</code></big>&#12290;&#23545;&#38750;&#38190;-&#20540;flyweights&#65292;x&#26159;&#23427;&#30340;&#38190;&#65307;&#23545;&#38190;-&#20540;flyweights&#65292;&#38190;&#26159;&#20174;<big><code>KeyFromValue</code></big>&#31867;&#22411;&#30340;&#23545;&#35937;&#37324;&#25552;&#21462;&#20986;&#26469;&#30340;<br>






  <b>Returns:</b> <code>*this</code>.<br>


  <span style="font-weight: bold;">

&#36820;&#22238;&#65306;</span><code>*this</code>.<br>






</blockquote>







<h4><a name="convertibility">Convertibility to the underlying types &nbsp;&#36716;&#25442;&#21040;&#24213;&#23618;&#31867;&#22411;</a></h4>







<code>const key_type&amp; get_key()const;</code>

<blockquote>
  <b>Return:</b> A copy of the key used to construct the
  <code>value_type</code> associated to the <code>flyweight</code>
object.<br>


  <span style="font-weight: bold;">&#36820;&#22238;&#65306;</span>&#29992;&#20110;&#26500;&#36896;<big><code>flyweight</code></big>&#23545;&#35937;&#25152;&#20851;&#32852;&#21040;&#30340;<big><code>value_type</code></big>&#30340;&#38190;&#30340;&#25335;&#36125;<br>






  <b>Exception safety:</b> If <code>flyweight</code> is not key-value or
if <code>KeyFromValue</code> was not provided, <code>nothrow</code>.<br>


  <span style="font-weight: bold;">

&#24322;&#24120;&#23433;&#20840;&#24615;&#65306;</span>&#22914;&#26524;<big><code>flyweight</code></big>&#19981;&#26159;&#38190;-&#20540;<big><code>flyweight</code></big>&#25110;&#32773;&#27809;&#26377;&#25552;&#20379;<big><code>KeyFromValue</code></big>&#65292;&#19981;&#25243;&#20986;
</blockquote>







<code>const value_type&amp; get()const;<br>






	operator const value_type&amp;()const;</code>

<blockquote>
  <b>Return:</b> The value associated to the <code>flyweight</code>
object.<br>


  <span style="font-weight: bold;">

&#36820;&#22238;&#65306;</span><big><code>flyweight</code></big>&#23545;&#35937;&#20851;&#32852;&#21040;&#30340;&#20540;&#12290;<br>






  <b>Exception safety:</b> <code>nothrow</code>.<br>


  <span style="font-weight: bold;">

&#24322;&#24120;&#23433;&#20840;&#24615;&#65306;</span>&#19981;&#25243;&#20986;&#12290;
</blockquote>







<h4><a name="modifiers">Modifiers &nbsp;&#20462;&#25913;&#22120;</a></h4>







<code>void swap(flyweight&amp; x);</code>

<blockquote>
  <b>Effects:</b> Swaps the associations to <code>value_type</code>s each
flyweight object has. No swapping of <code>key_type</code> or
  <code>value_type</code> objects is done.<br>




  <span style="font-weight: bold;">&#25928;&#26524;&#65306;</span>&#20132;&#25442;flyweight&#23545;&#35937;&#23545;<big><code>value_type</code>s</big>&#30340;&#20851;&#32852;<code></code>&#12290;&#24182;&#27809;&#26377;&#20132;&#25442;<big><code>key_type</code></big>&#25110;&#32773;<big><code>value_type</code></big><br>






  <b>Exception safety:</b> <code>nothrow</code>.<br>


  <span style="font-weight: bold;">

&#24322;&#24120;&#23433;&#20840;&#24615;&#65306;</span>&#19981;&#25243;&#20986;
</blockquote>







<h4><a name="comparison">Comparison operators &nbsp;&#27604;&#36739;&#25805;&#20316;&#31526;</a></h4>







<code>template&lt;<br>






&nbsp;&nbsp;typename T1,typename Arg11,...,typename Arg15,<br>






&nbsp;&nbsp;typename T2,typename Arg21,...,typename Arg25<br>






&gt;<br>






bool operator ==(<br>






&nbsp;&nbsp;const flyweight&lt;T1,Arg11,...,Arg15&gt;&amp; x,<br>






&nbsp;&nbsp;const flyweight&lt;T2,Arg21,...,Arg25&gt;&amp; y);</code>

<blockquote>
  <b>Returns:</b> If <code>x</code> and <code>y</code> are of the same type, returns
  <code>true</code> if and only if they are associated to the same value; if
  <code>x</code> and <code>y</code> have different types, returns
  <code>x.get()==y.get()</code>.<br>




&#36820;&#22238;&#65306;&#22914;&#26524;<big>x</big>&#21644;<big>y</big>&#30340;&#31867;&#22411;&#30456;&#21516;&#65292;&#22914;&#26524;&#24182;&#19988;&#21482;&#26377;&#22914;&#26524;&#23427;&#20204;&#20851;&#32852;&#21040;&#30456;&#21516;&#30340;&#20540;&#26102;&#36820;&#22238;<big><code>true</code></big>&#65307;&#22914;&#26524;<big>x</big>&#21644;<big>y</big>&#31867;&#22411;&#19981;&#21516;&#65292;&#36820;&#22238;<big><code>x.get()==y.get()</code></big>&#12290;<br>






  <b>Exception safety:</b> If <code>x</code> and <code>y</code> are of the same type,
  <code>nothrow</code>.<br>




&#24322;&#24120;&#23433;&#20840;&#24615;&#65306;&#22914;&#26524;<big>x</big>&#21644;<big>y</big>&#31867;&#22411;&#30456;&#21516;&#65292;&#19981;&#25243;&#20986;&#12290;
</blockquote>







<code>template&lt;<br>






&nbsp;&nbsp;typename T1,typename Arg11,...,typename Arg15,<br>






&nbsp;&nbsp;typename T2<br>






&gt;<br>






bool operator ==(const flyweight&lt;T1,Arg11,...,Arg15&gt;&amp; x,const T2&amp; y);</code>

<blockquote>
  <b>Returns:</b> <code>x.get()==y</code>.<br>


  <span style="font-weight: bold;">&#36820;&#22238;&#65306;</span><code>x.get()==y</code>
</blockquote>







<code>template&lt;<br>






&nbsp;&nbsp;typename T1,<br>






&nbsp;&nbsp;typename T2,typename Arg21,...,typename Arg25<br>






&gt;<br>






bool operator ==(const T1&amp; x,const flyweight&lt;T2,Arg21,...,Arg25&gt;&amp; y);</code>

<blockquote>
  <b>Returns:</b> <code>x()==y.get()</code>.<br>


  <span style="font-weight: bold;">&#36820;&#22238;&#65306;</span><code>x()==y.get()</code>
</blockquote>







<code>template&lt;<br>






&nbsp;&nbsp;typename T1,typename Arg11,...,typename Arg15,<br>






&nbsp;&nbsp;typename T2,typename Arg21,...,typename Arg25<br>






&gt;<br>






bool operator &lt;(<br>






&nbsp;&nbsp;const flyweight&lt;T1,Arg11,...,Arg15&gt;&amp; x,<br>






&nbsp;&nbsp;const flyweight&lt;T2,Arg21,...,Arg25&gt;&amp; y);</code>

<blockquote>
  <b>Returns:</b> <code>x.get()&lt;y.get()</code>.<br>


  <span style="font-weight: bold;">&#36820;&#22238;&#65306;</span><code>x.get()&lt;y.get()</code>
</blockquote>







<code>template&lt;<br>






&nbsp;&nbsp;typename T1,typename Arg11,...,typename Arg15,<br>






&nbsp;&nbsp;typename T2<br>






&gt;<br>






bool operator &lt;(const flyweight&lt;T1,Arg11,...,Arg15&gt;&amp; x,const T2&amp; y);</code>

<blockquote>
  <b>Returns:</b> <code>x.get()&lt;y</code>.<br>


  <span style="font-weight: bold;">&#36820;&#22238;&#65306;</span><code>x.get()&lt;y</code>
</blockquote>







<code>template&lt;<br>






&nbsp;&nbsp;typename T1,<br>






&nbsp;&nbsp;typename T2,typename Arg21,...,typename Arg25<br>






&gt;<br>






bool operator &lt;(const T1&amp; x,const flyweight&lt;T2,Arg21,...,Arg25&gt;&amp; y);</code>

<blockquote>
  <b>Returns:</b> <code>x()&lt;y.get()</code>.<br>


  <span style="font-weight: bold;">&#36820;&#22238;&#65306;</span><code>x()&lt;y.get()</code>
</blockquote>








<code>template&lt;<br>






&nbsp;&nbsp;typename T1,typename Arg11,...,typename Arg15,<br>






&nbsp;&nbsp;typename T2,typename Arg21,...,typename Arg25<br>






&gt;<br>






bool operator <b><i>OP</i></b>(<br>






&nbsp;&nbsp;const flyweight&lt;T1,Arg11,...,Arg15&gt;&amp; x,<br>






&nbsp;&nbsp;const flyweight&lt;T2,Arg21,...,Arg25&gt;&amp; y);<br>






template&lt;<br>






&nbsp;&nbsp;typename T1,typename Arg11,...,typename Arg15,<br>






&nbsp;&nbsp;typename T2<br>






&gt;<br>






bool operator <b><i>OP</i></b>(const flyweight&lt;T1,Arg11,...,Arg15&gt;&amp; x,const T2&amp; y);
template&lt;<br>






&nbsp;&nbsp;typename T1,<br>






&nbsp;&nbsp;typename T2,typename Arg21,...,typename Arg25<br>






&gt;<br>






bool operator <b><i>OP</i></b>(const T1&amp; x,const flyweight&lt;T2,Arg21,...,Arg25&gt;&amp; y);</code>

<p>
(<code><b><i>OP</i></b></code> is any of <code>!=</code>, <code>&gt;</code>,
<code>&gt;=</code>, <code>&lt;=</code>.)
</p>







<blockquote>
  <b>Returns:</b> <code>true</code> if and only if
  
  
  
  
  
  <blockquote>
    <code>!(x==y)</code> (<code><b><i>OP</i></b></code> is <code>!=</code>),<br>






    <code>&nbsp;&nbsp;y&lt;&nbsp;x&nbsp;</code> (<code><b><i>OP</i></b></code> is <code>&gt;&nbsp;</code>),<br>






    <code>!(x&lt;&nbsp;y)</code> (<code><b><i>OP</i></b></code> is <code>&gt;=</code>),<br>






    <code>!(y&lt;&nbsp;x)</code> (<code><b><i>OP</i></b></code> is <code>&lt;=</code>).<br>


  </blockquote>


  <span style="font-weight: bold;">&#36820;&#22238;&#65306;</span>&#30495;&#65292;&#22914;&#26524;&#24182;&#19988;&#21482;&#26377;&#22914;&#26524;
  
  
  <blockquote>
  <code>!(x==y)</code> (<code><b><i>OP</i></b></code> is <code>!=</code>),<br>






    <code>&nbsp;&nbsp;y&lt;&nbsp;x&nbsp;</code> (<code><b><i>OP</i></b></code> is <code>&gt;&nbsp;</code>),<br>






    <code>!(x&lt;&nbsp;y)</code> (<code><b><i>OP</i></b></code> is <code>&gt;=</code>),<br>






    <code>!(y&lt;&nbsp;x)</code> (<code><b><i>OP</i></b></code> is <code>&lt;=</code>).</blockquote>






</blockquote>







<h4><a name="specialized">Specialized algorithms &nbsp;&#19987;&#38376;&#21270;&#30340;&#31639;&#27861;</a></h4>







<code>template&lt;typename T,typename Arg1,...,typename Arg5&gt;<br>






inline void swap(<br>






&nbsp;&nbsp;flyweight&lt;T,Arg1,...,Arg5&gt;&amp; x,flyweight&lt;T,Arg1,...,Arg5&gt;&amp; y);</code>

<blockquote>
  <b>Effects:</b> <code>x.swap(y)</code>.<br>


  <span style="font-weight: bold;">&#25928;&#26524;&#65306;</span><code>x.swap(y)</code>
</blockquote>







<code>template&lt;<br>






&nbsp;&nbsp;typename ElemType,typename Traits, <br>






&nbsp;&nbsp;typename T,typename Arg1,...,typename Arg5<br>






&gt;<br>






inline std::basic_ostream&lt;ElemType,Traits&gt;&amp; operator&lt;&lt;(<br>






&nbsp;&nbsp;std::basic_ostream&lt;ElemType,Traits&gt;&amp; out,<br>






&nbsp;&nbsp;const flyweight&lt;T,Arg1,...,Arg5&gt;&amp; x);</code>

<blockquote>
  <b>Effects:</b> <code>out&lt;&lt;x.get()</code>.<br>


  <span style="font-weight: bold;">&#25928;&#26524;&#65306;</span><code>out&lt;&lt;x.get()</code><br>






  <b>Returns:</b> <code>out</code>.<br>


  <span style="font-weight: bold;">&#36820;&#22238;&#65306;</span><code>out</code>
</blockquote>







<code>template&lt;<br>






&nbsp;&nbsp;typename ElemType,typename Traits, <br>






&nbsp;&nbsp;typename T,typename Arg1,...,typename Arg5<br>






&gt;<br>






inline std::basic_ostream&lt;ElemType,Traits&gt;&amp; operator&gt;&gt;(<br>






&nbsp;&nbsp;std::basic_istream&lt;ElemType,Traits&gt;&amp; in,<br>






&nbsp;&nbsp;flyweight&lt;T,Arg1,...,Arg5&gt;&amp; x);</code>

<blockquote>
  <b>Requires:</b> If <code>flyweight</code> is key-value,
  <code>value_type</code> is
  <a href="http://www.sgi.com/tech/stl/Assignable.html"><code>Assignable</code></a>
and the
  <a href="key_value.html#key_extractor"><code>Key Extractor</code></a>
  <code>KeyFromValue</code> must have been supplied as part of the
  <code>key_value&lt;&gt;</code> construct.<br>


  <span style="font-weight: bold;">&#35201;&#27714;&#65306;</span>&#22914;&#26524;<big><code>flyweight</code></big>&#26159;&#38190;-&#20540;<big><code>flyweight</code></big>&#65292;<big><code>value_type</code></big>&#26159;<a href="http://www.sgi.com/tech/stl/Assignable.html">&#21487;&#36171;&#20540;</a>&#30340;&#24182;&#19988;<a href="key_value.html#key_extractor">&#38190;&#25552;&#21462;&#22120;</a><big><code>KeyFromValue</code></big><big><code></code></big>&#24517;&#39035;&#20316;&#20026;<big><code>key_value&lt;&gt;</code></big>&#26500;&#36896;&#30340;&#19968;&#37096;&#20998;&#25552;&#20379;<br>






  <b>Effects:</b> Reads an object of type <code>value_type</code> from <code>in</code>
and assigns it to <code>x</code>.<br>


  <span style="font-weight: bold;">&#25928;&#26524;&#65306;</span>&#20174;<big><code>in</code></big>&#35835;&#20837;&#19968;&#20010;<big><code>value_type</code></big>&#31867;&#22411;&#30340;&#23545;&#35937;&#28982;&#21518;&#36171;&#20540;&#32473;<big><code>x</code></big><br>






  <b>Returns:</b> <code>in</code>.<br>


  <span style="font-weight: bold;">&#36820;&#22238;&#20540;&#65306;</span><code>in</code>
</blockquote>







<h4><a name="config_macros">Configuration macros &nbsp;&#37197;&#32622;&#23439;</a></h4>







<a name="limit_num_ctor_args">
<code>BOOST_FLYWEIGHT_LIMIT_PERFECT_FWD_ARGS</code></a>

<blockquote>
  <b>Effects:</b> Globally define this macro to set the maximum number of
arguments accepted by <code>flyweight</code>
  <a href="#fwd_ctors">forwarding constructors</a>, which by default
is 5.<br>


&#25928;&#26524;&#65306;&#20840;&#23616;&#23450;&#20041;&#36825;&#20010;&#23439;&#26469;&#35774;&#32622;<big><code>flyweight</code></big><a href="#fwd_ctors">&#26500;&#36896;&#20989;&#25968;</a>&#30340;&#26368;&#22823;&#21442;&#25968;&#20010;&#25968;&#65292;&#40664;&#35748;&#26159;5
</blockquote>







<hr>

<div class="prev_link"><a href="index.html"><img src="../prev.gif" alt="Boost.Flyweight reference" border="0"><br>






Boost.Flyweight reference
</a></div>






<div class="up_link"><a href="index.html"><img src="../up.gif" alt="Boost.Flyweight reference" border="0"><br>






Boost.Flyweight reference
</a></div>






<div class="next_link"><a href="key_value.html"><img src="../next.gif" alt="key-value flyweights" border="0"><br>






Key-value flyweights
</a></div>





<br style="" clear="all">







<br>







<p>Revised December 2nd 2008</p>







<p>&copy; Copyright 2006-2008 Joaqu&iacute;n M L&oacute;pez Mu&ntilde;oz.
Distributed under the Boost Software 
License, Version 1.0. (See accompanying file <a href="../../../../LICENSE_1_0.txt">
LICENSE_1_0.txt</a> or copy at <a href="http://www.boost.org/LICENSE_1_0.txt">
http://www.boost.org/LICENSE_1_0.txt</a>)
</p>







</body>
</html>
